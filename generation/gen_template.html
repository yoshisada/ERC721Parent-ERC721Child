<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Blob Generator</title>
  
  <script src="./scripts/seedrandom.min.js"></script>

  <script type=module>

/*!
* CreateJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
* Maintained by ZIM - 2022 - https://zimjs.com
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/

let W = window || {};
let createjs = W.createjs = {};

createjs.stageTransformable=!0,createjs.willReadFrequently=!0,createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},createjs.promote=function(t,e){"use strict";var i=t.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s)for(var r in i[(e+="_")+"constructor"]=s.constructor,s)i.hasOwnProperty(r)&&"function"==typeof s[r]&&(i[e+r]=s[r]);return t},createjs.indexOf=function(t,e){"use strict";for(var i=0,s=t.length;i<s;i++)if(e===t[i])return i;return-1},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),createjs.deprecate=function(e,i){"use strict";return function(){var t="Deprecated property or method '"+i+"'. See docs for info.";return console&&(console.warn?console.warn(t):console.log(t)),e&&e.apply(this,arguments)}},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},r=s[t];return r&&this.removeEventListener(t,e,i),(r=s[t])?r.push(e):s[t]=[e],e},e.on=function(t,e,i,s,r,n){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),s&&t.remove()},n)},e.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var r=s[t];if(r)for(var n=0,a=r.length;n<a;n++)if(r[n]==e){1==a?delete s[t]:r.splice(n,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var s=this._listeners;if(!(e||s&&s[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,n=[r];r.parent;)n.push(r=r.parent);for(var a=n.length,o=a-1;0<=o&&!t.propagationStopped;o--)n[o]._dispatchEvent(t,1+(0==o));for(o=1;o<a&&!t.propagationStopped;o++)n[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,s,r=e<=2?this._captureListeners:this._listeners;if(t&&r&&(s=r[t.type])&&(i=s.length)){try{t.currentTarget=this}catch(t){}try{t.eventPhase=0|e}catch(t){}t.removed=!1,s=s.slice();for(var n=0;n<i&&!t.immediatePropagationStopped;n++){var a=s[n];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}2===e&&this._dispatchEvent(t,2.1)},createjs.EventDispatcher=t}(),function(){"use strict";function n(){throw"Ticker cannot be instantiated."}n.RAF_SYNCHED="synched",n.RAF="raf",n.TIMEOUT="timeout",n.timingMode=null,n.maxDelta=0,n.paused=!1,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,createjs.EventDispatcher.initialize(n),n._addEventListener=n.addEventListener,n.addEventListener=function(){return n._inited||n.init(),n._addEventListener.apply(n,arguments)},n._inited=!1,n._startTime=0,n._pausedTime=0,n._ticks=0,n._pausedTicks=0,n._interval=50,n._lastTime=0,n._times=null,n._tickTimes=null,n._timerId=null,n._raf=!0,n._setInterval=function(t){n._interval=t,n._inited&&n._setupTick()},n.setInterval=createjs.deprecate(n._setInterval,"Ticker.setInterval"),n._getInterval=function(){return n._interval},n.getInterval=createjs.deprecate(n._getInterval,"Ticker.getInterval"),n._setFPS=function(t){n._setInterval(1e3/t)},n.setFPS=createjs.deprecate(n._setFPS,"Ticker.setFPS"),n._getFPS=function(){return 1e3/n._interval},n.getFPS=createjs.deprecate(n._getFPS,"Ticker.getFPS");try{Object.defineProperties(n,{interval:{get:n._getInterval,set:n._setInterval},framerate:{get:n._getFPS,set:n._setFPS}})}catch(t){console.log(t)}n.init=function(){n._inited||(n._inited=!0,n._times=[],n._tickTimes=[],n._startTime=n._getTime(),n._times.push(n._lastTime=0),n.interval=n._interval)},n.reset=function(){var t;n._raf?(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&t(n._timerId):clearTimeout(n._timerId),n.removeAllEventListeners("tick"),n._timerId=n._times=n._tickTimes=null,n._startTime=n._lastTime=n._ticks=n._pausedTime=0,n._inited=!1},n.getMeasuredTickTime=function(t){var e=0,i=n._tickTimes;if(!i||i.length<1)return-1;t=Math.min(i.length,t||0|n._getFPS());for(var s=0;s<t;s++)e+=i[s];return e/t},n.getMeasuredFPS=function(t){var e=n._times;return!e||e.length<2?-1:(t=Math.min(e.length-1,t||0|n._getFPS()),1e3/((e[0]-e[t])/t))},n.getTime=function(t){return n._startTime?n._getTime()-(t?n._pausedTime:0):-1},n.getEventTime=function(t){return n._startTime?(n._lastTime||n._startTime)-(t?n._pausedTime:0):-1},n.getTicks=function(t){return n._ticks-(t?n._pausedTicks:0)},n._handleSynch=function(){n._timerId=null,n._setupTick(),n._getTime()-n._lastTime>=.97*(n._interval-1)&&n._tick()},n._handleRAF=function(){n._timerId=null,n._setupTick(),n._tick()},n._handleTimeout=function(){n._timerId=null,n._setupTick(),n._tick()},n._setupTick=function(){if(null==n._timerId){var t=n.timingMode;if(t==n.RAF_SYNCHED||t==n.RAF){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return n._timerId=e(t==n.RAF?n._handleRAF:n._handleSynch),void(n._raf=!0)}n._raf=!1,n._timerId=setTimeout(n._handleTimeout,n._interval)}},n._tick=function(){var t,e,i=n.paused,s=n._getTime(),r=s-n._lastTime;for(n._lastTime=s,n._ticks++,i&&(n._pausedTicks++,n._pausedTime+=r),n.hasEventListener("tick")&&(t=new createjs.Event("tick"),e=n.maxDelta,t.delta=e&&e<r?e:r,t.paused=i,t.time=s,t.runTime=s-n._pausedTime,n.dispatchEvent(t)),n._tickTimes.unshift(n._getTime()-s);100<n._tickTimes.length;)n._tickTimes.pop();for(n._times.unshift(s);100<n._times.length;)n._times.pop()};var t=window,e=t.performance.now||t.performance.mozNow||t.performance.msNow||t.performance.oNow||t.performance.webkitNow;n._getTime=function(){return(e&&e.call(t.performance)||(new Date).getTime())-n._startTime},createjs.Ticker=n}(),function(){"use strict";function t(t){this.readyState=t.readyState,this._video=t,this._canvas=null,this._lastTime=-1,this.readyState<2&&t.addEventListener("canplaythrough",this._videoReady.bind(this))}var e=t.prototype;e.getImage=function(){if(!(this.readyState<2)){var t,e=this._canvas,i=this._video;return e||((e=this._canvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).width=i.videoWidth,e.height=i.videoHeight),2<=i.readyState&&i.currentTime!==this._lastTime&&((t=e.getContext("2d")).clearRect(0,0,e.width,e.height),t.drawImage(i,0,0,e.width,e.height),this._lastTime=i.currentTime),e}},e._videoReady=function(){this.readyState=2},createjs.VideoBuffer=t}(),function(){"use strict";function t(t,e,i,s,r,n,a,o,h,c,u){this.Event_constructor(t,e,i),this.stageX=s,this.stageY=r,this.rawX=null==h?s:h,this.rawY=null==c?r:c,this.nativeEvent=n,this.pointerID=a,this.primary=!!o,this.relatedTarget=u}var e=createjs.extend(t,createjs.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(t){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(t,"Event")}(),function(){"use strict";function l(t,e,i,s,r,n){this.setValues(t,e,i,s,r,n)}var t=l.prototype;l.DEG_TO_RAD=Math.PI/180,l.identity=null,t.setValues=function(t,e,i,s,r,n){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==s?1:s,this.tx=r||0,this.ty=n||0,this},t.append=function(t,e,i,s,r,n){var a=this.a,o=this.b,h=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==s||(this.a=a*t+h*e,this.b=o*t+c*e,this.c=a*i+h*s,this.d=o*i+c*s),this.tx=a*r+h*n+this.tx,this.ty=o*r+c*n+this.ty,this},t.prepend=function(t,e,i,s,r,n){var a=this.a,o=this.c,h=this.tx;return this.a=t*a+i*this.b,this.b=e*a+s*this.b,this.c=t*o+i*this.d,this.d=e*o+s*this.d,this.tx=t*h+i*this.ty+r,this.ty=e*h+s*this.ty+n,this},t.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.appendTransform=function(t,e,i,s,r,n,a,o,h){var c,u=r%360?(u=r*l.DEG_TO_RAD,c=Math.cos(u),Math.sin(u)):(c=1,0);return n||a?(n*=l.DEG_TO_RAD,a*=l.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(n),Math.cos(n),t,e),this.append(c*i,u*i,-u*s,c*s,0,0)):this.append(c*i,u*i,-u*s,c*s,t,e),(o||h)&&(this.tx-=o*this.a+h*this.c,this.ty-=o*this.b+h*this.d),this},t.prependTransform=function(t,e,i,s,r,n,a,o,h){var c,u=r%360?(u=r*l.DEG_TO_RAD,c=Math.cos(u),Math.sin(u)):(c=1,0);return(o||h)&&(this.tx-=o,this.ty-=h),n||a?(n*=l.DEG_TO_RAD,a*=l.DEG_TO_RAD,this.prepend(c*i,u*i,-u*s,c*s,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(n),Math.cos(n),t,e)):this.prepend(c*i,u*i,-u*s,c*s,t,e),this},t.rotate=function(t){t*=l.DEG_TO_RAD;var e=Math.cos(t),i=Math.sin(t),s=this.a,t=this.b;return this.a=s*e+this.c*i,this.b=t*e+this.d*i,this.c=-s*i+this.c*e,this.d=-t*i+this.d*e,this},t.skew=function(t,e){return t*=l.DEG_TO_RAD,e*=l.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},t.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},t.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,r=this.tx,n=t*s-e*i;return this.a=s/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-s*r)/n,this.ty=-(t*this.ty-e*r)/n,this},t.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},t.transformPoint=function(t,e,i){return(i=i||{}).x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var e=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return Math.abs(1-e/i)<1e-5?(t.rotation=i/l.DEG_TO_RAD,this.a<0&&0<=this.d&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/l.DEG_TO_RAD,t.skewY=i/l.DEG_TO_RAD),t},t.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.clone=function(){return new l(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},l.identity=new l,createjs.Matrix2D=l}(),function(){"use strict";function t(t,e,i,s,r){this.setValues(t,e,i,s,r)}var e=t.prototype;e.setValues=function(t,e,i,s,r){return this.visible=null==t||!!t,this.alpha=null==e?1:e,this.shadow=i,this.compositeOperation=s,this.matrix=r||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},e.append=function(t,e,i,s,r){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=s||this.compositeOperation,this.visible=this.visible&&t,r&&this.matrix.appendMatrix(r),this},e.prepend=function(t,e,i,s,r){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||s,this.visible=this.visible&&t,r&&this.matrix.prependMatrix(r),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=t}(),function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.subtract=function(t){return new createjs.Point(this.x-t.x,this.y-t.y)},e.add=function(t){return new createjs.Point(this.x+t.x,this.y+t.y)},e.angle=function(t){return null==t?Math.atan2(this.y,this.x):t.subtract(this).angle()},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.distance=function(t){return t.subtract(this).length()},e.project=function(t,e){return new createjs.Point(this.x+Math.cos(t)*e,this.y+Math.sin(t)*e)},e.interpolate=function(t,e){return new createjs.Point(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},e.average=function(t){return this.interpolate(t,.5)},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),function(){"use strict";function r(t,e,i,s){this.setValues(t,e,i,s)}var t=r.prototype;t.setValues=function(t,e,i,s){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this},t.extend=function(t,e,i,s){return s=s||0,t+(i=i||0)>this.x+this.width&&(this.width=t+i-this.x),e+s>this.y+this.height&&(this.height=e+s-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},t.pad=function(t,e,i,s){return this.x-=e,this.y-=t,this.width+=e+s,this.height+=t+i,this},t.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},t.contains=function(t,e,i,s){return i=i||0,s=s||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+s<=this.y+this.height},t.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},t.intersection=function(t){var e=t.x,i=t.y,s=e+t.width,t=i+t.height;return this.x>e&&(e=this.x),this.y>i&&(i=this.y),this.x+this.width<s&&(s=this.x+this.width),this.y+this.height<t&&(t=this.y+this.height),s<=e||t<=i?null:new r(e,i,s-e,t-i)},t.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},t.isEmpty=function(){return this.width<=0||this.height<=0},t.clone=function(){return new r(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=r}(),function(){"use strict";function t(t,e,i,s,r,n,a){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==s?"down":s,this.play=r,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),n&&(a&&(n.actionsEnabled=!1,n.gotoAndStop&&n.gotoAndStop(a)),t.hitArea=n))}var e=t.prototype;e._setEnabled=function(t){var e;t!=this._enabled&&(e=this.target,(this._enabled=t)?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset)))},e.setEnabled=createjs.deprecate(e._setEnabled,"ButtonHelper.setEnabled"),e._getEnabled=function(){return this._enabled},e.getEnabled=createjs.deprecate(e._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(e,{enabled:{get:e._getEnabled,set:e._setEnabled}})}catch(t){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e=this.target,t=t.type,t="mousedown"==t?(this._isPressed=!0,this.downLabel):"pressup"==t?(this._isPressed=!1,this._isOver?this.overLabel:this.outLabel):"rollover"==t?(this._isOver=!0,this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,this._isPressed?this.overLabel:this.outLabel);this.play?e.gotoAndPlay&&e.gotoAndPlay(t):e.gotoAndStop&&e.gotoAndStop(t)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},createjs.ButtonHelper=t}(),function(){"use strict";function t(t,e,i,s){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=s||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=t}(),function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=createjs.extend(t,createjs.EventDispatcher);e._getAnimations=function(){return this._animations.slice()},e.getAnimations=createjs.deprecate(e._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(e,{animations:{get:e._getAnimations}})}catch(t){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;t=this._data[t];return null==t?0:t.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){t=this.getFrame(t);return t?(e||new createjs.Rectangle).setValues(-t.regX,-t.regY,t.rect.width,t.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,i,s,r;if(null!=t){if(this.framerate=t.framerate||0,t.images&&0<(i=t.images.length))for(l=this._images=[],e=0;e<i;e++){var n,a=t.images[e];"string"==typeof a&&(n=a,(a=document.createElement("img")).src=n),l.push(a),a.getContext||a.naturalWidth||(this._loadCount++,this.complete=!1,function(t,e){a.onload=function(){t._handleImageLoad(e)}}(this,n),function(t,e){a.onerror=function(){t._handleImageError(e)}}(this,n))}if(null!=t.frames)if(Array.isArray(t.frames))for(this._frames=[],e=0,i=(l=t.frames).length;e<i;e++){var o=l[e];this._frames.push({image:this._images[o[4]||0],rect:new createjs.Rectangle(o[0],o[1],o[2],o[3]),regX:o[5]||0,regY:o[6]||0})}else s=t.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._spacing=s.spacing||0,this._margin=s.margin||0,this._numFrames=s.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(s=t.animations))for(r in this._data={},s){var h={name:r},c=s[r];if("number"==typeof c)l=h.frames=[c];else if(Array.isArray(c))if(1==c.length)h.frames=[c[0]];else for(h.speed=c[3],h.next=c[2],l=h.frames=[],e=c[0];e<=c[1];e++)l.push(e);else{h.speed=c.speed,h.next=c.next;var u=c.frames,l=h.frames="number"==typeof u?[u]:u.slice(0)}!0!==h.next&&void 0!==h.next||(h.next=r),(!1===h.next||l.length<2&&h.next==r)&&(h.next=null),h.speed||(h.speed=1),this._animations.push(r),this._data[r]=h}}},e._handleImageLoad=function(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._handleImageError=function(t){var e=new createjs.Event("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,s=this._frameHeight,r=this._spacing,n=this._margin;t:for(var a=0,o=this._images;a<o.length;a++)for(var h=o[a],c=h.width||h.naturalWidth,u=h.height||h.naturalHeight,l=n;l<=u-n-s;){for(var d=n;d<=c-n-i;){if(t<=e)break t;e++,this._frames.push({image:h,rect:new createjs.Rectangle(d,l,i,s),regX:this._regX,regY:this._regY}),d+=i+r}l+=s+r}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(t,"EventDispatcher")}(),function(){"use strict";function v(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var t=v.prototype,h=v;v.getRGB=function(t,e,i,s){return null!=t&&null==i&&(s=e,i=255&t,e=t>>8&255,t=t>>16&255),null==s?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+s+")"},v.getHSL=function(t,e,i,s){return null==s?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+s+")"},v.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},v.STROKE_CAPS_MAP=["butt","round","square"],v.STROKE_JOINTS_MAP=["miter","round","bevel"];var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(v._ctx=e.getContext("2d"),e.width=e.height=1),t._getInstructions=function(){return this._updateInstructions(),this._instructions},t.getInstructions=createjs.deprecate(t._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(t,{instructions:{get:t._getInstructions}})}catch(t){}t.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},t.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,s=this._storeIndex,r=i.length;s<r;s++)i[s].exec(t,e)},t.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,s=this._storeIndex,r=i.length;s<r;s++)!1!==(e=i[s]).path&&e.exec(t)},t.moveTo=function(t,e){return this.append(new h.MoveTo(t,e),!0)},t.lineTo=function(t,e){return this.append(new h.LineTo(t,e))},t.arcTo=function(t,e,i,s,r){return this.append(new h.ArcTo(t,e,i,s,r))},t.arc=function(t,e,i,s,r,n){return this.append(new h.Arc(t,e,i,s,r,n))},t.quadraticCurveTo=function(t,e,i,s){return this.append(new h.QuadraticCurveTo(t,e,i,s))},t.bezierCurveTo=function(t,e,i,s,r,n){return this.append(new h.BezierCurveTo(t,e,i,s,r,n))},t.rect=function(t,e,i,s){return this.append(new h.Rect(t,e,i,s))},t.closePath=function(){return this._activeInstructions.length?this.append(new h.ClosePath):this},t.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},t.beginFill=function(t){return this._setFill(t?new h.Fill(t):null)},t.beginLinearGradientFill=function(t,e,i,s,r,n){return this._setFill((new h.Fill).linearGradient(t,e,i,s,r,n))},t.beginRadialGradientFill=function(t,e,i,s,r,n,a,o){return this._setFill((new h.Fill).radialGradient(t,e,i,s,r,n,a,o))},t.beginBitmapFill=function(t,e,i){return this._setFill(new h.Fill(null,i).bitmap(t,e))},t.endFill=function(){return this.beginFill()},t.setStrokeStyle=function(t,e,i,s,r){return this._updateInstructions(!0),this._strokeStyle=this.command=new h.StrokeStyle(t,e,i,s,r),this._stroke&&(this._stroke.ignoreScale=r),this._strokeIgnoreScale=r,this},t.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new h.StrokeDash(t,e),this},t.beginStroke=function(t){return this._setStroke(t?new h.Stroke(t):null)},t.beginLinearGradientStroke=function(t,e,i,s,r,n){return this._setStroke((new h.Stroke).linearGradient(t,e,i,s,r,n))},t.beginRadialGradientStroke=function(t,e,i,s,r,n,a,o){return this._setStroke((new h.Stroke).radialGradient(t,e,i,s,r,n,a,o))},t.beginBitmapStroke=function(t,e){return this._setStroke((new h.Stroke).bitmap(t,e))},t.endStroke=function(){return this.beginStroke()},t.curveTo=t.quadraticCurveTo,t.drawRect=t.rect,t.drawRoundRect=function(t,e,i,s,r){return this.drawRoundRectComplex(t,e,i,s,r,r,r,r)},t.drawRoundRectComplex=function(t,e,i,s,r,n,a,o){return this.append(new h.RoundRect(t,e,i,s,r,n,a,o))},t.drawCircle=function(t,e,i){return this.append(new h.Circle(t,e,i))},t.drawEllipse=function(t,e,i,s){return this.append(new h.Ellipse(t,e,i,s))},t.drawPolyStar=function(t,e,i,s,r,n){return this.append(new h.PolyStar(t,e,i,s,r,n))},t.drawPolygon=function(t,e){return this.append(new h.Polygon(t,e))},t.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},t.decodePath=function(t){for(var e=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],i=[2,2,4,6,0],s=0,r=t.length,n=[],a=0,o=0,h=v.BASE_64;s<r;){var c=t.charAt(s),u=h[c],l=u>>3,d=e[l];if(!d||3&u)throw"bad path data (@"+s+"): "+c;var _=i[l];l||(a=o=0),s++;for(var p=2+(u>>2&1),f=n.length=0;f<_;f++){var g=(m=h[t.charAt(s)])>>5?-1:1,m=(31&m)<<6|h[t.charAt(s+1)];3==p&&(m=m<<6|h[t.charAt(s+2)]),m=g*m/10,f%2?a=m+=a:o=m+=o,n[f]=m,s+=p}d.apply(this,n)}return this},t.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},t.unstore=function(){return this._storeIndex=0,this},t.clone=function(){var t=new v;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeDash=this._strokeDash,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t},t.toString=function(){return"[Graphics]"},t.mt=t.moveTo,t.lt=t.lineTo,t.at=t.arcTo,t.bt=t.bezierCurveTo,t.qt=t.quadraticCurveTo,t.a=t.arc,t.r=t.rect,t.cp=t.closePath,t.c=t.clear,t.f=t.beginFill,t.lf=t.beginLinearGradientFill,t.rf=t.beginRadialGradientFill,t.bf=t.beginBitmapFill,t.ef=t.endFill,t.ss=t.setStrokeStyle,t.sd=t.setStrokeDash,t.s=t.beginStroke,t.ls=t.beginLinearGradientStroke,t.rs=t.beginRadialGradientStroke,t.bs=t.beginBitmapStroke,t.es=t.endStroke,t.dr=t.drawRect,t.rr=t.drawRoundRect,t.rc=t.drawRoundRectComplex,t.dc=t.drawCircle,t.de=t.drawEllipse,t.dp=t.drawPolyStar,t.pg=t.drawPolygon,t.p=t.decodePath,t._updateInstructions=function(t){var e=this._instructions,i=this._activeInstructions,s=this._commitIndex;if(this._dirty&&i.length){e.length=s,e.push(v.beginCmd);var r=i.length,n=e.length;e.length=n+r;for(var a=0;a<r;a++)e[a+n]=i[a];this._fill&&e.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&e.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&e.push(this._strokeStyle),t&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),e.push(this._stroke)),this._dirty=!1}t&&(i.length=0,this._commitIndex=e.length)},t._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},t._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(h.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(h.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(h.ArcTo=function(t,e,i,s,r){this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.radius=r}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(h.Arc=function(t,e,i,s,r,n){this.x=t,this.y=e,this.radius=i,this.startAngle=s,this.endAngle=r,this.anticlockwise=!!n}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(h.QuadraticCurveTo=function(t,e,i,s){this.cpx=t,this.cpy=e,this.x=i,this.y=s}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(h.BezierCurveTo=function(t,e,i,s,r,n){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=s,this.x=r,this.y=n}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(h.Rect=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(h.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(h.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},(t=(h.Fill=function(t,e){this.style=t,this.matrix=e}).prototype).exec=function(t){var e;this.style&&(t.fillStyle=this.style,(e=this.matrix)&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore())},t.linearGradient=function(t,e,i,s,r,n){for(var a=this.style=v._ctx.createLinearGradient(i,s,r,n),o=0,h=t.length;o<h;o++)a.addColorStop(e[o],t[o]);return a.props={colors:t,ratios:e,x0:i,y0:s,x1:r,y1:n,type:"linear"},this},t.radialGradient=function(t,e,i,s,r,n,a,o){for(var h=this.style=v._ctx.createRadialGradient(i,s,r,n,a,o),c=0,u=t.length;c<u;c++)h.addColorStop(e[c],t[c]);return h.props={colors:t,ratios:e,x0:i,y0:s,r0:r,x1:n,y1:a,r1:o,type:"radial"},this},t.bitmap=function(t,e,i){return i&&(this.matrix=i),(t.naturalWidth||t.getContext||2<=t.readyState)&&((this.style=v._ctx.createPattern(t,e||"")).props={image:t,repetition:e,type:"bitmap"}),this},t.path=!1,(t=(h.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype).exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},t.linearGradient=h.Fill.prototype.linearGradient,t.radialGradient=h.Fill.prototype.radialGradient,t.bitmap=h.Fill.prototype.bitmap,t.path=!1,(t=(h.StrokeStyle=function(t,e,i,s,r){this.width=t,this.caps=e,this.joints=i,this.miterLimit=s,this.ignoreScale=r}).prototype).exec=function(t){t.lineWidth=null==this.width?"1":this.width,t.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:v.STROKE_CAPS_MAP[this.caps],t.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:v.STROKE_JOINTS_MAP[this.joints],t.miterLimit=null==this.miterLimit?"10":this.miterLimit,t.ignoreScale=null!=this.ignoreScale&&this.ignoreScale},t.path=!1,(h.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||h.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},h.StrokeDash.EMPTY_SEGMENTS=[],(h.RoundRect=function(t,e,i,s,r,n,a,o){this.x=t,this.y=e,this.w=i,this.h=s,this.radiusTL=r,this.radiusTR=n,this.radiusBR=a,this.radiusBL=o}).prototype.exec=function(t){var e=(h<c?h:c)/2,i=0,s=0,r=0,n=0,a=this.x,o=this.y,h=this.w,c=this.h,u=this.radiusTL,l=this.radiusTR,d=this.radiusBR,_=this.radiusBL;u<0&&(u*=i=-1),e<u&&(u=e),l<0&&(l*=s=-1),e<l&&(l=e),d<0&&(d*=r=-1),e<d&&(d=e),_<0&&(_*=n=-1),e<_&&(_=e),t.moveTo(a+h-l,o),t.arcTo(a+h+l*s,o-l*s,a+h,o+l,l),t.lineTo(a+h,o+c-d),t.arcTo(a+h+d*r,o+c+d*r,a+h-d,o+c,d),t.lineTo(a+_,o+c),t.arcTo(a-_*n,o+c+_*n,a,o+c-_,_),t.lineTo(a,o+u),t.arcTo(a-u*i,o-u*i,a+u,o,u),t.closePath()},(h.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(h.Ellipse=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}).prototype.exec=function(t){var e=this.x,i=this.y,s=this.w,r=this.h,n=s/2*.5522848,a=r/2*.5522848,o=e+s,h=i+r,s=e+s/2,r=i+r/2;t.moveTo(e,r),t.bezierCurveTo(e,r-a,s-n,i,s,i),t.bezierCurveTo(s+n,i,o,r-a,o,r),t.bezierCurveTo(o,r+a,s+n,h,s,h),t.bezierCurveTo(s-n,h,e,r+a,e,r)},(h.PolyStar=function(t,e,i,s,r,n){this.x=t,this.y=e,this.radius=i,this.sides=s,this.pointSize=r,this.angle=n}).prototype.exec=function(t){var e=this.x,i=this.y,s=this.radius,r=(this.angle||0)/180*Math.PI,n=this.sides,a=1-(this.pointSize||0),o=Math.PI/n;t.moveTo(e+Math.cos(r)*s,i+Math.sin(r)*s);for(var h=0;h<n+1&&(r+=o,1==a||(t.lineTo(e+Math.cos(r)*s*a,i+Math.sin(r)*s*a),h!=n));h++)r+=o,t.lineTo(e+Math.cos(r)*s,i+Math.sin(r)*s);t.closePath()},(h.Polygon=function(t,e){this.points=t,null==e&&(e=!0),this.close=e}).prototype.exec=function(t){var e,i,s=this.points,r=this.close,n=s[0];t.moveTo(n[0],n[1]);for(var a=1;a<s.length;a++)e=s[a],1==a&&(i=[e[0],e[1]]),t.lineTo(e[0],e[1]);r&&(t.lineTo(n[0],n[1]),t.lineTo(i[0],i[1])),t.closePath()},v.beginCmd=new h.BeginPath,createjs.Graphics=v}(),function(){"use strict";function n(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null,this._webGLRenderStyle=n._StageGL_NONE}var t=createjs.extend(n,createjs.EventDispatcher);n._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],n.suppressCrossDomainErrors=!1,n._snapToPixelEnabled=!1,n._StageGL_NONE=0,n._StageGL_SPRITE=1,n._StageGL_BITMAP=2;var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(n._hitTestCanvas=e,n._hitTestContext=e.getContext("2d",createjs.willReadFrequently?{willReadFrequently:!0}:void 0),e.width=e.height=1),t._getStage=function(){for(var t=this,e=createjs.Stage;t.parent;)t=t.parent;return t instanceof e?t:null},t.getStage=createjs.deprecate(t._getStage,"DisplayObject.getStage");try{Object.defineProperties(t,{stage:{get:t._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(t){this.bitmapCache&&(this.bitmapCache.cacheID=t)}},scale:{get:function(){return this.scaleX},set:function(t){this.scaleX=this.scaleY=t}}})}catch(t){}t.isVisible=function(){return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(t,e){var i=this.bitmapCache;return!(!i||e)&&i.draw(t)},t.updateContext=function(t){var e=this,i=e.mask,s=e._props.matrix;i&&i.graphics&&!i.graphics.isEmpty()&&(i.getMatrix(s),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty),i.graphics.drawAsPath(t),t.clip(),s.invert(),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty)),this.getMatrix(s);var r=s.tx,i=s.ty;n._snapToPixelEnabled&&e.snapToPixel&&(r=r+(r<0?-.5:.5)|0,i=i+(i<0?-.5:.5)|0),t.transform(s.a,s.b,s.c,s.d,r,i),t.globalAlpha*=e.alpha,e.compositeOperation&&(t.globalCompositeOperation=e.compositeOperation),e.shadow&&this._applyShadow(t,e.shadow)},t.cache=function(t,e,i,s,r,n){this.bitmapCache||(this.bitmapCache=new createjs.BitmapCache),this.bitmapCache.define(this,t,e,i,s,r,n)},t.updateCache=function(t,e){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(t,e)},t.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},t.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getCacheDataURL():null},t.localToGlobal=function(t,e,i){i=this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i||new createjs.Point);return this.stage&&createjs.stageTransformable&&(i=this.stage.getConcatenatedMatrix(this._mtx).invert().transformPoint(i.x,i.y)),i},t.globalToLocal=function(t,e,i){var s;return this.stage&&createjs.stageTransformable&&(t=(s=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(t,e)).x,e=s.y),this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i||new createjs.Point)},t.localToLocal=function(t,e,i,s){return s=this.localToGlobal(t,e,s),i.globalToLocal(s.x,s.y,s)},t.setTransform=function(t,e,i,s,r,n,a,o,h){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==s?1:s,this.rotation=r||0,this.skewX=n||0,this.skewY=a||0,this.regX=o||0,this.regY=h||0,this},t.getMatrix=function(t){var e=this,t=t&&t.identity()||new createjs.Matrix2D;return e.transformMatrix?t.copy(e.transformMatrix):t.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},t.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},t.getConcatenatedDisplayProps=function(t){t=t?t.identity():new createjs.DisplayProps;for(var e=this,i=e.getMatrix(t.matrix);t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix)),e=e.parent;);return t},t.hitTest=function(t,e){var i=n._hitTestContext;i.setTransform(1,0,0,1,-t,-e),this.draw(i);e=this._testHit(i);return i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,2,2),e},t.set=function(t){for(var e in t)this[e]=t[e];return this},t.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},t.getTransformedBounds=function(){return this._getBounds()},t.setBounds=function(t,e,i,s){this._bounds=null!=t?(this._bounds||new createjs.Rectangle).setValues(t,e,i,s):t},t.clone=function(){return this._cloneProps(new n)},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t._updateState=null,t._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},t._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},t._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},t._testHit=function(t){try{var e=1<t.getImageData(0,0,1,1).data[3]}catch(t){if(!n.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return e},t._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},t._transformBounds=function(t,e,i){if(!t)return t;var s=t.x,r=t.y,n=t.width,a=t.height,o=this._props.matrix,o=i?o.identity():this.getMatrix(o);(s||r)&&o.appendTransform(0,0,1,1,0,0,0,-s,-r),e&&o.prependMatrix(e);var h=n*o.a,c=n*o.b,u=a*o.c,l=a*o.d,d=o.tx,i=o.ty,e=d,n=d,a=i,o=i;return(s=h+d)<e?e=s:n<s&&(n=s),(s=h+u+d)<e?e=s:n<s&&(n=s),(s=u+d)<e?e=s:n<s&&(n=s),(r=c+i)<a?a=r:o<r&&(o=r),(r=c+l+i)<a?a=r:o<r&&(o=r),(r=l+i)<a?a=r:o<r&&(o=r),t.setValues(e,a,n-e,o-a)},t._hasMouseEventListener=function(){for(var t=n._MOUSE_EVENTS,e=0,i=t.length;e<i;e++)if(this.hasEventListener(t[e]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(n,"EventDispatcher")}(),function(){"use strict";function g(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var t=createjs.extend(g,createjs.DisplayObject);t._getNumChildren=function(){return this.children.length},t.getNumChildren=createjs.deprecate(t._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(t,{numChildren:{get:t._getNumChildren}})}catch(t){}t.initialize=g,t.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t)},t.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),s=0,r=i.length;s<r;s++){var n=i[s];n.isVisible()&&(t.save(),n.updateContext(t),n.draw(t),t.restore())}return!0},t.addChild=function(t){if(null==t)return t;var e=arguments.length;if(1<e){for(var i=0;i<e;i++)this.addChild(arguments[i]);return arguments[e-1]}var s=t.parent,r=s===this;return s&&s._removeChildAt(createjs.indexOf(s.children,t),r),(t.parent=this).children.push(t),r||t.dispatchEvent("added"),t},t.addChildAt=function(t,e){var i=arguments.length,s=arguments[i-1];if(s<0||s>this.children.length)return arguments[i-2];if(2<i){for(var r=0;r<i-1;r++)this.addChildAt(arguments[r],s+r);return arguments[i-2]}var n=t.parent,a=n===this;return n&&n._removeChildAt(createjs.indexOf(n.children,t),a),(t.parent=this).children.splice(e,0,t),a||t.dispatchEvent("added"),t},t.removeChild=function(t){var e=arguments.length;if(1<e){for(var i=!0,s=0;s<e;s++)i=i&&this.removeChild(arguments[s]);return i}return this._removeChildAt(createjs.indexOf(this.children,t))},t.removeChildAt=function(t){var e=arguments.length;if(1<e){for(var i=[],s=0;s<e;s++)i[s]=arguments[s];i.sort(function(t,e){return e-t});for(var r=!0,s=0;s<e;s++)r=r&&this._removeChildAt(i[s]);return r}return this._removeChildAt(t)},t.removeAllChildren=function(){for(var t=this.children;t.length;)this._removeChildAt(0)},t.getChildAt=function(t){return this.children[t]},t.getChildByName=function(t){for(var e=this.children,i=0,s=e.length;i<s;i++)if(e[i].name==t)return e[i];return null},t.sortChildren=function(t){this.children.sort(t)},t.getChildIndex=function(t){return createjs.indexOf(this.children,t)},t.swapChildrenAt=function(t,e){var i=this.children,s=i[t],r=i[e];s&&r&&(i[t]=r,i[e]=s)},t.swapChildren=function(t,e){for(var i,s,r=this.children,n=0,a=r.length;n<a&&(r[n]==t&&(i=n),r[n]==e&&(s=n),null==i||null==s);n++);n!=a&&(r[i]=e,r[s]=t)},t.setChildIndex=function(t,e){var i=this.children,s=i.length;if(!(t.parent!=this||e<0||s<=e)){for(var r=0;r<s&&i[r]!=t;r++);r!=s&&r!=e&&(i.splice(r,1),i.splice(e,0,t))}},t.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},t.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},t.getObjectsUnderPoint=function(t,e,i){var s=[],e=this.localToGlobal(t,e);return this._getObjectsUnderPoint(e.x,e.y,s,0<i,1==i),s},t.getObjectUnderPoint=function(t,e,i){e=this.localToGlobal(t,e);return this._getObjectsUnderPoint(e.x,e.y,null,0<i,1==i)},t.getBounds=function(){return this._getBounds(null,!0)},t.getTransformedBounds=function(){return this._getBounds()},t.clone=function(t){var e=this._cloneProps(new g);return t&&this._cloneChildren(e),e},t.toString=function(){return"[Container (name="+this.name+")]"},t._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;0<=e;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},t._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,s=this.children.length;i<s;i++){var r=this.children[i].clone(!0);r.parent=t,e.push(r)}},t._removeChildAt=function(t,e){if(t<0||t>this.children.length-1)return!1;var i=this.children[t];return i&&(i.parent=null),this.children.splice(t,1),e||i.dispatchEvent("removed"),!0},t._getObjectsUnderPoint=function(t,e,i,s,r,n){var a,o,h;if(this.stage&&createjs.stageTransformable&&(a=t,o=e,t=(h=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(t,e)).x,e=h.y),!(n=n||0)&&!this._testMask(this,t,e))return null;var c=createjs.DisplayObject._hitTestContext;r=r||s&&this._hasMouseEventListener();for(var u=this.children,l=u.length-1;0<=l;l--){var d=u[l],_=d.hitArea;if(d.visible&&(_||d.isVisible())&&(!s||d.mouseEnabled)&&(_||this._testMask(d,t,e)))if(!_&&d instanceof g){var p=d._getObjectsUnderPoint(null!=a?a:t,null!=o?o:e,i,s,r,n+1);if(!i&&p)return s&&!this.mouseChildren?this:p}else if(!s||r||d._hasMouseEventListener()){var f=d.getConcatenatedDisplayProps(d._props),p=f.matrix;if(_&&(p.appendMatrix(_.getMatrix(_._props.matrix)),f.alpha=_.alpha),c.globalAlpha=f.alpha,c.setTransform(p.a,p.b,p.c,p.d,p.tx-t,p.ty-e),(_||d).draw(c),this._testHit(c)){if(c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,2,2),!i)return s&&!this.mouseChildren?this:d;i.push(d)}}}return null},t._testMask=function(t,e,i){var s=t.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;var r=this._props.matrix,t=t.parent,r=t?t.getConcatenatedMatrix(r):r.identity();r=s.getMatrix(s._props.matrix).prependMatrix(r);t=createjs.DisplayObject._hitTestContext;return t.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-i),s.graphics.drawAsPath(t),t.fillStyle="#000",t.fill(),!!this._testHit(t)&&(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,2,2),!0)},t._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var s=this._props.matrix,s=e?s.identity():this.getMatrix(s);t&&s.prependMatrix(t);for(var r=this.children.length,n=null,a=0;a<r;a++){var o=this.children[a];o.visible&&(i=o._getBounds(s))&&(n?n.extend(i.x,i.y,i.width,i.height):n=i.clone())}return n},createjs.Container=createjs.promote(g,"DisplayObject")}(),function(){"use strict";function t(t,e){this.Container_constructor(),!1===e&&createjs&&createjs.DisplayObject&&(createjs.DisplayObject._hitTestContext=createjs.DisplayObject._hitTestCanvas.getContext("2d",{willReadFrequently:!1}),createjs.willReadFrequently=!1),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=createjs.extend(t,createjs.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(t){}e.update=function(t){var e;this.canvas&&(this.tickOnUpdate&&this.tick(t),!1!==this.dispatchEvent("drawstart",!1,!0)&&(createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled,e=this.drawRect,(t=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),this.autoClear&&(e?t.clearRect(e.x,e.y,e.width,e.height):t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),t.save(),this.drawRect&&(t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip()),this.updateContext(t),this.draw(t,!1),t.restore(),this.dispatchEvent("drawend")))},e.tick=function(t){if(this.tickEnabled&&!1!==this.dispatchEvent("tickstart",!1,!0)){var e=new createjs.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){var t;this.canvas&&((t=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))},e.toDataURL=function(t,e){var i,s,r=this.canvas.getContext("2d"),n=this.canvas.width,a=this.canvas.height;t&&(i=r.getImageData(0,0,n,a),s=r.globalCompositeOperation,r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,n,a));e=this.canvas.toDataURL(e||"image/png");return t&&(r.putImageData(i,0,0),r.globalCompositeOperation=s),e},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(t<=0)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,s=this._eventListeners;if(!t&&s){for(e in s)(i=s[e]).t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!s&&this.canvas){var t=window.addEventListener?window:document,r=this;for(e in(s=this._eventListeners={}).mouseup={t:t,f:function(t){r._handleMouseUp(t)}},s.mousemove={t:t,f:function(t){r._handleMouseMove(t)}},s.dblclick={t:this.canvas,f:function(t){r._handleDoubleClick(t)}},s.mousedown={t:this.canvas,f:function(t){r._handleMouseDown(t)}},s)(i=s[e]).t.addEventListener(e,i.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(e){var i;try{i=e.getBoundingClientRect()}catch(t){i={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var t=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),r=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle,n=parseInt(r.paddingLeft)+parseInt(r.borderLeftWidth),a=parseInt(r.paddingTop)+parseInt(r.borderTopWidth),o=parseInt(r.paddingRight)+parseInt(r.borderRightWidth),r=parseInt(r.paddingBottom)+parseInt(r.borderBottomWidth);return{left:i.left+t+n,right:i.right+t-o,top:i.top+s+a,bottom:i.bottom+s-r}},e._getPointerData=function(t){return this._pointerData[t]||(this._pointerData[t]={x:0,y:0})},e._handleMouseMove=function(t){t=t||window.event,this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,s,r){var n,a;this._prevStage&&void 0===r||this.canvas&&(n=this._nextStage,r=(a=this._getPointerData(t)).inBounds,this._updatePointerPosition(t,e,i,s),(r||a.inBounds||this.mouseMoveOutside)&&(-1===t&&a.inBounds==!r&&this._dispatchMouseEvent(this,r?"mouseleave":"mouseenter",!1,t,a,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,a,e),this._dispatchMouseEvent(a.target,"pressmove",!0,t,a,e)),n&&n._handlePointerMove(t,e,i,s,null))},e._updatePointerPosition=function(t,e,i,s){var r=this._getElementRect(this.canvas);i-=r.left,s-=r.top;var n=this.canvas.width,a=this.canvas.height;i/=(r.right-r.left)/n,s/=(r.bottom-r.top)/a;var o,r=this._getPointerData(t);createjs.stageTransformable?(this._mtx=this.getConcatenatedMatrix(this._mtx).invert(),(r.inBounds=0<=i&&0<=s&&i<=n-1&&s<=a-1)?(r.x=i,r.y=s,o=this._mtx.transformPoint(r.x,r.y),r.x=o.x,r.y=o.y):this.mouseMoveOutside&&(r.x=i<0?0:n-1<i?n-1:i,r.y=s<0?0:a-1<s?a-1:s,o=this._mtx.transformPoint(r.x,r.y),r.x=o.x,r.y=o.y),r.rawX=i,r.rawY=s,o=this._mtx.transformPoint(r.rawX,r.rawY),r.rawX=o.x,r.rawY=o.y):((r.inBounds=0<=i&&0<=s&&i<=n-1&&s<=a-1)?(r.x=i,r.y=s):this.mouseMoveOutside&&(r.x=i<0?0:n-1<i?n-1:i,r.y=s<0?0:a-1<s?a-1:s),r.rawX=i,r.rawY=s),r.posEvtObj=e,t!==this._primaryPointerID&&-1!==t||(this.mouseX=r.x,this.mouseY=r.y,this.mouseInBounds=r.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,s){var r,n,a=this._nextStage,o=this._getPointerData(t);this._prevStage&&void 0===s||(r=null,n=o.target,s||!n&&!a||(r=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,o,e,r),o.down=!1),r==n&&this._dispatchMouseEvent(n,"click",!0,t,o,e),this._dispatchMouseEvent(n,"pressup",!0,t,o,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):o.target=null,a&&a._handlePointerUp(t,e,i,s||r&&this))},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,s,r){this.preventSelection&&e.preventDefault(),null!=this._primaryPointerID&&-1!==t||(this._primaryPointerID=t),null!=s&&this._updatePointerPosition(t,e,i,s);var n=null,a=this._nextStage,o=this._getPointerData(t);r||(n=o.target=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,o,e,n),o.down=!0),this._dispatchMouseEvent(n,"mousedown",!0,t,o,e),a&&a._handlePointerDown(t,e,i,s,r||n&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var s=this._nextStage;if(this._mouseOverIntervalID){if(this.canvas){var r=this._getPointerData(-1);if(!r||!t&&this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)return;var n,a,o=r.posEvtObj,h=i||o&&o.target==this.canvas,c=null,u=-1,l="";!e&&(t||this.mouseInBounds&&h)&&(c=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);for(var d=this._mouseOverTarget||[],_=d[d.length-1],p=this._mouseOverTarget=[],f=c;f;)p.unshift(f),l=l||f.cursor,f=f.parent;for(this.canvas.style.cursor=l,!e&&i&&(i.canvas.style.cursor=l),n=0,a=p.length;n<a&&p[n]==d[n];n++)u=n;for(_!=c&&this._dispatchMouseEvent(_,"mouseout",!0,-1,r,o,c),n=d.length-1;u<n;n--)this._dispatchMouseEvent(d[n],"rollout",!1,-1,r,o,c);for(n=p.length-1;u<n;n--)this._dispatchMouseEvent(p[n],"rollover",!1,-1,r,o,_);_!=c&&this._dispatchMouseEvent(c,"mouseover",!0,-1,r,o,_)}s&&s._testMouseOver(t,e||c&&this,i||h&&this)}else s&&s._testMouseOver(t,e,i)}},e._handleDoubleClick=function(t,e){var i=null,s=this._nextStage,r=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(r.x,r.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,r,t)),s&&s._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,i,s,r,n,a){t&&(i||t.hasEventListener(e))&&(a=new createjs.MouseEvent(e,i,!1,r.x,r.y,n,s,s===this._primaryPointerID||-1===s,r.rawX,r.rawY,a),t.dispatchEvent(a))},createjs.Stage=createjs.promote(t,"Container")}(),function(){"use strict";function R(t,e){if(this.Stage_constructor(t),void 0!==e){if("object"!=typeof e)throw"Invalid options object";var i=e.premultiply,s=e.transparent,r=e.antialias,n=e.preserveBuffer,a=e.autoPurge}this.vocalDebug=!1,this._preserveBuffer=n||!1,this._antialias=r||!1,this._transparent=s||!1,this._premultiply=i||!1,this._autoPurge=void 0,this.autoPurge=a,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:.5,g:.5,b:.5,a:0},this._maxCardsPerBatch=R.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new createjs.Container,this._initializeWebGL()}var t=createjs.extend(R,createjs.Stage);R.buildUVRects=function(t,e,i){if(!t||!t._frames)return null;void 0===e&&(e=-1),void 0===i&&(i=!1);for(var s=-1!=e&&i?e:0,r=-1!=e&&i?e+1:t._frames.length,n=s;n<r;n++){var a,o=t._frames[n];o.uvRect||o.image.width<=0||o.image.height<=0||(a=o.rect,o.uvRect={t:a.y/o.image.height,l:a.x/o.image.width,b:(a.y+a.height)/o.image.height,r:(a.x+a.width)/o.image.width})}return t._frames[-1!=e?e:0].uvRect||{t:0,l:0,b:1,r:1}},R.isWebGLActive=function(t){return t&&t instanceof WebGLRenderingContext&&"undefined"!=typeof WebGLRenderingContext},R.VERTEX_PROPERTY_COUNT=6,R.INDICIES_PER_CARD=6,R.DEFAULT_MAX_BATCH_SIZE=1e4,R.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),R.UV_RECT={t:0,l:0,b:1,r:1};try{R.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),R.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),R.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(t){}R.REGULAR_VERTEX_HEADER=(R.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",R.REGULAR_FRAGMENT_HEADER=R.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",R.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",R.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",R.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",R.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",R.PARTICLE_VERTEX_BODY=R.REGULAR_VERTEX_BODY,R.PARTICLE_FRAGMENT_BODY=R.REGULAR_FRAGMENT_BODY,R.COVER_VERTEX_HEADER=(R.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",R.COVER_FRAGMENT_HEADER=R.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",R.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",R.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",t._get_isWebGL=function(){return!!this._webGLContext},t._set_autoPurge=function(t){-1!=(t=isNaN(t)?1200:t)&&(t=t<10?10:t),this._autoPurge=t},t._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(t,{isWebGL:{get:t._get_isWebGL},autoPurge:{get:t._get_autoPurge,set:t._set_autoPurge}})}catch(t){}t._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var t={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},t=this._webGLContext=this._fetchWebGLContext(this.canvas,t);if(!t)return null;this.updateSimultaneousTextureCount(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(t),this._initTextures(t),t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else this._webGLContext=null;return this._webGLContext},t.update=function(t){this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),-1==this._autoPurge||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):((t=this.canvas.getContext("2d")).save(),this.updateContext(t),this.draw(t,!1),t.restore()),this.dispatchEvent("drawend"))},t.clear=function(){var t,e,i;this.canvas&&(R.isWebGLActive(this._webGLContext)?(t=this._webGLContext,e=this._clearColor,i=this._transparent?e.a:1,this._webGLContext.clearColor(e.r*i,e.g*i,e.b*i,i),t.clear(t.COLOR_BUFFER_BIT),this._webGLContext.clearColor(e.r,e.g,e.b,e.a)):this.Stage_clear())},t.draw=function(t,e){if(t===this._webGLContext&&R.isWebGLActive(this._webGLContext)){var i=this._webGLContext;return this._batchDraw(this,i,e),!0}return this.Stage_draw(t,e)},t.cacheDraw=function(t,e,i){if(R.isWebGLActive(this._webGLContext)){var s=this._webGLContext;return this._cacheDraw(s,t,e,i),!0}return!1},t.protectTextureSlot=function(t,e){if(t>this._maxTextureSlots||t<0)throw"Slot outside of acceptable range";this._slotBlacklist[t]=!!e},t.getTargetRenderTexture=function(t,e,i){var s=!1,r=this._webGLContext;if(void 0!==t.__lastRT&&t.__lastRT===t.__rtA&&(s=!0),!(r=s?(void 0===t.__rtB?t.__rtB=this.getRenderBufferTexture(e,i):(e==t.__rtB._width&&i==t.__rtB._height||this.resizeTexture(t.__rtB,e,i),this.setTextureParams(r)),t.__rtB):(void 0===t.__rtA?t.__rtA=this.getRenderBufferTexture(e,i):(e==t.__rtA._width&&i==t.__rtA._height||this.resizeTexture(t.__rtA,e,i),this.setTextureParams(r)),t.__rtA)))throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances";return t.__lastRT=r},t.releaseTexture=function(t){var e,i;if(t){if(t.children)for(e=0,i=t.children.length;e<i;e++)this.releaseTexture(t.children[e]);t.cacheCanvas&&t.uncache();var s=void 0;if(void 0!==t._storeID){if(t===this._textureDictionary[t._storeID])return this._killTextureObject(t),void(t._storeID=void 0);s=t}else if(2===t._webGLRenderStyle)s=t.image;else if(1===t._webGLRenderStyle){for(e=0,i=t.spriteSheet._images.length;e<i;e++)this.releaseTexture(t.spriteSheet._images[e]);return}void 0!==s?(this._killTextureObject(this._textureDictionary[s._storeID]),s._storeID=void 0):this.vocalDebug&&console.log("No associated texture found on release")}},t.purgeTextures=function(t){null==t&&(t=100);for(var e=this._textureDictionary,i=e.length,s=0;s<i;s++){var r=e[s];r&&r._drawID+t<=this._drawID&&this._killTextureObject(r)}},t.updateSimultaneousTextureCount=function(t){var e=this._webGLContext,i=!1;for((t<1||isNaN(t))&&(t=1),this._batchTextureCount=t;!i;)try{this._activeShader=this._fetchShaderProgram(e),i=!0}catch(t){if(1==this._batchTextureCount)throw"Cannot compile shader "+t;this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}},t.updateViewport=function(t,e){this._viewportWidth=0|t,this._viewportHeight=0|e;e=this._webGLContext;e&&(e.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},t.getFilterShader=function(t){t=t||this;var e=this._webGLContext,i=this._activeShader;if(t._builtShader)i=t._builtShader,t.shaderParamSetup&&(e.useProgram(i),t.shaderParamSetup(e,this,i));else try{i=this._fetchShaderProgram(e,"filter",t.VTX_SHADER_BODY,t.FRAG_SHADER_BODY,t.shaderParamSetup&&t.shaderParamSetup.bind(t)),(t._builtShader=i)._name=t.toString()}catch(t){console&&console.log("SHADER SWITCH FAILURE",t)}return i},t.getBaseTexture=function(t,e){var i=Math.ceil(0<t?t:1)||1,s=Math.ceil(0<e?e:1)||1,t=this._webGLContext,e=t.createTexture();return this.resizeTexture(e,i,s),this.setTextureParams(t,!1),e},t.resizeTexture=function(t,e,i){var s=this._webGLContext;s.bindTexture(s.TEXTURE_2D,t),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,i,0,s.RGBA,s.UNSIGNED_BYTE,null),t.width=e,t.height=i},t.getRenderBufferTexture=function(t,e){var i=this._webGLContext,s=this.getBaseTexture(t,e);if(!s)return null;var r=i.createFramebuffer();return r?(s.width=t,s.height=e,i.bindFramebuffer(i.FRAMEBUFFER,r),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),(r._renderTexture=s)._frameBuffer=r,s._storeID=this._textureDictionary.length,this._textureDictionary[s._storeID]=s,i.bindFramebuffer(i.FRAMEBUFFER,null),s):null},t.setTextureParams=function(t,e){e&&this._antialias?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},t.setClearColor=function(t){var e,i,s,r,n;"string"==typeof t?0==t.indexOf("#")?(4==t.length&&(t="#"+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3)),e=Number("0x"+t.slice(1,3))/255,i=Number("0x"+t.slice(3,5))/255,s=Number("0x"+t.slice(5,7))/255,r=Number("0x"+t.slice(7,9))/255):0==t.indexOf("rgba(")&&(n=t.slice(5,-1).split(","),e=Number(n[0])/255,i=Number(n[1])/255,s=Number(n[2])/255,r=Number(n[3])):(e=((4278190080&t)>>>24)/255,i=((16711680&t)>>>16)/255,s=((65280&t)>>>8)/255,r=(255&t)/255),this._clearColor.r=e||0,this._clearColor.g=i||0,this._clearColor.b=s||0,this._clearColor.a=r||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},t.toString=function(){return"[StageGL (name="+this.name+")]"},t._fetchWebGLContext=function(t,e){var i,s;try{i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}catch(t){}return i?(i.viewportWidth=t.width,i.viewportHeight=t.height):(s="Could not initialize WebGL",console.error?console.error(s):console.log(s)),i},t._fetchShaderProgram=function(t,e,i,s,r){var n,a;switch(t.useProgram(null),e){case"filter":a=R.COVER_VERTEX_HEADER+(i||R.COVER_VERTEX_BODY),n=R.COVER_FRAGMENT_HEADER+(s||R.COVER_FRAGMENT_BODY);break;case"particle":a=R.REGULAR_VERTEX_HEADER+R.PARTICLE_VERTEX_BODY,n=R.REGULAR_FRAGMENT_HEADER+R.PARTICLE_FRAGMENT_BODY;break;case"override":a=R.REGULAR_VERTEX_HEADER+(i||R.REGULAR_VERTEX_BODY),n=R.REGULAR_FRAGMENT_HEADER+(s||R.REGULAR_FRAGMENT_BODY);break;case"regular":default:a=R.REGULAR_VERTEX_HEADER+R.REGULAR_VERTEX_BODY,n=R.REGULAR_FRAGMENT_HEADER+R.REGULAR_FRAGMENT_BODY}var o=this._createShader(t,t.VERTEX_SHADER,a),h=this._createShader(t,t.FRAGMENT_SHADER,n),c=t.createProgram();if(t.attachShader(c,o),t.attachShader(c,h),t.linkProgram(c),c._type=e,!t.getProgramParameter(c,t.LINK_STATUS))throw t.useProgram(this._activeShader),t.getProgramInfoLog(c);switch(t.useProgram(c),e){case"filter":c.vertexPositionAttribute=t.getAttribLocation(c,"vertexPosition"),t.enableVertexAttribArray(c.vertexPositionAttribute),c.uvPositionAttribute=t.getAttribLocation(c,"uvPosition"),t.enableVertexAttribArray(c.uvPositionAttribute),c.samplerUniform=t.getUniformLocation(c,"uSampler"),t.uniform1i(c.samplerUniform,0),c.uprightUniform=t.getUniformLocation(c,"uUpright"),t.uniform1f(c.uprightUniform,0),r&&r(t,this,c);break;case"override":case"particle":case"regular":default:c.vertexPositionAttribute=t.getAttribLocation(c,"vertexPosition"),t.enableVertexAttribArray(c.vertexPositionAttribute),c.uvPositionAttribute=t.getAttribLocation(c,"uvPosition"),t.enableVertexAttribArray(c.uvPositionAttribute),c.textureIndexAttribute=t.getAttribLocation(c,"textureIndex"),t.enableVertexAttribArray(c.textureIndexAttribute),c.alphaAttribute=t.getAttribLocation(c,"objectAlpha"),t.enableVertexAttribArray(c.alphaAttribute);for(var u=[],l=0;l<this._batchTextureCount;l++)u[l]=l;c.samplerData=u,c.samplerUniform=t.getUniformLocation(c,"uSampler"),t.uniform1iv(c.samplerUniform,u),c.pMatrixUniform=t.getUniformLocation(c,"pMatrix")}return t.useProgram(this._activeShader),c},t._createShader=function(t,e,i){i=i.replace(/{{count}}/g,this._batchTextureCount);for(var s="",r=1;r<this._batchTextureCount;r++)s+="} else if (indexPicker <= "+r+".5) { color = texture2D(uSampler["+r+"], vTextureCoord);";i=(i=i.replace(/{{alternates}}/g,s)).replace(/{{fragColor}}/g,this._premultiply?R.REGULAR_FRAG_COLOR_PREMULTIPLY:R.REGULAR_FRAG_COLOR_NORMAL);e=t.createShader(e);if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw t.getShaderInfoLog(e);return e},t._createBuffers=function(t){var e,i=this._maxCardsPerBatch*R.INDICIES_PER_CARD,s=this._vertexPositionBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),e=2;for(var r=this._vertices=new Float32Array(i*e),n=0,a=r.length;n<a;n+=e)r[n]=r[n+1]=0;t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW),s.itemSize=e,s.numItems=i;s=this._uvPositionBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),e=2;var o=this._uvs=new Float32Array(i*e);for(n=0,a=o.length;n<a;n+=e)o[n]=o[n+1]=0;t.bufferData(t.ARRAY_BUFFER,o,t.DYNAMIC_DRAW),s.itemSize=e,s.numItems=i;s=this._textureIndexBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),e=1;var h=this._indices=new Float32Array(i*e);for(n=0,a=h.length;n<a;n++)h[n]=0;t.bufferData(t.ARRAY_BUFFER,h,t.DYNAMIC_DRAW),s.itemSize=e,s.numItems=i;s=this._alphaBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),e=1;var c=this._alphas=new Float32Array(i*e);for(n=0,a=c.length;n<a;n++)c[n]=1;t.bufferData(t.ARRAY_BUFFER,c,t.DYNAMIC_DRAW),s.itemSize=e,s.numItems=i},t._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var t=0;t<this._batchTextureCount;t++){var e=this.getBaseTexture();if(!(this._baseTextures[t]=this._batchTextures[t]=e))throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}},t._loadTextureImage=function(t,e){var i=e.src;i||(e._isCanvas=!0,i=e.src="canvas_"+this._lastTrackedCanvas++);var s=this._textureIDs[i];void 0===s&&(s=this._textureIDs[i]=this._textureDictionary.length),void 0===this._textureDictionary[s]&&(this._textureDictionary[s]=this.getBaseTexture());i=this._textureDictionary[s];return i?(i._batchID=this._batchID,i._storeID=s,i._imageData=e,this._insertTextureInBatch(t,i),e._storeID=s,e.complete||e.naturalWidth||e._isCanvas?this._updateTextureImageData(t,e):e.addEventListener("load",this._updateTextureImageData.bind(this,t,e))):(e="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances",console.error&&console.error(e)||console.log(e),(i=this._baseTextures[0])._batchID=this._batchID,i._storeID=-1,i._imageData=i,this._insertTextureInBatch(t,i)),i},t._updateTextureImageData=function(t,e){var i=e.width&e.width-1||e.height&e.height-1,s=this._textureDictionary[e._storeID];t.activeTexture(t.TEXTURE0+s._activeIndex),t.bindTexture(t.TEXTURE_2D,s),s.isPOT=!i,this.setTextureParams(t,s.isPOT);try{t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}catch(t){var r="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";console.error?(console.error(r),console.error(t)):console&&(console.log(r),console.log(t))}e._invalid=!1,s._w=e.width,s._h=e.height,this.vocalDebug&&(i&&console.warn("NPOT(Non Power of Two) Texture: "+e.src),(e.width>t.MAX_TEXTURE_SIZE||e.height>t.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+e.width+"x"+e.height+" vs "+t.MAX_TEXTURE_SIZE+"max"))},t._insertTextureInBatch=function(t,e){if(this._batchTextures[e._activeIndex]!==e){var i=-1,s=(this._lastTextureInsert+1)%this._batchTextureCount,r=s;do{if(this._batchTextures[r]._batchID!=this._batchID&&!this._slotBlacklist[r]){i=r;break}}while((r=(r+1)%this._batchTextureCount)!==s);-1===i&&(this.batchReason="textureOverflow",this._drawBuffers(t),this.batchCardCount=0,i=s),(this._batchTextures[i]=e)._activeIndex=i,(n=e._imageData)&&n._invalid&&void 0!==e._drawID?this._updateTextureImageData(t,n):(t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e),this.setTextureParams(t)),this._lastTextureInsert=i}else{var n=e._imageData;null!=e._storeID&&n&&n._invalid&&this._updateTextureImageData(t,n)}e._drawID=this._drawID,e._batchID=this._batchID},t._killTextureObject=function(t){if(t){var e=this._webGLContext;if(void 0!==t._storeID&&0<=t._storeID){for(var i in this._textureDictionary[t._storeID]=void 0,this._textureIDs)this._textureIDs[i]==t._storeID&&delete this._textureIDs[i];t._imageData&&(t._imageData._storeID=void 0),t._imageData=t._storeID=void 0}void 0!==t._activeIndex&&this._batchTextures[t._activeIndex]===t&&(this._batchTextures[t._activeIndex]=this._baseTextures[t._activeIndex]);try{t._frameBuffer&&e.deleteFramebuffer(t._frameBuffer),t._frameBuffer=void 0}catch(t){this.vocalDebug&&console.log(t)}try{e.deleteTexture(t)}catch(t){this.vocalDebug&&console.log(t)}}},t._backupBatchTextures=function(t,e){var i=this._webGLContext;this._backupTextures||(this._backupTextures=[]),void 0===e&&(e=this._backupTextures);for(var s=0;s<this._batchTextureCount;s++)i.activeTexture(i.TEXTURE0+s),t?this._batchTextures[s]=e[s]:(e[s]=this._batchTextures[s],this._batchTextures[s]=this._baseTextures[s]),i.bindTexture(i.TEXTURE_2D,this._batchTextures[s]),this.setTextureParams(i,this._batchTextures[s].isPOT);t&&e===this._backupTextures&&(this._backupTextures=[])},t._batchDraw=function(t,e,i){0<this._isDrawing&&this._drawBuffers(e),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(t,e,new createjs.Matrix2D,this.alpha,i),this.batchReason="drawFinish",this._drawBuffers(e),this._isDrawing--},t._cacheDraw=function(t,e,i,s){var r=this._activeShader,n=this._slotBlacklist,a=this._maxTextureSlots-1,o=this._viewportWidth,h=this._viewportHeight;this.protectTextureSlot(a,!0);var c=e.getMatrix();(c=c.clone()).scale(1/s.scale,1/s.scale),(c=c.invert()).translate(-s.offX/s.scale*e.scaleX,-s.offY/s.scale*e.scaleY);var u=this._cacheContainer;u.children=[e],u.transformMatrix=c,this._backupBatchTextures(!1),i&&i.length?this._drawFilters(e,i,s):this.isCacheControlled?(t.clear(t.COLOR_BUFFER_BIT),this._batchDraw(u,t,!0)):(t.activeTexture(t.TEXTURE0+a),e.cacheCanvas=this.getTargetRenderTexture(e,s._drawWidth,s._drawHeight),e=e.cacheCanvas,t.bindFramebuffer(t.FRAMEBUFFER,e._frameBuffer),this.updateViewport(s._drawWidth,s._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,t.clear(t.COLOR_BUFFER_BIT),this._batchDraw(u,t,!0),t.bindFramebuffer(t.FRAMEBUFFER,null),this.updateViewport(o,h)),this._backupBatchTextures(!0),this.protectTextureSlot(a,!1),this._activeShader=r,this._slotBlacklist=n},t._drawFilters=function(t,e,i){var s,r=this._webGLContext,n=this._maxTextureSlots-1,a=this._viewportWidth,o=this._viewportHeight,h=this._cacheContainer,c=e.length;r.activeTexture(r.TEXTURE0+n),s=this.getTargetRenderTexture(t,i._drawWidth,i._drawHeight),r.bindFramebuffer(r.FRAMEBUFFER,s._frameBuffer),this.updateViewport(i._drawWidth,i._drawHeight),r.clear(r.COLOR_BUFFER_BIT),this._batchDraw(h,r,!0),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s),this.setTextureParams(r);for(var u=!1,l=0,d=e[l];this._activeShader=this.getFilterShader(d),this._activeShader&&(r.activeTexture(r.TEXTURE0+n),s=this.getTargetRenderTexture(t,i._drawWidth,i._drawHeight),r.bindFramebuffer(r.FRAMEBUFFER,s._frameBuffer),r.viewport(0,0,i._drawWidth,i._drawHeight),r.clear(r.COLOR_BUFFER_BIT),this._drawCover(r,u),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s),this.setTextureParams(r),(1<c||e[0]._multiPass)&&(u=!u),d=null!==d._multiPass?d._multiPass:e[++l]),d;);this.isCacheControlled?(r.bindFramebuffer(r.FRAMEBUFFER,null),this.updateViewport(a,o),this._activeShader=this.getFilterShader(this),r.clear(r.COLOR_BUFFER_BIT),this._drawCover(r,u)):(u&&(r.activeTexture(r.TEXTURE0+n),s=this.getTargetRenderTexture(t,i._drawWidth,i._drawHeight),r.bindFramebuffer(r.FRAMEBUFFER,s._frameBuffer),this._activeShader=this.getFilterShader(this),r.viewport(0,0,i._drawWidth,i._drawHeight),r.clear(r.COLOR_BUFFER_BIT),this._drawCover(r,!u)),r.bindFramebuffer(r.FRAMEBUFFER,null),this.updateViewport(a,o),t.cacheCanvas=s)},t._appendToBatchGroup=function(t,e,i,s,r){t._glMtx||(t._glMtx=new createjs.Matrix2D);var n,a,o,h,c=t._glMtx;c.copy(i),t.transformMatrix?c.appendMatrix(t.transformMatrix):c.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY);for(var u=t.children.length,l=0;l<u;l++){var d=t.children[l];if(d.visible&&s)if(d.cacheCanvas&&!r||(d._updateState&&d._updateState(),!d.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(e),this.batchCardCount=0),d._glMtx||(d._glMtx=new createjs.Matrix2D);var _,p,f,g,m=d._glMtx;m.copy(c),d.transformMatrix?m.appendMatrix(d.transformMatrix):m.appendTransform(d.x,d.y,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY);var v=d.cacheCanvas&&!r;if(2===d._webGLRenderStyle||v)_=!r&&d.cacheCanvas||d.image;else{if(1!==d._webGLRenderStyle)continue;if(null===(p=d.spriteSheet.getFrame(d.currentFrame)))continue;_=p.image}var T=this._uvs,b=this._vertices,E=this._indices,y=this._alphas;if(_){if(void 0===_._storeID)f=this._loadTextureImage(e,_),this._insertTextureInBatch(e,f);else{if(!(f=this._textureDictionary[_._storeID])){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}f._batchID!==this._batchID&&this._insertTextureInBatch(e,f)}var x,S=f._activeIndex;2===d._webGLRenderStyle||v?h=!v&&d.sourceRect?(d._uvRect||(d._uvRect={}),g=d.sourceRect,(x=d._uvRect).t=g.y/_.height,x.l=g.x/_.width,x.b=(g.y+g.height)/_.height,x.r=(g.x+g.width)/_.width,a=n=0,o=g.width+n,g.height+a):(x=R.UV_RECT,v?(n=(g=d.bitmapCache).x+g._filterOffX/g.scale,a=g.y+g._filterOffY/g.scale,o=g._drawWidth/g.scale+n,g._drawHeight/g.scale+a):(a=n=0,o=_.width+n,_.height+a)):1===d._webGLRenderStyle&&(w=p.rect,x=(x=p.uvRect)||R.buildUVRects(d.spriteSheet,d.currentFrame,!1),n=-p.regX,a=-p.regY,o=w.width-p.regX,h=w.height-p.regY);var v=this.batchCardCount*R.INDICIES_PER_CARD,w=2*v;b[w]=n*m.a+a*m.c+m.tx,b[1+w]=n*m.b+a*m.d+m.ty,b[2+w]=n*m.a+h*m.c+m.tx,b[3+w]=n*m.b+h*m.d+m.ty,b[4+w]=o*m.a+a*m.c+m.tx,b[5+w]=o*m.b+a*m.d+m.ty,b[6+w]=b[2+w],b[7+w]=b[3+w],b[8+w]=b[4+w],b[9+w]=b[5+w],b[10+w]=o*m.a+h*m.c+m.tx,b[11+w]=o*m.b+h*m.d+m.ty,T[w]=x.l,T[1+w]=x.t,T[2+w]=x.l,T[3+w]=x.b,T[4+w]=x.r,T[5+w]=x.t,T[6+w]=x.l,T[7+w]=x.b,T[8+w]=x.r,T[9+w]=x.t,T[10+w]=x.r,T[11+w]=x.b,E[v]=E[1+v]=E[2+v]=E[3+v]=E[4+v]=E[5+v]=S,y[v]=y[1+v]=y[2+v]=y[3+v]=y[4+v]=y[5+v]=d.alpha*s,this.batchCardCount++}}else this._appendToBatchGroup(d,e,c,d.alpha*s)}},t._drawBuffers=function(t){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var e=this._activeShader,i=this._vertexPositionBuffer,s=this._textureIndexBuffer,r=this._uvPositionBuffer,n=this._alphaBuffer;t.useProgram(e),t.bindBuffer(t.ARRAY_BUFFER,i),t.vertexAttribPointer(e.vertexPositionAttribute,i.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(e.textureIndexAttribute,s.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._indices),t.bindBuffer(t.ARRAY_BUFFER,r),t.vertexAttribPointer(e.uvPositionAttribute,r.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._uvs),t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(e.alphaAttribute,n.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,this._alphas),t.uniformMatrix4fv(e.pMatrixUniform,t.FALSE,this._projectionMatrix);for(var a=0;a<this._batchTextureCount;a++){var o=this._batchTextures[a];t.activeTexture(t.TEXTURE0+a),t.bindTexture(t.TEXTURE_2D,o),this.setTextureParams(t,o.isPOT)}t.drawArrays(t.TRIANGLES,0,this.batchCardCount*R.INDICIES_PER_CARD),this._batchID++}},t._drawCover=function(t,e){0<this._isDrawing&&this._drawBuffers(t),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var i=this._activeShader,s=this._vertexPositionBuffer,r=this._uvPositionBuffer;t.clear(t.COLOR_BUFFER_BIT),t.useProgram(i),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(i.vertexPositionAttribute,s.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,R.COVER_VERT),t.bindBuffer(t.ARRAY_BUFFER,r),t.vertexAttribPointer(i.uvPositionAttribute,r.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,e?R.COVER_UV_FLIP:R.COVER_UV),t.uniform1i(i.samplerUniform,0),t.uniform1f(i.uprightUniform,e?0:1),t.drawArrays(t.TRIANGLES,0,R.INDICIES_PER_CARD)},createjs.StageGL=createjs.promote(R,"Stage")}(),function(){function i(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null,this._webGLRenderStyle=createjs.DisplayObject._StageGL_BITMAP}var t=createjs.extend(i,createjs.DisplayObject);t.initialize=i,t.isVisible=function(){var t=this.image,t=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||2<=t.readyState);return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t)},t.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i,s,r,n,a,o=this.image,h=this.sourceRect;return o.getImage&&(o=o.getImage()),o&&(h?(i=h.x,s=h.y,r=i+h.width,n=s+h.height,i<(e=a=0)&&(a-=i,i=0),(h=o.width)<r&&(r=h),s<0&&(e-=s,s=0),(h=o.height)<n&&(n=h),t.drawImage(o,i,s,r-i,n-s,a,e,r-i,n-s)):t.drawImage(o,0,0)),!0},t.cache=function(t,e,i,s,r,n,a){this.bitmapCache||(this.bitmapCache=new createjs.BitmapCache),this.bitmapCache.define(this,t,e,i,s,r,n,a)},t.updateCache=function(t,e){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(t,e)},t.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},t.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,t=this.sourceRect||e;return e&&(e.naturalWidth||e.getContext||2<=e.readyState)?this._rectangle.setValues(0,0,t.width,t.height):null},t.clone=function(t){var e=this.image;e&&t&&(e=e.cloneNode());e=new i(e);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(i,"DisplayObject")}(),function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=createjs.DisplayObject._StageGL_SPRITE,null!=e&&this.gotoAndPlay(e)}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;e=i.rect;return e.width&&e.height&&t.drawImage(i.image,e.x,e.y,e.width,e.height,-i.regX,-i.regY,e.width,e.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,e=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(e)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e=this._animation,i=this.paused,s=this._currentFrame;if(e){var r,n=e.speed||1,a=this.currentAnimationFrame;if((r=e.frames.length)<=a+t*n){var o=e.next;if(this._dispatchAnimationEnd(e,s,i,o,r-1))return;if(o)return this._goto(o,t-(r-a)/n);this.paused=!0,a=e.frames.length-1}else a+=t*n;this.currentAnimationFrame=a,this._currentFrame=e.frames[0|a]}else if(s=this._currentFrame+=t,r=this.spriteSheet.getNumFrames(),r<=s&&0<r&&!this._dispatchAnimationEnd(e,s,i,r-1)&&(this._currentFrame-=r)>=r)return this._normalizeFrame();s=0|this._currentFrame,this.currentFrame!=s&&(this.currentFrame=s,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,i,s,r){var n,a=t?t.name:null;this.hasEventListener("animationend")&&((n=new createjs.Event("animationend")).name=a,n.next=s,this.dispatchEvent(n));e=this._animation!=t||this._currentFrame!=e;return e||i||!this.paused||(this.currentAnimationFrame=r,e=!0),e},e._goto=function(t,e){var i;this.currentAnimationFrame=0,isNaN(t)?(i=this.spriteSheet.getAnimation(t))&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e)):(this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame())},createjs.Sprite=createjs.promote(t,"DisplayObject")}(),function(){"use strict";function e(t){this.DisplayObject_constructor(),this.graphics=t||new createjs.Graphics}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t)},t.draw=function(t,e){return this.DisplayObject_draw(t,e)||this.graphics.draw(t,this),!0},t.clone=function(t){t=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new e(t))},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(e,"DisplayObject")}(),function(){"use strict";function E(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var t=createjs.extend(E,createjs.DisplayObject),e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(E._workingContext=e.getContext("2d"),e.width=e.height=1),E.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},E.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},t.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&t)},t.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;e=this.color||"#000";return this.outline?(t.strokeStyle=e,t.lineWidth=+this.outline):t.fillStyle=e,this._drawText(this._prepContext(t)),!0},t.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},t.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},t.getMeasuredHeight=function(){return this._drawText(null,{}).height},t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""===this.text)return null;var e=this._drawText(null,{}),i=this.maxWidth&&this.maxWidth<e.width?this.maxWidth:e.width,s=i*E.H_OFFSETS[this.textAlign||"left"],t=(this.lineHeight||this.getMeasuredLineHeight())*E.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(s,t,i,e.height)},t.getMetrics=function(){var t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*E.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)},t.clone=function(){return this._cloneProps(new E(this.text,this.font,this.color))},t.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},t._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},t._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t.lineJoin="miter",t.miterLimit=2.5,t},t._drawText=function(t,e,i){var s=!!t;s||((t=E._workingContext).save(),this._prepContext(t));for(var r=this.lineHeight||this.getMeasuredLineHeight(),n=0,a=0,o=String(this.text).split(/(?:\r\n|\r|\n)/),h=0,c=o.length;h<c;h++){var u,l,d=o[h],_=null;if(null!=this.lineWidth&&(_=t.measureText(d).width)>this.lineWidth){if(/[\u4e00-\u9fa5]+/.test(d)){u=d.split(/(\s)/),l=[];for(var p=0;p<u.length;p++){for(var f="",g=0;g<u[p].length;g++){var m=u[p][g];255<m.charCodeAt(0)?(""!=f&&l.push(f),l.push(m),f=""):f+=m}""!=f&&l.push(f)}}else l=d.split(/(\s)/);d=l[0],_=t.measureText(d).width;for(var v=1,T=l.length;v<T;v+=2){var b=t.measureText(l[v]+l[v+1]).width;_+b>this.lineWidth?(s&&this._drawTextLine(t,d,a*r),i&&i.push(d),n<_&&(n=_),d=l[v+1],_=t.measureText(d).width,a++):(d+=l[v]+l[v+1],_+=b)}}s&&this._drawTextLine(t,d,a*r),i&&i.push(d),e&&null==_&&(_=t.measureText(d).width),n<_&&(n=_),a++}return e&&(e.width=n,e.height=a*r),s||t.restore(),e},t._splitWords=function(t){return t.split(/([ \f\n\r\t\v\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff])/)},t._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},t._getMeasuredWidth=function(t){var e=E._workingContext;e.save();t=this._prepContext(e).measureText(t).width;return e.restore(),t},createjs.Text=createjs.promote(E,"DisplayObject")}(),function(){"use strict";function v(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var t=createjs.extend(v,createjs.Container);v.maxPoolSize=100,v._spritePool=[],t.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateState(),this.Container_draw(t,e))},t.getBounds=function(){return this._updateText(),this.Container_getBounds()},t.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&0<this.alpha&&0!==this.scaleX&&0!==this.scaleY&&t)},t.clone=function(){return this._cloneProps(new v(this.text,this.spriteSheet))},t.addChild=t.addChildAt=t.removeChild=t.removeChildAt=t.removeAllChildren=function(){},t._updateState=function(){this._updateText()},t._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},t._getFrameIndex=function(t,e){var i,s=e.getAnimation(t);return s||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(s=e.getAnimation(i))),s&&s.frames[0]},t._getFrame=function(t,e){t=this._getFrameIndex(t,e);return null==t?t:e.getFrame(t)},t._getLineHeight=function(t){t=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return t?t.rect.height:1},t._getSpaceWidth=function(t){t=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return t?t.rect.width:1},t._updateText=function(){var t,e,i=0,s=0,r=this._oldProps,n=!1,a=this.spaceWidth,o=this.lineHeight,h=this.spriteSheet,c=v._spritePool,u=this.children,l=0,d=u.length;for(e in r)r[e]!=this[e]&&(r[e]=this[e],n=!0);if(n){var _=!!this._getFrame(" ",h);_||a||(a=this._getSpaceWidth(h)),o=o||this._getLineHeight(h);for(var p=0,f=this.text.length;p<f;p++){var g,m=this.text.charAt(p);" "!=m||_?"\n"!=m&&"\r"!=m?null!=(g=this._getFrameIndex(m,h))&&(l<d?t=u[l]:(u.push(t=c.length?c.pop():new createjs.Sprite),t.parent=this,d++),t.spriteSheet=h,t.gotoAndStop(g),t.x=i,t.y=s,l++,i+=t.getBounds().width+this.letterSpacing):("\r"==m&&"\n"==this.text.charAt(p+1)&&p++,i=0,s+=o):i+=a}for(;l<d;)c.push(t=u.pop()),t.parent=null,d--;c.length>v.maxPoolSize&&(c.length=v.maxPoolSize)}},createjs.BitmapText=createjs.promote(v,"Container")}(),function(){"use strict";function n(t){var e,i,s,r;this.Container_constructor(),n.inited||n.init(),t instanceof String||1<arguments.length?(e=t,i=arguments[1],s=arguments[2],r=arguments[3],null==s&&(s=-1),t=null):t&&(e=t.mode,i=t.startPosition,s=t.loop,r=t.labels),t=t||{labels:r},this.mode=e||n.INDEPENDENT,this.startPosition=i||0,this.loop=!0===s?-1:s||0,this.currentFrame=0,this.paused=t.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||t.frameBounds,this.framerate=null,t.useTicks=t.paused=!0,this.timeline=new createjs.Timeline(t),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}var t=createjs.extend(n,createjs.Container);n.INDEPENDENT="independent",n.SINGLE_FRAME="single",n.SYNCHED="synched",n.inited=!1,n.init=function(){n.inited||(s.install(),n.inited=!0)},t._getLabels=function(){return this.timeline.getLabels()},t.getLabels=createjs.deprecate(t._getLabels,"MovieClip.getLabels"),t._getCurrentLabel=function(){return this.timeline.currentLabel},t.getCurrentLabel=createjs.deprecate(t._getCurrentLabel,"MovieClip.getCurrentLabel"),t._getDuration=function(){return this.timeline.duration},t.getDuration=createjs.deprecate(t._getDuration,"MovieClip.getDuration");try{Object.defineProperties(t,{labels:{get:t._getLabels},currentLabel:{get:t._getCurrentLabel},totalFrames:{get:t._getDuration},duration:{get:t._getDuration}})}catch(t){}function s(){throw"MovieClipPlugin cannot be instantiated."}t.initialize=n,t.isVisible=function(){return!!(this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(t,e){return this.DisplayObject_draw(t,e)||(this._updateState(),this.Container_draw(t,e)),!0},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},t.gotoAndStop=function(t){this.paused=!0,this._goto(t)},t.advance=function(t){var e=n.INDEPENDENT;if(this.mode===e){for(var i=this,s=i.framerate;(i=i.parent)&&null===s;)i.mode===e&&(s=i._framerate);if(this._framerate=s,!(this.totalFrames<=1)){var t=null!==s&&-1!==s&&null!==t?t/(1e3/s)+this._t:1,r=0|t;for(this._t=t-r;!this.paused&&r--;)this._updateTimeline(this._rawPosition+1,!1)}}},t.clone=function(){throw"MovieClip cannot be cloned."},t.toString=function(){return"[MovieClip (name="+this.name+")]"},t._updateState=function(){-1!==this._rawPosition&&this.mode===n.INDEPENDENT||this._updateTimeline(-1)},t._tick=function(t){this.advance(t&&t.delta),this.Container__tick(t)},t._goto=function(t){t=this.timeline.resolve(t);null!=t&&(this._t=0,this._updateTimeline(t,!0))},t._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},t._updateTimeline=function(t,e){var i=this.mode!==n.INDEPENDENT,s=this.timeline;i&&(t=this.startPosition+(this.mode===n.SINGLE_FRAME?0:this._synchOffset)),t<0&&(t=0),this._rawPosition===t&&!i||(this._rawPosition=t,s.loop=this.loop,s.setPosition(t,i||!this.actionsEnabled,e,this._bound_resolveState))},t._renderFirstFrame=function(){var t=this.timeline,e=t.rawPosition;t.setPosition(0,!0,!0,this._bound_resolveState),t.rawPosition=e},t._resolveState=function(){var t,e=this.timeline;for(t in this.currentFrame=e.position,this._managed)this._managed[t]=1;for(var i=e.tweens,s=0,r=i.length;s<r;s++){var n=i[s],a=n.target;a===this||n.passive||(n=n._stepPosition,a instanceof createjs.DisplayObject?this._addManagedChild(a,n):this._setState(a.state,n))}for(var o=this.children,s=o.length-1;0<=s;s--){var h=o[s].id;1===this._managed[h]&&(this.removeChildAt(s),delete this._managed[h])}},t._setState=function(t,e){if(t)for(var i=t.length-1;0<=i;i--){var s,r=t[i],n=r.t,a=r.p;for(s in a)n[s]=a[s];this._addManagedChild(n,e)}},t._addManagedChild=function(t,e){t._off||(this.addChildAt(t,0),t instanceof n&&(t._synchOffset=e,t.mode===n.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},t._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame])),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},createjs.MovieClip=createjs.promote(n,"Container"),s.priority=100,s.ID="MovieClip",s.install=function(){createjs.Tween._installPlugin(s)},s.init=function(t,e,i){"startPosition"===e&&t.target instanceof n&&t._addPlugin(s)},s.step=function(t,e,i){},s.change=function(t,e,i,s,r,n){if("startPosition"===i)return(1===r?e:e.prev).props[i]}}(),function(){"use strict";function x(){throw"SpriteSheetUtils cannot be instantiated"}var t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(x._workingCanvas=t,x._workingContext=t.getContext("2d"),t.width=t.height=1),x.extractFrame=function(t,e){isNaN(e)&&(e=t.getAnimation(e).frames[0]);var i=t.getFrame(e);if(!i)return null;t=i.rect,e=x._workingCanvas;e.width=t.width,e.height=t.height,x._workingContext.drawImage(i.image,t.x,t.y,t.width,t.height,0,0,t.width,t.height);t=document.createElement("img");return t.src=e.toDataURL("image/png"),t},x.addFlippedFrames=createjs.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),x.mergeAlpha=createjs.deprecate(null,"SpriteSheetUtils.mergeAlpha"),x._flip=function(t,e,i,s){for(var r=t._images,n=x._workingCanvas,a=x._workingContext,o=r.length/e,h=0;h<o;h++){var c=r[h];c.__tmp=h,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,n.width+1,n.height+1),n.width=c.width,n.height=c.height,a.setTransform(i?-1:1,0,0,s?-1:1,i?c.width:0,s?c.height:0),a.drawImage(c,0,0);var u=document.createElement("img");u.src=n.toDataURL("image/png"),u.width=c.width||c.naturalWidth,u.height=c.height||c.naturalHeight,r.push(u)}for(var l=t._frames,d=l.length/e,h=0;h<d;h++){var _=(c=l[h]).rect.clone(),p={image:u=r[c.image.__tmp+o*e],rect:_,regX:c.regX,regY:c.regY};i&&(_.x=(u.width||u.naturalWidth)-_.x-_.width,p.regX=_.width-c.regX),s&&(_.y=(u.height||u.naturalHeight)-_.y-_.height,p.regY=_.height-c.regY),l.push(p)}var f="_"+(i?"h":"")+(s?"v":""),g=t._animations,m=t._data,v=g.length/e;for(h=0;h<v;h++){var T=g[h],b={name:T+f,speed:(c=m[T]).speed,next:c.next,frames:[]};c.next&&(b.next+=f);for(var E=0,y=(l=c.frames).length;E<y;E++)b.frames.push(l[E]+d*e);m[b.name]=b,g.push(b.name)}},createjs.SpriteSheetUtils=x}(),function(){"use strict";function E(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var t=createjs.extend(E,createjs.EventDispatcher);E.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",E.ERR_RUNNING="a build is already running",t.addFrame=function(t,e,i,s,r){if(this._data)throw E.ERR_RUNNING;e=e||t.bounds||t.nominalBounds;return!e&&t.getBounds&&(e=t.getBounds()),e?(i=i||1,this._frames.push({source:t,sourceRect:e,scale:i,funct:s,data:r,index:this._frames.length,height:e.height*i})-1):null},t.addAnimation=function(t,e,i,s){if(this._data)throw E.ERR_RUNNING;this._animations[t]={frames:e,next:i,speed:s}},t.addMovieClip=function(t,e,i,s,r,n){if(this._data)throw E.ERR_RUNNING;var a=t.frameBounds,o=e||t.bounds||t.nominalBounds;if(!o&&t.getBounds&&(o=t.getBounds()),o||a){for(var h,c=this._frames.length,u=t.timeline.duration,l=0;l<u;l++){var d=a&&a[l]?a[l]:o;this.addFrame(t,d,i,this._setupMovieClipFrame,{i:l,f:s,d:r})}var _,p=t.timeline._labels,f=[];for(_ in p)f.push({index:p[_],label:_});if(f.length)for(f.sort(function(t,e){return t.index-e.index}),l=0,h=f.length;l<h;l++){for(var g=f[l].label,m=c+f[l].index,v=c+(l==h-1?u:f[l+1].index),T=[],b=m;b<v;b++)T.push(b);n&&!(g=n(g,t,m,v))||this.addAnimation(g,T,!0)}}},t.build=function(){if(this._data)throw E.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw E.ERR_RUNNING;this.timeSlice=t,this._startBuild();var e=this;this._timerID=setTimeout(function(){e._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var e=[];this._data={images:[],frames:e,framerate:this.framerate,animations:this._animations};var i=this._frames.slice();if(i.sort(function(t,e){return t.height<=e.height?-1:1}),i[i.length-1].height+2*t>this.maxHeight)throw E.ERR_DIMENSIONS;for(var s=0,r=0,n=0;i.length;){var a,o=this._fillRow(i,s,n,e,t);o.w>r&&(r=o.w),s+=o.h,o.h&&i.length||((a=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).width=this._getSize(r,this.maxWidth),a.height=this._getSize(s,this.maxHeight),this._data.images[n]=a,o.h||(r=s=0,n++))}},t._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},t._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},t._fillRow=function(t,e,i,s,r){for(var n=this.maxWidth,a=this.maxHeight-(e+=r),o=r,h=0,c=t.length-1;0<=c;c--){var u=t[c],l=this._scale*u.scale,d=u.sourceRect,_=u.source,p=Math.floor(l*d.x-r),f=Math.floor(l*d.y-r),g=Math.ceil(l*d.height+2*r),d=Math.ceil(l*d.width+2*r);if(n<d)throw E.ERR_DIMENSIONS;a<g||n<o+d||(u.img=i,u.rect=new createjs.Rectangle(o,e,d,g),h=h||g,t.splice(c,1),s[u.index]=[o,e,d,g,i,Math.round(-p+l*_.regX-r),Math.round(-f+l*_.regY-r)],o+=d)}return{w:o,h:h}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},t._run=function(){for(var t,e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),i=(new Date).getTime()+e,s=!1;i>(new Date).getTime();)if(!this._drawNext()){s=!0;break}s?this._endBuild():(t=this)._timerID=setTimeout(function(){t._run()},50-e);var r=this.progress=this._index/this._frames.length;this.hasEventListener("progress")&&((e=new createjs.Event("progress")).progress=r,this.dispatchEvent(e))},t._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,s=t.sourceRect,r=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),r.save(),r.beginPath(),r.rect(i.x,i.y,i.width,i.height),r.clip(),r.translate(Math.ceil(i.x-s.x*e),Math.ceil(i.y-s.y*e)),r.scale(e,e),t.source.draw(r),r.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(E,"EventDispatcher")}(),function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null,this._oldStage=null,this._drawAction=null}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(t,e){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.stage;e&&e!==this._oldStage&&(this._drawAction&&e.off("drawend",this._drawAction),this._drawAction=e.on("drawend",this._handleDrawEnd,this),this._oldStage=e),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var e,i,s,r,n,a=this.htmlElement;a&&(e=a.style,s=(i=this.getConcatenatedDisplayProps(this._props)).matrix,(n=i.visible?"visible":"hidden")!=e.visibility&&(e.visibility=n),i.visible&&(r=1e4,(n=(a=this._oldProps)&&a.matrix)&&n.equals(s)||(n="matrix("+(s.a*r|0)/r+","+(s.b*r|0)/r+","+(s.c*r|0)/r+","+(s.d*r|0)/r+","+(s.tx+.5|0),e.transform=e.WebkitTransform=e.OTransform=e.msTransform=n+","+(s.ty+.5|0)+")",e.MozTransform=n+"px,"+(s.ty+.5|0)+"px)",(a=a||(this._oldProps=new createjs.DisplayProps(!0,null))).matrix.copy(s)),a.alpha!=i.alpha&&(e.opacity=""+(i.alpha*r|0)/r,a.alpha=i.alpha)))},createjs.DOMElement=createjs.promote(t,"DisplayObject")}(),function(){"use strict";function t(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var e=t.prototype;e.getBounds=function(t){return t},e.shaderParamSetup=function(t,e,i){},e.applyFilter=function(t,e,i,s,r,n,a,o){n=n||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,s,r)}catch(t){return!1}return!!this._applyFilter(h)&&(n.putImageData(h,a,o),!0)},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(t){return!0},createjs.Filter=t}(),function(){"use strict";function r(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._rtl=null,this._drawWidth=0,this._drawHeight=0}var t=r.prototype;r.getFilterBounds=function(t,e){e=e||new createjs.Rectangle;var i=t.filters,s=i&&i.length;if(!!s<=0)return e;for(var r=0;r<s;r++){var n=i[r];n&&n.getBounds&&((n=n.getBounds())&&(0==r?e.setValues(n.x,n.y,n.width,n.height):e.extend(n.x,n.y,n.width,n.height)))}return e},t.toString=function(){return"[BitmapCache]"},t.define=function(t,e,i,s,r,n,a,o){if(!t)throw"No symbol to cache";this._options=a,this._rtl=o,this.target=t,this.width=1<=s?s:1,this.height=1<=r?r:1,this.x=e||0,this.y=i||0,this.scale=n||1,this.update()},t.update=function(t,e){if(!this.target)throw"define() must be called before update()";var i=r.getFilterBounds(this.target),s=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+i.width,this._drawHeight=Math.ceil(this.height*this.scale)+i.height,s&&this._drawWidth==s.width&&this._drawHeight==s.height||this._updateSurface(),this._filterOffX=i.x,this._filterOffY=i.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(t,e||this._rtl),this.cacheID=this.cacheID?this.cacheID+1:1},t.release=function(){var t;this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):(t=this.target.stage)instanceof createjs.StageGL&&t.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},t.getCacheDataURL=function(){var t=this.target&&this.target.cacheCanvas;return t?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=t.toDataURL?t.getCacheDataURL():null),this._cacheDataURL):null},t.draw=function(t){return!!this.target&&(t.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},t._updateSurface=function(){if(!this._options||!this._options.useGL)return(e=(e=this.target.cacheCanvas)||(this.target.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"))).width=this._drawWidth,void(e.height=this._drawHeight);if(!this._webGLCache)if("stage"===this._options.useGL){if(!this.target.stage||!this.target.stage.isWebGL){var t="Cannot use 'stage' for cache because the object's parent stage is ";throw t+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if("new"===this._options.useGL)this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new createjs.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else{if(!(this._options.useGL instanceof createjs.StageGL))throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}var e=this.target.cacheCanvas,t=this._webGLCache;t.isCacheControlled&&(e.width=this._drawWidth,e.height=this._drawHeight,t.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(t.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),t.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):t.isCacheControlled||t.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},t._drawToCache=function(t,e){var i=this.target.cacheCanvas,s=this.target,r=this._webGLCache;r?(r.cacheDraw(s,s.filters,this),(i=this.target.cacheCanvas).width=this._drawWidth,i.height=this._drawHeight):(r=s.filters&&s.filters.length?i.getContext("2d",createjs.willReadFrequently?{willReadFrequently:!0}:void 0):i.getContext("2d"),e&&(r.direction="rtl"),t||r.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),r.save(),r.globalCompositeOperation=t,r.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),r.translate(-this.x,-this.y),s.draw(r,!0),r.restore(),s.filters&&s.filters.length&&this._applyFilters(r)),i._invalid=!0},t._applyFilters=function(t){for(var e,i=this.target.filters,s=this._drawWidth,r=this._drawHeight,n=0,a=i[n];a.usesContext?(e&&(t.putImageData(e,0,0),e=null),a.applyFilter(t,0,0,s,r)):(e=e||t.getImageData(0,0,s,r),a._applyFilter(e)),a=null!==a._multiPass?a._multiPass:i[++n],a;);e&&t.putImageData(e,0,0)},createjs.BitmapCache=r}(),function(){"use strict";function B(t,e,i){this.Filter_constructor(),this._blurX=t,this._blurXTable=[],this._lastBlurX=null,this._blurY=e,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(i)||i<1)&&(i=1),this.setQuality(0|i)}var t=createjs.extend(B,createjs.Filter);t.getBlurX=function(){return this._blurX},t.getBlurY=function(){return this._blurY},t.setBlurX=function(t){(isNaN(t)||t<0)&&(t=0),this._blurX=t},t.setBlurY=function(t){(isNaN(t)||t<0)&&(t=0),this._blurY=t},t.getQuality=function(){return this._quality},t.setQuality=function(t){(isNaN(t)||t<0)&&(t=0),this._quality=0|t},t._getShader=function(){var t=this._lastBlurX!==this._blurX,e=this._lastBlurY!==this._blurY,i=this._lastQuality!==this._quality;return t||e||i?((t||i)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(e||i)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader},t._setShader=function(){this._compiledShader};try{Object.defineProperties(t,{blurX:{get:t.getBlurX,set:t.setBlurX},blurY:{get:t.getBlurY,set:t.setBlurY},quality:{get:t.getQuality,set:t.setQuality},_builtShader:{get:t._getShader,set:t._setShader}})}catch(t){console.log(t)}t._getTable=function(t){if(t<=1)return[1];for(var e=[],t=Math.ceil(2*t),i=(t+=t%2?0:1)/2|0,s=-i;s<=i;s++){var r=s/i*4.2;e.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(r,2)/4))}var n=e.reduce(function(t,e){return t+e});return e.map(function(t,e,i){return t/n})},t._updateShader=function(){var t;void 0!==this._blurX&&void 0!==this._blurY&&(t=(t=(t=this.FRAG_SHADER_TEMPLATE).replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0))).replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=t)},t.shaderParamSetup=function(t,e,i){t.uniform1fv(t.getUniformLocation(i,"xWeight"),this._blurXTable),t.uniform1fv(t.getUniformLocation(i,"yWeight"),this._blurYTable),t.uniform2f(t.getUniformLocation(i,"textureOffset"),2/(e._viewportWidth*this._quality),2/(e._viewportHeight*this._quality))},B.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],B.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(e<=0&&i<=0)return t;var s=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(i*s+1,e*s+1,i*s+1,e*s+1)},t.clone=function(){return new B(this.blurX,this.blurY,this.quality)},t.toString=function(){return"[BlurFilter]"},t._applyFilter=function(t){var e=this._blurX>>1;if(isNaN(e)||e<0)return!1;var i=this._blurY>>1;if(isNaN(i)||i<0)return!1;if(0==e&&0==i)return!1;var s=this.quality;(isNaN(s)||s<1)&&(s=1),3<(s|=0)&&(s=3),s<1&&(s=1);for(var r=t.data,n=0,a=0,o=0,h=0,c=0,u=0,l=0,d=0,_=0,p=0,f=0,g=0,m=0,v=0,T=0,b=e+e+1|0,E=i+i+1|0,y=0|t.width,x=0|t.height,S=y-1|0,w=x-1|0,R=1+e|0,A=1+i|0,P={r:0,b:0,g:0,a:0},j=P,o=1;o<b;o++)j=j.n={r:0,b:0,g:0,a:0};j.n=P;var L={r:0,b:0,g:0,a:0},C=L;for(o=1;o<E;o++)C=C.n={r:0,b:0,g:0,a:0};C.n=L;for(var D=null,I=0|B.MUL_TABLE[e],M=0|B.SHG_TABLE[e],O=0|B.MUL_TABLE[i],F=0|B.SHG_TABLE[i];0<s--;){l=u=0;for(var N=I,k=M,a=x;-1<--a;){for(d=R*(g=r[0|u]),_=R*(m=r[u+1|0]),p=R*(v=r[u+2|0]),f=R*(T=r[u+3|0]),j=P,o=R;-1<--o;)j.r=g,j.g=m,j.b=v,j.a=T,j=j.n;for(o=1;o<R;o++)h=u+((S<o?S:o)<<2)|0,d+=j.r=r[h],_+=j.g=r[h+1],p+=j.b=r[h+2],f+=j.a=r[h+3],j=j.n;for(D=P,n=0;n<y;n++)r[u++]=d*N>>>k,r[u++]=_*N>>>k,r[u++]=p*N>>>k,r[u++]=f*N>>>k,h=l+((h=n+e+1)<S?h:S)<<2,d-=D.r-(D.r=r[h]),_-=D.g-(D.g=r[h+1]),p-=D.b-(D.b=r[h+2]),f-=D.a-(D.a=r[h+3]),D=D.n;l+=y}for(N=O,k=F,n=0;n<y;n++){for(d=A*(g=r[u=n<<2|0])|0,_=A*(m=r[u+1|0])|0,p=A*(v=r[u+2|0])|0,f=A*(T=r[u+3|0])|0,C=L,o=0;o<A;o++)C.r=g,C.g=m,C.b=v,C.a=T,C=C.n;for(c=y,o=1;o<=i;o++)u=c+n<<2,d+=C.r=r[u],_+=C.g=r[u+1],p+=C.b=r[u+2],f+=C.a=r[u+3],C=C.n,o<w&&(c+=y);if(u=n,D=L,0<s)for(a=0;a<x;a++)r[(h=u<<2)+3]=T=f*N>>>k,0<T?(r[h]=d*N>>>k,r[h+1]=_*N>>>k,r[h+2]=p*N>>>k):r[h]=r[h+1]=r[h+2]=0,h=n+((h=a+A)<w?h:w)*y<<2,d-=D.r-(D.r=r[h]),_-=D.g-(D.g=r[h+1]),p-=D.b-(D.b=r[h+2]),f-=D.a-(D.a=r[h+3]),D=D.n,u+=y;else for(a=0;a<x;a++)r[(h=u<<2)+3]=T=f*N>>>k,0<T?(T=255/T,r[h]=(d*N>>>k)*T,r[h+1]=(_*N>>>k)*T,r[h+2]=(p*N>>>k)*T):r[h]=r[h+1]=r[h+2]=0,h=n+((h=a+A)<w?h:w)*y<<2,d-=D.r-(D.r=r[h]),_-=D.g-(D.g=r[h+1]),p-=D.b-(D.b=r[h+2]),f-=D.a-(D.a=r[h+3]),D=D.n,u+=y}}return!0},createjs.BlurFilter=createjs.promote(B,"Filter")}(),function(){"use strict";function e(t){this.Filter_constructor(),this.alphaMap=t,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var t=createjs.extend(e,createjs.Filter);t.shaderParamSetup=function(t,e,i){this._mapTexture||(this._mapTexture=t.createTexture()),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._mapTexture),e.setTextureParams(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.alphaMap),t.uniform1i(t.getUniformLocation(i,"uAlphaSampler"),1)},t.clone=function(){var t=new e(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},t.toString=function(){return"[AlphaMapFilter]"},t._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,s=0,r=e.length;s<r;s+=4)e[s+3]=i[s]||0;return!0},t._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d",createjs.willReadFrequently?{willReadFrequently:!0}:void 0):((i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).width=e.width,i.height=e.height,(t=i.getContext("2d",createjs.willReadFrequently?{willReadFrequently:!0}:void 0)).drawImage(e,0,0));try{var s=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=s.data,!0},createjs.AlphaMapFilter=createjs.promote(e,"Filter")}(),function(){"use strict";function t(t){this.Filter_constructor(),this.mask=t,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var e=createjs.extend(t,createjs.Filter);e.shaderParamSetup=function(t,e,i){this._mapTexture||(this._mapTexture=t.createTexture()),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._mapTexture),e.setTextureParams(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.mask),t.uniform1i(t.getUniformLocation(i,"uAlphaSampler"),1)},e.applyFilter=function(t,e,i,s,r,n,a,o){return!this.mask||(null==a&&(a=e),null==o&&(o=i),(n=n||t).save(),t==n&&(n.globalCompositeOperation="destination-in",n.drawImage(this.mask,a,o),n.restore(),!0))},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(t,"Filter")}(),function(){"use strict";function t(t,e,i,s,r,n,a,o){this.Filter_constructor(),this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=s?s:1,this.redOffset=r||0,this.greenOffset=n||0,this.blueOffset=a||0,this.alphaOffset=o||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var e=createjs.extend(t,createjs.Filter);e.shaderParamSetup=function(t,e,i){t.uniform4f(t.getUniformLocation(i,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),t.uniform4f(t.getUniformLocation(i,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,i=e.length,s=0;s<i;s+=4)e[s]=e[s]*this.redMultiplier+this.redOffset,e[s+1]=e[s+1]*this.greenMultiplier+this.greenOffset,e[s+2]=e[s+2]*this.blueMultiplier+this.blueOffset,e[s+3]=e[s+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(t,"Filter")}(),function(){"use strict";function s(t,e,i,s){this.setColor(t,e,i,s)}var t=s.prototype;s.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],s.LENGTH=(s.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]).length,t.setColor=function(t,e,i,s){return this.reset().adjustColor(t,e,i,s)},t.reset=function(){return this.copy(s.IDENTITY_MATRIX)},t.adjustColor=function(t,e,i,s){return this.adjustHue(s),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.adjustBrightness=function(t){return 0==t||isNaN(t)||(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])),this},t.adjustContrast=function(t){return 0==t||isNaN(t)||(e=(t=this._cleanValue(t,100))<0?127+t/100*127:127*(e=0==(e=t%1)?s.DELTA_INDEX[t]:s.DELTA_INDEX[t<<0]*(1-e)+s.DELTA_INDEX[1+(t<<0)]*e)+127,this._multiplyMatrix([e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])),this;var e},t.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=1+(0<(t=this._cleanValue(t,100))?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-t)+t,.6094*(1-t),.082*(1-t),0,0,.3086*(1-t),.6094*(1-t)+t,.082*(1-t),0,0,.3086*(1-t),.6094*(1-t),.082*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),s=.213,r=.715,t=.072;return this._multiplyMatrix([s+.787*e+i*-s,r+e*-r+i*-r,t+e*-t+.928*i,0,0,s+e*-s+.143*i,r+e*(1-r)+.14*i,t+e*-t+-.283*i,0,0,s+e*-s+-.787*i,r+e*-r+i*r,t+.928*e+i*t,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.concat=function(t){return(t=this._fixMatrix(t)).length!=s.LENGTH||this._multiplyMatrix(t),this},t.clone=function(){return(new s).copy(this)},t.toArray=function(){for(var t=[],e=0,i=s.LENGTH;e<i;e++)t[e]=this[e];return t},t.copy=function(t){for(var e=s.LENGTH,i=0;i<e;i++)this[i]=t[i];return this},t.toString=function(){return"[ColorMatrix]"},t._multiplyMatrix=function(t){for(var e,i=[],s=0;s<5;s++){for(e=0;e<5;e++)i[e]=this[e+5*s];for(e=0;e<5;e++){for(var r=0,n=0;n<5;n++)r+=t[e+5*n]*i[n];this[e+5*s]=r}}},t._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t._fixMatrix=function(t){return t instanceof s&&(t=t.toArray()),t.length<s.LENGTH?t=t.slice(0,t.length).concat(s.IDENTITY_MATRIX.slice(t.length,s.LENGTH)):t.length>s.LENGTH&&(t=t.slice(0,s.LENGTH)),t},createjs.ColorMatrix=s}(),function(){"use strict";function t(t){this.Filter_constructor(),this.matrix=t,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var e=createjs.extend(t,createjs.Filter);e.shaderParamSetup=function(t,e,i){var s=this.matrix,r=new Float32Array([s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]]);t.uniformMatrix4fv(t.getUniformLocation(i,"uColorMatrix"),!1,r),t.uniform4f(t.getUniformLocation(i,"uColorMatrixOffset"),s[4]/255,s[9]/255,s[14]/255,s[19]/255)},e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,s,r,n=t.data,a=n.length,t=this.matrix,o=t[0],h=t[1],c=t[2],u=t[3],l=t[4],d=t[5],_=t[6],p=t[7],f=t[8],g=t[9],m=t[10],v=t[11],T=t[12],b=t[13],E=t[14],y=t[15],x=t[16],S=t[17],w=t[18],R=t[19],A=0;A<a;A+=4)e=n[A],i=n[A+1],s=n[A+2],r=n[A+3],n[A]=e*o+i*h+s*c+r*u+l,n[A+1]=e*d+i*_+s*p+r*f+g,n[A+2]=e*m+i*v+s*T+r*b+E,n[A+3]=e*y+i*x+s*S+r*w+R;return!0},createjs.ColorMatrixFilter=createjs.promote(t,"Filter")}(),function(){"use strict";function r(){throw"Touch cannot be instantiated"}r.isSupported=function(){return!!("ontouchstart"in window||window.MSPointerEvent&&0<window.navigator.msMaxTouchPoints||window.PointerEvent&&0<window.navigator.maxTouchPoints)},r.enable=function(t,e,i,s){return!!(t&&t.canvas&&r.isSupported())&&(t.__touch||(t.__touch={pointers:{},multitouch:!e,preventDefault:!i,count:0},s?"ontouchstart"in window?r._enable(t):(window.PointerEvent||window.MSPointerEvent)&&r._IE_enable(t):"ontouchstart"in window||createjs.BrowserDetect.isChrome||createjs.BrowserDetect.isEdge||createjs.BrowserDetect.isFirefox?r._enable(t):(window.PointerEvent||window.MSPointerEvent)&&r._IE_enable(t)),!0)},r.disable=function(t){t&&t.__touch&&("ontouchstart"in window||createjs.BrowserDetect.isChrome||createjs.BrowserDetect.isFirefox?r._disable(t):(window.PointerEvent||window.MSPointerEvent)&&r._IE_disable(t),delete t.__touch)},r._enable=function(e){var t=e.canvas,i=e.__touch.f=function(t){r._handleEvent(e,t)};t.addEventListener("pointerdown",function(t){e.__touch&&e.__touch.preventDefault||("touch"==t.pointerType?e.enableDOMEvents(!1):"mouse"==t.pointerType&&e.enableDOMEvents(!0))},!1),t.addEventListener("touchstart",i,!1),t.addEventListener("touchmove",i,!1),t.addEventListener("touchend",i,!1),t.addEventListener("touchcancel",i,!1)},r._disable=function(t){var e=t.canvas;e&&(t=t.__touch.f,e.removeEventListener("touchstart",t,!1),e.removeEventListener("touchmove",t,!1),e.removeEventListener("touchend",t,!1),e.removeEventListener("touchcancel",t,!1))},r._handleEvent=function(t,e){if(t){t.__touch&&t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,s=e.type,r=0,n=i.length;r<n;r++){var a=i[r],o=a.identifier;a.target==t.canvas&&("touchstart"===s?this._handleStart(t,o,e,a.pageX,a.pageY):"touchmove"===s?this._handleMove(t,o,e,a.pageX,a.pageY):"touchend"!==s&&"touchcancel"!==s||this._handleEnd(t,o,e))}}},r._IE_enable=function(e){var t=e.canvas,i=e.__touch.f=function(t){r._IE_handleEvent(e,t)};t.style["-webkit-tap-highlight-color"]="transparent",void 0===window.PointerEvent?(t.addEventListener("MSPointerDown",i,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",i,!1),window.addEventListener("MSPointerCancel",i,!1),e.__touch&&e.__touch.preventDefault&&(t.style.msTouchAction="none")):(t.addEventListener("pointerdown",i,!1),window.addEventListener("pointermove",i,!1),window.addEventListener("pointerup",i,!1),window.addEventListener("pointercancel",i,!1),e.__touch&&e.__touch.preventDefault&&(t.style.touchAction="none")),e.__touch.activeIDs={}},r._IE_disable=function(t){var e=t.__touch.f;void 0===window.PointerEvent?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},r._IE_handleEvent=function(t,e){if(t){t.__touch&&t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,s=e.pointerId,r=t.__touch.activeIDs;if("MSPointerDown"===i||"pointerdown"===i){if(e.srcElement==t.canvas)switch(r[s]=!0,this._handleStart(t,s,e,e.pageX,e.pageY),e.pointerType){case"mouse":t.enableDOMEvents(!0);break;case"touch":t.enableDOMEvents(!1)}}else r[s]&&("MSPointerMove"===i||"pointermove"===i?this._handleMove(t,s,e,e.pageX,e.pageY):"MSPointerUp"!==i&&"MSPointerCancel"!==i&&"pointerup"!==i&&"pointercancel"!==i||(delete r[s],this._handleEnd(t,s,e)))}},r._handleStart=function(t,e,i,s,r){var n,a=t.__touch;!a.multitouch&&a.count||((n=a.pointers)[e]||(n[e]=!0,a.count++,t._handlePointerDown(e,i,s,r)))},r._handleMove=function(t,e,i,s,r){t.__touch.pointers[e]&&t._handlePointerMove(e,i,s,r)},r._handleEnd=function(t,e,i){var s=t.__touch,r=s.pointers;r[e]&&(s.count--,t._handlePointerUp(e,i,!0),delete r[e])},createjs.Touch=r}(),function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="1.0.0",t.buildDate="Thu, 12 Oct 2017 16:34:05 GMT"}(),function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="NEXT",t.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),function(){"use strict";function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),function(){var t,e,i,s,r="function"==typeof define&&define.amd,F={function:!0,object:!0},n=F[typeof exports]&&exports&&!exports.nodeType&&exports,N=F[typeof window]&&window||this,a=n&&F[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;function k(t,h){t=t||N.Object(),h=h||N.Object();var c=t.Number||N.Number,u=t.String||N.String,e=t.Object||N.Object,l=t.Date||N.Date,i=t.SyntaxError||N.SyntaxError,E=t.TypeError||N.TypeError,s=t.Math||N.Math,t=t.JSON||N.JSON;"object"==typeof t&&t&&(h.stringify=t.stringify,h.parse=t.parse);var y,x,S,d,w,R,A,o,P,r,j,_,L,C,D,p,f,g,m,v,n,a,T,b,e=e.prototype,I=e.toString,M=new l(-0xc782b5b800cec);try{M=-109252==M.getUTCFullYear()&&0===M.getUTCMonth()&&1===M.getUTCDate()&&10==M.getUTCHours()&&37==M.getUTCMinutes()&&6==M.getUTCSeconds()&&708==M.getUTCMilliseconds()}catch(t){}function O(t){if(O[t]!==S)return O[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=O("json-stringify")&&O("json-parse");else{var i,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var r=h.stringify,n="function"==typeof r&&M;if(n){(i=function(){return 1}).toJSON=i;try{n="0"===r(0)&&"0"===r(new c)&&'""'==r(new u)&&r(I)===S&&r(S)===S&&r()===S&&"1"===r(i)&&"[1]"==r([i])&&"[null]"==r([S])&&"null"==r(null)&&"[null,null,null]"==r([S,I,null])&&r({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===r(null,i)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new l(-1))}catch(t){n=!1}}e=n}if("json-parse"==t){var a=h.parse;if("function"==typeof a)try{if(0===a("0")&&!a(!1)){var o=5==(i=a(s)).a.length&&1===i.a[0];if(o){try{o=!a('"\t"')}catch(t){}if(o)try{o=1!==a("01")}catch(t){}if(o)try{o=1!==a("1.")}catch(t){}}}}catch(t){o=!1}e=o}}return O[t]=!!e}return O("json")||(d="[object Function]",w="[object Number]",R="[object String]",A="[object Array]",o=O("bug-string-char-index"),M||(P=s.floor,r=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(t,e){return r[e]+365*(t-1970)+P((t-1969+(e=+(1<e)))/4)-P((t-1901+e)/100)+P((t-1601+e)/400)}),(y=e.hasOwnProperty)||(y=function(t){var i,e={__proto__:null};return e.__proto__={toString:1},y=e.toString!=I?function(t){var e=this.__proto__,t=t in(this.__proto__=null,this);return this.__proto__=e,t}:(i=e.constructor,function(t){var e=(this.constructor||i).prototype;return t in this&&!(t in e&&this[t]===e[t])}),e=null,y.call(this,t)}),x=function(t,e){var i,a,s,r=0;for(s in(i=function(){this.valueOf=0}).prototype.valueOf=0,a=new i)y.call(a,s)&&r++;return i=a=null,(x=r?2==r?function(t,e){var i,s={},r=I.call(t)==d;for(i in t)r&&"prototype"==i||y.call(s,i)||!(s[i]=1)||!y.call(t,i)||e(i)}:function(t,e){var i,s,r=I.call(t)==d;for(i in t)r&&"prototype"==i||!y.call(t,i)||(s="constructor"===i)||e(i);(s||y.call(t,i="constructor"))&&e(i)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(t,e){var i,s,r=I.call(t)==d,n=!r&&"function"!=typeof t.constructor&&F[typeof t.hasOwnProperty]&&t.hasOwnProperty||y;for(i in t)r&&"prototype"==i||!n.call(t,i)||e(i);for(s=a.length;i=a[--s];n.call(t,i)&&e(i));}))(t,e)},O("json-stringify")||(_={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L=function(t,e){return("000000"+(e||0)).slice(-t)},C=function(t){for(var e='"',i=0,s=t.length,r=!o||10<s,n=r&&(o?t.split(""):t);i<s;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=_[a];break;default:if(a<32){e+="\\u00"+L(2,a.toString(16));break}e+=r?n[i]:t.charAt(i)}}return e+'"'},D=function(t,e,i,s,r,n,a){var o,h,c,u,l,d,_,p,f,g,m,v,T,b;try{o=e[t]}catch(t){}if("object"==typeof o&&o)if("[object Date]"!=(h=I.call(o))||y.call(o,"toJSON"))"function"==typeof o.toJSON&&(h!=w&&h!=R&&h!=A||y.call(o,"toJSON"))&&(o=o.toJSON(t));else if(-1/0<o&&o<1/0){if(j){for(l=P(o/864e5),c=P(l/365.2425)+1970-1;j(c+1,0)<=l;c++);for(u=P((l-j(c,0))/30.42);j(c,u+1)<=l;u++);l=1+l-j(c,u),d=P((T=(o%864e5+864e5)%864e5)/36e5)%24,_=P(T/6e4)%60,p=P(T/1e3)%60,T=T%1e3}else c=o.getUTCFullYear(),u=o.getUTCMonth(),l=o.getUTCDate(),d=o.getUTCHours(),_=o.getUTCMinutes(),p=o.getUTCSeconds(),T=o.getUTCMilliseconds();o=(c<=0||1e4<=c?(c<0?"-":"+")+L(6,c<0?-c:c):L(4,c))+"-"+L(2,u+1)+"-"+L(2,l)+"T"+L(2,d)+":"+L(2,_)+":"+L(2,p)+"."+L(3,T)+"Z"}else o=null;if(i&&(o=i.call(e,t,o)),null===o)return"null";if("[object Boolean]"==(h=I.call(o)))return""+o;if(h==w)return-1/0<o&&o<1/0?""+o:"null";if(h==R)return C(""+o);if("object"==typeof o){for(v=a.length;v--;)if(a[v]===o)throw E();if(a.push(o),f=[],T=n,n+=r,h==A){for(m=0,v=o.length;m<v;m++)g=D(m,o,i,s,r,n,a),f.push(g===S?"null":g);b=f.length?r?"[\n"+n+f.join(",\n"+n)+"\n"+T+"]":"["+f.join(",")+"]":"[]"}else x(s||o,function(t){var e=D(t,o,i,s,r,n,a);e!==S&&f.push(C(t)+":"+(r?" ":"")+e)}),b=f.length?r?"{\n"+n+f.join(",\n"+n)+"\n"+T+"}":"{"+f.join(",")+"}":"{}";return a.pop(),b}},h.stringify=function(t,e,i){var s,r,n,a;if(F[typeof e]&&e)if((a=I.call(e))==d)r=e;else if(a==A){n={};for(var o,h=0,c=e.length;h<c;o=e[h++],(a=I.call(o))!=R&&a!=w||(n[o]=1));}if(i)if((a=I.call(i))==w){if(0<(i-=i%1))for(s="",10<i&&(i=10);s.length<i;s+=" ");}else a==R&&(s=i.length<=10?i:i.slice(0,10));return D("",((o={})[""]=t,o),r,n,s,"",[])}),O("json-parse")||(p=u.fromCharCode,f={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},v=function(){throw g=m=null,i()},n=function(){for(var t,e,i,s,r,n=m,a=n.length;g<a;)switch(r=n.charCodeAt(g)){case 9:case 10:case 13:case 32:g++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=o?n.charAt(g):n[g],g++,t;case 34:for(t="@",g++;g<a;)if((r=n.charCodeAt(g))<32)v();else if(92==r)switch(r=n.charCodeAt(++g)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=f[r],g++;break;case 117:for(e=++g,i=g+4;g<i;g++)48<=(r=n.charCodeAt(g))&&r<=57||97<=r&&r<=102||65<=r&&r<=70||v();t+=p("0x"+n.slice(e,g));break;default:v()}else{if(34==r)break;for(r=n.charCodeAt(g),e=g;32<=r&&92!=r&&34!=r;)r=n.charCodeAt(++g);t+=n.slice(e,g)}if(34==n.charCodeAt(g))return g++,t;v();default:if(e=g,45==r&&(s=!0,r=n.charCodeAt(++g)),48<=r&&r<=57){for(48==r&&(48<=(r=n.charCodeAt(g+1))&&r<=57)&&v(),s=!1;g<a&&(48<=(r=n.charCodeAt(g))&&r<=57);g++);if(46==n.charCodeAt(g)){for(i=++g;i<a&&(48<=(r=n.charCodeAt(i))&&r<=57);i++);i==g&&v(),g=i}if(101==(r=n.charCodeAt(g))||69==r){for(43!=(r=n.charCodeAt(++g))&&45!=r||g++,i=g;i<a&&(48<=(r=n.charCodeAt(i))&&r<=57);i++);i==g&&v(),g=i}return+n.slice(e,g)}if(s&&v(),"true"==n.slice(g,g+4))return g+=4,!0;if("false"==n.slice(g,g+5))return g+=5,!1;if("null"==n.slice(g,g+4))return g+=4,null;v()}return"$"},a=function(t){var e,i;if("$"==t&&v(),"string"==typeof t){if("@"==(o?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=n());i=i||!0)!i||","==t&&"]"!=(t=n())||v(),","==t&&v(),e.push(a(t));return e}if("{"==t){for(e={};"}"!=(t=n());i=i||!0)!i||","==t&&"}"!=(t=n())||v(),","!=t&&"string"==typeof t&&"@"==(o?t.charAt(0):t[0])&&":"==n()||v(),e[t.slice(1)]=a(n());return e}v()}return t},T=function(t,e,i){i=b(t,e,i);i===S?delete t[e]:t[e]=i},b=function(t,e,i){var s,r=t[e];if("object"==typeof r&&r)if(I.call(r)==A)for(s=r.length;s--;)T(r,s,i);else x(r,function(t){T(r,t,i)});return i.call(t,e,r)},h.parse=function(t,e){var i;return g=0,m=""+t,i=a(n()),"$"!=n()&&v(),g=m=null,e&&I.call(e)==d?b(((t={})[""]=i,t),"",e):i})),h.runInContext=k,h}!a||a.global!==a&&a.window!==a&&a.self!==a||(N=a),n&&!r?k(N,n):(t=N.JSON,e=N.JSON3,i=!1,s=k(N,N.JSON3={noConflict:function(){return i||(i=!0,N.JSON=t,N.JSON3=e,t=e=null),s}}),N.JSON={parse:s.parse,stringify:s.stringify}),r&&define(function(){return s})}.call(this),function(){var t={a:function(){return t.el("a")},svg:function(){return t.el("svg")},object:function(){return t.el("object")},image:function(){return t.el("image")},img:function(){return t.el("img")},style:function(){return t.el("style")},link:function(){return t.el("link")},script:function(){return t.el("script")},audio:function(){return t.el("audio")},video:function(){return t.el("video")},text:function(t){return document.createTextNode(t)},el:function(t){return document.createElement(t)}};createjs.Elements=t}(),function(){var n={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(t){var e={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(null==t)return e;var i,s=createjs.Elements.a();for(i in s.href=t,e)i in s&&(e[i]=s[i]);var r=t.indexOf("?");return-1<r&&(t=t.substr(0,r)),n.ABSOLUTE_PATT.test(t)?e.absolute=!0:n.RELATIVE_PATT.test(t)&&(e.relative=!0),(t=t.match(n.EXTENSION_PATT))&&(e.extension=t[1].toLowerCase()),e},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i,s=[];for(i in t)s.push(i+"="+escape(t[i]));return e&&(s=s.concat(e)),s.join("&")},buildURI:function(t,e){if(null==e)return t;var i,s=[],r=t.indexOf("?");return-1!=r&&(i=t.slice(r+1),s=s.concat(i.split("&"))),-1!=r?t.slice(0,r)+"?"+this.formatQueryString(e,s):t+"?"+this.formatQueryString(e,s)},isCrossDomain:function(t){var e=createjs.Elements.a();e.href=t.src;t=createjs.Elements.a();return t.href=location.href,""!=e.hostname&&(e.port!=t.port||e.protocol!=t.protocol||e.hostname!=t.hostname)},isLocal:function(t){var e=createjs.Elements.a();return e.href=t.src,""==e.hostname&&"file:"==e.protocol}};createjs.URLUtils=n}(),function(){var i={container:null,appendToHead:function(t){i.getHead().appendChild(t)},appendToBody:function(t){var e;null==i.container&&(i.container=document.createElement("div"),i.container.id="preloadjs-container",(e=i.container.style).visibility="hidden",e.position="absolute",e.width=i.container.style.height="10px",e.overflow="hidden",e.transform=e.msTransform=e.webkitTransform=e.oTransform="translate(-10px, -10px)",i.getBody().appendChild(i.container)),i.container.appendChild(t)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(t){t.parent&&t.parent.removeChild(t)},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement}};createjs.DomUtils=i}(),function(){var t={parseXML:function(t){var e=null;try{window.DOMParser&&(e=(new DOMParser).parseFromString(t,"text/xml"))}catch(t){}if(!e)try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}catch(t){e=null}return e},parseJSON:function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}}};createjs.DataUtils=t}(),function(){var t={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"};createjs.Types=t}(),function(){var t={POST:"POST",GET:"GET"};createjs.Methods=t}(),function(){"use strict";function i(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=s.LOAD_TIMEOUT_DEFAULT}var t=i.prototype={},s=i;s.LOAD_TIMEOUT_DEFAULT=8e3,s.create=function(t){if("string"==typeof t){var e=new i;return e.src=t,e}if(t instanceof s)return t;if(t instanceof Object&&t.src)return null==t.loadTimeout&&(t.loadTimeout=s.LOAD_TIMEOUT_DEFAULT),t;throw new Error("Type not recognized.")},t.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=s}(),function(){var t={isBinary:function(t){switch(t){case createjs.Types.IMAGE:case createjs.Types.BINARY:return!0;default:return!1}},isText:function(t){switch(t){case createjs.Types.TEXT:case createjs.Types.JSON:case createjs.Types.MANIFEST:case createjs.Types.XML:case createjs.Types.CSS:case createjs.Types.SVG:case createjs.Types.JAVASCRIPT:case createjs.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.Types.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.Types.IMAGE;case"ogg":case"mp3":case"webm":return createjs.Types.SOUND;case"mp4":case"webm":case"ts":return createjs.Types.VIDEO;case"json":return createjs.Types.JSON;case"xml":return createjs.Types.XML;case"css":return createjs.Types.CSS;case"js":return createjs.Types.JAVASCRIPT;case"svg":return createjs.Types.SVG;default:return createjs.Types.TEXT}}};createjs.RequestUtils=t}(),function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;try{Object.defineProperties(i,{POST:{get:createjs.deprecate(function(){return createjs.Methods.POST},"AbstractLoader.POST")},GET:{get:createjs.deprecate(function(){return createjs.Methods.GET},"AbstractLoader.GET")},BINARY:{get:createjs.deprecate(function(){return createjs.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate(function(){return createjs.Types.CSS},"AbstractLoader.CSS")},FONT:{get:createjs.deprecate(function(){return createjs.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate(function(){return createjs.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate(function(){return createjs.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate(function(){return createjs.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate(function(){return createjs.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate(function(){return createjs.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate(function(){return createjs.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate(function(){return createjs.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate(function(){return createjs.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate(function(){return createjs.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate(function(){return createjs.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate(function(){return createjs.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:createjs.deprecate(function(){return createjs.Types.XML},"AbstractLoader.XML")}})}catch(t){}e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){var e;this._isCanceled()||(e=null,"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e))},e._sendComplete=function(){var t;this._isCanceled()||(this.loaded=!0,(t=new createjs.Event("complete")).rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t))},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e,i;return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(e=window.URL||window.webkitURL,i=t.getResult(!0),t.getTag().src=e.createObjectURL(i)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t){this._item=t}var e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(createjs.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){!t||0<t.loaded&&0==t.total||(t=new createjs.ProgressEvent(t.loaded,t.total),this.dispatchEvent(t))},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(createjs.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){!t||0<t.loaded&&0==t.total||(t=new createjs.ProgressEvent(t.loaded,t.total),this.dispatchEvent(t))},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)this._handleError(e);else{if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder&&((e=new BlobBuilder).append(this._response),this._response=e.getBlob())}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);return 400<=t&&t<=599?new Error(t):0==t&&/^https?:/.test(location.protocol)?new Error(0):null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.URLUtils.isCrossDomain(t),i={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,e&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var n=0,a=s.ACTIVEX_VERSIONS.length;n<a;n++){var o=s.ACTIVEX_VERSIONS[n];try{r=new ActiveXObject(o);break}catch(t){}}if(null==r)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var h=null,h=t.method==createjs.Methods.GET?createjs.URLUtils.buildURI(t.src,t.values):t.src;if(r.open(t.method||createjs.Methods.GET,h,!0),e&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.Methods.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var c in t.headers)i[c]=t.headers[c];for(c in i)r.setRequestHeader(c,i[c]);return r instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(r.withCredentials=t.withCredentials),this._request=r,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.FontLoader,createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),h=t;try{Object.defineProperties(h,{POST:{get:createjs.deprecate(function(){return createjs.Methods.POST},"AbstractLoader.POST")},GET:{get:createjs.deprecate(function(){return createjs.Methods.GET},"AbstractLoader.GET")},BINARY:{get:createjs.deprecate(function(){return createjs.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate(function(){return createjs.Types.CSS},"AbstractLoader.CSS")},FONT:{get:createjs.deprecate(function(){return createjs.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate(function(){return createjs.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate(function(){return createjs.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate(function(){return createjs.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate(function(){return createjs.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate(function(){return createjs.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate(function(){return createjs.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate(function(){return createjs.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate(function(){return createjs.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate(function(){return createjs.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate(function(){return createjs.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate(function(){return createjs.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:createjs.deprecate(function(){return createjs.Types.XML},"AbstractLoader.XML")}})}catch(t){}e.init=function(t,e,i){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){t=this._availableLoaders.indexOf(t);-1!=t&&t<this._defaultLoaderLength-1&&this._availableLoaders.splice(t,1)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(t&&!Array.isArray(t))e=[t];else if(t)e=t;else if(0<arguments.length)return;var i=!1;if(e){for(;e.length;){for(var s=e.pop(),r=this.getResult(s),n=this._loadQueue.length-1;0<=n;n--)if((a=this._loadQueue[n].getItem()).id==s||a.src==s){this._loadQueue.splice(n,1)[0].cancel();break}for(n=this._loadQueueBackup.length-1;0<=n;n--)if((a=this._loadQueueBackup[n].getItem()).id==s||a.src==s){this._loadQueueBackup.splice(n,1)[0].cancel();break}if(r)this._disposeItem(this.getItem(s));else for(var n=this._currentLoads.length-1;0<=n;n--){var a=this._currentLoads[n].getItem();if(a.id==s||a.src==s){this._currentLoads.splice(n,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{for(var o in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){for(var t in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,s=this._loadQueueBackup.length;i<s;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,s=e.types.length;i<s;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,s=e.extensions.length;i<s;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&0<this._loadQueue.length&&this._loadNext()},e.loadFile=function(t,e,i){null!=t?(this._addItem(t,null,i),!1!==e?this.setPaused(!1):this.setPaused(!0)):(e=new createjs.ErrorEvent("PRELOAD_NO_FILE"),this._sendError(e))},e.loadManifest=function(t,e,i){var s=null,r=null;if(Array.isArray(t)){if(0==t.length){var n=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(n)}s=t}else if("string"==typeof t)s=[{src:t,type:h.MANIFEST}];else{if("object"!=typeof t){n=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(n)}void 0!==t.src?(null==t.type?t.type=h.MANIFEST:t.type!=h.MANIFEST&&(n=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE"),this._sendError(n)),s=[t]):void 0!==t.manifest&&(s=t.manifest,r=t.path)}for(var a=0,o=s.length;a<o;a++)this._addItem(s[a],r,i);!1!==e?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){t=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==t)return null;t=t.id;return(e&&this._loadedRawResults[t]?this._loadedRawResults:this._loadedResults)[t]},e.getItems=function(t){var e,i=[];for(e in this._loadItemsById){var s=this._loadItemsById[e],r=this.getResult(e);!0===t&&null==r||i.push({item:s,result:r,rawResult:this.getResult(e,!0)})}return i},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){e=this._createLoadItem(t,e,i);null==e||null!=(i=this._createLoader(e))&&("plugins"in i&&(i.plugins=this._plugins),e._loader=i,this._loadQueue.push(i),this._loadQueueBackup.push(i),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&e.type==createjs.Types.JAVASCRIPT||!0===e.maintainOrder)&&(this._scriptOrder.push(e),this._loadedScripts.push(null)))},e._createLoadItem=function(t,e,i){var s=createjs.LoadItem.create(t);if(null==s)return null;t="",i=i||this._basePath;if(s.src instanceof Object){if(!s.type)return null;e?(t=e,n=createjs.URLUtils.parseURI(e),null==i||n.absolute||n.relative||(t=i+t)):null!=i&&(t=i)}else{var r=createjs.URLUtils.parseURI(s.src);r.extension&&(s.ext=r.extension),null==s.type&&(s.type=createjs.RequestUtils.getTypeByExtension(s.ext));var n,a=s.src;r.absolute||r.relative||(e?(t=e,n=createjs.URLUtils.parseURI(e),a=e+a,null==i||n.absolute||n.relative||(t=i+t)):null!=i&&(t=i)),s.src=t+s.src}s.path=t,void 0!==s.id&&null!==s.id&&""!==s.id||(s.id=a);a=this._typeCallbacks[s.type]||this._extensionCallbacks[s.ext];if(a){a=a.callback.call(a.scope,s,this);if(!1===a)return null;!0===a||null!=a&&(s._loader=a),null!=(r=createjs.URLUtils.parseURI(s.src)).extension&&(s.ext=r.extension)}return this._loadItemsById[s.id]=s,null==(this._loadItemsBySrc[s.src]=s).crossOrigin&&(s.crossOrigin=this._crossOrigin),s},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var s=this._availableLoaders[i];if(s&&s.canLoadItem(t))return new s(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){t=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(t)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();t=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(t),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),s=e.getResult();this._loadedResults[i.id]=s;t=e.getResult(!0);null!=t&&t!==s&&(this._loadedRawResults[i.id]=t),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var s=e[i].item;this._loadItemsBySrc[s.src]=s,this._loadItemsById[s.id]=s,this._loadedResults[s.id]=e[i].result,this._loadedRawResults[s.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.Types.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);t=createjs.indexOf(this._scriptOrder,i);return-1==t?!1:(this._loadedScripts[t]=!0===e||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;e<t;e++){var i,s=this._loadedScripts[e];if(null===s)break;!0!==s&&(i=this._loadedResults[s.id],s.type==createjs.Types.JAVASCRIPT&&createjs.DomUtils.appendToHead(i),i=s._loader,this._processFinishedLoad(s,i),this._loadedScripts[e]=!0)}},e._processFinishedLoad=function(t,e){var i;this._numItemsLoaded++,this.maintainScriptOrder||t.type!=createjs.Types.JAVASCRIPT||(i=e.getTag(),createjs.DomUtils.appendToHead(i)),this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;t=t.getItem();if(t.type!=createjs.Types.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var e=this._scriptOrder.indexOf(t),i=0;i<e;){if(null==this._loadedScripts[i])return!1;i++}return this._currentlyLoadingScript=!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;i<e;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){t=t.getItem();t&&delete t._loader},e._handleProgress=function(t){t=t.target;this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(0<e){for(var i=0,s=0,r=this._currentLoads.length;s<r;s++)i+=this._currentLoads[s].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){var i;this._isCanceled()||this._paused||this.hasEventListener("fileprogress")&&((i=new createjs.Event("fileprogress")).progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i))},e._sendFileComplete=function(t,e){var i;this._isCanceled()||this._paused||((i=new createjs.Event("fileload")).loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i))},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.Types.TEXT)}createjs.extend(t,createjs.AbstractLoader),t.canLoadItem=function(t){return t.type==createjs.Types.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.Types.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=e?createjs.Elements.style():createjs.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.CSS},e._formatResult=function(t){var e;return this._preferXHR?(e=t.getTag()).styleSheet?e.styleSheet.cssText=t.getResult(!0):(t=createjs.Elements.text(t.getResult(!0)),e.appendChild(t)):e=this._tag,createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function h(t,e){this.AbstractLoader_constructor(t,e,t.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=void 0===t.injectCSS||t.injectCSS,this.dispatchEvent("initialize")}var t=createjs.extend(h,createjs.AbstractLoader);h.canLoadItem=function(t){return t.type==createjs.Types.FONT||t.type==createjs.Types.FONTCSS},h.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",h._ctx=document.createElement("canvas").getContext("2d"),h._referenceFonts=["serif","monospace"],h.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,h.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,h.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},h.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},h.WATCH_DURATION=10,t.load=function(){var t;if(this.type==createjs.Types.FONTCSS){if(!this._watchCSS())return void this.AbstractLoader_load()}else this._item.src instanceof Array?this._watchFontArray():(t=this._defFromSrc(this._item.src),this._watchFont(t),this._injectStyleTag(this._cssFromDef(t)));this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},t._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT"))},t._createRequest=function(){return this._request},t.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(t)}},t._watchCSS=function(){var t=this._item.src;return t instanceof HTMLStyleElement&&(this._injectCSS&&!t.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(t),this._injectCSS=!1,t="\n"+t.textContent),-1!==t.search(/\n|\r|@font-face/i)?(this._parseCSS(t),!0):(this._request=new createjs.XHRRequest(this._item),!1)},t._parseCSS=function(t){for(var e=/@font-face\s*\{([^}]+)}/g;;){var i=e.exec(t);if(!i)break;this._watchFont(this._parseFontFace(i[1]))}this._injectStyleTag(t)},t._watchFontArray=function(){for(var t=this._item.src,e="",i=t.length-1;0<=i;i--){var s=t[i],s="string"==typeof s?this._defFromSrc(s):this._defFromObj(s);this._watchFont(s),e+=this._cssFromDef(s)+"\n"}this._injectStyleTag(e)},t._injectStyleTag=function(t){var e,i;this._injectCSS&&(e=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i))},t._parseFontFace=function(t){var e=this._getCSSValue(t,"font-family"),i=this._getCSSValue(t,"src");return e&&i?this._defFromObj({family:e,src:i,style:this._getCSSValue(t,"font-style"),weight:this._getCSSValue(t,"font-weight")}):null},t._watchFont=function(t){t&&!this._faces[t.id]&&(this._faces[t.id]=t,this._watched.push(t),this._count++,this._calculateReferenceSizes(t),this._startWatching())},t._startWatching=function(){null==this._watchInterval&&(this._watchInterval=setInterval(createjs.proxy(this._watch,this),h.WATCH_DURATION))},t._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},t._watch=function(){for(var t=this._watched,e=h._referenceFonts,i=t.length,s=i-1;0<=s;s--)for(var r=t[s],n=r.refs,a=n.length-1;0<=a;a--)if(this._getTextWidth(r.family+","+e[a],r.weight,r.style)!=n[a]){var o=new createjs.Event("fileload");r.type="font-family",o.item=r,this.dispatchEvent(o),t.splice(s,1);break}i!==t.length&&(o=new createjs.ProgressEvent(this._count-t.length,this._count),this.dispatchEvent(o)),0===i&&(this._stopWatching(),this._sendComplete())},t._calculateReferenceSizes=function(t){for(var e=h._referenceFonts,i=t.refs=[],s=0;s<e.length;s++)i[s]=this._getTextWidth(e[s],t.weight,t.style)},t._defFromSrc=function(t){var e=/[- ._]+/g,i=t,s=null,r=i.search(/[?#]/);-1!==r&&(i=i.substr(0,r)),-1!==(r=i.lastIndexOf("."))&&(s=i.substr(r+1),i=i.substr(0,r)),-1!==(r=i.lastIndexOf("/"))&&(i=i.substr(r+1));var n=i,a=n.match(h.WEIGHT_REGEX);a&&(a=a[0],n=n.replace(a,""),a=a.replace(e,"").toLowerCase());r=i.match(h.STYLE_REGEX);r&&(n=n.replace(r[0],""),r="italic"),n=n.replace(e,"");t="local('"+i.replace(e," ")+"'), url('"+t+"')",s=h.FONT_FORMAT[s];return s&&(t+=" format('"+s+"')"),this._defFromObj({family:n,weight:h.FONT_WEIGHT[a]||a,style:r,src:t})},t._defFromObj=function(t){t={family:t.family,src:t.src,style:t.style||"normal",weight:t.weight||"normal"};return t.id=t.family+";"+t.style+";"+t.weight,t},t._cssFromDef=function(t){return"@font-face {\n\tfont-family: '"+t.family+"';\n\tfont-style: "+t.style+";\n\tfont-weight: "+t.weight+";\n\tsrc: "+t.src+";\n}"},t._getTextWidth=function(t,e,i){var s=h._ctx;return s.font=i+" "+e+" 72px "+t,s.measureText(h.sampleText).width},t._getCSSValue=function(t,e){t=new RegExp(e+":s*([^;}]+?)s*[;}]").exec(t);return t&&t[1]?t[1]:null},createjs.FontLoader=createjs.promote(h,"AbstractLoader")}(),function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.DomUtils.isImageTag(t)?this._tag=t:createjs.DomUtils.isImageTag(t.src)?this._tag=t.src:createjs.DomUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=createjs.Elements.img(),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.IMAGE},e.load=function(){var t;""!=this._tag.src&&this._tag.complete?this._sendComplete():(1==(t=this._item.crossOrigin)&&(t="Anonymous"),null==t||createjs.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=t),this.AbstractLoader_load())},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){return this._formatImage},e._formatImage=function(t,e){var i=this._tag,s=window.URL||window.webkitURL;this._preferXHR&&(s?(this.getResult(!0)&&(s=s.createObjectURL(this.getResult(!0)),i.src=s),i.addEventListener("load",this._cleanUpURL,!1),i.addEventListener("error",this._cleanUpURL,!1)):i.src=this._item.src),i.complete?t(i):(i.onload=createjs.proxy(function(){t(this._tag),i.onload=i.onerror=null},this),i.onerror=createjs.proxy(function(t){e(new createjs.ErrorEvent("IMAGE_FORMAT",null,t)),i.onload=i.onerror=null},this))},e._cleanUpURL=function(t){(window.URL||window.webkitURL).revokeObjectURL(t.target.src)},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(createjs.Elements.script())}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.Types.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.Types.JSONP),this.setTag(createjs.Elements.script()),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),createjs.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){createjs.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.Types.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=new(null!=t?createjs.JSONPLoader:createjs.JSONLoader)(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue(this._preferXHR);e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,s=this.plugins.length;i<s;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.Types.SOUND),createjs.DomUtils.isAudioTag(t)||createjs.DomUtils.isAudioTag(t.src)?this._tag=t:createjs.DomUtils.isAudioTag(t.tag)&&(this._tag=createjs.DomUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.Types.SOUND},e._createTag=function(t){var e=createjs.Elements.audio();return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.Types.VIDEO),createjs.DomUtils.isVideoTag(t)||createjs.DomUtils.isVideoTag(t.src)?(this.setTag(createjs.DomUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=t;createjs.extend(t,createjs.AbstractMediaLoader)._createTag=function(){return createjs.Elements.video()},e.canLoadItem=function(t){return t.type==createjs.Types.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.Types.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.Types.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=new(null!=t?createjs.JSONPLoader:createjs.JSONLoader)(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){var e;t&&t.images&&((e=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin)).on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images))},e._handleManifestFileLoad=function(t){var e,i=t.result;null!=i&&(t=(e=this.getResult().images).indexOf(t.item.src),e[t]=i)},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(createjs.Elements.svg()):(this.setTag(createjs.Elements.object()),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0)),t=t.getTag();if(!this._preferXHR&&document.body.contains(t)&&document.body.removeChild(t),null==e.documentElement)return e;e=e.documentElement;return document.importNode&&(e=document.importNode(e,!0)),t.appendChild(e),t},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.Types.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.Types.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0))},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="NEXT",t.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=-1<e.indexOf("IEMobile")||-1<e.indexOf("Windows Phone"),t.isFirefox=-1<e.indexOf("Firefox"),t.isOpera=null!=window.opera,t.isChrome=-1<e.indexOf("Chrome"),t.isIOS=(-1<e.indexOf("iPod")||-1<e.indexOf("iPhone")||-1<e.indexOf("iPad"))&&!t.isWindowPhone,t.isAndroid=-1<e.indexOf("Android")&&!t.isWindowPhone,t.isBlackberry=-1<e.indexOf("Blackberry"),t.isEdge=-1<e.indexOf("Edg"),createjs.BrowserDetect=t}(),function(){"use strict";function t(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null}var e=t.prototype={},i=t;i.create=function(t){if("string"==typeof t)return console&&(console.warn||console.log)("Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info."),(new createjs.PlayPropsConfig).set({interrupt:t});if(null==t||t instanceof i||t instanceof Object)return(new createjs.PlayPropsConfig).set(t);if(null==t)throw new Error("PlayProps configuration not recognized.")},e.set=function(t){if(null!=t)for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),function(){"use strict";function a(){throw"Sound cannot be instantiated"}var o=a;function h(t,e){this.init(t,e)}o.INTERRUPT_ANY="any",o.INTERRUPT_EARLY="early",o.INTERRUPT_LATE="late",o.INTERRUPT_NONE="none",o.PLAY_INITED="playInited",o.PLAY_SUCCEEDED="playSucceeded",o.PLAY_INTERRUPTED="playInterrupted",o.PLAY_FINISHED="playFinished",o.PLAY_FAILED="playFailed",o.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],o.EXTENSION_MAP={m4a:"mp4"},o.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,o.defaultInterruptBehavior=o.INTERRUPT_NONE,o.alternateExtensions=[],o.activePlugin=null,o._masterVolume=1,o._getMasterVolume=function(){return this._masterVolume},o.getVolume=createjs.deprecate(o._getMasterVolume,"Sound.getVolume"),o._setMasterVolume=function(t){if(null!=Number(t)&&(t=Math.max(0,Math.min(1,t)),o._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t)))for(var e=this._instances,i=0,s=e.length;i<s;i++)e[i].setMasterVolume(t)},o.setVolume=createjs.deprecate(o._setMasterVolume,"Sound.setVolume"),o._masterMute=!1,o._getMute=function(){return this._masterMute},o.getMute=createjs.deprecate(o._getMute,"Sound.getMute"),o._setMute=function(t){if(null!=t&&(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t)))for(var e=this._instances,i=0,s=e.length;i<s;i++)e[i].setMasterMute(t)},o.setMute=createjs.deprecate(o._setMute,"Sound.setMute"),o._getCapabilities=function(){return null==o.activePlugin?null:o.activePlugin._capabilities},o.getCapabilities=createjs.deprecate(o._getCapabilities,"Sound.getCapabilities"),Object.defineProperties(o,{volume:{get:o._getMasterVolume,set:o._setMasterVolume},muted:{get:o._getMute,set:o._setMute},capabilities:{get:o._getCapabilities}}),o._pluginsRegistered=!1,o._lastID=0,o._instances=[],o._idHash={},o._preloadHash={},o._defaultPlayPropsHash={},o.addEventListener=null,o.removeEventListener=null,o.removeAllEventListeners=null,o.dispatchEvent=null,o.hasEventListener=null,o._listeners=null,createjs.EventDispatcher.initialize(o),o.getPreloadHandlers=function(){return{callback:createjs.proxy(o.initLoad,o),types:["sound"],extensions:o.SUPPORTED_EXTENSIONS}},o._handleLoadComplete=function(t){var e=t.target.getItem().src;if(o._preloadHash[e])for(var i=0,s=o._preloadHash[e].length;i<s;i++){var r=o._preloadHash[e][i];o._preloadHash[e][i]=!0,o.hasEventListener("fileload")&&((t=new createjs.Event("fileload")).src=r.src,t.id=r.id,t.data=r.data,t.sprite=r.sprite,o.dispatchEvent(t))}},o._handleLoadError=function(t){var e=t.target.getItem().src;if(o._preloadHash[e])for(var i=0,s=o._preloadHash[e].length;i<s;i++){var r=o._preloadHash[e][i];o._preloadHash[e][i]=!1,o.hasEventListener("fileerror")&&((t=new createjs.Event("fileerror")).src=r.src,t.id=r.id,t.data=r.data,t.sprite=r.sprite,o.dispatchEvent(t))}},o._registerPlugin=function(t){return!!t.isSupported()&&(o.activePlugin=new t,!0)},o.registerPlugins=function(t){o._pluginsRegistered=!0;for(var e=0,i=t.length;e<i;e++)if(o._registerPlugin(t[e]))return!0;return!1},o.initializeDefaultPlugins=function(){return null!=o.activePlugin||!o._pluginsRegistered&&!!o.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},o.isReady=function(){return null!=o.activePlugin},o.initLoad=function(t){return"video"==t.type||o._registerSound(t)},o._registerSound=function(t){if(!o.initializeDefaultPlugins())return!1;if(t.src instanceof Object?(n=o._parseSrc(t.src)).src=t.path+n.src:n=o._parsePath(t.src),null==n)return!1;t.src=n.src,t.type="sound";var e=t.data,i=null;if(null!=e&&(isNaN(e.channels)?isNaN(e)||(i=parseInt(e)):i=parseInt(e.channels),e.audioSprite))for(var s,r=e.audioSprite.length;r--;)s=e.audioSprite[r],o._idHash[s.id]={src:t.src,startTime:parseInt(s.startTime),duration:parseInt(s.duration)},s.defaultPlayProps&&(o._defaultPlayPropsHash[s.id]=createjs.PlayPropsConfig.create(s.defaultPlayProps));null!=t.id&&(o._idHash[t.id]={src:t.src});var n=o.activePlugin.register(t);return h.create(t.src,i),null!=e&&isNaN(e)?t.data.channels=i||h.maxPerChannel():t.data=i||h.maxPerChannel(),n.type&&(t.type=n.type),t.defaultPlayProps&&(o._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),n},o.registerSound=function(t,e,i,s,r){r={src:t,id:e,data:i,defaultPlayProps:r};t instanceof Object&&t.src&&(s=e,r=t),null==((r=createjs.LoadItem.create(r)).path=s)||r.src instanceof Object||(r.src=s+r.src);s=o._registerSound(r);if(!s)return!1;if(o._preloadHash[r.src]||(o._preloadHash[r.src]=[]),o._preloadHash[r.src].push(r),1==o._preloadHash[r.src].length)s.on("complete",this._handleLoadComplete,this),s.on("error",this._handleLoadError,this),o.activePlugin.preload(s);else if(1==o._preloadHash[r.src][0])return!0;return r},o.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var s=0,r=t.length;s<r;s++)i[s]=createjs.Sound.registerSound(t[s].src,t[s].id,t[s].data,e,t[s].defaultPlayProps);return i},o.removeSound=function(t,e){if(null==o.activePlugin)return!1;var i,s;if(t instanceof Object&&t.src&&(t=t.src),null==(i=t instanceof Object?o._parseSrc(t):(t=o._getSrcById(t).src,o._parsePath(t))))return!1;for(s in t=i.src,null!=e&&(t=e+t),o._idHash)o._idHash[s].src==t&&delete o._idHash[s];return h.removeSrc(t),delete o._preloadHash[t],o.activePlugin.removeSound(t),!0},o.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var s=0,r=t.length;s<r;s++)i[s]=createjs.Sound.removeSound(t[s].src,e);return i},o.removeAllSounds=function(){o._idHash={},o._preloadHash={},h.removeAll(),o.activePlugin&&o.activePlugin.removeAllSounds()},o.loadComplete=function(t){if(!o.isReady())return!1;var e=o._parsePath(t);return t=(e?o._getSrcById(e.src):o._getSrcById(t)).src,null!=o._preloadHash[t]&&1==o._preloadHash[t][0]},o._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(o.FILE_PATTERN);if(null==e)return!1;for(var i=e[4],s=e[5],r=o.capabilities,n=0;!r[s];)if(s=o.alternateExtensions[n++],n>o.alternateExtensions.length)return null;return{name:i,src:t=t.replace("."+e[5],"."+s),extension:s}},o._parseSrc=function(t){var e,i={name:void 0,src:void 0,extension:void 0},s=o.capabilities;for(e in t)if(t.hasOwnProperty(e)&&s[e]){i.src=t[e],i.extension=e;break}if(!i.src)return!1;var r=i.src.lastIndexOf("/");return i.name=-1!=r?i.src.slice(r+1):i.src,i},o.play=function(t,e){var i;createjs.WebAudioPlugin&&createjs.WebAudioPlugin.context&&("interrupted"!==(i=createjs.WebAudioPlugin.context).state&&"suspended"!==i.state||i.resume());e=createjs.PlayPropsConfig.create(e),t=o.createInstance(t,e.startTime,e.duration);return i&&(t.audioCtx=i),o._playInstance(t,e)||t._playFailed(),t},o.createInstance=function(t,e,i){if(!o.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,e,i);var s=o._defaultPlayPropsHash[t];t=o._getSrcById(t);var r=o._parsePath(t.src),n=null;return null!=r&&null!=r.src?(h.create(r.src),null==e&&(e=t.startTime),n=o.activePlugin.create(r.src,e,i||t.duration),(s=s||o._defaultPlayPropsHash[r.src])&&n.applyPlayProps(s)):n=new createjs.DefaultSoundInstance(t,e,i),n.uniqueId=o._lastID++,n},o.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},o.setDefaultPlayProps=function(t,e){t=o._getSrcById(t),o._defaultPlayPropsHash[o._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},o.getDefaultPlayProps=function(t){return t=o._getSrcById(t),o._defaultPlayPropsHash[o._parsePath(t.src).src]},o._playInstance=function(t,e){var i=o._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=i.interrupt||o.defaultInterruptBehavior),null==e.delay&&(e.delay=i.delay||0),null==e.offset&&(e.offset=t.position),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){if(!o._beginPlaying(t,e))return!1}else{i=setTimeout(function(){o._beginPlaying(t,e)},e.delay);t.delayTimeoutId=i}return this._instances.push(t),!0},o._beginPlaying=function(t,e){if(!h.add(t,e.interrupt))return!1;if(t._beginPlaying(e))return!0;t=createjs.indexOf(this._instances,t);return-1<t&&this._instances.splice(t,1),!1},o._getSrcById=function(t){return o._idHash[t]||{src:t}},o._playFinished=function(t){h.remove(t);t=createjs.indexOf(this._instances,t);-1<t&&this._instances.splice(t,1)},createjs.Sound=a,h.channels={},h.create=function(t,e){return null==h.get(t)&&(h.channels[t]=new h(t,e),!0)},h.removeSrc=function(t){var e=h.get(t);return null!=e&&(e._removeAll(),delete h.channels[t],!0)},h.removeAll=function(){for(var t in h.channels)h.channels[t]._removeAll();h.channels={}},h.add=function(t,e){var i=h.get(t.src);return null!=i&&i._add(t,e)},h.remove=function(t){var e=h.get(t.src);return null!=e&&(e._remove(t),!0)},h.maxPerChannel=function(){return t.maxDefault},h.get=function(t){return h.channels[t]};var t=h.prototype;t.constructor=h,t.src=null,t.max=null,t.maxDefault=100,t.length=0,t.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},t._get=function(t){return this._instances[t]},t._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},t._remove=function(t){t=createjs.indexOf(this._instances,t);return-1!=t&&(this._instances.splice(t,1),this.length--,!0)},t._removeAll=function(){for(var t=this.length-1;0<=t;t--)this._instances[t].stop()},t._getSlot=function(t,e){var i,s;if(t!=a.INTERRUPT_NONE&&null==(s=this._get(0)))return!0;for(var r=0,n=this.max;r<n;r++){if(null==(i=this._get(r)))return!0;if(i.playState==a.PLAY_FINISHED||i.playState==a.PLAY_INTERRUPTED||i.playState==a.PLAY_FAILED){s=i;break}t!=a.INTERRUPT_NONE&&(t==a.INTERRUPT_EARLY&&i.position<s.position||t==a.INTERRUPT_LATE&&i.position>s.position)&&(s=i)}return null!=s&&(s._interrupt(),this._remove(s),!0)},t.toString=function(){return"[Sound SoundChannel]"}}(),function(){"use strict";function t(t,e,i,s){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this._getVolume,set:this._setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this._getPan,set:this._setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this._getStartTime,set:this._setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this._getDuration,set:this._setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this._getPlaybackResource,set:this._setPlaybackResource}),!1!==s&&!0!==s&&this._setPlaybackResource(s),this._position=0,Object.defineProperty(this,"position",{get:this._getPosition,set:this._setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this._getLoop,set:this._setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this._getMuted,set:this._setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this._getPaused,set:this._setPaused})}var e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t){t=createjs.PlayPropsConfig.create(t);return this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(t),void(this._paused&&this._setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,t),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this._setPosition(t.offset),null!=t.loop&&this._setLoop(t.loop),null!=t.volume&&this._setVolume(t.volume),null!=t.pan&&this._setPan(t.pan),null!=t.startTime&&(this._setStartTime(t.startTime),this._setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e._getPaused=function(){return this._paused},e._setPaused=function(t){if(!(!0!==t&&!1!==t||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED))return(this._paused=t)?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},e._setVolume=function(t){return t==this._volume||(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume()),this},e._getVolume=function(){return this._volume},e._setMuted=function(t){if(!0===t||!1===t)return this._muted=t,this._updateVolume(),this},e._getMuted=function(){return this._muted},e._setPan=function(t){return t==this._pan||(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan()),this},e._getPan=function(){return this._pan},e._getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e._setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e._getStartTime=function(){return this._startTime},e._setStartTime=function(t){return t==this._startTime||(this._startTime=Math.max(0,t||0),this._updateStartTime()),this},e._getDuration=function(){return this._duration},e._setDuration=function(t){return t==this._duration||(this._duration=Math.max(0,t||0),this._updateDuration()),this},e._setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._playbackResource&&this._setDurationFromSource(),this},e._getPlaybackResource=function(){return this._playbackResource},e._getLoop=function(){return this._loop},e._setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){t=new createjs.Event(t);this.dispatchEvent(t)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this._setPosition(t.offset),this._setLoop(t.loop),this._setVolume(t.volume),this._setPan(t.pan),null!=t.startTime&&(this._setStartTime(t.startTime),this._setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){if((this._position=0)!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),function(){"use strict";function t(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass}var e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],(e=new this._loaderClass(t)).on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;)this._soundInstances[t][e].destroy();delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));i=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t]&&this._soundInstances[t].push(i),i.setMasterVolume&&i.setMasterVolume(createjs.Sound.volume),i.setMasterMute&&i.setMasterMute(createjs.Sound.muted),i},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,s=this._soundInstances[e].length;i<s;i++)this._soundInstances[e][i].setPlaybackResource(this._audioSources[e]),this._soundInstances[e]=null},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),function(){"use strict";function e(t){this.AbstractLoader_constructor(t,!0,createjs.Types.SOUND)}var t=createjs.extend(e,createjs.AbstractLoader);e.context=null,t.toString=function(){return"[WebAudioLoader]"},t._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},t._sendComplete=function(t){e.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},t._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(e,"AbstractLoader")}(),function(){"use strict";function t(t,e,i,s){this.AbstractSoundInstance_constructor(t,e,i,s),this.gainNode=r.context.createGain(),this.panNode=r.context.createPanner(),this.panNode.panningModel=r._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),r=t;r.context=null,r._scratchBuffer=null,r.destinationNode=null,r._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){if(t.stop(0),t.disconnect(0),createjs.BrowserDetect.isIOS)try{t.buffer=r._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(r.destinationNode);var e=.001*this._duration,i=Math.min(.001*Math.max(0,this._position),e);this.sourceNode=this._createAndPlayAudioNode(r.context.currentTime-e,i),this._playbackStartTime=this.sourceNode.startTime-i,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-i)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var i=r.context.createBufferSource();i.buffer=this.playbackResource,i.connect(this.panNode);var s=.001*this._duration;return i.startTime=t+s,i.start(i.startTime,e+.001*this._startTime,s-e),i},e._pause=function(){this._position=1e3*(r.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(r.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=o._panningModel,this.context=o.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=o._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),o=t;o._capabilities=null,o._panningModel="equalpower",o.context=null,o._scratchBuffer=null,o._unlocked=!1,o.DEFAULT_SAMPLE_RATE=44100,o.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(o._generateCapabilities(),null!=o.context)},o.playEmptySound=function(){var t;null!=o.context&&((t=o.context.createBufferSource()).buffer=o._scratchBuffer,t.connect(o.context.destination),t.start(0,0,0))},o._isFileXHRSupported=function(){return document.location.host},o._generateCapabilities=function(){if(null==o._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==o.context&&(o.context=o._createAudioContext(),null==o.context))return null;null==o._scratchBuffer&&(o._scratchBuffer=o.context.createBuffer(1,1,22050)),o._compatibilitySetUp(),"ontouchstart"in window&&"running"!=o.context.state&&(o._unlock(),document.addEventListener("mousedown",o._unlock,!0),document.addEventListener("touchstart",o._unlock,!0),document.addEventListener("touchend",o._unlock,!0)),o._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,i=createjs.Sound.EXTENSION_MAP,s=0,r=e.length;s<r;s++){var n=e[s],a=i[n]||n;o._capabilities[n]="no"!=t.canPlayType("audio/"+n)&&""!=t.canPlayType("audio/"+n)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}o.context.destination.numberOfChannels<2&&(o._capabilities.panning=!1)}},o._createAudioContext=function(){var t=window.AudioContext||window.webkitAudioContext;if(null==t)return null;var e,i,s=new t;return console.warn("The AudioContext is ready"),/(iPhone|iPad)/i.test(navigator.userAgent)&&s.sampleRate!==o.DEFAULT_SAMPLE_RATE&&(e=s.createBuffer(1,1,o.DEFAULT_SAMPLE_RATE),(i=s.createBufferSource()).buffer=e,i.connect(s.destination),i.start(0),i.disconnect(),s.close(),s=new t),s},o._compatibilitySetUp=function(){var t;o._panningModel="equalpower",o.context.createGain||(o.context.createGain=o.context.createGainNode,(t=o.context.createBufferSource()).__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,o._panningModel=0)},o._unlock=function(){o._unlocked||(o.playEmptySound(),"running"==o.context.state&&(document.removeEventListener("mousedown",o._unlock,!0),document.removeEventListener("touchend",o._unlock,!0),document.removeEventListener("touchstart",o._unlock,!0),o._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=o._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}var i=t;function e(t){this._tags=[]}i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get()).src=t:i._tagUsed[t]?(e=i._tagPool.get()).src=t:i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null!=e&&(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){t=i._tags[t];return null!=t&&t.duration?1e3*t.duration:0},createjs.HTMLAudioTagPool=t;var s=e.prototype;s.constructor=e,s.get=function(){var t=0==this._tags.length?this._createTag():this._tags.pop();return null==t.parentNode&&document.body.appendChild(t),t},s.set=function(t){-1==createjs.indexOf(this._tags,t)&&(this._tags.src=null,this._tags.push(t))},s.toString=function(){return"[TagPool]"},s._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),function(){"use strict";function t(t,e,i,s){this.AbstractSoundInstance_constructor(t,e,i,s),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){var t;null==this._playbackResource||(t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume)!=this._playbackResource.volume&&(this._playbackResource.volume=t)},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._capabilities=o._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),o=t;o.MAX_INSTANCES=30,o._AUDIO_READY="canplaythrough",o._AUDIO_ENDED="ended",o._AUDIO_SEEKED="seeked",o._AUDIO_STALLED="stalled",o._TIME_UPDATE="timeupdate",o._capabilities=null,o.isSupported=function(){return o._generateCapabilities(),null!=o._capabilities},o._generateCapabilities=function(){if(null==o._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;o._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,i=createjs.Sound.EXTENSION_MAP,s=0,r=e.length;s<r;s++){var n=e[s],a=i[n]||n;o._capabilities[n]="no"!=t.canPlayType("audio/"+n)&&""!=t.canPlayType("audio/"+n)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),t=this.AbstractPlugin_register(t);return t.setTag(e),t},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){i=this.AbstractPlugin_create(t,e,i);return i.playbackResource=null,i},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,this._status=-1,this._lastTick=0,t&&(this.useTicks=!!t.useTicks,this.ignoreGlobalPause=!!t.ignoreGlobalPause,this.loop=!0===t.loop?-1:t.loop||0,this.reversed=!!t.reversed,this.bounce=!!t.bounce,this.timeScale=t.timeScale||1,t.onChange&&this.addEventListener("change",t.onChange),t.onComplete&&this.addEventListener("complete",t.onComplete))}var e=createjs.extend(t,createjs.EventDispatcher);e._setPaused=function(t){return createjs.Tween._register(this,t),this},e.setPaused=createjs.deprecate(e._setPaused,"AbstractTween.setPaused"),e._getPaused=function(){return this._paused},e.getPaused=createjs.deprecate(e._getPaused,"AbstactTween.getPaused"),e._getCurrentLabel=function(t){var e=this.getLabels();null==t&&(t=this.position);for(var i=0,s=e.length;i<s&&!(t<e[i].position);i++);return 0===i?null:e[i-1].label},e.getCurrentLabel=createjs.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(t){}e.advance=function(t,e){this.setPosition(this.rawPosition+t*this.timeScale,e)},e.setPosition=function(t,e,i,s){var r=this.duration,n=this.loop,a=this.rawPosition,o=0,h=0,c=!1;if(t<0&&(t=0),0===r){if(c=!0,-1!==a)return c}else{if(h=t-(o=t/r|0)*r,(c=-1!==n&&n*r+r<=t)&&(t=(h=r)*(o=n)+r),t===a)return c;!this.reversed!=!(this.bounce&&o%2)&&(h=r-h)}this.position=h,this.rawPosition=t,this._updatePosition(i,c),c&&(this.paused=!0),s&&s(this),e||this._runActions(a,t,i,!i&&-1===a),this.dispatchEvent("change"),c&&this.dispatchEvent("complete")},e.calculatePosition=function(t){var e=this.duration,i=this.loop,s=0,r=0;return 0===e?0:(-1!==i&&i*e+e<=t?(r=e,s=i):r=t<0?0:t-(s=t/e|0)*e,!this.reversed!=!(this.bounce&&s%2)?e-r:r)},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e,i=this._labels;for(e in i)t.push({label:e,position:i[e]});t.sort(function(t,e){return t.position-e.position})}return t},e.setLabels=function(t){this._labels=t,this._labelList=null},e.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[t]=e;var i=this._labelList;if(i){for(var s=0,r=i.length;s<r&&!(e<i[s].position);s++);i.splice(s,0,{label:t,position:e})}},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels&&this._labels[t]),e},e.toString=function(){return"[AbstractTween]"},e.clone=function(){throw"AbstractTween can not be cloned."},e._init=function(t){t&&t.paused||(this.paused=!1),t&&null!=t.position&&this.setPosition(t.position)},e._updatePosition=function(t,e){},e._goto=function(t){t=this.resolve(t);null!=t&&this.setPosition(t,!1,!0)},e._runActions=function(t,e,i,s){if(this._actionHead||this.tweens){var r,n,a,o,h=this.duration,c=this.reversed,u=this.bounce,l=this.loop;if(0===h?(r=n=a=o=0,c=u=!1):(a=t-(r=t/h|0)*h,o=e-(n=e/h|0)*h),-1!==l&&(l<n&&(o=h,n=l),l<r&&(a=h,r=l)),i)return this._runActionsRange(o,o,i,s);if(r!==n||a!==o||i||s){-1===r&&(r=a=0);var d=t<=e,_=r;do{var p=!c!=!(u&&_%2),f=_===r?a:d?0:h,g=_===n?o:d?h:0;if(p&&(f=h-f,g=h-g),(!u||_===r||f!==g)&&this._runActionsRange(f,g,i,s||_!==r&&!u))return!0}while(s=!1,d&&++_<=n||!d&&--_>=n)}}},e._runActionsRange=function(t,e,i,s){},createjs.AbstractTween=createjs.promote(t,"EventDispatcher")}(),function(){"use strict";function g(t,e){this.AbstractTween_constructor(e),this.pluginData=null,this.target=t,this.passive=!1,this._stepHead=new r(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,e&&(this.pluginData=e.pluginData,e.override&&g.removeTweens(t)),this.pluginData||(this.pluginData={}),this._init(e)}var t=createjs.extend(g,createjs.AbstractTween);function r(t,e,i,s,r,n){this.next=null,this.prev=t,this.t=e,this.d=i,this.props=s,this.ease=r,this.passive=n,this.index=t?t.index+1:0}function s(t,e,i,s,r){this.next=null,this.prev=t,this.t=e,this.d=0,this.scope=i,this.funct=s,this.params=r}g.IGNORE={},g._tweens=[],g._plugins=null,g._tweenHead=null,g._tweenTail=null,g._inTick=0,g.get=function(t,e){return new g(t,e)},g.tick=function(t,e){for(var i=g._tweenHead,s=g._inTick=Date.now();i;){var r=i._next,n=i._status;i._lastTick=s,1===n?i._status=0:-1===n?g._delist(i):e&&!i.ignoreGlobalPause||i._paused||i.advance(i.useTicks?1:t),i=r}g._inTick=0},g.handleEvent=function(t){"tick"===t.type&&this.tick(t.delta,t.paused)},g.removeTweens=function(t){if(t.tweenjs_count){for(var e=g._tweenHead;e;){var i=e._next;e.target===t&&g._register(e,!0),e=i}t.tweenjs_count=0}},g.removeAllTweens=function(){for(var t=g._tweenHead;t;){var e=t._next;t._paused=!0,t.target&&(t.target.tweenjs_count=0),t._next=t._prev=null,t=e}g._tweenHead=g._tweenTail=null},g.hasActiveTweens=function(t){return t?!!t.tweenjs_count:!!g._tweenHead},g._installPlugin=function(t){for(var e=t.priority=t.priority||0,i=g._plugins=g._plugins||[],s=0,r=i.length;s<r&&!(e<i[s].priority);s++);i.splice(s,0,t)},g._register=function(t,e){var i,s=t.target;!e&&t._paused?(s&&(s.tweenjs_count=s.tweenjs_count?s.tweenjs_count+1:1),(i=g._tweenTail)?(g._tweenTail=i._next=t)._prev=i:g._tweenHead=g._tweenTail=t,t._status=g._inTick?1:0,!g._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",g),g._inited=!0)):e&&!t._paused&&(s&&s.tweenjs_count--,g._inTick&&t._lastTick!==g._inTick||g._delist(t),t._status=-1),t._paused=e},g._delist=function(t){var e=t._next,i=t._prev;e?e._prev=i:g._tweenTail=i,i?i._next=e:g._tweenHead=e,t._next=t._prev=null},t.wait=function(t,e){return 0<t&&this._addStep(+t,this._stepTail.props,null,e),this},t.to=function(t,e,i){(null==e||e<0)&&(e=0);i=this._addStep(+e,null,i);return this._appendProps(t,i),this},t.label=function(t){return this.addLabel(t,this.duration),this},t.call=function(t,e,i){return this._addAction(i||this.target,t,e||[this])},t.set=function(t,e){return this._addAction(e||this.target,this._set,[t])},t.play=function(t){return this._addAction(t||this,this._set,[{paused:!1}])},t.pause=function(t){return this._addAction(t||this,this._set,[{paused:!0}])},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._addPlugin=function(t){var e=this._pluginIds||(this._pluginIds={}),i=t.ID;if(i&&!e[i]){e[i]=!0;for(var s=this._plugins||(this._plugins=[]),r=t.priority||0,n=0,a=s.length;n<a;n++)if(r<s[n].priority)return void s.splice(n,0,t);s.push(t)}},t._updatePosition=function(t,e){var i=this._stepHead.next,s=this.position,r=this.duration;if(this.target&&i){for(var n=i.next;n&&n.t<=s;)n=(i=i.next).next;r=e?0===r?1:s/r:(s-i.t)/i.d;this._updateTargetProps(i,r,e)}this._stepPosition=i?s-i.t:0},t._updateTargetProps=function(t,e,i){if(!(this.passive=!!t.passive)){var s,r,n,a,o=t.prev.props,h=t.props;(a=t.ease)&&(e=a(e,0,1,1));var c=this._plugins;t:for(var u in o){if(s=(r=o[u])!==(n=h[u])&&"number"==typeof r?r+(n-r)*e:1<=e?n:r,c)for(var l=0,d=c.length;l<d;l++){var _=c[l].change(this,t,u,s,e,i);if(_===g.IGNORE)continue t;void 0!==_&&(s=_)}this.target[u]=s}}},t._runActionsRange=function(t,e,i,s){var r=e<t,n=r?this._actionTail:this._actionHead,a=e,o=t;r&&(a=t,o=e);for(var h=this.position;n;){var c=n.t;if((c===e||o<c&&c<a||s&&c===t)&&(n.funct.apply(n.scope,n.params),h!==this.position))return!0;n=r?n.prev:n.next}},t._appendProps=function(t,e,i){var s,r,n,a,o=this._stepHead.props,h=this.target,c=g._plugins,u=e.prev,l=u.props,d=e.props||(e.props=this._cloneProps(l)),_={};for(s in t)if(t.hasOwnProperty(s)&&(_[s]=d[s]=t[s],void 0===o[s])){if(a=void 0,c)for(r=c.length-1;0<=r;r--)if(void 0!==(n=c[r].init(this,s,a))&&(a=n),a===g.IGNORE){delete d[s],delete _[s];break}a!==g.IGNORE&&(void 0===a&&(a=h[s]),l[s]=void 0===a?null:a)}for(s in _){n=t[s];for(var p,f=u;(p=f)&&(f=p.prev);)if(f.props!==p.props){if(void 0!==f.props[s])break;f.props[s]=l[s]}}if(!1!==i&&(c=this._plugins))for(r=c.length-1;0<=r;r--)c[r].step(this,e,_);(i=this._injected)&&(this._injected=null,this._appendProps(i,e,!1)),this.step=e},t._injectProp=function(t,e){(this._injected||(this._injected={}))[t]=e},t._addStep=function(t,e,i,s){s=new r(this._stepTail,this.duration,t,e,i,s||!1);return this.duration+=t,this._stepTail=this._stepTail.next=s},t._addAction=function(t,e,i){i=new s(this._actionTail,this.duration,t,e,i);return this._actionTail?this._actionTail.next=i:this._actionHead=i,this._actionTail=i,this},t._set=function(t){for(var e in t)this[e]=t[e]},t._cloneProps=function(t){var e,i={};for(e in t)i[e]=t[e];return i},createjs.Tween=createjs.promote(g,"AbstractTween")}(),function(){"use strict";function t(t){var e,i;t instanceof Array||null==t&&1<arguments.length?(e=t,i=arguments[1],t=arguments[2]):t&&(e=t.tweens,i=t.labels),this.AbstractTween_constructor(t),this.tweens=[],e&&this.addTween.apply(this,e),this.setLabels(i),this._init(t)}var e=createjs.extend(t,createjs.AbstractTween);e.addTween=function(t){t._parent&&t._parent.removeTween(t);var e=arguments.length;if(1<e){for(var i=0;i<e;i++)this.addTween(arguments[i]);return arguments[e-1]}if(0===e)return null;this.tweens.push(t),t._parent=this,t.paused=!0;var s=t.duration;return 0<t.loop&&(s*=t.loop+1),s>this.duration&&(this.duration=s),0<=this.rawPosition&&t.setPosition(this.rawPosition),t},e.removeTween=function(t){var e=arguments.length;if(1<e){for(var i=!0,s=0;s<e;s++)i=i&&this.removeTween(arguments[s]);return i}if(0===e)return!0;for(var r=this.tweens,s=r.length;s--;)if(r[s]===t)return r.splice(s,1),t._parent=null,t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.updateDuration=function(){for(var t=this.duration=0,e=this.tweens.length;t<e;t++){var i=this.tweens[t],s=i.duration;0<i.loop&&(s*=i.loop+1),s>this.duration&&(this.duration=s)}},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._updatePosition=function(t,e){for(var i=this.position,s=0,r=this.tweens.length;s<r;s++)this.tweens[s].setPosition(i,!0,t)},e._runActionsRange=function(t,e,i,s){for(var r=this.position,n=0,a=this.tweens.length;n<a;n++)if(this.tweens[n]._runActions(t,e,i,s),r!==this.position)return!0},createjs.Timeline=createjs.promote(t,"AbstractTween")}(),function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.none=e.linear=function(t){return t},e.get=function(e){return e<-1?e=-1:1<e&&(e=1),function(t){return 0==e?t:e<0?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.backIn=(e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}})(1.7),e.backOut=(e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}})(1.7),e.backInOut=(e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}})(1.7),e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return t<.5?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.elasticIn=(e.getElasticIn=function(i,s){var r=2*Math.PI;return function(t){if(0==t||1==t)return t;var e=s/r*Math.asin(1/i);return-(i*Math.pow(2,10*--t)*Math.sin((t-e)*r/s))}})(1,.3),e.elasticOut=(e.getElasticOut=function(i,s){var r=2*Math.PI;return function(t){if(0==t||1==t)return t;var e=s/r*Math.asin(1/i);return i*Math.pow(2,-10*t)*Math.sin((t-e)*r/s)+1}})(1,.3),e.elasticInOut=(e.getElasticInOut=function(i,s){var r=2*Math.PI;return function(t){var e=s/r*Math.asin(1/i);return(t*=2)<1?i*Math.pow(2,10*--t)*Math.sin((t-e)*r/s)*-.5:i*Math.pow(2,-10*--t)*Math.sin((t-e)*r/s)*.5+1}})(1,.3*1.5),createjs.Ease=e}(),function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}var E=t;E.priority=0,E.ID="MotionGuide",E.install=function(){return createjs.Tween._installPlugin(t),createjs.Tween.IGNORE},E.init=function(t,e,i){"guide"==e&&t._addPlugin(E)},E.step=function(t,e,i){for(var s in i)if("guide"===s){var r=e.props.guide,n=E._solveGuideData(i.guide,r);r.valid=!n;var a=r.endData;if(t._injectProp("x",a.x),t._injectProp("y",a.y),n||!r.orient)break;n=void 0===e.prev.props.rotation?t.target.rotation||0:e.prev.props.rotation;if(r.startOffsetRot=n-r.startData.rotation,"fixed"==r.orient)r.endAbsRot=a.rotation+r.startOffsetRot,r.deltaRotation=0;else{var a=void 0===i.rotation?t.target.rotation||0:i.rotation,o=a-r.endData.rotation-r.startOffsetRot,h=o%360;switch(r.endAbsRot=a,r.orient){case"auto":r.deltaRotation=o;break;case"cw":r.deltaRotation=(360+h)%360+360*Math.abs(o/360|0);break;case"ccw":r.deltaRotation=(h-360)%360+-360*Math.abs(o/360|0)}}t._injectProp("rotation",r.endAbsRot)}},E.change=function(t,e,i,s,r,n){var a=e.props.guide;if(a&&e.props!==e.prev.props&&a!==e.prev.props.guide)return"guide"===i&&!a.valid||"x"==i||"y"==i||"rotation"===i&&a.orient?createjs.Tween.IGNORE:void E._ratioToPositionData(r,a,t.target)},E.debug=function(t,e,i){t=t.guide||t;var s=E._findPathProblems(t);if(s&&console.error("MotionGuidePlugin Error found: \n"+s),!e)return s;var r=t.path,n=r.length;for(e.save(),e.lineCap="round",e.lineJoin="miter",e.beginPath(),e.moveTo(r[0],r[1]),c=2;c<n;c+=4)e.quadraticCurveTo(r[c],r[c+1],r[c+2],r[c+3]);e.strokeStyle="black",e.lineWidth=4.5,e.stroke(),e.strokeStyle="white",e.lineWidth=3,e.stroke(),e.closePath();var a=i.length;if(i&&a){var o={},h={};E._solveGuideData(t,o);for(var c=0;c<a;c++)o.orient="fixed",E._ratioToPositionData(i[c],o,h),e.beginPath(),e.moveTo(h.x,h.y),e.lineTo(h.x+9*Math.cos(.0174533*h.rotation),h.y+9*Math.sin(.0174533*h.rotation)),e.strokeStyle="black",e.lineWidth=4.5,e.stroke(),e.strokeStyle="red",e.lineWidth=3,e.stroke(),e.closePath()}return e.restore(),s},E._solveGuideData=function(t,e){if(b=E.debug(t))return b;var i=e.path=t.path;e.orient=t.orient;e.subLines=[],e.totalLength=0,e.startOffsetRot=0,e.deltaRotation=0,e.startData={ratio:0},e.endData={ratio:1},e.animSpan=1;for(var s,r,n,a,o=i.length,h={},c=i[0],u=i[1],l=2;l<o;l+=4){s=i[l],r=i[l+1],n=i[l+2],a=i[l+3];for(var d={weightings:[],estLength:0,portion:0},_=c,p=u,f=1;f<=10;f++){E._getParamsForCurve(c,u,s,r,n,a,f/10,!1,h);var g=h.x-_,m=h.y-p,v=Math.sqrt(g*g+m*m);d.weightings.push(v),d.estLength+=v,_=h.x,p=h.y}for(e.totalLength+=d.estLength,f=0;f<10;f++)v=d.estLength,d.weightings[f]=d.weightings[f]/v;e.subLines.push(d),c=n,u=a}v=e.totalLength;var T=e.subLines.length;for(l=0;l<T;l++)e.subLines[l].portion=e.subLines[l].estLength/v;var b=isNaN(t.start)?0:t.start,t=isNaN(t.end)?1:t.end;E._ratioToPositionData(b,e,e.startData),E._ratioToPositionData(t,e,e.endData),e.startData.ratio=b,e.endData.ratio=t,e.animSpan=e.endData.ratio-e.startData.ratio},E._ratioToPositionData=function(t,e,i){for(var s,r,n,a=e.subLines,o=0,h=t*e.animSpan+e.startData.ratio,c=a.length,u=0;u<c;u++){if(h<=o+(r=a[u].portion)){n=u;break}o+=r}void 0===n&&(n=c-1,o-=r);var l=a[n].weightings,d=r;for(c=l.length,u=0;u<c&&!(h<=o+(r=l[u]*d));u++)o+=r;n=4*n+2,s=u/10+(h-o)/r*.1;var _=e.path;return E._getParamsForCurve(_[n-2],_[n-1],_[n],_[n+1],_[n+2],_[n+3],s,e.orient,i),e.orient&&(.99999<=t&&t<=1.00001&&void 0!==e.endAbsRot?i.rotation=e.endAbsRot:i.rotation+=e.startOffsetRot+t*e.deltaRotation),i},E._getParamsForCurve=function(t,e,i,s,r,n,a,o,h){var c=1-a;h.x=c*c*t+2*c*a*i+a*a*r,h.y=c*c*e+2*c*a*s+a*a*n,o&&(h.rotation=57.2957795*Math.atan2((s-e)*c+(n-s)*a,(i-t)*c+(r-i)*a))},E._findPathProblems=function(t){var e=t.path,i=e&&e.length||0;if(i<6||(i-2)%4){var s="\tCannot parse 'path' array due to invalid number of entries in path. ";return s+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",s+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",s+="Only [ "+i+" ] values found. Expected: "+Math.max(4*Math.ceil((i-2)/4)+2,6)}for(var r=0;r<i;r++)if(isNaN(e[r]))return"All data in path array must be numeric";s=t.start;if(isNaN(s)&&void 0!==s)return"'start' out of bounds. Expected 0 to 1, got: "+s;s=t.end;if(isNaN(s)&&void 0!==s)return"'end' out of bounds. Expected 0 to 1, got: "+s;t=t.orient;return t&&"fixed"!=t&&"auto"!=t&&"cw"!=t&&"ccw"!=t?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+t:void 0},createjs.MotionGuidePlugin=t}(),function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="NEXT",t.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";function a(){throw"CSSPlugin cannot be instantiated."}var o=a;function h(t,e){for(var i,s,r,n=[!1,t];i=o.TRANSFORM_RE.exec(t);)"*"!==i[3]?(s=[i[1]],r=e&&e[n.length],!e||r&&s[0]===r[0]||(console.log("transforms don't match: ",s[0],r&&r[0]),e=null),function(t,e,i){for(;;){var s=o.TRANSFORM_VALUE_RE.exec(t);if(!s)return;(i=i||[]).push(+s[1],s[2]),e&&e[i.length-1]!==s[2]&&(console.log("transform units don't match: ",i[0],e[i.length-1],s[2]),e=null)}}(i[2],r,s),n.push(s)):n.push(e[n.length]);return n[0]=!!e,n}o.priority=100,o.ID="CSS",o.VALUE_RE=/^(-?[\d.]+)([a-z%]*)$/,o.TRANSFORM_VALUE_RE=/(?:^| |,)(-?[\d.]+)([a-z%]*)/g,o.TRANSFORM_RE=/(\w+?)\(([^)]+)\)|(?:^| )(\*)(?:$| )/g,o.compute=!1,o.install=function(){createjs.Tween._installPlugin(a)},o.init=function(t,e,i){var s=t.pluginData;if(!s.CSS_disabled&&t.target instanceof HTMLElement){var r,n=i||(r=t.target,n=e,((i=s.CSS_compute)||null==i&&o.compute?window.getComputedStyle(r):r.style)[n]);if(void 0!==n){t._addPlugin(a);t=s.CSS||(s.CSS={});if("transform"===e)return t[e]="_t",h(n);s=o.VALUE_RE.exec(n);return null===s?(t[e]="",n):(t[e]=s[2],parseFloat(s[1]))}}},o.step=function(t,e,i){i.transform&&(e.props.transform=h(e.props.transform,e.prev.props.transform))},o.change=function(t,e,i,s,r,n){var a=t.pluginData.CSS[i];if(void 0!==a)return"transform"===i?s=function(t,e,i){if(1===i)return e[1];if(0===i||!e[0])return t[1];for(var s,r,n="",a=t.length,o=2;o<a;o++){var h=t[o],c=e[o];for(n+=h[0]+"(",s=1,r=h.length;s<r;s+=2)n+=h[s]+(c[s]-h[s])*i,n+=c[s+1]||h[s+1],s<r-2&&(n+=", ");n+=")",o<a-1&&(n+=" ")}return n}(e.prev.props[i],e.props[i],r):s+=a,t.target.style[i]=s,createjs.Tween.IGNORE},createjs.CSSPlugin=o}(),createjs.CSSPlugin.install(),function(){"use strict";function c(){throw"DotPlugin cannot be instantiated."}var t=c;t.priority=100,t.ID="Dot",t.install=function(){createjs.Tween._installPlugin(c)},t.init=function(t,e,i){var s=t.pluginData;if(!s.Dot_disabled&&"."===e[0]){t._addPlugin(c);for(var r=t.target,n=e.split("."),a=1,o=n.length;a<o-1;a++)if(!(r=r[n[a]]))return createjs.Tween.IGNORE;var h=n[a],t=r[h],i=void 0===i?t:i;return s.Dot=s.Dot||{},s.Dot[e]={t:r,n:h},i}},t.step=function(t,e,i){},t.change=function(t,e,i,s,r,n){var a,t=t.pluginData.Dot;if(t&&(a=t[i]))return a.t[a.n]=s,createjs.Tween.IGNORE},createjs.DotPlugin=t}(),function(){"use strict";function t(){throw"RelativePlugin plugin cannot be instantiated."}var s=t;s.ID="Relative",s.install=function(){createjs.Tween._installPlugin(t)},s.init=function(t,e,i){t.pluginData.Relative_disabled||t._addPlugin(s)},s.step=function(t,e,i){for(var s in i){var r,n,a=i[s];"string"==typeof a&&(r=e.prev.props[s],"+"!==(n=a[0])&&"-"!==n||isNaN(a=+a+r)||(e.props[s]=a))}},s.change=function(t,e,i,s,r,n){},createjs.RelativePlugin=s}(),createjs.DotPlugin.install(),createjs.RelativePlugin.install(),window.addEventListener("DOMContentLoaded",function(){var t=document.createElement("style");t.innerHTML="canvas {-webkit-tap-highlight-color: transparent;}",document.body.appendChild(t)});

//export createjs;


// ZIM - Interactive Media Framework at https://zimjs.com - code creativity!
// See https://zimjs.com/code for CDN, ES6 and NPM modules and TypeScript
// Distill to minify only code used by app, SHIM for Adobe Animate, and more
// (c) 2022 ZIM - free to use - donations welcome! https://zimjs.com/donate
// See zim_doc.js version for further notes and copyright

// ES6 module - see https://zimjs.com/es6
// or see https://zimjs.com/code for more options

//import createjs from "https://zimjs.org/cdn/1.3.4/createjs_module";

"use strict";var z_i,WW=window||{},zns=WW.zns,zon=null==WW.zon||WW.zon,zog=zon?console.log.bind(console):function(){},zogStyle=" border:thin solid black; color: black",zogg=zon?console.log.bind(console,"%c Z ","background: #acd241;"+zogStyle):function(){},zogp=zon?console.log.bind(console,"%c Z ","background: #e472c4;"+zogStyle):function(){},zogb=zon?console.log.bind(console,"%c Z ","background: #50c4b7;"+zogStyle):function(){},zogr=zon?console.log.bind(console,"%c Z ","background: #fb4758;"+zogStyle):function(){},zogy=zon?console.log.bind(console,"%c Z ","background: #ebcb35;"+zogStyle):function(){},zogo=zon?console.log.bind(console,"%c Z ","background: #f58e25;"+zogStyle):function(){},zogl=zon?console.log.bind(console,"%c Z ","background: #eeeeee;"+zogStyle):function(){},zogd=zon?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zogy("zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var l="";return o&&(l+="width="+o+","),n&&(l+="height="+n+","),r&&(l+="fullscreen=yes,"),i&&(l+="modal=yes,alwaysRaised=yes"),WW.open(e,t,l)}WW.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d.-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),WW.event&&(WW.event.cancelBubble=!0))}function zil(){z_d("6");function e(e){(e=e||event).keyCode&&32<=e.keyCode&&e.keyCode<=40&&e.preventDefault()}function t(e){(e=e||event).preventDefault()}var o=t;return WW.addEventListener("keydown",e,{passive:!1}),WW.addEventListener("wheel",t,{passive:!1}),WW.addEventListener("DOMMouseScroll",o,{passive:!1}),[e,t,o]}function zet(r){return z_d("6.1"),new function(){var l=this;this.on=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=l.tags,n=0;n<o.length;n++)o[n].addEventListener(e,t)},this.off=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=l.tags,n=0;n<o.length;n++)o[n].removeEventListener(e,t)},Object.defineProperty(l,"tags",{get:function(){return zot(r)?[]:"string"==typeof r||r instanceof String?document.querySelectorAll(r):"string"==typeof r.innerHTML?[r]:[]},set:function(){}}),this.css=function(e,t){for(var o=l.tags,n=0;n<o.length;n++)if(1==arguments.length&&e.constructor==={}.constructor)for(var r in e)o[n].style[r]=e[r];else{if(1==arguments.length)return l.tags[0].style[e];o[n].style[e]=t}},this.prop=function(e,t){if(!zot(e)){for(var o=l.tags,n=[],r=0;r<o.length;r++)if(zot(t))if(e.constructor==={}.constructor)for(var i in e)o[r][i]=e[i];else n.push(o[r][e]);else o[r][e]=t;return zot(t)?n:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||ZIMONON);if(isDUO(t)){z_d("7");var i,l,a=t[0];for(l in a)(i=l.match(/^(.+)gColor$/))&&(a[i[1]+"ackgroundColor"]=a[l],delete a[l]);for(var s,c=(zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1]:o).replace(/\s+/g,"").split(","),u=[],d=0;d<c.length;d++)s=c[d].split("=")[0],c[d]=s,u.push(a[s]);for(d in a)c.indexOf(d)<0&&zon&&zogy(e,"bad argument "+d);return!(o=Object.prototype.isPrototypeOf.call(e.prototype,n)?new(e.bind.apply(e,[null].concat(u))):e.apply(null,u))||(r&&!o.arguments&&(o.arguments=[a]),o)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}var ignore,zta=console.table&&zon?console.table.bind(console):function(){},zor=function(){for(var e=0;e<arguments.length;e++)if(!zot(arguments[e]))return arguments[e]};function z_d(e){zim&&(zim.DISTILL||WW.DISTILL)&&zim.distillery.push(e)}function zimify(n,e,t,o,r,i){if(z_d("83.3"),n&&n.noDrag)return n;!0!==i&&(i=null);var l,a,s={drag:function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f)},noDrag:function(e){return zim.noDrag(this,e)},mouse:function(){return zim.mouse(this)},noMouse:function(){return zim.noMouse(this)},effect:function(e,t,o,n,r){return zim.effect(this,e,t,o,n,r)},noEffect:function(e,t){return zim.noEffect(this,e,t)},updateEffects:function(e){return zim.updateEffects(this,e)},wire:function(e,t,o,n,r,i,l){return isDUO(arguments)?(e.source=this,zim.wire(e)):zim.wire(this,e,t,o,n,r,i,l)},noWire:function(e,t,o){return isDUO(arguments)?(e.source=this,zim.noWire(e)):zim.noWire(this,e,t,o)},wired:function(e,t,o,n,r,i,l){return isDUO(arguments)?(e.target=this,zim.wired(e)):zim.wired(this,e,t,o,n,r,i,l)},noWired:function(e,t,o){return isDUO(arguments)?(e.target=this,zim.noWired(e)):zim.noWired(this,e,t,o)},bind:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.bind(e)):zim.bind(this,e,t,o,n,r)},noBind:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.noBind(e)):zim.noBind(this,e,t,o,n)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,r,i,l,a,s,c,u,d,h,g,p)},noGesture:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noGesture(e)):zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,l,a,s,c,u){return isDUO(arguments)?(e.obj=this,zim.addPhysics(e)):zim.addPhysics(this,e,t,o,n,r,i,l,a,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o,n){return zim.hitTestRect(this,e,t,o,n)},hitTestCircle:function(e,t,o,n){return zim.hitTestCircle(this,e,t,o,n)},hitTestCircleRect:function(e,t){return zim.hitTestCircleRect(this,e,t)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o,n){return zim.boundsToGlobal(this,e,t,o,n)},resetBounds:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.resetBounds(e)):zim.resetBounds(this,e,t,o,n,r)},hitTestPath:function(e,t,o){return zim.hitTestPath(this,e,t,o)},hitTestGrid:function(e,t,o,n,r,i,l,a,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,l,a,s,c,u,d)},animate:function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,K){return e&&(e.props||e.obj)&&isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,K)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,r,i,l,a,s,c,u,d,h,g,p)},loop:function(e,t,o,n,r){return zim.loop(this,e,t,o,n,r)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(e){return zim.duplicate(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,l,a,s,c){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,r,i,l,a,s,c)},loc:function(e,t,o,n,r,i,l){return isDUO(arguments)?(e.obj=this,zim.loc(e)):zim.loc(this,e,t,o,n,r,i,l)},mov:function(e,t){return isDUO(arguments)?(e.obj=this,zim.mov(e)):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},nam:function(e){return zim.nam(this,e)},alp:function(e){return zim.alp(this,e)},vis:function(e){return zim.vis(this,e)},ble:function(e){return zim.ble(this,e)},dye:function(e){return zim.dye(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,r)},outline:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t,o)},blendmodes:function(e){return zim.blendmodes(this,e)},addTo:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.addTo(e)):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},movement:function(e,t){return zim.movement(this,e,t)},noMovement:function(){return zim.noMovement(this)},tap:function(e,t,o,n,r,i,l,a,s){return isDUO(arguments)?(e.obj=this,zim.tap(e)):zim.tap(this,e,t,o,n,r,i,l,a,s)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.expand(e)):zim.expand(this,e,t,o,n)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.mouseChildren=this.mouseChildren,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name&&(e.name=this.name),e.regX=this.regX*e.width/(this.width||1),e.regY=this.regY*e.height/(this.height||1),e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,this.filters&&0<this.filters.length&&(e.filters=this.filters.slice(0),e.cache()),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type&&"Blob"!=this.type&&"Squiggle"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e,t){e.children.length&&e.removeAllChildren();for(var o=e.children,n=0,r=this.children.length;n<r;n++){var i=this.children[n].clone(t);i.parent=e,o.push(i)}return e}};if(!zot(i)){for(var c in i=[],s)i.push(c);return i}for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l]);return zim&&(n.cjsLocalToGlobal=n.localToGlobal,n.cjsGlobalToLocal=n.globalToLocal,n.cjsLocalToLocal=n.localToLocal,n.localToGlobal=function(e,t){return zim.localToGlobal(e,t,n,n.cjsLocalToGlobal)},n.globalToLocal=function(e,t){return zim.globalToLocal(e,t,n,n.cjsGlobalToLocal)},n.localToLocal=function(e,t,o){return zim.localToLocal(e,t,o,n)},n.hueBatch||zim.displayBase(n)),(zot(e)||zot(t)||zot(o)||zot(r))&&(zot(e)||zot(t)||(o=e,r=t,t=e=0)),zot(e)||zot(t)||zot(o)||zot(r)?null!=n.nominalBounds&&(a=n.nominalBounds,n.setBounds(a.x,a.x,a.width,a.height)):n.setBounds(e,t,o,r),n.parent&&n.parent.actionFrames&&!n.parent.addPhysics&&(zimify(n.parent,zdf?zdf.width:null,zdf?zdf.height:null),n.parent.top()),n}function zimplify(e){z_d("83.35"),document.Window=Window,document.Blob=Blob,ignore="ignore",zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t,o=zimify(null,null,null,null,null,!0),n=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(t in zim)(-1==o.indexOf(t)||0<=n.indexOf(t))&&-1==e.indexOf(t)&&(window[t]=zim[t])}(zim=function(Ao){function Po(e,t,o,n,r){Ao.timeCheck||(z_d("9.99"),Ao.timeCheck=!0);var i=zot(WW.TIME)?zot(Ao.TIME)?"seconds":Ao.TIME:WW.TIME;return i&&i.toLowerCase&&(i=i.toLowerCase()),"milliseconds"!=i&&"ms"!=i&&(i="seconds"),t&&t.toLowerCase&&(t=t.toLowerCase()),"ms"!=t&&"milliseconds"!=t&&"seconds"!=t&&"s"!=t||(i=t),zot(e)?i.charAt(0):("ms"==i&&(i="milliseconds"),"s"==i&&(i="seconds"),i=i.charAt(0),r||Bo(e,i,o,n),i)}function Bo(e,t,o,n){zot(o)&&(o=10),zot(n)&&(n=9),(Ao.TIMECHECK||WW.TIMECHECK)&&("m"!=t&&o<e||"m"==t&&e<n)&&zon&&zogy("TIME - warning: time is in "+("m"==t?"milliseconds":"seconds")+" ("+e+")")}if(Ao.chop=function(o,e,t,n,r,i){if(z_d("7.8"),!zot(o)){zot(e)&&(e=3),zot(t)&&(t=3),zot(n)&&(n=!0),zot(r)&&(r=0),zot(i)&&(i=1),o.uncache&&(o=o.cache(null,null,null,null,i).cacheCanvas);var l=o.width/e,a=o.height/t,s=r,c=[];return Ao.loop(t,function(t){Ao.loop(e,function(e){e=new Ao.Bitmap(o,l+2*s,a+2*s,e*l-s,t*a-s);0!=r?(e.setBounds(s,s,l,a),e.regX=s,e.regY=s):e.setBounds(s,s,l,a),c.push(e)})}),n?new Ao.Tile(c,e,t,0,0,!0):c}},Ao.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},Ao.pluck=function(e,t){if(z_d("9.26"),zot(e)||!Array.isArray(e)||0==e.length)return null;var o=Math.floor(Math.random()*e.length),n=e[o];return t&&e.splice(o,1),n},Ao.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(t=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(t):t))},Ao.seedRandom=function(e){return z_d("9.01"),function(i,l,a,s,e,t,c){function u(e){var t,o=e.length,l=this,n=0,r=l.i=l.j=0,i=l.S=[];for(o||(e=[o++]);n<s;)i[n]=n++;for(n=0;n<s;n++)i[n]=i[r=255&r+e[n%o]+(t=i[n])],i[r]=t;(l.g=function(e){for(var t,o=0,n=l.i,r=l.j,i=l.S;e--;)t=i[n=255&n+1],o=o*s+i[255&(i[n]=i[r=255&r+t])+(i[r]=t)];return l.i=n,l.j=r,o})(s)}function d(e,t){for(var o,n=e+"",r=0;r<n.length;)t[255&r]=255&(o^=19*t[255&r])+n.charCodeAt(r++);return h(t)}function h(e){return String.fromCharCode.apply(0,e)}var g,p=a.pow(s,6),f=a.pow(2,52),m=2*f,o=a.seedrandom=function(e,t,o){var n=[],e=d(function e(t,o){var n,r=[],i=typeof t;if(o&&"object"==i)for(n in t)try{r.push(e(t[n],o-1))}catch(e){}return r.length?r:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,h(l)]:null==e?function(t){try{return g?h(g.randomBytes(s)):(i.crypto.getRandomValues(t=new Uint8Array(s)),h(t))}catch(e){return[+new Date,i,(t=i.navigator)&&t.plugins,i.screen,h(l)]}}():e,3),n),r=new u(n);return d(h(r.S),l),(t.pass||o||function(e,t,o){return o?(a[c]=e,t):e})(function(){for(var e=r.g(6),t=p,o=0;e<f;)e=(e+o)*s,t*=s,o=r.g(1);for(;m<=e;)e/=2,t/=2,o>>>=1;return(e+o)/t},e,"global"in t?t.global:this==a)};if(d(a[c](),l),e&&e.exports){e.exports=o;try{g=require("crypto")}catch(e){}}else t&&t.amd&&t(function(){return o})}(this,[],Math,256,"object"==typeof module&&module,"function"==typeof define&&define,"random"),Math.seedrandom(e),e},Ao.odds=function(e){return z_d("9.1"),(zot(e)||isNaN(e))&&(e=50),Math.random()<=e/100},Ao.rarity=function(e,t,o,r){if(z_d("9.2"),zot(e)||e.constructor!={}.constructor)return[];zot(t)&&(t=!0),zot(o)&&(o=!0),zot(r)&&(r=!1);var i=[];return Ao.loop(e,function(e,t){var o,n=Ao.colors.indexOf(e);-1!=n&&(e=Ao.colorsHex[n]),Array.isArray(t)?((e=new(+e==+e?Number:String)(e))._payload=t[1],e.dynamicPayload=r,Object.defineProperty(e,"payload",{get:function(){return(this.dynamicPayload||null==this._lastPayload)&&(this._lastPayload=Ao.Pick.choose(this._payload)),this._lastPayload},set:function(e){this._lastPayload=null,this._payload=e}}),o=t[0],Ao.loop(o,function(){i.push(e)})):(o=t,Ao.loop(o,function(){+e==+e&&(e=+e),i.push(e)}))}),t&&Ao.shuffle(i),i},Ao.repeats=function(e,t){if(z_d("9.25"),zot(e)||!Array.isArray(e))return 0;var o={},n=0,r=0;return Ao.loop(e,function(e){null!=o[e]?(o[e]++,r++):o[e]=0,o[e]>n&&(n=o[e])}),t?r:n},Ao.series=function(){var r,t;if(z_d("13.61"),0==arguments.length)return function(){};1==arguments.length&&Array.isArray(arguments[0])?r=arguments[0]:1==arguments.length&&arguments[0].constructor=={}.constructor?(zot((t=arguments[0]).min)&&(t.min=0),zot(t.max)&&(t.max=1),zot(t.step)&&(t.step=1),r=[],Ao.loop(Math.floor(Math.abs(t.max-t.min)+t.step),function(e){r.push(e+t.min)},null,t.step),t=null):r=Array.prototype.slice.call(arguments);function o(e,t){if(c&&u%c!=0)return u++,i;u++;var o,n=r.length;if((p||f)&&l%n==0&&Ao.shuffle(r),o=r[(10*n+l)%n],0==l&&0,f&&l%n==0&&1<n)for(;o==i;)Ao.shuffle(r),o=r[(10*n+l)%n];return d?0<a&&n<=l+a*s?(a=-1,l=n-1-(l+s-(n-1))):a<0&&l+a*s<0?(a=1,l=s-l):l+=a*s:h?0<a&&n<=l+a*s?(a=-1,l=n-1-(l+s-(n-1))+s):a<0&&l+a*s<0?(a=1,l=s-l-s):l+=a*s:g?0<a&&n<=l+a*s?l=n-1:a<0&&l+a*s<0?l=0:l+=a*s:l+=a*s,i=o,!Ao.isPick(o)||o.noPick&&t?o:Ao.Pick.choose(o)}var i,l=0,a=1,s=1,c=0,u=0,d=!1,h=!1,g=!1,p=!1,f=!1,n=o.original=Ao.copy(r);return o.array=r,o.type="series",Object.defineProperty(o,"index",{get:function(){var e=r.length;return(10*e+l)%e},set:function(e){l=e}}),Object.defineProperty(o,"length",{get:function(){return r.length},set:function(){}}),o.jump=function(e){return l=e,o},o.reverse=function(e){return zot(e)&&(e=!0),a=e?-1:1,l=r.length-1,o},o.bounce=function(e){zot(e)&&(e=!0);var t=r.length;return l=(10*t+l)%t,d=e,o},o.flip=function(e){zot(e)&&(e=!0);var t=r.length;return l=(10*t+l)%t,h=e,o},o.step=function(e){return zot(e)&&(e=1),s=Math.floor(e),o},o.every=function(e){return zot(e)&&(e=1),c=Math.abs(e),u=0,o},o.constrain=function(e){return zot(e)&&(e=!0),g=e,o},o.random=function(e){return zot(e)&&(e=!0),e||(r=n),p=1==e,o},o.mix=function(e){return zot(e)&&(e=!0),e||(r=n),f=1==e,o},o.shuffle=function(e){return zot(e)&&(e=!0),e?Ao.shuffle(r):r=n,o},o},Ao.makeSeries=function(e){if(z_d("13.6"),zot(e))return function(){};function t(){return e[o++%e.length]}var o=0;return t.array=e,t},Ao.loop=function(e,t,o,n,r,i){var l;if(l=zob(Ao.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("9.5"),!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1),e.constructor===Number&&(e=Number(e)),e.constructor===String&&(e=String(e));var a,s,c,u,d="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":"string"==typeof e?"string":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":"invalid";if("invalid"!=d){if("number"==d||"string"==d||"array"==d||"nodelist"==d||"htmlcollection"==d){if(0==(s=g((a="number"==d?e:e.length)-1)))return!0;if(o){for(c=r;i<=c;c-=n)if(void 0!==(u="number"==d?t(c,s,r,i,e):t("array"==d||"string"==d?e[c]:e.item(c),c,s,r,i,e)))return u}else for(c=r;c<=i;c+=n)if(void 0!==(u="number"==d?t(c,s,r,i,e):t("array"==d||"string"==d?e[c]:e.item(c),c,s,r,i,e)))return u;return!0}if("object"==d){a=0;var h=[];for(c in e)a++,h.push(c);if(0!=(s=g(a-1))){if(o){for(c=r;i<=c;c-=n)if(void 0!==(u=t(h[c],e[h[c]],c,s,r,i,e)))return u}else for(c=r;c<=i;c+=n)if(void 0!==(u=t(h[c],e[h[c]],c,s,r,i,e)))return u;return!0}}}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},Ao.timeout=function(t,o,e,n){var r;if(r=zob(Ao.timeout,arguments,"time, call, pauseOnBlur, timeUnit",this))return r;if(z_d("9.7"),!zot(o)&&"function"==typeof o){var i=Po(t,n);zot(t)&&(t="s"==i?1:1e3),t=Ao.Pick.choose(t);var l={startTime:Date.now(),time:0,paused:!1,done:!1,timeUnit:n};e&&(zot(Ao.blurCheck)&&Ao.setBlurDetect(),Ao.pauseOnBlur.push(l));var a=l.startTime;return l.pause=function(e,t,o){zot(e)&&(e=!0),e?cancelAnimationFrame(l.rid):(t?a=0:o?(a=Date.now(),l.time=0):a=Date.now(),s()),l.paused=e},l.clear=function(){for(var e in l&&cancelAnimationFrame(l.rid),l)delete l[e];l.pause=function(){},l.clear=function(){}},s(),l}function s(){var e=Date.now();if(l.time+=(e-a)/("s"==i?1e3:1),a=e,l.time>=t)return l.done=!0,o(l),void l.clear();l.rid=requestAnimationFrame(s)}},Ao.interval=function(e,n,t,o,r,i){var l;if(l=zob(Ao.interval,arguments,"time, call, total, immediate, pauseOnBlur, timeUnit",this))return l;if(z_d("9.8"),!zot(n)&&"function"==typeof n){var a=Po(e,i);if(zot(e)&&(e="s"==a?1:1e3),zot(o)&&(o=!1),zot(t)||!(isNaN(t)||t<=0)){zot(t)&&(t=-1);var s,c={count:0,total:t,paused:!1,time:e,active:!0,timeUnit:i};return r&&(zot(Ao.blurCheck)&&Ao.setBlurDetect(),Ao.pauseOnBlur.push(c)),o&&setTimeout(function(){n(c),d()},10),c.pause=function(e,t,o){zot(e)&&(e=!0),e?(clearTimeout(s),clearTimeout(c.id),cancelAnimationFrame(c.rid),c.pauseTimeLeft=c.interval-(Date.now()-c.startTime)/("s"==a?1e3:1)):(c.paused||c.pause(!0),s=setTimeout(function(){c.count++,n(c),u(),d()},t?0:(o?c.interval:c.pauseTimeLeft)*("s"==a?1e3:1)),c.pauseTimeLeft=null),c.paused=e},c.clear=function(){c.active=!1,clearTimeout(s),cancelAnimationFrame(c.rid),clearTimeout(c.id);var e,t=c.count;for(e in c)delete c[e];c.active=!1,c.count=t,c.pause=function(){},c.clear=function(){}},u(),c}}function u(){c.startTime=Date.now(),c.interval=Ao.Pick.choose(c.time),c.id=setTimeout(function(){c.paused||c.active&&(c.count++,n(c),u(),d())},c.interval*("s"==a?1e3:1))}function d(){-1!=t&&c.count>=(o?c.total-1:c.total)&&c.clear()}},Ao.async=function(e,t,o,n,r){var i,l,a,s,c,u;z_d("29"),zot(e)||(i=document.createElement("script"),l=Po(n),zot(n)&&(n="s"==l?2:2e3),t?(a=o||t.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],Ao.asyncList||(Ao.asyncList={}),Ao.asyncList[a]||(Ao.asyncList[a]=[]),Ao.asyncList[a].push(t),Ao.async[a]=(s=i,c=!1,u=setTimeout(function(){c=r,"function"==typeof t&&t("asyncError",r?"cancelled":"timeout")},n*("s"==l?1e3:1)),function(e){clearTimeout(u),Ao.asyncList[a]&&(t=Ao.asyncList[a].shift()),"function"!=typeof t||c||t(e),s&&s.parentNode.removeChild(s),s=null})):(Ao.async.z_s&&Ao.async.z_s.parentNode&&Ao.async.z_s.parentNode.removeChild(Ao.async.z_s),Ao.async.z_s=i),e.match(/\?/)||(e+="?"),i.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(i))},Ao.couple=function(e){if(z_d("29.2"),!Ao.isJSON(e))return e;var t,o=JSON.parse(e),n={};for(t in o){var r,i=o[t];for(r in i)n[t+"_"+r]=i[r]}return JSON.stringify(n)},Ao.decouple=function(e){if(z_d("29.3"),!Ao.isJSON(e))return e;var t,o=JSON.parse(e),n={};for(t in o){var r=t.split("_",2);if(2!=r.length)return e;n[r[0]]||(n[r[0]]={}),n[r[0]][r[1]]=o[t]}return JSON.stringify(n)},Ao.convertColor=function(e,o,n){if(Ao.convertColorCheck||(z_d("27.5"),Ao.convertColorCheck=!0),zot(o)&&(o="hex"),!zot(e)&&e.toLowerCase){e=(e=zik(e)).toLowerCase(),o=o.toLowerCase();var t,r,i,l,a=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],s=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if("zim"==o)return Ao.colorsHex.indexOf(e)<0?e:Ao.colors[Ao.colorsHex.indexOf(e)];if(t=e.match(/rgba\((.*)\)/)){var c=(u=t[1].split(",")).pop();if(zot(n)&&(n=c),"array"==o)return u.push(c),u;if(e="rgb("+u.join(",")+")","rgb"==o)return e;if("hsl"==o)return h(u[0],u[1],u[2])}if(zot(n)&&(n=1),t=e.match(/rgb\((.*)\)/))return"rgba"==o?"rgba("+t[1]+","+n+")":"hex"==o?(r=1!=n?","+n:"","#"+(i=g(t[1]+r))[0]+i[1]+i[2]+i[3]):"hexnumber"==o?(r=1!=n?","+n:0,i=g(t[1]+r),parseInt(i[0]+""+i[1]+i[2],16)):"string"==o?(e=g(t[1]).join("").toLowerCase(),-1==(l=s.indexOf(e))?"#"+e:a[l]):"array"==o?(r=1!=n?","+n:0,g(t[1]+r)):"hsl"==o?h((u=t[1].split(","))[0],u[1],u[2]):e;if("hsl"==o)return Ao.convertColor(Ao.convertColor(e,"rgb"),"hsl");if("array"==o||"rgb"==o||"rgba"==o)return"#"==e.charAt(0)?p(e):p(Ao.convertColor(e));if("hex"==o){if("#"==e.charAt(0)){if(1==n)return e;if(r=d(Math.round(255*n)),4!=e.length&&5!=e.length)return 9==e.length?e.substring(0,a.length-2)+r:e+r;var u=e.split("");return u[1]=u[1]+""+u[1],u[2]=u[2]+""+u[2],u[3]=u[3]+""+u[3],u[4]=r,u.join("")}}else if("hexnumber"==o){if("#"==e.charAt(0))return parseInt(e.replace(/^#/,""),16)}else"#"==e.charAt(0)&&3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));return"string"==o?-1==(l=s.indexOf(e))?"#"+e:a[l]:"hexnumber"==o?parseInt(s[-1!=a.indexOf(e.toLowerCase())?a.indexOf(e):0],16):(r=1!=n?d(Math.round(255*n)):"","#"+s[-1!=a.indexOf(e.toLowerCase())?a.indexOf(e):0]+r)}function d(e){e=Number(e).toString(16);return e.length<2&&(e="0"+e),e}function h(e,t,o){e/=255,t/=255,o/=255;var n=Math.max(e,t,o),r=n-Math.min(e,t,o),t=r?n===e?(t-o)/r:n===t?2+(o-e)/r:4+(e-t)/r:0;return[60*t<0?60*t+360:60*t,100*(r?n<=.5?r/(2*n-r):r/(2-(2*n-r)):0),100*(2*n-r)/2]}function g(e){e=e.split(",");return[d(e[0]),d(e[1]),d(e[2]),zot(void 0)?"":d(Math.round(255*Number(e[3])))]}function p(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"array"==o?[t>>16&255,t>>8&255,255&t,n]:"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(e)?(8==(t=e.substring(1).split("")).length&&(n=t.slice(-2).join(""),t=t.slice(0,6)),4==t.length&&(n=t[3]+""+t[3],t=[t[0],t[0],t[1],t[1],t[2],t[2]]),n=parseInt(n,16)/255,t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):"rgb"==o?"rgb(0,0,0)":"rgba(0,0,0,1)"}},Ao.colorRange=function(e,t,o){Ao.colorRangeCheck||(z_d("27.6"),Ao.colorRangeCheck=!0),zot(o)&&(o=.5),o=Math.max(0,Math.min(1,o)),zot(e)&&(e="white"),zot(t)&&(t="black");var n=Ao.convertColor(e,"rgb"),r=Ao.convertColor(t,"rgb");e=n.substring(4,n.length-1).split(","),t=r.substring(4,r.length-1).split(",");for(var i,l="#",a=0;a<e.length;a++)i=t[a]-e[a],(i=Math.floor(parseInt(e[a],10)+i*o).toString(16)).length<2&&(i="0"+i),l+=i;return l},Ao.lighten=function(e,t){return Ao.lightenCheck||(z_d("27.65"),Ao.lightenCheck=!0),zot(t)&&(t=.5),0<=t?Ao.colorRange(String(e),"#FFFFFF",t):Ao.colorRange(String(e),"#000000",-t)},Ao.darken=function(e,t){return zot(t)&&(t=.5),Ao.darkenCheck||(z_d("27.66"),Ao.darkenCheck=!0),0<=t?Ao.colorRange(String(e),"#000000",t):Ao.colorRange(String(e),"#ffffff",-t)},Ao.toColor=function(e,t,o){return Ao.toColorCheck||(z_d("27.67"),Ao.toColorCheck=!0),zot(o)&&(o=.5),Ao.colorRange(String(e),t,o)},Ao.toAlpha=function(e,t){return Ao.toAlphaCheck||(z_d("27.68"),Ao.toAlphaCheck=!0),zot(t)&&(t=.5),Ao.convertColor(String(e),"rgba",t)},Ao.zimEase=function(e,t,o,n,r){z_d("27.69");var i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B=!1;return zot(r)&&(r=!0),e?(Array.isArray(e[1])&&(B=!0,y=e[1],e=e[0],b=y[0],v=y[1],w=y[2],C=y[3],P=1-(A=5*(C+0)-20*(w+b)+30*v)-(T=10*+w+30*(b-v))-(k=10*+v-4*(x=5*+b))-x),i=e[0],l=e[1],a=e[2],y=e[3],h=1-(d=5*(y+0)-20*(a+i)+30*l)-(u=10*+a+30*(i-l))-(c=10*+l-4*(s=5*+i))-s):t?(h=t[0],d=t[1],u=t[2],c=t[3],i=(s=t[4])/5,l=(c+4*s)/10,a=(u+6*s+3*c)/10,y=(d+4*s+3*c+2*u)/5):(c=u=d=h=0,s=1),o?z={reverse:m=function(){return Ao.zimEase(null,[h,d,u,c,s],!0)},points:[i,l,a,y],polynomials:[h,d,u,c,s],noPick:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return e<.5?(g=100*(e*=2),p=(g/=100)*g,(h*(f=p*g)*p+d*p*p+u*f+c*p+s*g)/2):(g=100*(e=1-2*(e-.5)),p=(g/=100)*g,1-(h*(f=p*g)*p+d*p*p+u*f+c*p+s*g)/2)}}:B?z={reverse:m=function(){return zon&&zogy("zimEase - multi array points cannot be reversed"),Ao.zimEase(null,[h,d,u,c,s])},points:[[i,l,a,y],[b,v,w,C]],polynomials:[[h,d,u,c,s],[P,A,T,k,x]],noPick:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return e<.5?(g=100*(e*=2),p=(g/=100)*g,(h*(f=p*g)*p+d*p*p+u*f+c*p+s*g)/2):(g=100*(e=2*(e-.5)),p=(g/=100)*g,.5+(P*(f=p*g)*p+A*p*p+T*f+k*p+x*g)/2)}}:(z={reverse:m=function(){return Ao.zimEase(null,[h,d,u,c,s],null,!0)},points:[i,l,a,y],polynomials:[h,d,u,c,s]}).noPick=n?function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return g=100-100*e,p=(g/=100)*g,1-(h*(f=p*g)*p+d*p*p+u*f+c*p+s*g)}:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return g=100*e,p=(g/=100)*g,h*(f=p*g)*p+d*p*p+u*f+c*p+s*g},z.noPick.reverse=m,z},Ao.spline=function(e,t,o,n,r){z_d("27.695"),zot(e)&&(e=[]),zot(t)&&(t=1),zot(o)&&(o=!1),zot(r)&&(r=o);var i=(e=function(e,t){if(!Array.isArray(e[0]))for(d=0;d<e.length;d++)e[d]=[e[d].x,e[d].y];var o,n,r;t&&(o=e[e.length-1],n=e[e.length-2],r=e[0],t=e[1],e.unshift(o),e.unshift(n),e.push(r),e.push(t));var i=[];for(d=0;d<e.length;d++)i.push(e[d][0],e[d][1]);return i}(e,o)).length,l=i-4,a=o?e[2]:e[0],s=o?e[3]:e[1],c="M"+[a,s];n&&n.mt(a,s);for(var u=o?i-4:i-2,d=o?2:0;d<u;d+=2){var h=d?e[d-2]:e[0],g=d?e[d-1]:e[1],p=e[d+0],f=e[d+1],m=e[d+2],z=e[d+3],h=p+(m-h)/6*t,g=f+(z-g)/6*t,p=m-((d!==l?e[d+4]:m)-p)/6*t,f=z-((d!==l?e[d+5]:z)-f)/6*t;c+="C"+[h,g,p,f,m,z],n&&n.bt(h,g,p,f,m,z)}return r&&((r=c.split("C")).pop(),c=r.join("C")),c},Ao.pointAlongCurve=function(e,t,o,n){if(z_d("27.7"),e&&e[0]&&e[1]&&e[2]&&e[3]){zot(n)&&(n=!1);var r,i,l,a,s=new Ao.Bezier(e[0],e[1],e[2],e[3]),e=n?(r=s.mx(t),s.my(t)):(r=s.x(t),s.y(t));if(o){var o=t-.05,t=t+.05;return o<0&&(o=0),1<t&&(t=1),t=n?(i=s.mx(o),l=s.my(o),a=s.mx(t),s.my(t)):(i=s.x(o),l=s.y(o),a=s.x(t),s.y(t)),{x:r,y:e,angle:Ao.angle(i,l,a,t)}}return{x:r,y:e}}},Ao.distanceAlongCurve=function(e){return z_d("27.8"),(Ao.dist(e[0],e[3])+(Ao.dist(e[0],e[1])+Ao.dist(e[1],e[2])+Ao.dist(e[2],e[3])))/2},Ao.closestPointAlongCurve=function(i,e,t,o,n){z_d("27.9");var l,a=1e7,s=0,c=0;return zot(t)&&(t=10),Ao.loop(e,function(e,n){var r=new Ao.Bezier(e[0],e[1],e[2],e[3]);Ao.loop(t,function(e,t){var o={x:r.x(e/t),y:r.y(e/t)},t=Ao.dist(i,o);t<a&&(a=t,l=o,s=n,c=e)})}),n?(s*t+c)/(e.length*t)*100:o?l:s},Ao.transformPoints=function(e,t,o,n,r){if(z_d("27.95"),!zot(e)&&Array.isArray(e)){zot(n)&&(n=0),zot(r)&&(r=0),e=Ao.copy(e);var i=n,l=r;"rotation"==t&&(0!=n&&(e=Ao.transformPoints(e,"x",-i)),0!=r&&(e=Ao.transformPoints(e,"y",-l)));for(var a=0;a<e.length;a++){var s,c,u,d=e[a];Array.isArray(d)&&("x"==t?d[0]+=o:"y"==t?d[1]+=o:"scaleX"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o):"scaleY"==t?(d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"scale"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o,d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"rotation"==t&&(s=o*Math.PI/180,c=d[0],u=d[1],d[0]=c*Math.cos(s)-u*Math.sin(s),d[1]=u*Math.cos(s)+c*Math.sin(s),c=d[4],u=d[5],d[4]=c*Math.cos(s)-u*Math.sin(s),d[5]=u*Math.cos(s)+c*Math.sin(s),c=d[6],u=d[7],d[6]=c*Math.cos(s)-u*Math.sin(s),d[7]=u*Math.cos(s)+c*Math.sin(s)))}return"rotation"==t&&(0!=n&&(e=Ao.transformPoints(e,"x",i)),0!=r&&(e=Ao.transformPoints(e,"y",l))),e}},Ao.trimPointEnds=function(e){z_d("27.97"),e[0][4]=0,e[0][5]=0,e[0][8]="free",e[e.length-1][6]=0,e[e.length-1][7]=0,e[e.length-1][8]="free"},Ao.reversePoints=function(e){return z_d("27.975"),e.reverse(),Ao.loop(e,function(e){var t=e[6];e[6]=e[4],e[4]=t;t=e[7];e[7]=e[5],e[5]=t}),e},Ao.appendPoints=function(e,t,o){return z_d("27.98"),zot(e)&&zot(t)?[]:zot(e)?t:zot(t)?e:(e[e.length-1][6]=t[0][6],e[e.length-1][7]=t[0][7],o&&(e[e.length-1][8]=o),t.shift(),e=e.concat(t))},Ao.prependPoints=function(e,t,o){return z_d("27.985"),zot(e)&&zot(t)?[]:zot(e)?t:zot(t)?e:(t[t.length-1][6]=e[0][6],t[t.length-1][7]=e[0][7],o&&(e[e.length-1][8]=o),e.shift(),e=t.concat(e))},Ao.splitPoints=function(e,t,o){if(z_d("27.99"),!(zot(e)||(zot(t)&&(t=Math.floor(e.length/2)),t<0||t>e.length-1))){zot(o)&&(o=!0);var n=Ao.copy(e.slice(0,t+1)),t=Ao.copy(e.slice(t));return o&&(Ao.trimPointEnds(n),Ao.trimPointEnds(t)),[n,t]}},Ao.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");for(var n,r,i=[2,3,4,5,6,7,8,9],l="abcdefghjkmnpqrstuvwxyz".split(""),a=e.constructor===Array?e:"numbers"==e?i:"letters"==e?l:i.concat(l),s="",c=0;c<t;c++)n=a[Math.floor(Math.random()*a.length)],r=Math.random(),"uppercase"==o||"mixed"==o&&.5<r?n.toUpperCase&&(n=n.toUpperCase()):n.toLowerCase&&(n=n.toLowerCase()),s+=String(n);return s},Ao.makeSyllable=function(e,t){z_d("13.55");var o="bcdfghjklmnprstvwxz",n="aeiouaeiouaeiouy";zot(e)&&(e=3),zot(t)&&(t=Ao.rand()<.3);var r="",i=t?n:o;return Ao.loop(e,function(){var e,t;r+=(e=i,t=Ao.rand(e.length-1),e.substring(t,t+1)),i=i==n?o:n}),r},Ao.makePrimitive=function(e){return z_d("13.56"),function o(n){return Array.isArray(n)?(Ao.loop(n,function(e){e=o(e)}),n):n.constructor==={}.constructor?(Ao.loop(n,function(e,t){n[e]=o(t)}),n):n instanceof String?String(n):n instanceof Number?Number(n):n instanceof Boolean?Boolean(n):n}(e)},Ao.makeMath=function(){z_d("13.565");for(var e=Object.getOwnPropertyNames(Math),t=0;t<e.length;t++)W[e[t]]=Math[e[t]]},Ao.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},Ao.mobile=function(e){return z_d("28"),zot(WW.MOBILE)||"default"==WW.MOBILE?zot(Ao.MOBILE)||"default"==Ao.MOBILE?(zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===WW.orientation)&&(!/safari/i.test(navigator.userAgent)||"ios")):Ao.MOBILE:WW.MOBILE},Ao.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},Ao.extend=function(e,t,o,n,r){var i;if(i=zob(Ao.extend,arguments,"subclass, superclass, override, prefix, prototype"))return i;if(!zot(e)&&!zot(t)){zot(n)&&(n="super"),zot(o)&&(o=[]),Array.isArray(o)||(o=[o]),zot(r)&&(r=!0);var l,a={};for(l in e.prototype)Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e.prototype,l));for(l in h.prototype=t.prototype,e.prototype=new h,a)Object.defineProperty(e.prototype,l,Object.getOwnPropertyDescriptor(a,l));var s,c=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(n+="_")+"constructor"]=u.constructor;for(var d=0;d<o.length;d++)"function"==typeof u[s=o[d]]&&(c[n+s]=u[s]);if(r)for(s in u)Object.prototype.hasOwnProperty.call(c,s)&&"function"==typeof u[s]&&(c[n+s]=u[s])}return e}function h(){this.constructor=e}zon&&e!=Ao.StageGL&&zogy("zim.extend() - please supply a class and its superclass")},Ao.copy=function(e,t,o){if(Ao.copyCheck||(z_d("10"),Ao.copyCheck=!0),zot(t)&&(t=!1),zot(o)&&(o=!0),null==e||!(e instanceof Array||e.constructor=={}.constructor))return t&&null!=e&&e.clone&&e.type&&("Container"!=e.type&&"Stage"!=e.type&&"StageGL"!=e.type||o)?e.clone():e;if(e instanceof Array){for(var n=[],r=0;r<e.length;r++)n[r]=Ao.copy(e[r],t,o);return n}if(e.constructor=={}.constructor){var i,l={};for(i in e){var a=Ao.copy(e[i],t,o);Object.prototype.hasOwnProperty.call(e,i)&&(l[i]=a)}return l}},Ao.merge=function(){Ao.mergeCheck||(z_d("12"),Ao.mergeCheck=!0);for(var e,t={},o=0;o<arguments.length;o++)for(e in arguments[o])Object.prototype.hasOwnProperty.call(arguments[o],e)&&(t[e]=arguments[o][e]);return t},Ao.arraysEqual=function(e,t,o){if(z_d("11"),zot(e)||zot(t))return!1;if(zot(o)&&(o=!0),e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!Ao.arraysEqual(e[n],t[n],o))return!1}else{if(o&&e[n]!=t[n])return!1;if(!o)return Ao.arraysEqual(e.sort(),t.sort(),!0)}return!0},Ao.arrayMinMax=function(e){if(z_d("11.2"),!Array.isArray(e))return{min:null,max:null};for(var t=e[0],o=e[0],n=e.length;n--;)t=e[n]<t?e[n]:t,o=e[n]>o?e[n]:o;return{min:t=isNaN(t)?null:t,max:o=isNaN(o)?null:o}},Ao.isEmpty=function(e){if(Ao.zimEmptyCheck||(z_d("11.5"),Ao.zimEmptyCheck=!0),!zot(e)){var t,o=0;for(t in e){o++;break}return 0==o}},Ao.isJSON=function(e){if(z_d("11.6"),"string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},Ao.isPick=function(e){if(Ao.zimPickCheck||(z_d("11.7"),Ao.zimPickCheck=!0),!zot(e))return Array.isArray(e)||e.constructor=={}.constructor&&(null!=e.min&&null!=e.max||e.noPick)||e.constructor===Function&&(null!=e.array||null!=e())},Ao.zut=function(e){if(zot(e)||"object"==typeof e)return!0},Ao.decimals=function(e,t,o,n,r,i,l){if(Ao.zimDecimalCheck||(z_d("13"),Ao.zimDecimalCheck=!0),zot(e))return 0;zot(t)&&(t=1),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=!0),zot(i)&&(i=!1);var a=Math.round(e*Math.pow(10,t))/Math.pow(10,t);i&&(u=a-Math.floor(a),a=Ao.decimals(Math.floor(a)+60*u/100,2));var s,c,u=Ao.sign(a);if(0<o)for(s=String(a).indexOf("."),c=String(a).length,s<0&&(s=c++,a+="."),h=0;h<o-(c-s-1);h++)a+="0";if(1<n){-1==u&&(a=a.substr(1,a.length-1)),s=String(a).indexOf("."),c=String(a).length;for(var d=s<0?c:s,h=0;h<n-d;h++)a="0"+a;-1==u&&(a="-"+a)}return 0==n&&(a=a.toString().replace(/^0\./,".")),0<o+n&&!r&&0==Number(a)&&(a=0),i&&(a=String(a).replace(".",":")),Ao.zut(l)?a:null},Ao.countDecimals=function(e){return Ao.zimCountDecimalsCheck||(z_d("13.05"),Ao.zimCountDecimalsCheck=!0),e%1?e.toString().split(".")[1].length:0},Ao.sign=function(e){return Ao.zimSignCheck||(z_d("13.1"),Ao.zimSignCheck=!0),e?e<0?-1:1:0},Ao.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(t=o=t),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},Ao.dist=function(e,t,o,n){if(Ao.zimDistCheck||(z_d("13.3"),Ao.zimDistCheck=!0),!zot(e)&&!zot(t))return zot(e.x)||zot(t.x)?(zot(o)&&(o=0),zot(n)&&(n=0)):(n=t.y,o=t.x,t=e.y,e=e.x),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},Ao.rectIntersect=function(e,t,o){return Ao.zimRectIntersectCheck||(z_d("13.32"),Ao.zimRectIntersectCheck=!0),zot(o)&&(o=0),!(e.x>=t.x+t.width+o||e.x+e.width+o<=t.x||e.y>=t.y+t.height+o||e.y+e.height+o<=t.y)},Ao.boundsAroundPoints=function(e){Ao.zimBoundsAroundPointsCheck||(z_d("13.34"),Ao.zimBoundsAroundPointsCheck=!0);for(var t=1e4,o=1e4,n=-1e4,r=-1e4,i=0;i<e.length;i++){var l=e[i];l.x<t&&(t=l.x),l.x>n&&(n=l.x),l.y<o&&(o=l.y),l.y>r&&(r=l.y)}return{x:t,y:o,width:n-t,height:r-o}},Ao.angle=function(e,t,o,n){if(Ao.angleCheck||(z_d("13.4"),Ao.angleCheck=!0),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},Ao.TAU=2*Math.PI,Ao.DEG=180/Math.PI,Ao.RAD=Math.PI/180,Ao.PHI=.5*Math.pow(5,.5)+.5,Ao.smoothStep=function(e,t,o){z_d("13.7");t=Ao.constrain((e-t)/(o-t),0,1);return t*t*t*(t*(6*t-15)+10)},Ao.unicodeToUTF=function(e){if(z_d("13.75"),e){" "!=e&&(e=e.replace(/^\s+/g,""));var t="",o="",n=e.charCodeAt(0),t=n;return 56320<=(o=e.charCodeAt(1))&&o<=57343&&(n=1024*(t-55296)+(o-56320)+65536),t=t.toString(16),o=o.toString(16),n=n.toString(16),"\\u"+t+"\\u"+o}},Ao.capitalizeFirst=function(e){return z_d("13.78"),e.charAt(0).toUpperCase()+e.slice(1)},Ao.Ajax=function(i,e,l,t){z_d("13.8");var a=new XMLHttpRequest;this.master=i,this.couple=e,this.lock=l,this.unique=t;var s=this;this.get=function(e,t){var o=zot(s.master)?"":"&master="+encodeURI(i),n=zot(s.lock)?"":"&lock="+encodeURI(l),r=s.unique?"&unique=true":"";a.open("GET",e+o+n+r,!0),a.onload=function(){200==a.status?t(Ao.isJSON(a.responseText)?JSON.parse(a.responseText):a.responseText):t(null,"Error: "+a.status)},a.send()},this.post=function(e,t,o,n,r){var i;if(i=zob(s.post,arguments,"url, data, command, extra, callback"))return i;zot(e)||(a.open("POST",e,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onload=function(){var e=a.responseText;Ao.isJSON(e)&&(s.couple&&(e=Ao.decouple(e)),e=JSON.parse(e)),r(e)},Ao.isJSON(t)||(t=JSON.stringify(t)),s.couple&&(t=Ao.couple(t)),i=zot(s.master)?"":"&master="+encodeURIComponent(s.master),e=zot(s.lock)?"":"&lock="+encodeURIComponent(s.lock),o=zot(o)?"":"&command="+encodeURIComponent(o),n=zot(n)?"":"&extra="+encodeURIComponent(n),a.send("data="+encodeURIComponent(t)+i+e+o+n))},this.put=function(e,t,o){a.open("PUT",e,!0),a.setRequestHeader("Content-type","application/json"),a.onload=function(){o(Ao.isJSON(a.responseText)?JSON.parse(a.responseText):s.http.responseText)},a.send(JSON.stringify(t))}},Ao.Noise=function(e){z_d("13.9"),zot(e)&&(e=1e6*Math.random());var t=e;this.seed=e;var B=this,E={};function o(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function n(e,t,o){this.dx=-t-e*E.SQUISH_2D,this.dy=-o-e*E.SQUISH_2D,this.xsb=t,this.ysb=o}function r(e,t,o,n){this.dx=-t-e*E.SQUISH_3D,this.dy=-o-e*E.SQUISH_3D,this.dz=-n-e*E.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,r){this.dx=-t-e*E.SQUISH_4D,this.dy=-o-e*E.SQUISH_4D,this.dz=-n-e*E.SQUISH_4D,this.dw=-r-e*E.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}E.NORM_2D=1/47,E.NORM_3D=1/103,E.NORM_4D=1/30,E.SQUISH_2D=(Math.sqrt(3)-1)/2,E.SQUISH_3D=(Math.sqrt(4)-1)/3,E.SQUISH_4D=(Math.sqrt(5)-1)/4,E.STRETCH_2D=(1/Math.sqrt(3)-1)/2,E.STRETCH_3D=(1/Math.sqrt(4)-1)/3,E.STRETCH_4D=(1/Math.sqrt(5)-1)/4,E.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],E.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],E.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],E.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],E.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],E.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],E.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],E.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],E.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],E.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],E.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],E.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var l,a,s,c,u,d=[],h=0;h<E.p2D.length;h+=4){for(s=E.base2D[E.p2D[h]],u=c=null,l=0;l<s.length;l+=3)u=new n(s[l],s[l+1],s[l+2]),null===c?d[h/4]=u:c.next=u,c=u;u.next=new n(E.p2D[h+1],E.p2D[h+2],E.p2D[h+3])}for(this.lookup2D=[],h=0;h<E.lookupPairs2D.length;h+=2)this.lookup2D[E.lookupPairs2D[h]]=d[E.lookupPairs2D[h+1]];var g=[];for(h=0;h<E.p3D.length;h+=9){for(s=E.base3D[E.p3D[h]],u=c=null,l=0;l<s.length;l+=4)u=new r(s[l],s[l+1],s[l+2],s[l+3]),null===c?g[h/9]=u:c.next=u,c=u;u.next=new r(E.p3D[h+1],E.p3D[h+2],E.p3D[h+3],E.p3D[h+4]),u.next.next=new r(E.p3D[h+5],E.p3D[h+6],E.p3D[h+7],E.p3D[h+8])}for(this.lookup3D=[],h=0;h<E.lookupPairs3D.length;h+=2)this.lookup3D[E.lookupPairs3D[h]]=g[E.lookupPairs3D[h+1]];var p=[];for(h=0;h<E.p4D.length;h+=16){for(s=E.base4D[E.p4D[h]],u=c=null,l=0;l<s.length;l+=5)u=new i(s[l],s[l+1],s[l+2],s[l+3],s[l+4]),null===c?p[h/16]=u:c.next=u,c=u;u.next=new i(E.p4D[h+1],E.p4D[h+2],E.p4D[h+3],E.p4D[h+4],E.p4D[h+5]),u.next.next=new i(E.p4D[h+6],E.p4D[h+7],E.p4D[h+8],E.p4D[h+9],E.p4D[h+10]),u.next.next.next=new i(E.p4D[h+11],E.p4D[h+12],E.p4D[h+13],E.p4D[h+14],E.p4D[h+15])}for(this.lookup4D=[],h=0;h<E.lookupPairs4D.length;h+=2)this.lookup4D[E.lookupPairs4D[h]]=p[E.lookupPairs4D[h+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var f=new Uint8Array(256);for(h=0;h<256;h++)f[h]=h;for((e=new Uint32Array(1))[0]=t,e=o(o(o(e))),h=255;0<=h;h--)e=o(e),(a=new Uint32Array(1))[0]=(e[0]+31)%(h+1),a[0]<0&&(a[0]+=h+1),this.perm[h]=f[a[0]],this.perm2D[h]=14&this.perm[h],this.perm3D[h]=this.perm[h]%24*3,this.perm4D[h]=252&this.perm[h],f[a[0]]=f[h];this.simplex1D=function(e){return B.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*E.STRETCH_2D,n=[e+o,t+o],r=n[0],o=n[1],n=[Math.floor(r),Math.floor(o)],i=n[0],l=n[1],n=(i+l)*E.SQUISH_2D,t=[e-(i+n),t-(l+n)],a=t[0],s=t[1],n=[r-i,o-l],t=n[0],r=n[1],o=t+r,n=new Uint32Array(4);n[0]=t-r+1,n[1]=o,n[2]=o+r,n[3]=o+t;for(var n=n[0]|n[1]<<1|n[2]<<2|n[3]<<4,c=B.lookup2D[n],u=0;void 0!==c;){var d,h=[a+c.dx,s+c.dy],g=h[0],p=h[1],f=2-g*g-p*p;0<f&&(h=(d=[i+c.xsb,l+c.ysb])[0],d=d[1],d=B.perm2D[B.perm[255&h]+d&255],u+=(f*=f)*f*(E.gradients2D[d]*g+E.gradients2D[d+1]*p)),c=c.next}return u*E.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*E.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],l=r[1],n=r[2],r=[Math.floor(i),Math.floor(l),Math.floor(n)],a=r[0],s=r[1],c=r[2],r=(a+s+c)*E.SQUISH_3D,o=[e-(a+r),t-(s+r),o-(c+r)],u=o[0],d=o[1],h=o[2],r=[i-a,l-s,n-c],o=r[0],i=r[1],l=r[2],n=o+i+l,r=new Uint32Array(7);r[0]=i-l+1,r[1]=o-i+1,r[2]=o-l+1,r[3]=n,r[4]=n+l,r[5]=n+i,r[6]=n+o;for(var r=r[0]|r[1]<<1|r[2]<<2|r[3]<<3|r[4]<<5|r[5]<<7|r[6]<<9,g=B.lookup3D[r],p=0;void 0!==g;){var f,m,z=[u+g.dx,d+g.dy,h+g.dz],y=z[0],b=z[1],v=z[2],w=2-y*y-b*b-v*v;0<w&&(f=(m=[a+g.xsb,s+g.ysb,c+g.zsb])[0],z=m[1],m=m[2],m=B.perm3D[B.perm[B.perm[255&f]+z&255]+m&255],p+=(w*=w)*w*(E.gradients3D[m]*y+E.gradients3D[m+1]*b+E.gradients3D[m+2]*v)),g=g.next}return p*E.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*E.STRETCH_4D,i=[e+r,t+r,o+r,n+r],l=i[0],a=i[1],s=i[2],r=i[3],i=[Math.floor(l),Math.floor(a),Math.floor(s),Math.floor(r)],c=i[0],u=i[1],d=i[2],h=i[3],i=(c+u+d+h)*E.SQUISH_4D,g=e-(c+i),p=t-(u+i),f=o-(d+i),m=n-(h+i),n=[l-c,a-u,s-d,r-h],i=n[0],l=n[1],a=n[2],s=n[3],r=i+l+a+s,n=new Uint32Array(11);n[0]=a-s+1,n[1]=l-a+1,n[2]=l-s+1,n[3]=i-l+1,n[4]=i-a+1,n[5]=i-s+1,n[6]=r<<6,n[7]=r+s,n[8]=r+a,n[9]=r+l,n[10]=r+i;for(var n=n[0]|n[1]<<1|n[2]<<2|n[3]<<3|n[4]<<4|n[5]<<5|n[6]<<6|n[7]<<8|n[8]<<11|n[9]<<14|n[10]<<17,z=B.lookup4D[n],y=0;void 0!==z;){var b,v,w,C=[g+z.dx,p+z.dy,f+z.dz,m+z.dw],x=C[0],k=C[1],T=C[2],A=C[3],P=2-x*x-k*k-T*T-A*A;0<P&&(b=(w=[c+z.xsb,u+z.ysb,d+z.zsb,h+z.wsb])[0],v=w[1],C=w[2],w=w[3],w=B.perm4D[B.perm[B.perm[B.perm[255&b]+v&255]+C&255]+w&255],y+=(P*=P)*P*(E.gradients4D[w]*x+E.gradients4D[w+1]*k+E.gradients4D[w+2]*T+E.gradients4D[w+3]*A)),z=z.next}return y*E.NORM_4D}},Ao.Point=function(e,t,o,n,r,i,l,a,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(l)&&(l=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(c)&&(c=0),this.createjsPoint_constructor(e,t),this.type="Point",this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=l,this.u=a,this.v=s,this.w=c,this.angle=function(e){return 180*this.createjsPoint_angle(e)/Math.PI},this.project=function(e,t){return this.createjsPoint_project(e*Math.PI/180,t)}},Ao.extend(Ao.Point,createjs.Point,["project","angle"],"createjsPoint"),Ao.Bezier=function(e,t,o,n){z_d("13.47"),this.a=e,this.b=t,this.c=o,this.d=n,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var r=this.x(0),i=this.y(0),l=0,a=1;a<=this.len;a+=1){var s=this.x(.01*a),c=this.y(.01*a),u=r-s,d=i-c;l+=Math.sqrt(u*u+d*d),this.arcLengths[a]=l,r=s,i=c}this.length=l},Ao.Bezier.prototype={map:function(e){for(var t=e*this.arcLengths[this.len],o=0,n=this.len,r=0;o<n;)r=o+((n-o)/2|0),this.arcLengths[r]<t?o=r+1:n=r;this.arcLengths[r]>t&&r--;e=this.arcLengths[r];return e===t?r/this.len:(r+(t-e)/(this.arcLengths[r+1]-e))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+(1-e)*(1-e)*3*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+(1-e)*(1-e)*3*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},Ao.Boundary=function(e,t,o,n){z_d("13.46"),e.x&&(n=e.height,o=e.width,t=e.y,e=e.x),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)||(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n),this})},Ao.GradientColor=function(e,t,o,n,r,i){if(z_d("13.465"),this.type="GradientColor",this.colors=zot(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),1==this.colors.length&&this.colors.push(this.colors[0]),this.ratios=zot(t)?0:t,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var l=0;l<this.colors.length;l++)this.ratios.push(l/(this.colors.length-1))}!zot(o)&&(zot(n)||zot(r)||zot(i))?(this.angle=o,o=null):zot(this.angle)&&zot(o)&&zot(n)&&zot(r)&&zot(i)?this.angle=0:(this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.x1=zot(r)?0:r,this.y1=zot(i)?100:i)},Ao.RadialColor=function(e,t,o,n,r,i,l,a){if(z_d("13.466"),this.type="RadialColor",this.colors=zot(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),1==this.colors.length&&this.colors.push(this.colors[0]),this.ratios=t,!Array.isArray(this.ratios)){this.ratios=[];for(var s=0;s<this.colors.length;s++)this.ratios.push(s/(this.colors.length-1))}this.x0=o,this.y0=n,this.r0=r,this.x1=i,this.y1=l,this.r1=a},Ao.BitmapColor=function(e,t,o){z_d("13.467"),this.type="BitmapColor","string"==typeof e&&WW.asset&&(e=WW.asset(e)),"Bitmap"!=e.type&&e.bitmap&&(e=e.bitmap),this.image="Bitmap"==e.type?e.image:e,this.repetition=t,this.matrix=o},Ao.Damp=function(e,t){z_d("14");var o;if(o=zob(Ao.Damp,arguments,"startValue, damp",this))return o;this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},Ao.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},Ao.Damp.prototype.immediate=function(e){return this.lastValue=e,this},Ao.Proportion=function(t,o,n,r,i,l,a){var e,s;if(e=zob(Ao.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",this))return e;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(l)&&(l=!1),zot(a)&&(a=!0),this.convert=function(e){if(zot(e)&&(e=t),!isNaN(e)&&o-t!=0)return a&&(e=Math.max(e,t),e=Math.min(e,o)),s=(e-t)/(o-t),s=0<i?n+(r-n)*s:r-(r-n)*s,l&&(s=Math.round(s)),s}},Ao.ProportionDamp=function(e,t,o,n,r,i,l,a){var s;if(s=zob(Ao.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",this))return s;z_d("16"),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=.1),zot(i)&&(i=1),zot(l)&&(l=!1),zot(a)&&(a=!0),this.damp=r;var c,u,d,h=this,g=0,p=e,g=o,f=setInterval(m,20);function m(){isNaN(p)||t-e==0||(a&&(p=Math.max(p,e),p=Math.min(p,t)),c=(p-e)/(t-e),u=n-o,g+=((d=0<i?o+u*c:n-u*c)-g)*h.damp)}this.immediate=function(e){return h.convert(e),m(),g=d,l&&(g=Math.round(g)),h},this.immediateValue=function(e){return g=e,h},this.convert=function(e){return p=e,l?Math.round(g):g},this.dispose=function(){return clearInterval(f),!0}},Ao.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var o=this.objects=[],n=this.values=[];this.add=function(e,t){zot(e)||(zot(t)&&(t=!0),this.unique&&this.remove(e),o.push(e),n.push(t),this.length++)},this.at=function(e){if(!zot(e)){e=o.indexOf(e);return-1<e?n[e]:null}},this.remove=function(e){if(zot(e))return!1;e=o.indexOf(e);return-1<e&&(o.splice(e,1),n.splice(e,1),this.length--,!0)},this.clear=function(){return o=this.objects=[],n=this.values=[],this.length=null,this},this.dispose=function(){return n=o=null,!(this.length=null)}},Ao.Hierarchy=function(t,s){z_d("17.5");var o,a=this;function n(e){var r=[],i=[];return function o(e,n){Ao.loop(e,function(e,t){r.push(t.obj),i.push(e),t.open&&o(t.list,n+1)})}(e,0),[r,i]}zot(t)||(zot(s)&&(s=!1),a.processSimple=function(l){var a=0,e={};return function n(e,r,i,o){var t;zot(e)||(l=e),l.constructor=={}.constructor?(l.list&&(l=(t=l).list),o&&t&&Ao.loop(t,function(e,t){"list"!=e&&(o[e]=t)}),Ao.loop(l,function(e,t){var o={},e=r["id"+a]={obj:e,level:i,open:s,opened:!1,list:o};a++,n(t,o,i+1,e)})):Array.isArray(l)&&Ao.loop(l,function(e){r["id"+a]={obj:e},a++})}(t,e,0),o=a,e},a.processComplex=function(e){var r=0;return function o(e,n){Ao.loop(e,function(e,t){t.level=n,zot(t.open)&&(t.open=s),zot(t.opened)&&(t.opened=!1),t.list&&o(t.list,n+1),r++})}(e,0),o=r,e},zot(t.id0)?a.data=a.processSimple(t):a.data=a.processComplex(t),a.getLinearList=function(e){return zot(e)&&(e=a.data),n(e)[0]},a.getLinearIDs=function(e){return zot(e)&&(e=a.data),n(e)[1]},a.getData=function(n){var r;return function o(e){Ao.loop(e,function(e,t){return e==n?r=t:void o(t.list)})}(a.data),r},a.getNextSibling=function(n){var r,i;return function o(e){Ao.loop(e,function(e,t){return!i&&r?i=e:void(e==n?r=t:o(t.list))})}(a.data),i},a.getPrevSibling=function(r){var i,l=[];return function o(e,n){Ao.loop(e,function(e,t){return e==r?i=l[n]||l[n-1]:(l[n]=e,void o(t.list,n+1))})}(a.data,0),i},Object.defineProperty(a,"length",{get:function(){return o},set:function(){zon&&zogy("Hierarchy() - length is read only")}}))},Ao.Pick=function(e){Ao.pickCheck||(z_d("17.6"),Ao.pickCheck=!0),this.choices=e,this.num=function(e){for(var t=[],o=0;o<e;o++)t.push(Ao.Pick.choose(this));return this.choices=Ao.Pick.series(t),this};var r=this;this.loop=function(e,t){for(var o,n=0;n<e;n++)if(void 0!==(o=t(Ao.Pick.choose(r),n,e)))return o}},Ao.Pick.prototype.type="Pick",Ao.Pick.series=function(){return Ao.pickCheck||(z_d("17.6"),Ao.pickCheck=!0),Ao.series.apply(null,arguments)},Ao.Pick.rand=function(e,t,o,n){return Ao.pickCheck||(z_d("17.6"),Ao.pickCheck=!0),Ao.rand(e,t,o,n)},Ao.Pick.choose=function(e,t,o){if(Ao.pickCheck||(z_d("17.6"),Ao.pickCheck=!0),null==t&&(t=!0),null==e)return e;if("Pick"==e.type||t){var n,t=e.choices||e;return Array.isArray(t)?(n=t[Math.floor(Math.random()*t.length)],Ao.Pick.choose(n)):t.constructor==={}.constructor?zot(t.noPick)?zot(t.max)?t:(zot(t.integer)&&(t.integer=!1),n=Ao.Pick.rand(t.min,t.max,t.integer,t.negative)):t.noPick:t instanceof Function?(null==t.count?t.count=0:t.count++,Ao.Pick.choose(t(o,!0))):e}return e},Ao.Pick.getMinMax=function(e){return zot(e.min)||zot(e.max)?Array.isArray(e)?Ao.arrayMinMax(e):"series"==e.type?Ao.arrayMinMax(e.array):{min:null,max:null}:e},Ao.scrollX=function(e,t){return z_d("18"),Ao.abstractScroll("X","Left",e,t)},Ao.scrollY=function(e,t){return z_d("19"),Ao.abstractScroll("Y","Top",e,t)},Ao.abstractScroll=function(e,t,o,n){z_d("20");var r,i,l,a,s,c=Po(n),u="X"==e?"Y":"X";return zot(o)?document.documentElement&&document.documentElement["scroll"+t]||document.body["scroll"+t]:(zot(n)?WW.scrollTo(Ao["scroll"+u](),o):((c=n*("s"==c?1e3:1))<50&&(c=50),r=c/50,i=Ao["scroll"+e](),l=(o-i)/r,a=0,s=setInterval(function(){a++,i+=l,WW.scrollTo(Ao["scroll"+u](),i),r<=a&&(WW.scrollTo(Ao["scroll"+u](),o),clearInterval(s))},50)),o)},Ao.windowWidth=function(){z_d("21");var e,t=isNaN(WW.innerWidth)?WW.clientWidth:WW.innerWidth,o=isNaN(WW.innerHeight)?WW.clientHeight:WW.innerHeight;return!Ao.mobile()||zot(WW.orientation)||WW.parent||(o<t&&90!=Math.abs(WW.orientation)||t<o&&90==Math.abs(WW.orientation))&&(e=t,t=o,o=e),WW.zdf&&WW.zdf.swapRotation?o:t},Ao.windowHeight=function(){z_d("22");var e,t=isNaN(WW.innerWidth)?WW.clientWidth:WW.innerWidth,o=isNaN(WW.innerHeight)?WW.clientHeight:WW.innerHeight;return!Ao.mobile()||zot(WW.orientation)||WW.parent||(o<t&&90!=Math.abs(WW.orientation)||t<o&&90==Math.abs(WW.orientation))&&(e=t,t=o,o=e),WW.zdf&&WW.zdf.swapRotation?t:o},Ao.browserZoom=function(){if(Ao.zimBZ)return zot(Ao.zimBZA)?Ao.decimals((WW.devicePixelRatio||1)/Ao.zimBZ1,2):Ao.zimBZA;if(z_d("22.2"),Ao.zimBZ=!0,void 0===e){if(!WW.zdf)return Ao.zimBZA=1;var e=WW.zdf}if(!e.retina)return Ao.zimBZA=1;Ao.zimBZ1=WW.devicePixelRatio||1},Ao.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""==e)return{};for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");void 0===o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o},Ao.swapHTML=function(e,t){return z_d("17.2"),Ao.swapProperties("innerHTML",zid(e),zid(t))},Ao.urlEncode=function(e){return z_d("23"),e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},Ao.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},Ao.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){var n=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toGMTString()):"";return document.cookie=e+"="+escape(t)+n+"; path=/",!0}},Ao.getCookie=function(e){z_d("26");for(var t,o=document.cookie.split(/;\s*/),n=new Array,r=0;r<o.length;r++)n[(t=o[r].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},Ao.deleteCookie=function(e){return z_d("27"),!zot(Ao.getCookie(e))&&(Ao.setCookie(e,"",-1),!0)},null==createjs)return zon&&zogr("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),Ao;function rt(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}var c;Ao.localToGlobal=function(e,t,o,n){if(Ao.coordinatesCheck||(z_d("50.43"),Ao.coordinatesCheck=!0),null!=e&&null!=t){t=n.call(o,e,t),o=o.stage;if(!WW.zdf){if(!o)return t;WW.zdf={stage:o,canvas:o.canvas}}return t.x/=Ao.scaX,t.y/=Ao.scaY,t}},Ao.globalToLocal=function(e,t,o,n){if(Ao.coordinatesCheck||(z_d("50.43"),Ao.coordinatesCheck=!0),null!=e&&null!=t){var r=o.stage;if(!WW.zdf){if(!r)return n.call(o,e,t);WW.zdf={stage:r,canvas:r.canvas}}return e*=Ao.scaX,t*=Ao.scaY,n.call(o,e,t)}},Ao.localToLocal=function(e,t,o,n){if(Ao.coordinatesCheck||(z_d("50.43"),Ao.coordinatesCheck=!0),null!=e&&null!=t&&null!=o){t=n.localToGlobal(e,t),n=n.stage;if(!WW.zdf){if(!n)return o.globalToLocal(t.x,t.y);WW.zdf={stage:n,canvas:n.canvas}}return o==(n=n||WW.zdf.stage)?t:t?o.globalToLocal(t.x,t.y):void 0}},Ao.displayBase=function(n){Ao.zimDBCheck||(z_d("50.432"),Ao.zimDBCheck=!0);var t,o,r,i=n;Object.defineProperty(n,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t,o;!1!==n.scaleDimensions?zot(t=this.getBounds())||0==t.width?zon&&zogy("DisplayObject() - width needs bounds set with setBounds()"):(o=e/t.width,this.scaleX=this.scaleY=o):(o=0!=n.width?n.height/n.width:0,n.setWidth(e),n.setHeight(e*o),n.drawShape())}}),Object.defineProperty(n,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t,o;!1!==n.scaleDimensions?zot(t=this.getBounds())||0==t.height?zon&&zogy("DisplayObject() - height needs bounds set with setBounds()"):(o=e/t.height,this.scaleX=this.scaleY=o):(o=0!=n.height?n.width/n.height:0,n.setHeight(e),n.setWidth(e*o),n.drawShape())}}),Object.defineProperty(n,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t;!1!==n.scaleDimensions?!zot(t=this.getBounds())&&0!=t.width||!zon?(t=e/t.width,this.scaleX=t):zogy("DisplayObject() - widthOnly needs bounds set with setBounds()"):(n.setWidth(e),n.drawShape())}}),Object.defineProperty(n,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t;!1!==n.scaleDimensions?!zot(t=this.getBounds())&&0!=t.height||!zon?(t=e/t.height,this.scaleY=t):zogy("DisplayObject() - heightOnly needs bounds set with setBounds()"):(n.setHeight(e),n.drawShape())}}),Object.defineProperty(n,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(e){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(e,this.parent.numChildren-1)))}}),Object.defineProperty(n,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){var t;this._depth=e,zot(this.vrChannel)||(t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0,"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t))}}),Object.defineProperty(n,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),i.name||Object.defineProperty(i,"name",{get:function(){return t},set:function(e){t=e,Ao.zimObjectIDs[e]=i}}),i._draggable,Object.defineProperty(i,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),i.on("mousedown",function(e){e.target.stage&&(o=e.target.stage.frame).allowDefault&&(r=!0,o.allowDefault=!1)}),i.on("pressup",function(){o&&r&&(o.allowDefault=!0)});for(var l=["hue","saturation","brightness","contrast"],a=0;a<l.length;a++)!function(){for(var o=l[a],e=0;e<2;e++)!function(){var t=0==e?"":"Batch";Object.defineProperty(i,o+t,{get:function(){return i.effects&&i.effects.multi?i.effects.multi[o]:0},set:function(e){i.effects&&i.effects.multi?i.effects.multi[o]=e:i.effect(new Ao.MultiEffect("hue"==o?e:0,"saturation"==o?e:0,"brightness"==o?e:0,"contrast"==o?e:0)),t||i.updateEffects()}})}()}()},Ao.gD=function(e){Ao.zimGDCheck||(z_d("50.435"),Ao.zimGDCheck=!0),e&&(Ao.KEYFOCUS==e&&(Ao.KEYFOCUS=null),WW.KEYFOCUS==e&&(WW.KEYFOCUS=null),e.draggable&&e.noDrag(),e.zimTweens&&e.stopAnimate(),e.zimWire&&e.noWire(),e.zimWired&&e.noWired(),e.zimClickHoldDownEvent&&e.noHold(),e.transformControls&&e.transformControls.dispose(),e.zimClickDownEvent&&(e.zimClickDownEvent=null),e.zimClickUpEvent&&(e.zimClickUpEvent=null),e.physics&&e.removePhysics(),e.name&&Ao.zimObjectIDs[e.name]==e&&delete Ao.zimObjectIDs[e.name])},Ao.Stage=function(e,t,o){var n;z_d("50.44"),zot(e)||(zot(n="CANVAS"==e.tagName?e:zid(e))||(this.cjsStage_constructor(e),this.setBounds(0,0,n.width,n.height),this.type="Stage",WW.zdf||(WW.zimDefaultFrame=WW.zdf={stage:this}),o?createjs.Touch.enable(this,!0):t&&createjs.Touch.enable(this,!1),this.cache=function(e,t,o,n,r,i){var l,a;return zot(o)&&(zot(e)?zot(l=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a):(o=e,n=t,t=e=0)),this.cjsStage_cache(e,t,o,n,r,i),this},this.on("mousedown",function(e){var t=e.clone();t.type="pressdown",e.target.dispatchEvent(t)},void 0,!1,void 0,!0),this.loop=function(e,t,o,n,r){return Ao.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,l,a,s,c,u,d){return Ao.hitTestGrid(this,e,t,o,n,r,i,l,a,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},this.frame=WW.zdf,!createjs||createjs.stageTransformable||!WW.zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,Ao.scaX=createjs.stageTransformable?1:e,Ao.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,Ao.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,Ao.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsStage_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)})))},Ao.extend(Ao.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),Ao.StageGL=function(e,t,o,n){var r;z_d("50.45"),zot(e)||(zot(r="CANVAS"==e.tagName?e:zid(e))||(this.cjsStageGL_constructor(e,t),this.setBounds(0,0,r.width,r.height),this.type="StageGL",WW.zdf||(WW.zdf={stage:this}),n?createjs.Touch.enable(this,!0):o&&createjs.Touch.enable(this,!1),this.cache=function(e,t,o,n,r,i){var l,a;return zot(o)&&(zot(e)?zot(l=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a):(o=e,n=t,t=e=0)),this.cjsStageGL_cache(e,t,o,n,r,i),this},this.on("mousedown",function(e){var t=e.clone();t.type="pressdown",e.target.dispatchEvent(t)},void 0,!1,void 0,!0),this.loop=function(e,t,o,n,r){return Ao.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,l,a,s,c,u,d){return Ao.hitTestGrid(this,e,t,o,n,r,i,l,a,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},this.frame=WW.zdf,!createjs||createjs.stageTransformable||!WW.zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,Ao.scaX=createjs.stageTransformable?1:e,Ao.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,Ao.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,Ao.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)})))},Ao.extend(Ao.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),Ao.Container=function(e,t,o,n,r,i,l){var a;if(a=zob(Ao.Container,arguments,"a, b, c, d, style, group, inherit",this))return a;Ao.containerCheck||(z_d("50.5"),z_d("50.435"),Ao.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=i;var c=this,i=!1===r?{}:Ao.getStyle(this.type,this.group,l);zot(e)&&(e=null!=i.a?i.a:null),zot(t)&&(t=null!=i.b?i.b:null),zot(o)&&(o=null!=i.c?i.c:null),zot(n)&&(n=null!=i.d?i.d:null);n=s(e,t,o,n);function s(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(t)?e.x?r=[e.x,e.y,e.width,e.height]:(r[0]=0,r[1]=0,r[2]=e,r[3]=e):zot(o)?(r[0]=0,r[1]=0,r[2]=e,r[3]=t):(r[0]=e,r[1]=t,r[2]=o,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}zot(e)||this.setBounds(n[0],n[1],n[2],n[3]),this.cache=function(e,t,o,n,r,i,l){if("AC"==c.type&&WW.zdf)return WW.zdf.ac("cache",arguments,c),c;if(a=zob(c.cache,arguments,"a,b,c,d,scale,options,margin"))return a;var a,s=c.getBounds();return zot(o)&&(zot(e)?zot(s)||(a=0<c.borderWidth?c.borderWidth/2:0,e=s.x-a,t=s.y-a,o=s.width+2*a,n=s.height+2*a):(o=e,n=t,t=e=0)),"Triangle"==c.type&&(e-=c.borderWidth||0,o+=c.borderWidth?2*c.borderWidth:0,t-=c.borderWidth||0,n+=c.borderWidth?2*c.borderWidth:0),zot(l)&&(l=0),c.cjsContainer_cache(e-l,t-l,o+2*l,n+2*l,r,i),s&&c.setBounds(s.x,s.y,s.width,s.height),c},this.uncache=function(){return c.cjsContainer_uncache(),c},this.childrenToBitmap=function(){var e=this.cacheCanvas,t=new Ao.Bitmap(this.cache().cacheCanvas);return e||this.uncache(),this.removeAllChildren(),t.addTo(this),this};n=WW.zdf||1;createjs&&!createjs.stageTransformable&&n.retina&&(this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)}),this.setBounds=function(e,t,o,n){n=s(e,t,o,n);return c.cjsContainer_setBounds(n[0],n[1],n[2],n[3]),c},this.getBounds=function(e){return e?c.boundsToGlobal(null,null,null,e):c.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},Ao.displayBase(c),!1!==r&&Ao.styleTransforms(this,i),this.clone=function(e){if("AC"==this.type&&WW.zdf)return zon&&zogy("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),WW.zdf.ac("clone",arguments,this),this;var t=this.getBounds();return zot(t)&&(t={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new Ao.Container(t.x,t.y,t.width,t.height,r,this.group,l)),e)},this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)}},Ao.Container.prototype.dispose=function(e){return function e(t,o){t&&Ao.gD(t);!o&&t&&t.dispose&&t.dispose!==Ao.Container.prototype.dispose&&t.dispose(null,null,!0);if(t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var n=t.numChildren-1;0<=n;n--)e(t.getChildAt(n));t&&t.parent&&t.parent.removeChild(t)}(this,e),!0},Ao.Container.prototype.specialColor=function(e,t,o){if("GradientColor"==t.type){if(!zot(t.angle)){if(!o.width)return void(e.style=t.colors[0]);var n,r,i,l,a,s,c,u=o.getBounds();t.angle+=36e6,t.angle%=360,"Circle"==o.type?(i=u.width/2*Math.cos(t.angle*RAD),l=u.width/2*Math.sin(t.angle*RAD),t.x0=-i,t.y0=-l,t.x1=i,t.y1=l):(c=t.angle%90,n=(a=u.width*Math.sin(c*RAD))*Math.sin(c*RAD),r=-a*Math.cos(c*RAD),s=u.height*Math.sin(c*RAD),i=u.width+s*Math.cos(c*RAD),l=s*Math.sin(c*RAD),s=-(a=u.height*Math.sin(c*RAD))*Math.cos(c*RAD),c=u.height-a*Math.sin(c*RAD),0<=t.angle&&t.angle<90?(t.x0=u.x+n,t.y0=u.y+r,t.x1=u.x+i,t.y1=u.y+l):90<=t.angle&&t.angle<180?(t.x0=u.x+n,t.y0=u.y+r,t.x1=u.x+s,t.y1=u.y+c):(180<=t.angle&&t.angle<270?(t.x0=u.x+i,t.y0=u.y+l):(t.x0=u.x+s,t.y0=u.y+c),t.x1=u.x+n,t.y1=u.y+r))}e.linearGradient(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1)}else if("RadialColor"==t.type){if(zot(t.x0)){if(!o.width)return void(e.style=t.colors[0]);u=o.getBounds();t.r0=0,"Circle"==o.type?(t.x0=0,t.y0=0,t.r1=u.width/2):(t.x0=u.x+u.width/2,t.y0=u.y+u.height/2,t.r1=Math.sqrt(Math.pow(u.width/2,2)+Math.pow(u.height/2,2))),t.x1=t.x0,t.y1=t.y0}e.radialGradient(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}else"BitmapColor"==t.type&&e.bitmap(t.image,t.repetition,t.matrix)},Ao.extend(Ao.Container,createjs.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),zimify(Ao.Container.prototype),Ao.Shape=function(e,t,o,n,r,i,l,a,s){if(c=zob(Ao.Shape,arguments,"a, b, c, d, graphics, optimize, style, group, inherit",this))return c;z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape",this.group=a;var c=!1===l?{}:Ao.getStyle(this.type,this.group,s),u=this;zot(e)&&(e=null!=c.a?c.a:null),zot(t)&&(t=null!=c.b?c.b:null),zot(o)&&(o=null!=c.c?c.c:null),zot(n)&&(n=null!=c.d?c.d:null),zot(r)&&(r=null!=c.graphics?c.graphics:null),zot(i)&&(i=null!=c.optimize&&c.optimize);n=d(e,t,o,n);function d(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(t)?e.x?r=[e.x,e.y,e.width,e.height]:(r[0]=0,r[1]=0,r[2]=e,r[3]=e):zot(o)?(r[0]=0,r[1]=0,r[2]=e,r[3]=t):(r[0]=e,r[1]=t,r[2]=o,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}if(zot(e)||this.setBounds(n[0],n[1],n[2],n[3]),!i)for(var h=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],g=0;g<h.length;g++)!function(){var e=g;u[h[e]]=function(){return("ct"==h[e]?u.graphics.curveTo:u.graphics[h[e]]).apply(u.graphics,arguments),u}}();Object.defineProperty(u,"command",{get:function(){return u.graphics.command},set:function(){}}),this.cache=function(e,t,o,n,r,i,l){if(a=zob(u.cache,arguments,"a,b,c,d,scale,options,margin"))return a;var a,s=u.getBounds();return zot(o)&&(zot(e)?zot(s)||(a=0<u.borderWidth?u.borderWidth/2:0,e=s.x-a,t=s.y-a,o=s.width+2*a,n=s.height+2*a):(o=e,n=t,t=e=0)),zot(l)&&(l=0),u.cjsShape_cache(e-l,t-l,o+2*l,n+2*l,r,i),u},this.setBounds=function(e,t,o,n){n=d(e,t,o,n);return this.cjsShape_setBounds(n[0],n[1],n[2],n[3]),this},!(this.getBounds=function(e){return e?u.boundsToGlobal(null,null,null,e):u.cjsShape_getBounds()})!==l&&Ao.styleTransforms(this,c),this.clone=function(e){zot(e)&&(e=!0);var t=this.getBounds();zot(t)&&(t={x:null,y:null,width:null,height:null});t=u.cloneProps(new Ao.Shape(t.x,t.y,t.width,t.height,r,l,a,s));return t.graphics=e?u.graphics.clone():u.graphics,t};c=WW.zdf||1;createjs&&!createjs.stageTransformable&&c.retina&&(this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsShape_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)},Ao.displayBase(u),this.dispose=function(){Ao.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},Ao.extend(Ao.Shape,createjs.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(Ao.Shape.prototype),Ao.Bitmap=function(a,p,f,m,z,t,o,e,n){if(r=zob(Ao.Bitmap,arguments,"image, width, height, left, top, scale, style, group, inherit",this))return r;z_d("50.7"),this.group=e;var r=!1===o?{}:Ao.getStyle("Bitmap",this.group,n);zot(t)&&(t=null!=r.scale?r.scale:1),zot(p)&&(p=null!=r.width?r.width:a?a.width:100),zot(f)&&(f=null!=r.height?r.height:a?a.height:100),zot(m)&&(m=null!=r.left?r.left:0),zot(z)&&(z=null!=r.top?r.top:0);var i,l,e=!1,s=a;zot(a)||a.uncache&&(e=!0,i=a.cacheCanvas,a=(l=a).cache(m,z,p,f,t).cacheCanvas),this.cjsBitmap_constructor(a),l&&!i&&l.uncache();var y=this;this.type="Bitmap",zot(p)||zot(f)||this.setBounds(0,0,p,f),this.drawImageData=function(e,t,o,n,r,i){var l;zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=p),zot(i)&&(i=f),y.proxyCanvas||((l=y.proxyCanvas=document.createElement("canvas")).setAttribute("width",p),l.setAttribute("height",f),y.proxyContext=l.getContext("2d"),a=s=y.image=l),y.proxyContext&&y.proxyContext.putImageData(y.imageData,e,t,o,n,r,i)},WW.zdf&&(WW.zdf.canvas.getContext("2d")?this.imageData=WW.zdf.canvas.getContext("2d").createImageData(p,f):this.imageData=document.createElement("canvas").getContext("2d").createImageData(p,f),zot(a)&&y.drawImageData(),a&&a.match&&a.match(/data:image/i)&&setTimeout(function(){y.stage&&y.stage.update(),setTimeout(function(){y.stage&&y.stage.update()},50)},50)),a&&a.nodeName&&"video"!=a.nodeName.toLowerCase()&&(y.sourceRect=e?{x:0,y:0,width:p*t,height:f*t}:{x:m,y:z,width:p,height:f}),this.setBounds=function(e,t,o,n){var r,n=(r=t,t=o,o=n,n=[],zot(e=e)?n=[e,r,t,o]:zot(r)?e.x?n=[e.x,e.y,e.width,e.height]:(n[0]=0,n[1]=0,n[2]=e,n[3]=e):zot(t)?(n[0]=0,n[1]=0,n[2]=e,n[3]=r):(n[0]=e,n[1]=r,n[2]=t,n[3]=o),zot(n[3])&&(n[3]=n[2]),n);return y.cjsBitmap_setBounds(n[0],n[1],n[2],n[3]),y},this.getBounds=function(e){return e?y.boundsToGlobal(null,null,null,e):y.cjsBitmap_getBounds()},this.cache=function(e,t,o,n,r,i,l){var a,s;return zot(o)&&(zot(e)?zot(s=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=s.x-a,t=s.y-a,o=s.width+2*a,n=s.height+2*a):(o=e,n=t,t=e=0)),s=this.getBounds(),this.cjsBitmap_cache(e,t,o,n,r,i,l),this.setBounds(s.x,s.y,s.width,s.height),this},this.clone=function(){var e=this.cloneProps(new Ao.Bitmap(s,p,f,m,z,t,o,this.group,n));return e.cloned=!0,e.src=y.src,e.file=y.file,e.image=y.image,e.svg=y.svg,e.item=y.item,e};var b,c=WW.zdf||1;createjs&&!createjs.stageTransformable&&c.retina&&(this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)},this.getColorAt=function(e,t,o){b||(y.cache(),b=y.cacheCanvas.getContext("2d",{willReadFrequently:!0}),y.uncache());t=b.getImageData(e,t,1,1).data;return t[3]/=255,o?t:"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},this.keyOut=function(e,t,o){zot(e)&&(e="#389b26"),zot(t)&&(t=.1),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),zot(o)||Array.isArray(o)||(o=[o]);for(var n=[],r=[],i=[],l=0;l<e.length;l++)n[l]=Ao.convertColor(e[l],"array"),null!=t[l]?r[l]=255*t[l]:r[l]=255*t[0],o&&(null!=o[l]?i[l]=Ao.convertColor(o[l],"array"):i[l]=Ao.convertColor(o[0],"array"),i[l][3]*=255);y.cacheCanvas&&y.updateCache(),b||(y.cache(),b=y.cacheCanvas.getContext("2d",{willReadFrequently:!0}));var a=b.getImageData(m,z,p,f),s=a.data,c=s.length/4;if(o)for(l=0;l<c;l++)for(var u=s[4*l+0],d=s[4*l+1],h=s[4*l+2],g=0;g<e.length;g++)u>n[g][0]-r[g]&&u<n[g][0]+r[g]&&d>n[g][1]-r[g]&&d<n[g][1]+r[g]&&h>n[g][2]-r[g]&&h<n[g][2]+r[g]&&(s[4*l+0]=i[g][0],s[4*l+1]=i[g][1],s[4*l+2]=i[g][2],s[4*l+3]=i[g][3]);else for(l=0;l<c;l++){u=s[4*l+0],d=s[4*l+1],h=s[4*l+2];for(g=0;g<e.length;g++)u>n[g][0]-r[g]&&u<n[g][0]+r[g]&&d>n[g][1]-r[g]&&d<n[g][1]+r[g]&&h>n[g][2]-r[g]&&h<n[g][2]+r[g]&&(s[4*l+3]=0)}return b.putImageData(a,z,m),this},Ao.displayBase(y),!1!==o&&Ao.styleTransforms(this,r),this.doDispose=function(){Ao.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&((c=this.stage&&this.stage.frame?this.stage.frame:WW.zdf)&&c.assets&&c.assets[this.id]&&delete c.assets[this.id],Ao.assets[this.id]&&delete Ao.assets[this.id]),this.parent&&this.parent.removeChild(this)}},Ao.Bitmap.fromData=function(t,o){var n=100,r=100,i=new Image;i.onload=function(){n=i.naturalWidth,r=i.naturalHeight,zot(n)&&(n=i.width),zot(r)&&(r=i.height);var e=new Ao.Bitmap(t,n,r);setTimeout(function(){o(e)},50)},i.src=t},Ao.extend(Ao.Bitmap,createjs.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),Ao.Bitmap.prototype.dispose=function(){return this.doDispose()},zimify(Ao.Bitmap.prototype),Ao.Sprite=function(t,o,n,r,i,l,a,s,c,u,d,h,e,g,p,f,m,z,y,b){if(w=zob(Ao.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",this))return w;z_d("50.8"),this.type="Sprite",this.group=y;var v,w=!1===z?{}:Ao.getStyle(this.type,this.group,b),_=this;if(zot(m)&&(m=null!=w.frame?w.frame:WW.zdf),t&&"string"==typeof t&&(t=m.asset(t)),zot(h)&&!zot(t)){zot(o)&&(o=null!=w.cols?w.cols:1),zot(n)&&(n=null!=w.rows?w.rows:1),zot(r)&&(r=null!=w.count?w.count:o*n),zot(i)&&(i=null!=w.offsetX?w.offsetX:0),zot(l)&&(l=null!=w.offsetY?w.offsetY:0),zot(a)&&(a=null!=w.spacingX?w.spacingX:0),zot(s)&&(s=null!=w.spacingY?w.spacingY:0),zot(c)&&(c=(null!=w.width?w:t).width),zot(u)&&(u=(null!=w.height?w:t).height),t.bitmap&&(t=t.bitmap);var C=(c-i+a)/o-a,x=(u-l+s)/n-s,k=[],T=0;e:for(var A=0;A<n;A++)for(var P=0;P<o;P++){if(++T>r)break e;k.push([i+P*(C+a),l+A*(x+s),C,x])}W(t,k,d)}else if(p)d=(v=p).animations;else{if(!h)return;var B,E,I,m=_.stage?_.stage.frame:WW.zdf;if("string"==typeof h&&(h=m.asset(h)),h.frames&&!Array.isArray(h.frames)){for(E in B=[],h.frames)S=h.frames[E].frame,B.push([S.x,S.y,S.w,S.h]);h.frames=B}if(h.frames&&!Array.isArray(h.frames[0])){for(B=[],E=0;E<h.frames.length;E++){var S=h.frames[E].frame;B.push([S.x,S.y,S.w,S.h])}h.frames=B}!h.images&&h.meta&&h.meta.image&&(h.images=[h.meta.image]),k=h.frames,d=h.animations,zot(t)?(y=h.images?h.images[0]:null)&&y.split?(I=[],Ao.loop(h.images,function(e){var t=e.split("/").pop();m.asset(t)&&"EmptyAsset"!=m.asset(t).type?I.push(m.asset(t)):m.asset(e)&&"EmptyAsset"!=m.asset(e).type||"EmptyAsset"!=m.asset(e).type?I.push(m.asset(e)):zon&&zogy("Sprite() - please preload Sprite in Frame or with loadAssets")}),W(I,k,d)):v=new createjs.SpriteSheet(h):W(t,k,d)}function W(o,e,t){Array.isArray(o)||(o=[o]),Ao.loop(o,function(e,t){o[t]=e.image});t={images:o,frames:e,animations:t||[]};v=new createjs.SpriteSheet(t)}this.animations=d,this.cjsSprite_constructor(v,f),zot(f)||this.stop(),zot(e)&&(e=Ao.makeID()),this.id=e,zot(g)&&(g=!0),_.globalControl=g;var D,Y=0;this.parseFrames=function(e,t,o,n){var i=[],l=Number.MAX_VALUE,a=0;if(zot(e))zot(t)&&(t=0),zot(o)&&(o=_.totalFrames-1),s(t,o);else{if(zot(_.animations)||zot(_.animations[e]))return[];r(_.animations[e])}function r(e){var t;Array.isArray(e)?(s((t=e)[0],t[1],t[3]),t[2]&&!zot(_.animations[t[2]])&&r(_.animations[t[2]])):e.constructor=={}.constructor?function(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<l&&(l=e.speed),e.speed>a&&(a=e.speed),i.push({f:e.frames[t],s:e.speed});e.next&&!zot(_.animations[e.next])&&r(_.animations[e.next])}}(e):isNaN(e)||i.push({f:Math.floor(e),s:1})}function s(e,t,o){var n;if(zot(o)&&(o=1),e<t)for(n=e;n<=t;n++)r(n);else for(n=t;n<=e;n++)r(e-(n-t));function r(e){o<l&&(l=o),a<o&&(a=o),i.push({f:e,s:o})}}if(n)return i;l=Ao.constrain(Ao.decimals(l),.1),a=Ao.constrain(Ao.decimals(a),.1);for(var c,u=[],d=l!=a,h=0;h<i.length;h++)if(c=i[h],d)for(var g=0;g<Ao.constrain(Math.round(l<1?c.s/l:c.s),.1);g++)u.push(c.f);else u.push(c.f);return u},this.run=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){if(E=zob(_.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur"))return E;var E=Po();if(zot(T)&&(T=1),zot(A)||(_.id=A),zot(P)||(_.globalControl=P),Array.isArray(t)){for(var I,S,W=[],M=0,O=0;O<t.length;O++){(j=t[O]).lookup=_.parseFrames(j.label,j.startFrame,j.endFrame),0==O&&(S=j.lookup[0]),delete j.startFrame,delete j.endFrame,j.obj=Ao.merge(j.obj,{normalizedFrame:j.lookup.length-1}),j.set=Ao.merge(j.set,{normalizedFrames:{noPick:j.lookup},normalizedFrame:0}),zot(j.wait)&&(j.wait=M*T),I=j.label,delete j.label,W.push(j),M=0;var j=zot(j.time)?e:j.time;0<k-x&&(M=j/(k-x)/2)}if(0==W.length)return this;1==W.length?(e=W[0].time,t=I,L()):_.gotoAndStop(S)}else L();function L(){D=_.parseFrames(t,x,k),Y=0,_.gotoAndStop(D[Y]),x=k=null,W={normalizedFrame:D.length-1}}zot(e)&&(e="s"==E?1:1e3),_.running&&_.stopAnimate(_.id),_.running=!0,Array.isArray(W)||((M=0)<k-x&&(M=e/Math.abs(k-x)/2),D&&0<D.length&&(M=e/D.length/2),zot(c)&&(c=M*T),zot(m)&&(m=M*T));return Ao.animate({target:_,obj:W,time:e,ease:"linear",call:function(){_.running=!1,_.stop(),o&&"function"==typeof o&&o(n||_)},params:n,wait:r,waitedCall:i,waitedParams:l,loop:a,loopCount:s,loopWait:c,loopCall:u,loopParams:d,loopWaitCall:h,loopWaitParams:g,rewind:f,rewindWait:m,rewindCall:z,rewindParams:y,rewindWaitCall:b,rewindWaitParams:v,rewindTime:w,rewindEase:C,override:!1,pauseOnBlur:B,id:_.id}),_.runPaused=!1,_},this.runPaused=!0,this.pauseRun=function(e){return zot(e)&&(e=!0),_.runPaused=e,(_.globalControl?Ao:_).pauseAnimate(e,_.id),_},this.stopRun=function(){return _.runPaused=!0,_.running=!1,(_.globalControl?Ao:_).stopAnimate(_.id),_},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return Y},set:function(e){Y=Math.round(e),this.gotoAndStop(D[Y])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return D},set:function(e){D=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return v.getNumFrames()},set:function(){zogy("zim.Sprite - totalFrames is read only")}}),!1!==z&&Ao.styleTransforms(this,w),this.clone=function(){var e=this.cloneProps(new Ao.Sprite(t,o,n,r,i,l,a,s,c,u,d,h,null,g,p,f,m,z,this.group,b));return 0<=_.frame&&e.run({startFrame:_.frame,endFrame:_.frame}),e},createjs&&!createjs.stageTransformable&&m.retina&&(this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)},Ao.displayBase(_),this.setBounds=function(e,t,o,n){var r,n=(r=t,t=o,o=n,n=[],zot(e=e)?n=[e,r,t,o]:zot(r)?e.x?n=[e.x,e.y,e.width,e.height]:(n[0]=0,n[1]=0,n[2]=e,n[3]=e):zot(t)?(n[0]=0,n[1]=0,n[2]=e,n[3]=r):(n[0]=e,n[1]=r,n[2]=t,n[3]=o),zot(n[3])&&(n[3]=n[2]),n);return _.cjsSprite_setBounds(n[0],n[1],n[2],n[3]),_},this.getBounds=function(e){return e?_.boundsToGlobal(null,null,null,e):_.cjsSprite_getBounds()},this.dispose=function(){Ao.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},Ao.extend(Ao.Sprite,createjs.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(Ao.Sprite.prototype),Ao.MovieClip=function(e,t,o,n,r,i,l){var a;if(a=zob(Ao.MovieClip,arguments,"mode, startPosition, loop, labels, style, group, inherit",this))return a;z_d("50.9"),this.type="MovieClip",this.group=i;i=!1===r?{}:Ao.getStyle(this.type,this.group,l);zot(e)&&(e=null!=i.mode?i.mode:null),zot(t)&&(t=null!=i.startPosition?i.startPosition:null),zot(o)&&(o=null!=i.loop?i.loop:null),zot(n)&&(n=null!=i.labels?i.labels:null),this.cjsMovieClip_constructor(e,t,o,n),!1!==r&&Ao.styleTransforms(this,i),this.clone=function(){return this.cloneProps(new Ao.MovieClip(e,t,o,n,r,this.group,l))},this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)};i=WW.zdf||1;createjs&&!createjs.stageTransformable&&i.retina&&(this.localToGlobal=function(e,t){return Ao.localToGlobal(e,t,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(e,t){return Ao.globalToLocal(e,t,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(e,t,o){return Ao.localToLocal(e,t,o,this)}),Ao.displayBase(this),this.setBounds=function(e,t,o,n){var r,n=(r=t,t=o,o=n,n=[],zot(e=e)?n=[e,r,t,o]:zot(r)?e.x?n=[e.x,e.y,e.width,e.height]:(n[0]=0,n[1]=0,n[2]=e,n[3]=e):zot(t)?(n[0]=0,n[1]=0,n[2]=e,n[3]=r):(n[0]=e,n[1]=r,n[2]=t,n[3]=o),zot(n[3])&&(n[3]=n[2]),n);return that.cjsMovieClip_setBounds(n[0],n[1],n[2],n[3]),that},this.getBounds=function(e){return e?that.boundsToGlobal(null,null,null,e):that.cjsMovieClip_getBounds()},this.dispose=function(){Ao.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},Ao.extend(Ao.MovieClip,createjs.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(Ao.MovieClip.prototype),Ao.SVGContainer=function(e,A,z,P,B,t,o,n){var r;if(r=zob(Ao.SVGContainer,arguments,"svg, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return r;z_d("50.95"),this.group=o;o=!1===t?{}:Ao.getStyle("SVGContainer",this.group,n);e&&"Bitmap"==e.type&&(e=e.svg);var E,i,l,a,I=this,S=new Ao.Point(0,0);function W(){function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],n=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done)&&(o.push(l.value),!t||o.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function P(e,t,o,n,r,i,l){var a=e.x,e=e.y;return{x:n*(a*=t)-r*(e*=o)+i,y:r*a+n*e+l}}function B(e,t,o,n){var r=e*o+t*n;return 1<r&&(r=1),r<-1&&(r=-1),(e*n-t*o<0?-1:1)*Math.acos(r)}var E=2*Math.PI;return function(e){var t=e.px,o=e.py,n=e.cx,r=e.cy,i=e.rx,l=e.ry,a=e.xAxisRotation,s=void 0===a?0:a,c=e.largeArcFlag,u=void 0===c?0:c,a=e.sweepFlag,c=void 0===a?0:a,d=[];if(0===i||0===l)return[];var h=Math.sin(s*E/360),g=Math.cos(s*E/360),e=g*(t-n)/2+h*(o-r)/2,a=-h*(t-n)/2+g*(o-r)/2;if(0==e&&0==a)return[];i=Math.abs(i),l=Math.abs(l);s=Math.pow(e,2)/Math.pow(i,2)+Math.pow(a,2)/Math.pow(l,2);1<s&&(i*=Math.sqrt(s),l*=Math.sqrt(s));var a=A(function(e,t,o,n,r,i,l,a,s,c,u,d){var h=Math.pow(r,2),g=Math.pow(i,2),p=Math.pow(u,2),f=Math.pow(d,2),m=h*g-h*f-g*p;m<0&&(m=0),m/=h*f+g*p;l=(m=Math.sqrt(m)*(l===a?-1:1))*r/i*d,m=m*-i/r*u,o=c*l-s*m+(e+o)/2,c=s*l+c*m+(t+n)/2,t=(u-l)/r,n=(d-m)/i,r=(-u-l)/r,m=(-d-m)/i,i=B(1,0,t,n),m=B(t,n,r,m);return 0===a&&0<m&&(m-=E),1===a&&m<0&&(m+=E),[o,c,i,m]}(t,o,n,r,i,l,u,c,h,g,e,a),4),p=a[0],f=a[1],m=a[2],z=a[3],a=Math.abs(z)/(E/4);Math.abs(1-a)<1e-7&&(a=1);var y=Math.max(Math.ceil(a),1);z/=y;for(var b,v,w,C,x,k,T=0;T<y;T++)d.push((b=m,k=x=C=w=void 0,w=1.5707963267948966===(v=z)?.551915024494:-1.5707963267948966===v?-.551915024494:4/3*Math.tan(v/4),C=Math.cos(b),x=Math.sin(b),k=Math.cos(b+v),v=Math.sin(b+v),[{x:C-x*w,y:x+C*w},{x:k+v*w,y:v-k*w},{x:k,y:v}])),m+=z;return d.map(function(e){var t=P(e[0],i,l,g,h,p,f),o=t.x,n=t.y,r=P(e[1],i,l,g,h,p,f),t=r.x,r=r.y,e=P(e[2],i,l,g,h,p,f);return{x1:o,y1:n,x2:t,y2:r,x:e.x,y:e.y}})}}function s(e){var o,n,r,i,l,e=e.split(";");return Ao.loop(e,function(e){var t=(e=e.replace(/,/g,"")).split(":"),e=t[0].trim().toLowerCase(),t=t[1].trim().toLowerCase().replace("px","");"fill"==e&&(o=t),"stroke"==e&&(n=t),"stroke-width"==e&&(r=t),"opacity"==e&&(l=i=t),"fill-opacity"==e&&(i=t),"stroke-opacity"==e&&(l=t)}),[o,n,r,i,l]}function c(e,t){var o,n,r,i,l,a,s,c,u,d=j(t),h=d[0],g=d[1],p=d[2],f=d[5],m=d[6];"circle"==e?(r=.5523*(n=Number(t.getAttribute("r").trim())),o=z?new Ao.Circle(Number(t.getAttribute("r")),h,g,p):new Ao.Blob(h,g,p,4,n,r,"mirror",null,P,null,null,null,null,null,null,null,null,null,null,null,B)):"rect"==e?o=z?new Ao.Rectangle(Number(t.getAttribute("width")),Number(t.getAttribute("height")),h,g,p,Number(t.getAttribute("rx"))):(s=Number(t.getAttribute("width")),c=Number(t.getAttribute("height")),d=Number(t.getAttribute("rx")),n=Number(t.getAttribute("ry")),d&&n?(r=.5523*d,a=.5523*n,new Ao.Blob(h,g,p,[[d,0,0,0,-r,0,0,0,"free"],[s-d,0,0,0,0,0,r,0,"free"],[s,n,0,0,0,-a,0,0,"free"],[s,c-n,0,0,0,0,0,a,"free"],[s-d,c,0,0,r,0,0,0,"free"],[d,c,0,0,0,0,-r,0,"free"],[0,c-n,0,0,0,a,0,0,"free"],[0,n,0,0,0,0,0,-a,"free"]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B)):new Ao.Blob(h,g,p,[[0,0],[s,0],[s,c],[0,c]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B)):"line"==e?o=new Ao.Squiggle(g,p,[[Number(t.getAttribute("x1")),Number(t.getAttribute("y1"))],[Number(t.getAttribute("x2")),Number(t.getAttribute("y2"))]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B):"polygon"==e||"polyline"==e?(u=(u=(u=t.getAttribute("points")).replace(/-/g," -")).replace(/\s+/g," "),i=[],-1!=u.indexOf(",")?Ao.loop(u.split(" "),function(e){e=e.split(",");i.push([Number(e[0].trim()),Number(e[1].trim())])}):Ao.loop(u.split(" "),function(e,t){(t+1)%2==0&&i.push([l,e.trim()]),l=e.trim()}),o="polygon"==e?new Blob(h,g,p,i):new Ao.Squiggle(g,p,i,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B)):"ellipse"==e&&(o=new Ao.Blob(h,g,p,(s=a=0,c=Number(t.getAttribute("rx")),u=Number(t.getAttribute("ry")),[[a-c,s,0,0,a,(e=s+u)+(h=.5522848*u)-u,a,s-h,"mirror"],[a,s-u,0,0,a-(g=.5522848*c),s,(p=a+c)+g-c,s,"mirror"],[p,s,0,0,a,s-h,a+g-g,e+h-u,"mirror"],[a,e,0,0,p-c+g,s,a-g,s,"mirror"]]),null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B)),o.loc(f,m,I);t=t.getAttribute("transform");(t||O)&&M(o,t||O),!B||"Rectangle"!=o.type&&"Circle"!=o.type||o.transform({showReg:!1,visible:P})}function M(r,e){e=e.split(")");Ao.loop(e,function(e){var t,o,n;""!=e&&(t=(o=e.trim().split("("))[0].trim().toLowerCase(),e=o[1].trim().toLowerCase().replace("px","").replace("deg",""),"translate"==t&&(o=e.split(","),r.mov(Number(o[0].trim()),o[1]?Number(o[1].trim()):0)),"scale"==t&&(n=e.split(","),"Blob"==r.type||"Squiggle"==r.type?1==n.length?r.transformPoints("scale",Number(n[0].trim())):2==n.length&&(r.transformPoints("scaleX",Number(n[0].trim())),r.transformPoints("scaleY",Number(n[1].trim()))):1==n.length?r.sca(Number(n[0].trim())):2==n.length&&r.sca(Number(n[0].trim()),Number(n[1].trim()))),"rotate"==t&&(1==(n=e.split(",")).length?n.push(0,0):2==n.length&&n.push(0),r.rot(Number(n[0].trim()),Number(n[1].trim()),Number(n[2].trim()))),"skewX"==t&&(r.skewX=e),"skewY"==t&&(r.skewY=e))})}if(zot(A)&&(A=!1),zot(z)&&(z=!0),!zot(e)){if(e.replace&&(e=e.replace(/style\s?=[^"]*"[^"]*"/gi,"")),w=zot(e.draggable)?(e.getAttribute||(i=new DOMParser,e=i.parseFromString(e,"image/svg+xml").documentElement),this.svg=e):(i=new DOMParser,w=(e=e.innerHTML?i.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg"),this.svg=w?e.getElementsByTagName("svg")[0]:null),zot(w)||(l=w.getAttribute("width"),a=w.getAttribute("height")),l=l&&Number(l.trim()),a=a&&Number(a.trim()),this.zimContainer_constructor(l,a),this.type="SVGContainer",zot(w))return;var O,u=Ao.black,d=Ao.black,h=Ao.black,g=Ao.black,p=2,f=2,m=1,y=1,b=1,v=1,w=e.getElementsByTagName("svg");0==w.length&&(w=[e]),function a(e){Ao.loop(e,function(e){var t,o,n,r,i,l=e.tagName.toLowerCase();"path"==l&&C(e),"circle"==l&&c("circle",e),"rect"==l&&c("rect",e),"ellipse"==l&&c("ellipse",e),"line"==l&&c("line",e),"polygon"==l&&c("polygon",e),"polyline"==l&&c("polyline",e),"g"==l&&((l=e.getAttribute("style"))&&(t=(i=s(l))[0],o=i[1],n=i[2],r=i[3],i=i[4]),O=e.getAttribute("transform"),d=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?u:t,g=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?h:o,f=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?p:n,y=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?m:r,v=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?b:i),a(e.children),"g"==e.tagName.toLowerCase()&&(d=u,g=h,f=p,y=m,v=b,O=null)})}(w)}function j(e){var t,o,n,r,i,l=e.getAttribute("style");l&&(t=(a=s(l))[0],o=a[1],n=a[2],r=a[3],i=a[4]),t=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?d:t,o=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?g:o,n=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?f:n,r=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?y:r,i=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?v:i;var l=e.getAttribute("x")?e.getAttribute("x"):0,l=e.getAttribute("cx")?e.getAttribute("cx"):l,a=e.getAttribute("y")?e.getAttribute("y"):0,a=e.getAttribute("cy")?e.getAttribute("cy"):a;return zot(r)||zot(t)||(t=Ao.convertColor(t,"rgba",Number(r))),zot(i)||zot(o)||(o=Ao.convertColor(o,"rgba",Number(i))),[t,o,Number(n),Number(r),Number(i),Number(l),Number(a)]}function C(t,e){zot(e)&&(e=!0);var o,n,r,i,l,a,s=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],c=["m","l","h","v","c","s","q","t","a","z"],u=new Ao.Point(0,0),d=zot(t.getAttribute)?t:t.getAttribute("d");d=(d=(d=(d=(d=d.replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," ")).replace(/\.(\d*)\./g,".$1 ."),e&&(o=j(t),n=o[0],r=o[1],i=o[2]);var h,g,p=[],f=[0,0],m=new Ao.Point(0,0),z=new Ao.Point(0,0,0,0),y=new Ao.Point(0,0,0,0,0,0),b=new Ao.Point(0,0,0,0,0,0,0),d=d.split(" "),d=d.slice(1,d.length),v=[],w=!1,C=!1,x="squiggle",k=null;function T(){h=v[v.length-1],2<=p.length&&("z"!=h&&"Z"!=h||(x="blob")),(l="squiggle"==x?new Ao.Squiggle(r,i,p,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B):new Ao.Blob(n,r,i,p,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,B)).loc(0,0,I),h=v[v.length-1],v[v.length-2],0<=c.indexOf(h)?(f[0]=p[p.length-1][0],f[1]=p[p.length-1][1],S.x=p[p.length-1][0],S.y=p[p.length-1][1],(p=[]).push([f[0],f[1]])):(f=[0,0],p=[[0,0]]),v=[],"z"!=h&&"Z"!=h&&v.push(h),u.x=0,u.y=0;var e=t.getAttribute("transform");(e||O)&&M(l,e||O)}return Ao.loop(d,function(e,t){var o;0==t&&(S.x=0,S.y=0,f=[0,0],h=""),-1==s.indexOf(e)?("lxo"==g&&(g="lx",v.push("l"),w=!0),"lyo"==g&&(g="ly",w=!0),"Lxo"==g&&(g="Lx",v.push("L"),w=!0),"Lyo"==g&&(g="Ly",w=!0),a=Number(e),a=Math.round(100*a)/100,"X"==g?(S.x=a,g="Y"):"Y"==g?(S.y=a,g="Lxo",p.push([S.x,S.y])):"x"==g?(S.x=S.x+a,g="y"):"y"==g&&(S.y=S.y+a,g="lxo",p.push([S.x,S.y])),"H"==g||"h"==g?(u.x=p[p.length-1][0],u.y=p[p.length-1][1],u.x=u.x+("h"==g?a:a-S.x),p.push([u.x,u.y]),g="Lx"):"V"!=g&&"v"!=g||(u.x=p[p.length-1][0],u.y=p[p.length-1][1],u.y=u.y+("v"==g?a:a-S.y),p.push([u.x,u.y]),g="lx"),"Lx"==g?(m.x=a,g="Ly"):"Ly"==g?(m.y=a,u.x=m.x,u.y=m.y,p.push([u.x,u.y]),g="Lx"):"lx"==g?(0<v.length&&(0!=u.x&&0!=u.y?(S.x=u.x,S.y=u.y):(S.x=u.x+S.x,S.y=u.y+S.y)),m.x=S.x+a,g=w?"lyo":"ly"):"ly"==g&&(m.y=S.y+a,u.x=m.x,u.y=m.y,p.push([u.x,u.y]),g="lx"),"qx"==g||"Qx"==g?(0<p.length?(S.x=p[p.length-1][0],S.y=p[p.length-1][1]):(S.x=0,S.y=0),z.x="qx"==g?S.x+a:a,g="qx"==g?"qy":"Qy"):"qy"==g||"Qy"==g?(z.y="qy"==g?S.y+a:a,g="qy"==g?"qz":"Qz",C&&(C=!1,(o=p[p.length-1])[6]=-o[4],o[7]=-o[5],o[8]="mirror",u.x=z.x,u.y=z.y,p[p.length]=[u.x,u.y,0,0,-o[6],o[7],0,0,"free"],g="qy"==g?"qx":"Qx")):"qz"==g||"Qz"==g?(z.z="qz"==g?S.x+a:a,g="qz"==g?"qq":"Qq"):"qq"!=g&&"Qq"!=g||(z.w="qq"==g?S.y+a:a,o=p[p.length-1],u.x=o[0],u.y=o[1],1==p.length?(o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=2/3*(z.x-u.x),o[7]=2/3*(z.y-u.y),o[8]="free"):p[p.length]=[u.x,u.y,0,0,0,0,2/3*(z.x-u.x),2/3*(z.y-u.y),"free"],u.x=z.z,u.y=z.w,p[p.length]=[u.x,u.y,0,0,2/3*(z.x-u.x),2/3*(z.y-u.y),0,0,"free"],g="qq"==g?"qx":"Qx"),"cx"==g||"Cx"==g?(0<p.length?(S.x=p[p.length-1][0],S.y=p[p.length-1][1]):(S.x=0,S.y=0),y.x="cx"==g?S.x+a:a,g="cx"==g?"cy":"Cy"):"cy"==g||"Cy"==g?(y.y="cy"==g?S.y+a:a,g="cy"==g?"cz":"Cz"):"cz"==g||"Cz"==g?(y.z="cz"==g?S.x+a:a,g="cz"==g?"cq":"Cq"):"cq"==g||"Cq"==g?(y.q="cq"==g?S.y+a:a,g="cq"==g?"cr":"Cr",C&&((o=p[p.length-1])[2]=0,o[3]=0,zot(o[4])&&(o[4]=0),zot(o[5])&&(o[5]=0),o[6]=-o[4],o[7]=-o[5],o[8]="mirror",u.x=y.z,u.y=y.q,p[p.length]=[u.x,u.y,0,0,y.x-u.x,y.y-u.y,0,0,"free"],g="cr"==g?"cx":"Cx")):"cr"==g||"Cr"==g?(y.r="cr"==g?S.x+a:a,g="cr"==g?"cs":"Cs"):"cs"==g||"Cs"==g?(y.s="cs"==g?S.y+a:a,o=p[p.length-1],1==p.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),o[6]=y.x-o[0],o[7]=y.y-o[1],o[8]="free",u.x=y.r,u.y=y.s,p[p.length]=[u.x,u.y,0,0,y.z-u.x,y.q-u.y,0,0,"free"],g="cs"==g?"cx":"Cx"):"ax"==g||"Ax"==g?(0<p.length?(S.x=p[p.length-1][0],S.y=p[p.length-1][1]):(S.x=0,S.y=0),b.x=a,g="ax"==g?"ay":"Ay"):"ay"==g||"Ay"==g?(b.y=a,g="ay"==g?"az":"Az"):"az"==g||"Az"==g?(b.z=a,g="az"==g?"aq":"Aq"):"aq"==g||"Aq"==g?(b.q=a,g="aq"==g?"ar":"Ar"):"ar"==g||"Ar"==g?(b.r=a,g="ar"==g?"as":"As"):"as"==g||"As"==g?(b.s="as"==g?S.x+a:a,g="as"==g?"at":"At"):"at"!=g&&"At"!=g||(b.t="at"==g?S.y+a:a,t=(E=E||W())({px:S.x,py:S.y,cx:b.s,cy:b.t,rx:b.x,ry:b.y,xAxisRotation:b.z,largeArcFlag:b.q,sweepFlag:b.r}),Ao.loop(t,function(e,t){o=p[p.length-1],1==p.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),0==t&&1==p.length?(o[6]=e.x1-u.x-S.x,o[7]=e.y1-u.y-S.y):(o[6]=e.x1-u.x,o[7]=e.y1-u.y),o[8]="free",u.x=e.x,u.y=e.y,p[p.length]=[u.x,u.y,0,0,e.x2-u.x,e.y2-u.y,0,0,"free"]}),g="at"==g?"ax":"Ax")):(v.push(e),"s"!=e&&(C=!1),1<v.length&&("M"!=e&&"m"!=e||(T(),"M"==e?(S.x=0,S.y=0):(S.x=p[p.length-1][0],S.y=p[p.length-1][1]),p=[],(v=[]).push(e))),"M"==e?g="X":"m"==e?g="x":"L"==e?(g="Lx",A&&k&&"l"!=k&&T(),k="l"):"l"==e?(g="lx",A&&k&&"l"!=k&&T(),k="l"):"H"==e?(g="H",A&&k&&"l"!=k&&T(),k="l"):"h"==e?(g="h",A&&k&&"l"!=k&&T(),k="l"):"V"==e?(g="V",A&&k&&"l"!=k&&T(),k="l"):"v"==e?(g="v",A&&k&&"l"!=k&&T(),k="l"):"C"==e?(g="Cx",A&&k&&"c"!=k&&T(),k="c"):"c"==e?(g="cx",A&&k&&"c"!=k&&T(),k="c"):"S"==e?(C=!0,g="Cx",A&&k&&"c"!=k&&T(),k="c"):"s"==e?(C=!0,g="cx",A&&k&&"c"!=k&&T(),k="c"):"Q"==e?(g="Qx",A&&k&&"q"!=k&&T(),k="q"):"q"==e?(g="qx",A&&k&&"q"!=k&&T(),k="q"):"T"==e?(C=!0,g="Qx",A&&k&&"q"!=k&&T(),k="q"):"t"==e?(C=!0,g="qx",A&&k&&"q"!=k&&T(),k="q"):"A"==e?(g="Ax",A&&k&&"a"!=k&&T(),k="a"):"a"==e?(g="ax",A&&k&&"a"!=k&&T(),k="a"):"z"!=e&&"Z"!=e||(x="blob"))}),e&&T(),p}!(I.processPath=function(e){return C(e,!1)})!==t&&Ao.styleTransforms(this,o),this.clone=function(){return I.cloneProps(new Ao.SVGContainer(e,A,z,P,B,t,this.group,n))}},Ao.extend(Ao.SVGContainer,Ao.Container,"clone","zimContainer",!1),Ao.CustomShape=function(e,t,o,n){Ao.zimCustomShapeCheck||(z_d("50.97"),Ao.zimCustomShapeCheck=!0),this.zimContainer_constructor(e,t,o,n,!1);var r=this;this.mouseChildren=!1,r._dashedOffset=5,Object.defineProperty(r,"color",{get:function(){return r._color},set:function(e){zot(e)&&(e="black"),(r._color=e)&&e.type?r.specialColor(r.colorCommand,e,r):r.colorCommand.style=e}}),this.setColorRange=function(e,t){return zot(t)?(r.startColor=r.color,r.endColor=e):(zot(e)?r.startColor=r.color:r.startColor=e,r.endColor=t),r},r._colorRange=0,Object.defineProperty(r,"colorRange",{get:function(){return r._colorRange},set:function(e){r._colorRange=e,zot(r.startColor)||zot(r.endColor)||(r.color=Ao.colorRange(r.startColor,r.endColor,e))}}),Object.defineProperty(r,"borderColor",{get:function(){return r._borderColor},set:function(e){(r._borderColor=e)&&!r.borderWidth&&(r.borderWidth=1),r.borderColorCommand?e&&e.type?r.specialColor(r.borderColorCommand,e,r):r.borderColorCommand.style=e:r.drawShape()}}),Object.defineProperty(r,"borderWidth",{get:function(){return r._borderWidth},set:function(e){0<e||(e=0),r._borderWidth=e,r.borderWidthCommand&&0!=r._borderWidth?(r.borderWidthCommand.width=r._borderWidth,r._dashed&&(r.borderDashedCommand.segments=r._dashed,r.borderDashedCommand.offset=r._dashedOffset)):(r.borderWidthCommand=null,r.drawShape())}}),Object.defineProperty(r,"thickness",{get:function(){return r._thickness},set:function(e){0<e||(e=0),r._thickness=e,r.thicknessCommand&&0!=r._thickness?(r.thicknessCommand.width=r._thickness,r._dashed&&(r.dashedCommand.segments=r._dashed,r.dashedCommand.offset=r._dashedOffset)):r.drawShape()}}),Object.defineProperty(r,"dashed",{get:function(){return r._dashed},set:function(e){var t;if((r._dashed=e)&&!Array.isArray(r._dashed)&&(r.dashed=[10,10]),"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"dashedOffset",{get:function(){return r._dashedOffset},set:function(e){var t;if(isNaN(e)&&(e=5),r._dashedOffset=e,"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"corner",{get:function(){return r._corner},set:function(e){r._corner=e,r.drawShape()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,l,a){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,l,a),this},this.cloneAll=function(e,t,o,n){var r=this.getBounds();zot(r)&&(r={x:null,y:null,width:null,height:null});e=this.cloneChildren(this.cloneProps(new Ao.Container(r.x,r.y,r.width,r.height,t,o,n)),e);return e.mouseChildren=!1,e.type=this.type,e}},Ao.extend(Ao.CustomShape,Ao.Container,null,"zimContainer",!1),Ao.Circle=function(e,t,o,n,r,i,l,a,s,c,u){var d;if(d=zob(Ao.Circle,arguments,"radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",this))return d;z_d("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=c;c=!1===s?{}:Ao.getStyle(this.type,this.group,u);zot(e)&&(e=null!=c.radius?c.radius:50),zot(r)&&(r=null!=c.dashed&&c.dashed),zot(o)&&(o=null!=c.borderColor?c.borderColor:null),zot(n)&&(n=null!=c.borderWidth?c.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=c.color?c.color:0<n?"rgba(0,0,0,0)":"black"),zot(i)&&(i=null!=c.percent?c.percent:100),zot(l)&&(l=null==c.percentClose||c.percentClose),zot(a)&&(a=null!=c.strokeObj?c.strokeObj:{});var h=function(){return arguments}(e,t,o,n,i);e=Ao.Pick.choose(e),t=Ao.Pick.choose(t),o=Ao.Pick.choose(o),n=Ao.Pick.choose(n),i=Ao.Pick.choose(i);var g=this;g._radius=e,g._color=t,g._borderColor=o,g._borderWidth=n,g._dashed=r,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);r=this.shape=new createjs.Shape;this.addChild(r);var p=r.graphics;g.drawShape=function(){p.c(),g.colorCommand=p.f(g._color).command,g._color&&g._color.type&&g.specialColor(g.colorCommand,g._color,g),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor="black"),g.borderColorCommand=p.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor,g),g.borderWidthCommand=p.ss(g._borderWidth,a.caps,a.joints,a.miterLimit,a.ignoreScale).command,g._dashed&&(g.borderDashedCommand=p.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command)));var e,t=2*g._radius;"number"==typeof i&&0<=i&&i<100?(e=360*i/100/2,p.arc(0,0,g._radius,(-e-90)*Math.PI/180,(e-90)*Math.PI/180,!1),l&&p.cp(),t=g._radius-Math.cos(e*Math.PI/180)*g._radius):p.dc(0,0,g._radius),g.setBounds(-g._radius,-g._radius,2*g._radius,t)},g.drawShape(),t.type&&(g.color=t),Object.defineProperty(g,"radius",{get:function(){return g._radius},set:function(e){g._radius=e,g.drawShape()}}),Object.defineProperty(g,"percentage",{get:function(){return i},set:function(e){i=e,g.drawShape()}}),Object.defineProperty(g,"percentClose",{get:function(){return l},set:function(e){l=e,g.drawShape()}}),!1!==s&&Ao.styleTransforms(this,c),this.clone=function(e){e=g.cloneProps(new Ao.Circle(e||!Ao.isPick(h[0])?g.radius:h[0],e||!Ao.isPick(h[1])?g.color:h[1],e||!Ao.isPick(h[2])?g.borderColor:h[2],e||!Ao.isPick(h[3])?g.borderWidth:h[3],g.dashed,e||!Ao.isPick(h[4])?i:h[4],l,a,s,this.group,u));return g.linearGradientParams&&e.linearGradient.apply(e,g.linearGradientParams),g.radialGradientParams&&e.radialGradient.apply(e,g.radialGradientParams),e}},Ao.extend(Ao.Circle,Ao.CustomShape,"clone","zimCustomShape",!1),Ao.Rectangle=function(r,i,l,e,t,o,n,a,s,c,u,d){var h;if(h=zob(Ao.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",this))return h;z_d("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=u;u=!1===c?{}:Ao.getStyle(this.type,this.group,d);zot(r)&&(r=null!=u.width?u.width:null),zot(i)&&(i=null!=u.height?u.height:zot(r)?100:r),zot(r)&&(r=i),zot(o)&&(o=null!=u.corner?u.corner:0),zot(n)&&(n=null!=u.dashed&&u.dashed),zot(e)&&(e=null!=u.borderColor?u.borderColor:null),zot(t)&&(t=null!=u.borderWidth?u.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(l)&&(l=null!=u.color?u.color:0<t?"rgba(0,0,0,0)":"black"),zot(a)&&(a=null!=u.strokeObj?u.strokeObj:{}),zot(s)&&(s=null==u.scaleDimensions||u.scaleDimensions);var g=function(){return arguments}(r,i,l,e,t);r=Ao.Pick.choose(r),i=Ao.Pick.choose(i),l=Ao.Pick.choose(l),e=Ao.Pick.choose(e),t=Ao.Pick.choose(t);var p=this;p._color=l,p._borderColor=e,p._borderWidth=t,p._dashed=n,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]),p._corner=o,p.scaleDimensions=s,p.setWidth=function(e){r=e},p.setHeight=function(e){i=e};s=this.shape=new createjs.Shape;this.addChild(s);var f=s.graphics;p.drawShape=function(){if(f.c(),p.colorCommand=f.f(p._color).command,l&&l.type&&p.specialColor(p.colorCommand,l,p),(zot(p._borderWidth)||0<p._borderWidth)&&(zot(p._borderColor)&&zot(p._borderWidth)||(zot(p._borderColor)&&(p._borderColor="black"),p.borderColorCommand=f.s(p._borderColor).command,p._borderColor&&p._borderColor.type&&p.specialColor(p.borderColorCommand,p._borderColor,p),p.borderWidthCommand=f.ss(p._borderWidth,a.caps,a.joints,a.miterLimit,a.ignoreScale).command,p._dashed&&(p.borderDashedCommand=f.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command))),Array.isArray(p._corner)){var e=p._corner;Array.isArray(e)&&2==e.length&&(e=[e,e,e,e]);for(var t=[],o=!1,n=0;n<e.length;n++)Array.isArray(e[n])?(o=!0,t.push(e[n])):t.push([e[n],e[n]]);e=t,o?f.mt(0,e[0][1]).curveTo(0,0,e[0][0],0).lt(r-e[1][0],0).curveTo(r,0,r,e[1][1]).lt(r,i-e[2][1]).curveTo(r,i,r-e[2][0],i).lt(e[3][0],i).curveTo(0,i,0,i-e[3][1]).cp():f.rc(0,0,r,i,p._corner[0],p._corner[1],p._corner[2],p._corner[3])}else 0<p._corner?f.rr(0,0,r,i,p._corner):f.r(0,0,r,i);p.setBounds(0,0,r,i),l.type&&(p.color=l)},p.drawShape(),!1!==c&&Ao.styleTransforms(this,u),this.clone=function(e){return p.cloneProps(new Ao.Rectangle(e||!Ao.isPick(g[0])?r:g[0],e||!Ao.isPick(g[1])?i:g[1],e||!Ao.isPick(g[2])?p.color:g[2],e||!Ao.isPick(g[3])?p.borderColor:g[3],e||!Ao.isPick(g[4])?p.borderWidth:g[4],o,p._dashed,a,p.scaleDimensions,c,this.group,d))}},Ao.extend(Ao.Rectangle,Ao.CustomShape,"clone","zimCustomShape",!1),Ao.Triangle=function(a,s,t,e,o,n,r,c,u,i,d,l,h,g){var p;if(p=zob(Ao.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",this))return p;z_d("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=h;h=!1===l?{}:Ao.getStyle(this.type,this.group,g);zot(a)&&(a=null!=h.a?h.a:100),zot(s)&&(s=null!=h.b?h.b:a),zot(t)&&(t=null!=h.c?h.c:s),-1==t&&(t=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))),zot(r)&&(r=null!=h.corner?h.corner:0),zot(c)&&(c=null==h.center||h.center),zot(u)&&(u=null!=h.adjust?h.adjust:0),zot(o)&&(o=null!=h.borderColor?h.borderColor:null),zot(n)&&(n=null!=h.borderWidth?h.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(e)&&(e=null!=h.color?h.color:0<n?"rgba(0,0,0,0)":"black"),zot(u)&&(u=null!=h.adjust?h.adjust:0),zot(d)&&(d=null!=h.strokeObj?h.strokeObj:{});var f=function(){return arguments}(a,s,t,e,o,n);a=Ao.Pick.choose(a),s=Ao.Pick.choose(s),t=Ao.Pick.choose(t),this.a=a,this.b=s,this.c=t,e=Ao.Pick.choose(e),o=Ao.Pick.choose(o),n=Ao.Pick.choose(n);var m=this;m._color=e,m._borderColor=o,m._borderWidth=n,m._dashed=i,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]),m._corner=r;n=[a,s,t];n.sort(function(e,t){return t-e});var z,y,b=n[0],v=n[1],w=n[2],C=[n.indexOf(a),n.indexOf(s),n.indexOf(t)];v+w<b?zogy("zim display - Triangle(): invalid triangle lengths"):(z=this.shape=new createjs.Shape,this.adjusted=u,this.addChild(z),y=z.graphics,m.drawShape=function(){var e=[];Array.isArray(m._corner)?e=m._corner:e.push(m._corner,m._corner,m._corner);for(var t=0;t<3;t++)(e[t]<0||"number"!=typeof e[t])&&(e[t]=0);y.c(),m.colorCommand=y.f(m._color).command,m._color&&m._color.type&&m.specialColor(m.colorCommand,m._color,m),(zot(m._borderWidth)||0<m._borderWidth)&&(zot(m._borderColor)&&zot(m._borderWidth)||(zot(m._borderColor)&&(m._borderColor="black"),m.borderColorCommand=y.s(m._borderColor).command,m._borderColor&&m._borderColor.type&&m.specialColor(m.borderColorCommand,m._borderColor,m),m.borderWidthCommand=y.ss(m._borderWidth,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,m._dashed&&(m.borderDashedCommand=y.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command))),m.one={x:0,y:0},m.two={x:a,y:0};var o=180*Math.acos((Math.pow(v,2)+Math.pow(w,2)-Math.pow(b,2))/(2*v*w))/Math.PI,n=180*Math.asin(v*Math.sin(o*Math.PI/180)/b)/Math.PI,r=[o,n,180-o-n];m.angles=[r[C[1]],r[C[2]],r[C[0]]];var i=m.angles[1],l=Math.cos(i*Math.PI/180)*s,o=Math.sin(i*Math.PI/180)*s,n=Math.max(a,a-l),r=o;m.setBounds(0,u,n,r),z.y=r,m.three={x:a-l,y:0-o};i=a*e[0]/(e[0]+e[1]||1);y.mt(i,0).at(a,0,a-l,0-o,e[1]).at(a-l,0-o,0,0,e[2]).at(0,0,a,0,e[0]).lt(i,0),y.cp(),c&&(m.regX=n/2,m.regY=r/2),u&&(m.shape.y+=u)},m.drawShape(),e.type&&(m.color=e),!1!==l&&Ao.styleTransforms(this,h),this.clone=function(e){e=m.cloneProps(new Ao.Triangle(e||!Ao.isPick(f[0])?a:f[0],e||!Ao.isPick(f[1])?s:f[1],e||!Ao.isPick(f[2])?t:f[2],e||!Ao.isPick(f[3])?m.color:f[3],e||!Ao.isPick(f[4])?m.borderColor:f[4],e||!Ao.isPick(f[5])?m.borderWidth:f[5],r,c,u,i,d,l,this.group,g));return m.linearGradientParams&&e.linearGradient.apply(e,m.linearGradientParams),m.radialGradientParams&&e.radialGradient.apply(e,m.radialGradientParams),e})},Ao.extend(Ao.Triangle,Ao.CustomShape,"clone","zimCustomShape"),Ao.Poly=function(e,t,o,n,r,i,l,a,s,c,u){var d;if(d=zob(Ao.Poly,arguments,"radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",this))return d;z_d("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=c;c=!1===s?{}:Ao.getStyle(this.type,this.group,u);zot(e)&&(e=null!=c.radius?c.radius:50),zot(t)&&(t=null!=c.sides?c.sides:5),zot(o)&&(o=null!=c.pointSize?c.pointSize:0),zot(l)&&(l=null!=c.dashed&&c.dashed),zot(r)&&(r=null!=c.borderColor?c.borderColor:null),zot(i)&&(i=null!=c.borderWidth?c.borderWidth:null),r<0||i<0?r=i=null:null!=r&&null==i&&(i=1),zot(n)&&(n=null!=c.color?c.color:0<i?"rgba(0,0,0,0)":"black"),zot(a)&&(a=null!=c.strokeObj?c.strokeObj:{});var h=function(){return arguments}(e,t,o,n,r,i);e=Ao.Pick.choose(e),t=Ao.Pick.choose(t),o=Ao.Pick.choose(o),n=Ao.Pick.choose(n),r=Ao.Pick.choose(r),i=Ao.Pick.choose(i);var g=this;g._radius=e,g._color=n,g._sides=t,g._pointSize=o,g._borderColor=r,g._borderWidth=i,g._dashed=l,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);l=this.shape=new createjs.Shape;this.addChild(l),l.rotation=-90;var p=l.graphics;g.drawShape=function(){p.c(),g.colorCommand=p.f(g._color).command,g._color&&g._color.type&&g.specialColor(g.colorCommand,g._color,g),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor="black"),g.borderColorCommand=p.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor,g),g.borderWidthCommand=p.ss(g._borderWidth,a.caps,a.joints,a.miterLimit,a.ignoreScale).command,g._dashed&&(g.borderDashedCommand=p.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command))),p.dp(0,0,g._radius,g._sides,g._pointSize),g.setBounds(-g._radius,-g._radius,2*g._radius,2*g._radius)},g.drawShape(),n.type&&(g.color=n),Object.defineProperty(g,"radius",{get:function(){return g._radius},set:function(e){g._radius=e,g.drawShape()}}),Object.defineProperty(g,"sides",{get:function(){return g._sides},set:function(e){g._sides=e,g.drawShape()}}),Object.defineProperty(g,"pointSize",{get:function(){return g._pointSize},set:function(e){g._pointSize=e,g.drawShape()}}),!1!==s&&Ao.styleTransforms(this,c),this.clone=function(e){e=g.cloneProps(new Ao.Poly(e||!Ao.isPick(h[0])?g.radius:h[0],e||!Ao.isPick(h[1])?g.sides:h[1],e||!Ao.isPick(h[2])?g.pointSize:h[2],e||!Ao.isPick(h[3])?g.color:h[3],e||!Ao.isPick(h[4])?g.borderColor:h[4],e||!Ao.isPick(h[5])?g.borderWidth:h[5],g.dashed,a,s,this.group,u));return g.linearGradientParams&&e.linearGradient.apply(e,g.linearGradientParams),g.radialGradientParams&&e.radialGradient.apply(e,g.radialGradientParams),e}},Ao.extend(Ao.Poly,Ao.CustomShape,"clone","zimCustomShape",!1),Ao.Line=function(e,o,v,w,C,t,x,n,r,k,T,i,l,a,s){var c;if(c=zob(Ao.Line,arguments,"length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",this))return c;z_d("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=a;a=!1===l?{}:Ao.getStyle(this.type,this.group,s);zot(e)&&(e=null!=a.length?a.length:100),zot(t)&&(t=null!=a.dashed&&a.dashed),zot(o)&&(o=null!=a.thickness?a.thickness:3),zot(v)&&(v=null!=a.color?a.color:"black"),zot(w)&&(w=null!=a.startHead?a.startHead:null),zot(C)&&(C=null!=a.endHead?a.endHead:null),zot(x)&&(x=null!=a.strokeObj?a.strokeObj:{}),zot(n)&&(n=null!=a.lineType?a.lineType:"straight"),"corner"!==n&&"curve"!=n&&(n="straight"),zot(r)&&(r=null!=a.lineOrientation?a.lineOrientation:"auto"),"vertical"!==r&&"horizontal"!=r&&(r="auto"),zot(k)&&(k=null!=a.curveH?a.curveH:20),zot(T)&&(T=null!=a.curveV?a.curveV:20),zot(x)&&(x=null!=a.strokeObj?a.strokeObj:{});var u=function(){return arguments}(e,v,o,w,C);e=Ao.Pick.choose(e),v=Ao.Pick.choose(v),o=Ao.Pick.choose(o),w=Ao.Pick.choose(w),C=Ao.Pick.choose(C),w&&w.clone&&(w=w.clone()),C&&C.clone&&(C=C.clone());var A=this;function d(e,t){"triangle"==t||"arrow"==t?(A["_"+e+"Head"]=new Ao.Triangle(4*o,4*o,4*o,v)).rotation=90:"circle"==t&&(A["_"+e+"Head"]=new Ao.Circle(2.2*o,v)),zot(A["_"+e+"Head"].startAngle)&&(A["_"+e+"Head"].startAngle=A["_"+e+"Head"].rotation)}A._length=e,A._color=v,A._thickness=o,A._dashed=t,A._dashed&&!Array.isArray(A._dashed)&&(A._dashed=[10,10]),A._startX=0,A._startY=0,A._endX=e,A._endY=0,A._startHead=w,A._endHead=C,A._points=i,A._lineOrientation=r,A.angle=0,A.lineType=n,A._startHead&&d("start",A._startHead),A._endHead&&d("end",A._endHead),w=A._startHead,C=A._endHead,w&&"Triangle"==w.type&&(w.startRegY=w.regY),C&&"Triangle"==C.type&&(C.startRegY=C.regY);r=this.shape=new createjs.Shape;this.addChild(r);var P=r.graphics;A.drawShape=function(e,t){var o;if(P.c(),A.colorCommand=P.s(A._color).command,v&&v.type&&A.specialColor(A.colorCommand,v,A),A.thicknessCommand=P.ss(A._thickness,x.caps,x.joints,x.miterLimit,x.ignoreScale).command,A._dashed&&(A.dashedCommand=P.sd(Array.isArray(A._dashed)?A._dashed:[10,10],A._dashedOffset).command),A._points){var n=A._points[0];A._startX=n[0],A._startY=n[1];var r=A._points[A._points.length-1],i=[r[r.length-2],r[r.length-1]];A._endX=i[0],A._endY=i[1],P.mt(n[0],n[1]);for(var l,a=1;a<A._points.length;a++){var s=A._points[a];1==a&&(o=[A._startX,A._startY,s[0],s[1]]),2==s.length?P.lt(s[0],s[1]):4==s.length?P.qt(s[0],s[1],s[2],s[3]):6==s.length&&P.bt(s[0],s[1],s[2],s[3],s[4],s[5])}l=4<=s.length?[s[s.length-4],s[s.length-3],A._endX,A._endY]:[(c=A._points[A._points.length-2])[c.lenth-2],c[c.lenth-1],A._endX,A._endY]}else{var c,u,d,h,g,p,f,m,z,y=A._startX,b=A._startY,r=A._endX,i=A._endY;"straight"==A.lineType?(w&&"Triangle"==w.type&&((w.regY=0)!=(u=Ao.dist(y,b,r,i))&&(y+=A._startHead.height/2*(r-y)/u),0!=u&&(b+=A._startHead.height/2*(i-b)/u)),C&&"Triangle"==C.type&&((C.regY=0)!=(u=Ao.dist(y,b,r,i))&&(r-=A._endHead.height/2*(r-y)/u),0!=u&&(i-=A._endHead.height/2*(i-b)/u))):(e?"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?w&&"Triangle"==w.type&&(w.regY=0,y=y<r?Math.min(r,y+A._startHead.height/2):Math.max(r,y-A._startHead.height/2)):w&&"Triangle"==w.type&&(w.regY=0,b=b<i?Math.min(i,b+A._startHead.height/2):Math.max(i,b-A._startHead.height/2)):w&&"Triangle"==w.type&&(w.regY=w.startRegY),t?"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?C&&"Triangle"==C.type&&(C.regY=0,y<r?r-=A._endHead.height/2:r+=A._endHead.height/2):C&&"Triangle"==C.type&&(C.regY=0,b<i?i-=A._endHead.height/2:i+=A._endHead.height/2):C&&"Triangle"==C.type&&(C.regY=C.startRegY)),"straight"==A.lineType?(P.mt(y,b).lt(r,i),o=l=[y,b,r,i]):"corner"==A.lineType?(h=y+.4*(r-y),g=b+.4*(i-b),"auto"==A._lineOrientation&&(A.autoOrientation=Math.abs(y-r)>Math.abs(b-i)?"horizontal":"vertical"),"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?(o=l=[y,b,h,b],P.mt(y,b).lt(h,b).lt(h,i).lt(r,i)):(o=l=[y,b,y,g],P.mt(y,b).lt(y,g).lt(r,g).lt(r,i))):(n=r<y?-1:1,c=i<b?-1:1,u=y,d=b,e=Math.abs(y-r),t=Math.abs(b-i),h=Math.min(k,.5*e),g=Math.min(T,.5*t),"auto"==A._lineOrientation&&(A.autoOrientation=Math.abs(y-r)>Math.abs(b-i)?"horizontal":"vertical"),"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?(p=t-2*g,f=(e-2*h)/2,P.mt(u,d),0<f&&(u+=f*n,P.lt(u,d)),z=d,d+=g*c,u+=h*n,P.qt(u,z,u,d),o=l=[y,b,u,b],0<p&&(d+=p*c,P.lt(u,d)),d+=g*c,m=u,u+=h*n,P.qt(m,d,u,d),0<f&&(u+=f*n,P.lt(u,d))):(p=e-2*h,f=(t-2*g)/2,P.mt(u,d),0<f&&(d+=f*c,P.lt(u,d)),m=u,u+=h*n,d+=g*c,P.qt(m,d,u,d),o=l=[y,b,y,d],0<p&&(u+=p*n,P.lt(u,d)),u+=h*n,z=d,d+=g*c,P.qt(u,z,u,d),0<f&&(d+=f*c,P.lt(u,d))))}A.setBounds(Math.min(A._startX,A._endX),Math.min(A._startY,A._endY),Math.abs(A._startX-A._endX),Math.abs(A._startY-A._endY)),A._length=Math.sqrt(Math.pow(A._startX-A._endX,2)+Math.pow(A._startY-A._endY,2)),A.angle=180*Math.atan2(A._endY-A._startY,A._endX-A._startX)/Math.PI,A._startHead&&A._startHead.loc&&(A._startHead.loc(A._startX,A._startY,A),d=180*Math.atan2(o[3]-o[1],o[2]-o[0])/Math.PI,A._startHead.rotation=d-180+A._startHead.startAngle),A._endHead&&A._endHead.loc&&(A._endHead.loc(A._endX,A._endY,A),l=180*Math.atan2(l[3]-l[1],l[2]-l[0])/Math.PI,A._endHead.rotation=l+A._endHead.startAngle)},A.drawShape(),v.type&&(A.color=v),this.setPoints=function(e,t,o,n,r,i){return Array.isArray(e)&&zot(t)?A.points=e:(e&&!zot(e.x)?(A._startX=zot(e.x)?A._startX:e.x,A._startY=zot(e.y)?A._startY:e.y,t&&(A._endX=zot(t.x)?A._endX:t.x,A._endY=zot(t.y)?A._endY:t.y)):(A._startX=zot(e)?A._startX:e,A._startY=zot(t)?A._startY:t,A._endX=zot(o)?A._endX:o,A._endY=zot(n)?A._endY:n),A.drawShape(r,i)),A},this.from=function(e,t){return e&&!zot(e.x)?(A._startX=zot(e.x)?A._startX:e.x,A._startY=zot(e.y)?A._startY:e.y):(A._startX=zot(e)?A._startX:e,A._startY=zot(t)?A._startY:t),A.drawShape(),A},this.to=function(e,t){return e&&!zot(e.x)?(A._endX=zot(e.x)?A._endX:e.x,A._endY=zot(e.y)?A._endY:e.y):(A._endX=zot(e)?A._endX:e,A._endY=zot(t)?A._endY:t),A.drawShape(),A},Object.defineProperty(A,"length",{get:function(){return A._length},set:function(e){var t,o,n=0!=A.length?e/A.length:0;isNaN(n)||(t=A.scaleX,o=A.scaleY,A.scaleX*=n,A.scaleY*=n,e=A.localToGlobal(A._startX,A._startY),n=A.localToGlobal(A._endX,A._endY),A.scaleX=t,A.scaleY=o,e=A.globalToLocal(e.x,e.y),n=A.globalToLocal(n.x,n.y),A.setPoints(e,n))}}),Object.defineProperty(A,"startPoint",{get:function(){return new Ao.Point(A._startX,A._startY)},set:function(e){A._startX=zot(e.x)?A._startX:e.x,A._startY=zot(e.y)?A._startY:e.y,A.drawShape()}}),Object.defineProperty(A,"endPoint",{get:function(){return new Ao.Point(A._endX,A._endY)},set:function(e){A._endX=zot(e.x)?A._endX:e.x,A._endY=zot(e.y)?A._endY:e.y,A.drawShape()}}),Object.defineProperty(A,"startHead",{get:function(){return A._startHead},set:function(e){A._startHead=e,A.drawShape()}}),Object.defineProperty(A,"endHead",{get:function(){return A._endHead},set:function(e){A._endHead=e,A.drawShape()}}),Object.defineProperty(A,"startX",{get:function(){return A._startX},set:function(e){A._startX=e||0,A.drawShape()}}),Object.defineProperty(A,"startY",{get:function(){return A._startY},set:function(e){A._startY=e||0,A.drawShape()}}),Object.defineProperty(A,"endX",{get:function(){return A._endX},set:function(e){A._endX=e||0,A.drawShape()}}),Object.defineProperty(A,"endY",{get:function(){return A._endY},set:function(e){A._endY=e||0,A.drawShape()}}),Object.defineProperty(A,"points",{get:function(){return A._points},set:function(e){e&&(A._points=e,A.drawShape())}}),Object.defineProperty(A,"lineOrientation",{get:function(){return A._lineOrientation},set:function(e){e&&(A._lineOrientation=e,A.drawShape())}}),!1!==l&&Ao.styleTransforms(this,a),this.clone=function(e){var t=e||!Ao.isPick(u[3])?A._startHead:u[3];t&&t.clone&&((t=t.clone()).rotation=A._startHead.startAngle);var o=e||!Ao.isPick(u[4])?A._endHead:u[4];o&&o.clone&&((o=o.clone()).rotation=A._endHead.startAngle);o=A.cloneProps(new Ao.Line(e||!Ao.isPick(u[0])?A.length:u[0],e||!Ao.isPick(u[2])?A.thickness:u[2],e||!Ao.isPick(u[1])?A.color:u[1],t,o,A.dashed,x,n,A._lineOrientation,k,T,Ao.copy(i),l,this.group,s));return A.points?o.setPoints(A.points):o.setPoints(A._startX,A._startY,A._endX,A._endY),A.linearGradientParams&&o.linearGradient.apply(o,A.linearGradientParams),A.radialGradientParams&&o.radialGradient.apply(o,A.radialGradientParams),o}},Ao.extend(Ao.Line,Ao.CustomShape,"clone","zimCustomShape",!1),Ao.Squiggle=function(C,x,k,T,A,P,B,E,I,S,t,W,M,O,e,o,j,L,n,_,D,Y,r,X){var i;if(i=zob(Ao.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return i;z_d("53.2"),this.group=r;var R=!1===Y?{}:Ao.getStyle("Squiggle",this.group,X);zot(x)&&(x=null!=R.thickness?R.thickness:6),zot(T)&&(T=null!=R.length?R.length:300),zot(k)&&(k=null!=R.points?R.points:5),"string"==typeof k&&(u=new Ao.SVGContainer,k=u.processPath(k));var l,H,F,N,V,G,q,U,Q,Z,K,J,a,$,ee,te,s,c,u="number"!=typeof k,oe="number"==typeof k?k:k.length;function d(){te&&te.removeAllEventListeners(),N.num=oe="number"==typeof k?k:k.length,oe=Math.max(2,oe),A=T/oe,Q=N.shape=new Ao.Shape({style:!1}).addTo(N);var o=N.sticks=new Ao.Shape({style:!1}).addTo(N);S<=0&&o.removeFrom();var m=Q.graphics;m.c();var z=o.graphics;z.c();var e=S/10*8,t=S;N.selectPoints?(N.selectedBalls=new Ao.SelectionSet,N.selectedRect1s=new Ao.SelectionSet,N.selectedRect2s=new Ao.SelectionSet,N.selectionManager=new Ao.SelectionManager([N.selectedBalls,N.selectedRect1s,N.selectedRect2s],"ctrl",!1)):N.selectionManager=new Ao.SelectionManager(null,"ctrl");var u,n,r,i,l,a,s,c,d,h=Ao.mobile();for(te=N.controls=new Ao.Container({style:!1}).addTo(N),N.interactive&&te.drag({onTop:!h}),G=[],U=[],q=[],u=0;u<oe;u++)(d=new Ao.Container({style:!1}).addTo(te)).num=u,"number"==typeof k?(s=Ao.Pick.choose(A),c=new Ao.Container(s,x,null,null,!1).addTo(N).loc({x:u*T/(oe-1)-s/2,y:u%2*s}),i=new Ao.Circle(e,N.selectPoints&&N.selectedBalls.isSelected(u)?j:Ao.light,Ao.dark,2,null,null,null,null,!1).centerReg(c).loc({x:s/2,y:0}),l=new Ao.Rectangle(t,t,N.selectPoints&&N.selectedRect1s.isSelected(u)?j:y(P),0==S?null:Ao.dark,0==S?null:2,null,null,null,null,!1).centerReg(c).loc({x:0,y:0}),a=new Ao.Rectangle(t,t,N.selectPoints&&N.selectedRect2s.isSelected(u)?j:y(P),0==S?null:Ao.dark,0==S?null:2,null,null,null,null,!1).centerReg(c).loc({x:s,y:0}),s=c.localToLocal(i.x,i.y,te),i.x=s.x,i.y=s.y,i.addTo(d,null,!1),s=c.localToLocal(l.x,l.y,te),l.x="none"==P?0:s.x-i.x,l.y="none"==P?0:s.y-i.y,l.addTo(d,null,!1),c=c.localToLocal(a.x,a.y,te),a.x="none"==P?0:c.x-i.x,a.y="none"==P?0:c.y-i.y,a.addTo(d,null,!1),d.x=i.x,d.y=i.y,i.x=0,i.y=0,"none"==P&&i.addTo(d,null,!1)):(n=(r=k[u])[8]||P,d.loc({x:r[0],y:r[1]}),i=new Ao.Circle(e,Ao.light,Ao.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(d).loc({x:r[2],y:r[3]}),l=new Ao.Rectangle(t,t,y(n),0==S?null:Ao.dark,0==S?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:r[4],y:r[5]}),a=new Ao.Rectangle(t,t,y(n),0==S?null:Ao.dark,0==S?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:r[6],y:r[7]})),i.mySet=d,i.rect1=l,i.rect2=a,i.index=u,h?i.on("mousedown",p):i.on("dblclick",f),l.ball=i,(l.other=a).ball=i,a.other=l,0==S&&(i.expand(10),l.expand(10),a.expand(10)),h&&(i.expand(),l.expand(),a.expand()),n=[d,i,l,a,r?r[8]:P],G.push(n),q.push(i),U.push(d);var g=!1;function p(e){g?(e.preventDefault(),f(e)):(g=!0,setTimeout(function(){g=!1},300))}function f(e){var t,o;N.lockControlType||(t=e.target,o=G[t.index][4]||P,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=N.types[(N.types.indexOf(o)+(N.shiftKey?-1:1)+N.types.length)%N.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),G[t.index][4]=o,t.rect1.color=y(o),t.rect2.color=y(o),N.drawShape(),C.type&&(N.color=C),(o=new createjs.Event("change")).controlType="bezierSwitch",N.dispatchEvent(o),t.stage.update())}function y(e){var t={straight:Ao.pink,free:Ao.yellow,none:Ao.blue};return t[e]||Ao.purple}var b,v=Ao.mobile();function w(e){var t;"Circle"==e.target.type&&(t=N.lastSelectedIndex=N.controls.getChildIndex(e.target.parent),N.controls.numChildren<=2||(e=N.points,N.selectPoints&&(N.lastPoints=Ao.copy(e)),e.splice(t,1),N.points=e,N.stage.update(),N.lastSelected=N.lastSelectedIndex=null))}N.drawShape=function(){m.c();var e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f=v?10:6;if(x<f)for(m.s("rgba(0,0,0,.01)").ss(f),s=(n=G[0][0]).localToLocal(G[0][1].x,G[0][1].y,Q),m.mt(s.x,s.y),e=0;e<G.length;e++)o=((t=e)+1)%G.length,n=G[t][0],r=G[t][1],i=G[t][2],l=G[t][3],a=G[o][0],c=G[o][1],u=G[o][2],h=n.localToLocal(l.x,l.y,Q),g=a.localToLocal(u.x,u.y,Q),p=a.localToLocal(c.x,c.y,Q),e!=G.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y);for(N.colorCommand||(N.colorCommand=m.s(N._color).command,C&&C.type&&N.specialColor(N.colorCommand,C,N)),N.thicknessCommand||(N.thicknessCommand=m.ss(N._thickness,D.caps,D.joints,D.miterLimit,D.ignoreScale).command),N._dashed&&(N.dashedCommand||(N.dashedCommand=m.sd(Array.isArray(N._dashed)?N._dashed:[10,10],N._dashedOffset).command)),s=(n=G[0][0]).localToLocal(G[0][1].x,G[0][1].y,Q),m.mt(s.x,s.y),z.c().s(N.stickColor).ss(N.stickThickness),e=0;e<G.length;e++)o=((t=e)+1)%G.length,n=G[t][0],r=G[t][1],i=G[t][2],l=G[t][3],a=G[o][0],c=G[o][1],u=G[o][2],h=n.localToLocal(l.x,l.y,Q),g=a.localToLocal(u.x,u.y,Q),p=a.localToLocal(c.x,c.y,Q),e!=G.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y),s=n.localToLocal(r.x,r.y,Q),d=n.localToLocal(i.x,i.y,Q),0==e&&(i.visible=0),0!=e&&z.mt(s.x,s.y).lt(d.x,d.y),e!=G.length-1&&z.mt(s.x,s.y).lt(h.x,h.y),e==G.length-1&&(l.visible=0);N._dashed&&m.append(N.dashedCommand),m.append(N.thicknessCommand),m.append(N.colorCommand)},N.drawShape(),C.type&&(N.color=C),te.on("mousedown",function(e){var t,o;if((V=e.target.stage,!N.lockControls)&&(N.selectPoints&&(N.keyFocus=!0),b={x:e.target.x,y:e.target.y},e.target.rect1?((i=e.target).startX=i.x,i.startY=i.y,i.rect1.startX=i.rect1.x,i.rect1.startY=i.rect1.y,i.rect2.startX=i.rect2.x,i.rect2.startY=i.rect2.y):((o=e.target).startX=o.x,o.startY=o.y,t=(i=o.ball).index,e=P,zot(G[t][4])||(e=G[t][4]),"straight"==e&&(e=(t=o.other).x-i.x,o=t.y-i.y,t.stickLength=Math.sqrt(Math.pow(e,2)+Math.pow(o,2)))),N.selectPoints)){var n=N.selectionManager.currentSet;if(n&&n.selections&&0<n.selections.length)for(u=0;u<n.selections.length;u++){var r=N.pointObjects[n.selections[u]];r[1].startX=r[1].x,r[1].startY=r[1].y,r[2].startX=r[2].x,r[2].startY=r[2].y,r[3].startX=r[3].x,r[3].startY=r[3].y}}}),N.selectPoints&&te.tap(function(e){var t;for(e.target.rect1?(t=e.target,N.selectedBalls.toggle(t.parent.num)):((e=e.target).color="white",((t=e.ball).rect1==e?N.selectedRect1s:N.selectedRect2s).toggle(t.parent.num)),u=0;u<N.pointObjects.length;u++){var o=N.pointObjects[u];o[1].color=N.selectedBalls.isSelected(u)?Ao.white:Ao.light,o[2].color=N.selectedRect1s.isSelected(u)?Ao.white:y(o[4]),o[3].color=N.selectedRect2s.isSelected(u)?Ao.white:y(o[4])}V.update()}),te.on("pressmove",function(e){if(!N.lockControls)if(N.selectPoints){var t=ne();if(-1==t.indexOf(e.target))ee(e.target),N.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,ee(i)}N.drawShape()}}else ee(e.target),N.drawShape()}),te.on("pressup",function(e){var t,o;N.lockControls||(t=e.target.x!=b.x||e.target.y!=b.y,o=new createjs.Event("change"),e.target.rect1?(o.controlType="bezierPoint",function(e){if(N.selectPoints){var t=ne();if(t&&-1==t.indexOf(e))re(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)re(t[o]);else re(e)}else re(e)}(e.target)):o.controlType="bezierHandle",t&&N.dispatchEvent(o))}),N.changeControl=function(e,t,o,n,r,i,l,a,s){var c;if(c=zob(N.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e))for(u=0;u<G.length;u++)N.changeControl(u,t,o,n,r,i,l,a);else{e=G[e];"none"==(e[4]=t)?(zot(l)||(e[2].x=l),zot(a)||(e[2].y=a),e[2].x=e[1].x,e[2].y=e[1].y,e[3].x=e[1].x,e[3].y=e[1].y,e[1].parent.addChild(e[1])):(zot(o)||(e[2].x=o),zot(n)||(e[2].y=n),zot(r)||(e[3].x=r),zot(i)||(e[3].y=i),zot(l)||(e[1].x=l),zot(a)||(e[1].y=a),e[1].parent.addChildAt(e[1],0)),s&&(N.update(),V&&V.update())}},N.transformPoints=function(e,t,o,n,r){return zot(r)&&(r=!0),N.points=Ao.transformPoints(N.points,e,t,o,n),r&&N.approximateBounds(),N},N.traverse=function(t,e,o,n){var r=Ao.copy(N.segmentRatios);r.unshift(0),zot(o)&&(o=e+1);var i,l=e<o,a=l?(i=100*r[e],100*r[o]):(i=50+(100-100*r[e])/2,50+(100-100*r[o])/2);return t.percentComplete=t.zimStartPercent=i,t.animate({ease:"linear",props:{path:N},rewind:!l,time:n,events:!0}),t.on("animation",function(e){(t.percentComplete>a||0==t.percentComplete)&&(t.stopAnimate(),e.remove(),(e=new createjs.Event("traversed")).obj=t,N.dispatchEvent(e))}),N},N.reversePoints=function(){return k=Ao.copy(N.points),N.points=Ao.reversePoints(Ao.copy(N.points)),N.update(),N},N.appendPoints=function(e,t){var o=Ao.copy(N.points);return N.points=Ao.appendPoints(o,e,t),N.update(),N},N.prependPoints=function(e,t){var o=Ao.copy(N.points);return N.points=Ao.rependPoints(o,k,t),N.update(),N},N.splitPoints=function(e){var t=Ao.copy(N.points);if(!(e<1||e>t.length-1)){var o=Ao.splitPoints(t,e),t=o[0],e=o[1],o=N.clone();return N.points=t,N.update(),o.points=e,N.parent&&o.addTo(N.parent),o}},N.makeBlob=function(n,e){zot(n)&&(n="mirror"),zot(e)&&(e=5);var t=Ao.copy(N.points);return Ao.loop(t,function(e,t,o){e[8]||(e[8]="mirror"),0==t&&("free"==n&&(e[4]=e[5]=0),e[8]=n),t==o-1&&("free"==n&&(e[6]=e[7]=0),e[8]=n)}),Math.abs(t[0][0]-t[t.length-1][0])<e&&Math.abs(t[0][1]-t[t.length-1][1])<e&&(t[0][4]=t[t.length-1][4],t[0][5]=t[t.length-1][5],t.pop()),new Ao.Blob({points:t,borderColor:N.color,borderWidth:N.thickness,showControls:N.controlsVisible,interactive:N.interactive,onTop:N.onTop,dashed:N.dashed,stickColor:N.stickColor,stickThickness:N.stickThickness})},N.update=function(e){return e?N.points=N.pointsAdjusted:N.drawShape(),N.zimAnimateChanged=!0,N},N.interactive&&(W&&Q.drag({onTop:!1}),Z=Q.on("mousedown",function(e){V=e.target.stage,b={x:Q.x,y:Q.y},N.selectPoints&&(N.keyFocus=!0),N.onTop&&(e=N.parent.numChildren-1,"Keyboard"==N.parent.getChildAt(e).type&&e--,N.parent.setChildIndex(N,e))}),K=Q.on("pressmove",function(){te.x=Q.x,te.y=Q.y,o.x=Q.x,o.y=Q.y}),J=Q.on("pressup",function(){var e=Q.x!=b.x||Q.y!=b.y,t=Q.localToLocal(N.regX,N.regY,N.parent);N.x=t.x,N.y=t.y,te.x=te.y=o.x=o.y=Q.x=Q.y=0,e&&((e=new createjs.Event("change")).controlType="move",N.dispatchEvent(e)),V&&V.update()}),N.move||le(!0)),N.toggleEvent=N.on("mousedown",function(){N.allowToggle&&(H||(N.showControls(),N.dispatchEvent("controlsshow")))}),N.added(function(){V=N.stage,N.toggleStageEvent&&V.off("stagemousedown",N.toggleStageEvent),N.toggleStageEvent=V.on("stagemousedown",function(e){N.allowToggle&&N.stage&&H&&!N.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY,!1)&&(N.hideControls(),N.dispatchEvent("controlshide"))})}),N.clickEvent=N.on("click",function(){N.ctrlKey&&setTimeout(function(){N.clone(!0).addTo(N.stage).mov(0,100),N.allowToggle&&(N.hideControls(),N.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",N.dispatchEvent(e),N.stage.update()},50)}),N.hideControls=function(){return N.toggled=!1,te.visible=!1,o.visible=!1,H=!1,N.stage&&N.stage.update(),!N.allowToggle&&N.move&&le(),N},E||N.hideControls(),N.showControls=function(){return N.toggled=!0,te.visible=!0,o.visible=!0,H=!0,te.x=Q.x,te.y=Q.y,o.x=Q.x,o.y=Q.y,N.addChildAt(Q,0),N.move&&!N.allowToggle&&ie(),N.stage&&N.stage.update(),N},N.toggle=function(e){return!0!==e&&(!1===e||H)?N.hideControls():N.showControls(),N},N.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:N.parent?N.parent.getChildIndex(N):-1,x:N.x,y:N.y,points:N.recordPoints(),color:N.color,thickness:N.thickness,move:N.move,toggle:N.allowToggle,controlsVisible:H};return e?JSON.stringify(t):t},N.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n,t=e.points;for(n in zot(t)||N.setPoints(t),delete e.points,N.num=t.length,e)N[n]=e[n];return N.parent&&N.parent.setChildIndex(N,o),N.update(),N}},N.recordPoints=function(e){zot(e)&&(e=!1);var t=N.points;return e&&(N.pane||(e=N.pane=new Ao.Pane({container:N.stage,width:Math.min(500,N.stage.width-20),height:Math.min(500,N.stage.height-20),draggable:!0}),(N.textArea=new Ao.TextArea(Math.min(400,N.stage.width-70),Math.min(400,N.stage.height-70))).centerReg(e)),N.textArea.text=JSON.stringify(t),N.pane.show()),t},!(N.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=G[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return N.update(),N})!==Y&&Ao.styleTransforms(N,R),N.clone=function(e,t){var o=[],n=!1;Ao.loop(N.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(n=!0),o.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])});e=N.cloneProps(new Ao.Squiggle(t?N.colorCommand:e||!Ao.isPick(F[0])?N.color:F[0],N.thickness,N.recordPoints(),T,A,P,B,te.visible,I,S,N.allowToggle,N.move,M,O,N.stickColor,N.stickThickness,j,L,N.editPoints,_,D,Y,N.group,X));return n&&(Ao.loop(e.pointControls,function(e,t){e.scaleX=o[t][0],e.scaleY=o[t][1],e.regX=o[t][2],e.regY=o[t][3],e.rotation=o[t][4]}),e.update()),N.linearGradientParams&&e.linearGradient.apply(e,N.linearGradientParams),N.radialGradientParams&&e.radialGradient.apply(e,N.radialGradientParams),e},N.shape.on("mousedown",function(e){V=e.target.stage,N.editPoints&&(N.controlsVisible?(N.pressX=e.stageX/Ao.scaX,N.pressY=e.stageY/Ao.scaX):(N.pressX=null,N.pressY=null))}),N.addPointFactor=10,N.addMinDistance=15,N.shape.on("pressup",function(e){var o,t,n,r,i,l;N.editPoints&&N.pressX&&Math.abs(N.pressX-e.stageX/Ao.scaX)<$&&Math.abs(N.pressY-e.stageY/Ao.scaY)<$&&(N.selectPoints&&(N.lastPoints=Ao.copy(N.points)),l=N.points,o=N.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),t=Ao.closestPointAlongCurve(o,N.segmentPoints),"anywhere"==N.editPoints?(l.splice(t+1,0,[o.x,o.y,0,0,0,0,0,0]),N.points=l,N.changeControl({index:t+1,type:"mirror",update:!0})):(i=N.pointsAdjusted,e=N.getSegmentPoint(i[t],i[(t+1)%i.length]),i=Ao.distanceAlongCurve(e),e=Math.round(i/N.addPointFactor),i=N.interpolate(e,t,!1,l),n=1e4,Ao.loop(i,function(e,t){e=Ao.dist(e,o);e<n&&(n=e,r=t)}),n<N.addMinDistance&&(i=(l=N.segmentRatios)[t],l=0<t?l[t-1]:0,N.addPoint(100*(l+r/(e+1)*(i-l))))),N.lastSelectedIndex=t+1,N.lastSelected=N.controls.getChildAt(N.lastSelectedIndex),N.stage.update())}),N.controls.on("click",function(e){N.lastSelected=e.target.parent,N.lastSelectedIndex=N.controls.getChildIndex(e.target.parent),N.editPoints&&N.selectionManager.shiftKey&&w(e)}),N.controls.hold(w),H||N.hideControls(),N.dispatchEvent("update")}function ne(){var e=[],t=N.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=N.pointObjects[t.selections[o]];t==N.selectedBalls?e.push(n[1]):t==N.selectedRect1s?e.push(n[2]):t==N.selectedRect2s&&e.push(n[3])}return e}function re(e){var t,o,n;"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,e=t.rect2,n.x-=t.x,n.y-=t.y,e.x-=t.x,e.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function ie(){"always"!=N.move&&(a||(a=!0,Q.drag({onTop:!1}),Z=Q.on("mousedown",Z),K=Q.on("pressmove",K),J=Q.on("pressup",J)))}function le(e){"always"!=N.move&&(e||a)&&(a=!1,Q.noDrag(),Q.off("mousedown",Z),Q.off("pressmove",K),Q.off("pressup",J))}function p(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function g(e,t,o,n,r,i,l,a){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==N.type&&(n=99.99),n=(n+1e5)%100,Ao.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d=N.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,g=Ao.pointAlongCurve(d,h,null,a),o=[g.x,g.y,0,0];i||(l?N.interpolatedPoints.push({x:g.x,y:g.y,r:n/100}):("none"!=r&&(a=p(d[0],d[1],h),i=p(d[1],d[2],h),l=p(d[2],d[3],h),d=p(a,i,h),h=p(i,l,h),o[4]=d.x-g.x,o[5]=d.y-g.y,o[6]=h.x-g.x,o[7]=h.y-g.y,a=N.localToLocal(a.x,a.y,t[s]),e[s][6]=a.x,e[s][7]=a.y,t=N.localToLocal(l.x,l.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=t.x,e[(s+1)%e.length][5]=t.y),r&&(o[8]=r),e.splice(s+1,0,o)))}0!=oe&&(zot(A)&&(A=null!=R.controlLength?R.controlLength:T/oe),this.zimCustomShape_constructor(T,A,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,zot(M)&&(M=null!=R.dashed&&R.dashed),zot(C)&&(C=null!=R.color?R.color:Ao.blue),C.style&&(this.colorCommand=C,C="black"),zot(P)&&(P=null!=R.controlType?R.controlType:null),zot(l=P)&&(P="mirror"),zot(B)&&(B=null!=R.lockControlType&&R.lockControlType),zot(_)&&(_=null==R.interactive||R.interactive),zot(E)&&(E=null!=R.showControls?R.showControls:_),H=E,zot(I)&&(I=null!=R.lockControls?R.lockControls:!_),zot(S)&&(S=null!=R.handleSize?R.handleSize:Ao.mobile()?20:10),zot(t)&&(t=null!=R.allowToggle?R.allowToggle:_),zot(W)&&(W=null!=R.move?R.move:_),zot(e)&&(e=null!=R.stickColor?R.stickColor:"#111"),zot(o)&&(o=null!=R.stickThickness?R.stickThickness:1),zot(j)&&(j=null!=R.selectColor?R.selectColor:"#fff"),zot(L)&&(L=null!=R.selectPoints?R.selectPoints:_),this.stickColor=e,this.stickThickness=o,zot(O)&&(O=null==R.onTop||R.onTop),zot(n)&&(n=null!=R.editPoints?R.editPoints:_),zot(D)&&(D=null!=R.strokeObj?R.strokeObj:{}),F=function(){return arguments}(C),C=Ao.Pick.choose(C),(N=this).types=["mirror","straight","free","none"],this.interactive=_,this.num=oe,this.onTop=O,this.move=W,this.editPoints=n,this.allowToggle=t,this.lockControlType=B,this.selectPoints=L,this.lockControls=I,N._color=C,N._thickness=x,N._dashed=M,N._dashed&&!Array.isArray(N._dashed)&&(N._dashed=[10,10]),a=N.move,$=2,l&&"number"!=typeof k&&Ao.loop(k,function(e){"none"==(e[8]=l)&&(e[4]=e[5]=e[6]=e[7]=0)}),d(),N.selectionManager.on("keydown",function(e){if(N.selectPoints&&N.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ne();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=N.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=N.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=N.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=N.selectionManager.shiftKey?10:1),ee(n)}N.drawShape(),N.dispatchEvent("update"),N.stage&&N.stage.update()}}}),N.selectionManager.on("keyup",function(e){if(N.selectPoints&&N.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ne();if(0<t.length)for(var o=0;o<t.length;o++)re(t[o])}}),N.selectionManager.on("undo",function(){var e;N.selectPoints&&N.keyFocus&&N.lastPoints&&(e=Ao.copy(N.lastPoints),N.lastPoints=Ao.copy(N.points),N.points=e,N.stage&&N.stage.update())}),ee=function(e){var t,o,n,r;N.lockControls||(e.rect1?(t=(o=e).x-o.startX,n=o.y-o.startY,o.rect1.x=o.rect1.startX+t,o.rect1.y=o.rect1.startY+n,o.rect2.x=o.rect2.startX+t,o.rect2.y=o.rect2.startY+n):(t=(r=e).other,n=(o=r.ball).index,e=P,zot(G[n][4])||(e=G[n][4]),"straight"!=e&&"mirror"!=e||(n=r.x-o.x,r=r.y-o.y,"mirror"==e?(t.x=o.x-n,t.y=o.y-r):(r=Math.atan2(r,n),n=-t.stickLength*Math.cos(r+Math.PI),r=-t.stickLength*Math.sin(r+Math.PI),t.x=o.x-n,t.y=o.y-r))))},Object.defineProperty(N,"move",{get:function(){return W},set:function(e){W!=e&&((W=e)?ie:le)()}}),Object.defineProperty(N,"interactive",{get:function(){return _},set:function(e){H=_=e,N.allowToggle=_,N.editPoints=_,N.lockControls=!_,N.selectPoints=_,N.move=_;e=N.points;N.points=e}}),Object.defineProperty(N,"allowToggle",{get:function(){return t},set:function(e){t!=e&&((t=e)?N.move&&ie():!H&&N.move&&le())}}),s=I,Object.defineProperty(N,"lockControls",{get:function(){return s},set:function(e){(s=e)?(N.controls.mouseChildren=!1,N.controls.mouseEnabled=!1):(N.controls.mouseChildren=!0,N.controls.mouseEnabled=!0)}}),N.lockControls=s,Object.defineProperty(N,"controlsVisible",{get:function(){return H},set:function(e){(H=e)?N.showControls():N.hideControls()}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==N},set:function(){Ao.KEYFOCUS=N}}),Ao.KEYFOCUS||N.selectPoints&&(N.keyFocus=!0,(c=document.activeElement)&&c.blur()),Object.defineProperty(N,"points",{get:function(){for(var e,t,o=[],n=0;n<G.length;n++)t=G[n],e=[Ao.decimals(t[0].x),Ao.decimals(t[0].y),Ao.decimals(t[1].x),Ao.decimals(t[1].y),Ao.decimals(t[2].x),Ao.decimals(t[2].y),Ao.decimals(t[3].x),Ao.decimals(t[3].y)],t[4]&&"mirror"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=N.x,o=N.y,n=N.visible,r=[],i=!1;Ao.loop(N.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(i=!0),r.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])}),N.dispose(!0),k=e,d(),N.lockControls=s,N.x=t,N.y=o,N.visible=n,i&&(Ao.loop(N.pointControls,function(e,t){e.scaleX=r[t][0],e.scaleY=r[t][1],e.regX=r[t][2],e.regY=r[t][3],e.rotation=r[t][4]}),N.update())}}),Object.defineProperty(N,"pointsAdjusted",{get:function(){var o,n,r=[],i=N.pointObjects;return Ao.loop(i.length,function(e){var t;n=i[e],o=G[e],n=0==n[0].rotation&&0==n[0].scaleX&&0==n[0].scaleY?[Ao.decimals(o[0].x),Ao.decimals(o[0].y),Ao.decimals(o[1].x),Ao.decimals(o[1].y),Ao.decimals(o[2].x),Ao.decimals(o[2].y),Ao.decimals(o[3].x),Ao.decimals(o[3].y)]:(t=n[0].localToLocal(n[2].x,n[2].y,n[0].parent),e=n[0].localToLocal(n[3].x,n[3].y,n[0].parent),[Ao.decimals(o[0].x),Ao.decimals(o[0].y),Ao.decimals(o[1].x),Ao.decimals(o[1].y),Ao.decimals(t.x-o[0].x),Ao.decimals(t.y-o[0].y),Ao.decimals(e.x-o[0].x),Ao.decimals(e.y-o[0].y)]),o[4]&&"mirror"!==o[4]&&n.push(o[4]),r.push(n)}),r},set:function(){zon&&zogy("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(N,"pointObjects",{get:function(){return G},set:function(){zon&&zogy("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(N,"pointControls",{get:function(){return U},set:function(){zon&&zogy("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(N,"pointCircles",{get:function(){return q},set:function(){zon&&zogy("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(N,"segmentPoints",{get:function(){var t=[],o=N.pointsAdjusted;return Ao.loop(o.length-1,function(e){e=N.getSegmentPoint(o[e],o[e+1]);t.push(e)}),t},set:function(){zon&&zogy("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(N,"segmentRatios",{get:function(){var t=[],o=0;Ao.loop(N.segmentPoints,function(e){e=Ao.distanceAlongCurve(e);t.push(e),o+=e});var n=[],r=0;return Ao.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(){zon&&zogy("Squiggle() - segmentRatios is read only")}}),N.approximateBounds=function(e,t,o){zot(e)&&(e=80),zot(o)&&(o=0),e/=N.num;var n=N.interpolate(e,null,!0,null,!0),e=Ao.boundsAroundPoints(n);if(N.setBounds(e.x-o,e.y-o,e.width+2*o,e.height+2*o),t){if(!N.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),N;N.hitPathPoints?N.hitPathPoints.removeAllChildren():N.hitPathPoints=(new Ao.Container).addTo(),N.hitPathPoints.top();for(var r=0;r<n.length;r++){var i=n[r],i=N.localToGlobal(i.x,i.y);new Ao.Circle(3).loc(i.x,i.y,N.hitPathPoints)}}return N},N.getPointAngle=function(e){var t,o=N.pointObjects[e][0],n=N.pointObjects[e][2],e=N.pointObjects[e][3],e=o==N.stage?(t=new Ao.Point(n.x,n.y),new Ao.Point(e.x,e.y)):(t=o.localToGlobal(n.x,n.y),o.localToGlobal(e.x,e.y));return Ao.angle(t.x,t.y,e.x,e.y)},N.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},e={x:t[0]+t[4],y:t[1]+t[5]},t={x:t[0],y:t[1]};return 0==te.x&&0==te.y||(o.x+=te.x,n.x+=te.x,e.x+=te.x,t.x+=te.x,o.y+=te.y,n.y+=te.y,e.y+=te.y,t.y+=te.y),[o,n,e,t]}},N.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=N.pointsAdjusted;return 2==N.num?[[N.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[N.getSegmentPoint(t[0],t[1]),N.getSegmentPoint(t[1],t[2])],[0,1]]:e>=N.num-2?[[N.getSegmentPoint(t[N.num-3],t[N.num-2]),N.getSegmentPoint(t[N.num-2],t[N.num-1])],[N.num-3,N.num-2]]:[[N.getSegmentPoint(t[e-1],t[e]),N.getSegmentPoint(t[e],t[e+1]),N.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},N.getCurvePoint=function(o,e,t,n,r){(zot(o)||isNaN(o))&&(o=0),zot(e)&&(e=N.segmentRatios),zot(t)&&(t=N.segmentPoints),zot(n)&&(n=!1),zot(r)&&(r=!1);var i=e,r=t,e=Ao.loop(i,function(e,t){if(o<=e)return t}),t=0<e?i[e-1]:0,i=0<e?i[e]-i[e-1]:i[e];if(i){i=(o-t)/i,i=Ao.pointAlongCurve(r[e],i,n,!0),n=N.localToGlobal(i.x,i.y);return n.angle=i.angle,n.z=e,zot(n)?void 0:n}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=N.points,n=N.segmentRatios;return g(o,N.pointControls,n,e,t=t||l),N.points=o,N.num=o.length,N},this.addPoints=function(r,i,l,a,s,c,u){zot(c)&&(c=Ao.copy(N.points));var d,e=Ao.copy(N.segmentRatios),h=0;return s&&(N.interpolatedPoints=[]),a&&(d=e.length*r),Ao.loop(e,function(t,o){s&&g(c,N.pointControls,N.segmentRatios,100*h,i,!zot(l)&&o!=l,s,u);var e=a?Math.round(d*(t-h)):r,n=1/(e+1);Ao.loop(e,function(e){e=h+(t-h)*n*(e+1);g(c,N.pointControls,N.segmentRatios,100*e,i,!zot(l)&&o!=l,s,u),!s&&0<r&&(N.points=c)}),h=t}),s&&"Squiggle"==N.type&&g(c,N.pointControls,N.segmentRatios,100,i,!1,s,u),N.stage&&N.stage.update(),N.num=c.length,N},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),N.addPoints(e,"none",t,o,!0,n,r),N.interpolatedPoints},u&&N.approximateBounds(),this.dispose=function(e,t,o){if(N.shape){if(Ao.gD(N),V&&N.toggleStageEvent&&V.off("stagemousedown",N.toggleStageEvent),N.controls.noDrag(),N.controls.removeAllEventListeners(),N.selectPoints&&N.selectionManager&&N.selectionManager.dispose(),N.selectedBalls=null,N.selectedRect1s=null,N.selectedRect2s=null,N.selectionManager=null,N.off("mousedown",N.toggleEvent),N.off("click",N.clickEvent),e){N.shape.dispose(),N.shape=null;for(var n=0;n<N.points.length;n++)N.pointObjects[n][0].removeAllEventListeners(),N.pointObjects[n][1].removeAllEventListeners(),N.pointObjects[n][2].removeAllEventListeners(),N.pointObjects[n][3].removeAllEventListeners();N.controls.removeFrom(N),N.sticks.dispose(),q=G=null}else N.removeAllEventListeners(),q=G=null,o||this.zimCustomShape_dispose(!0);return!0}})},Ao.extend(Ao.Squiggle,Ao.CustomShape,["clone","dispose"],"zimCustomShape",!1),Ao.Blob=function(w,e,t,C,x,k,T,A,o,P,B,n,E,I,S,r,i,W,M,l,O,j,L,a,_){var s;if(s=zob(Ao.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return s;z_d("53.5"),this.group=a;var D=!1===L?{}:Ao.getStyle("Blob",this.group,_);zot(x)&&(x=null!=D.radius?D.radius:100),this.zimCustomShape_constructor(-x,-x,2*x,2*x,!1),this.type="Blob",this.mouseChildren=!0,zot(I)&&(I=null!=D.dashed&&D.dashed),zot(e)&&(e=null!=D.borderColor?D.borderColor:null),zot(t)&&(t=null!=D.borderWidth?D.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(w)&&(w=null!=D.color?D.color:0<t?"rgba(0,0,0,0)":Ao.green),w.style&&(this.colorCommand=w,w="black"),e&&e.style&&(this.borderColorCommand=e,e="black"),zot(C)&&(C=null!=D.points?D.points:4);var a="number"!=typeof C,Y="number"==typeof C?C:C.length,X=k;zot(k)&&(k=null!=D.controlLength?D.controlLength:4*x/Y),zot(T)&&(T=null!=D.controlType?D.controlType:null);var c=T;zot(T)&&(T="straight"),zot(A)&&(A=null!=D.lockControlType&&D.lockControlType),zot(O)&&(O=null==D.interactive||D.interactive),zot(o)&&(o=null!=D.showControls?D.showControls:O);var R=o;zot(P)&&(P=null!=D.lockControls?D.lockControls:!O),zot(B)&&(B=null!=D.handleSize?D.handleSize:Ao.mobile()?20:10),zot(n)&&(n=null!=D.allowToggle?D.allowToggle:O),zot(E)&&(E=null!=D.move?D.move:O),zot(r)&&(r=null!=D.stickColor?D.stickColor:"#111"),zot(i)&&(i=null!=D.stickThickness?D.stickThickness:1),zot(W)&&(W=null!=D.selectColor?D.selectColor:"#fff"),zot(M)&&(M=null!=D.selectPoints?D.selectPoints:O),this.stickColor=r,this.stickThickness=i,zot(S)&&(S=null==D.onTop||D.onTop),zot(l)&&(l=null!=D.editPoints?D.editPoints:O),zot(j)&&(j=null!=D.strokeObj?D.strokeObj:{});var H=function(){return arguments}(w,e);w=Ao.Pick.choose(w),e=Ao.Pick.choose(e);var F,N,V,G,q,U,Q,Z,K=this;this.interactive=O,this.num=Y,this.editPoints=l,this.selectPoints=M,this.lockControls=P,this.onTop=S,this.move=E,this.allowToggle=n,this.lockControlType=A,this.types=["mirror","straight","free","none"],K._color=w,K._borderColor=e,K._borderWidth=t,K._dashed=I,K._dashed&&!Array.isArray(K._dashed)&&(K._dashed=[10,10]);var J,$,u=K.move,ee=2;function d(e){var t;if("circle"!=e&&"rectangle"!=e&&"triangle"!=e||("circle"==e&&(e=new Ao.Circle(x)),"rectangle"==e&&(e=new Ao.Rectangle(2*x,2*x).centerReg({add:!1})),"triangle"==e&&(e=new Ao.Triangle(2*x,2*x,2*x))),"Circle"!=e.type&&"Rectangle"!=e.type&&"Triangle"!=e.type)return e;var o=e.getBounds();return"Circle"==e.type?(t=4,X=k=2*x*.5523):"Rectangle"==e.type?(e.centerReg({add:!1}),t=[[o.x-o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y+o.height/2],[o.x-o.width/2,o.y+o.height/2]],K.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height),K.regX=e.regX-o.width/2,K.regY=e.regY-o.height/2):"Triangle"==e.type&&(t=[[e.three.x-e.width/2,e.three.y+e.height/2+e.adjusted],[e.two.x-e.width/2,e.two.y+e.height/2+e.adjusted],[e.one.x-e.width/2,e.one.y+e.height/2+e.adjusted]],K.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height)),t}function h(){if($&&$.removeAllEventListeners(),K.selectPoints?(K.selectedBalls=new Ao.SelectionSet,K.selectedRect1s=new Ao.SelectionSet,K.selectedRect2s=new Ao.SelectionSet,K.selectionManager=new Ao.SelectionManager([K.selectedBalls,K.selectedRect1s,K.selectedRect2s],"ctrl",!1)):K.selectionManager=new Ao.SelectionManager(null,"ctrl"),!((Y="number"==typeof C?C:C.length)<=0)){zot(X)&&(k=4*x/Y),G=K.shape=new Ao.Shape({style:!1}).addTo(K);var o=K.sticks=new Ao.Shape({style:!1}).addTo(K);B<=0&&o.removeFrom();var s=G.graphics;s.c();var c=o.graphics;c.c();var e,t,n,u,r,i,l,a,d,h=B/10*8,g=B,p=Ao.mobile();for($=K.controls=new Ao.Container({style:!1}).addTo(K),K.interactive&&$.drag({onTop:!p}),F=[],V=[],N=[],e=0;e<Y;e++)(d=new Ao.Container({style:!1}).addTo($)).num=e,"number"==typeof C?(l=Ao.Pick.choose(k),(a=new Ao.Container(l,x,null,null,!1).reg(l/2,x).addTo(K)).rotation=e/Y*360,u=new Ao.Circle(h,K.selectPoints&&K.selectedBalls.isSelected(e)?W:Ao.light,Ao.dark,2,null,null,null,null,!1).centerReg(a).loc({x:l/2,y:0}),t=new Ao.Rectangle(g,g,K.selectPoints&&K.selectedRect1s.isSelected(e)?W:b(T),0==B?null:Ao.dark,0==B?null:2,null,null,null,null,!1).centerReg(a).loc({x:0,y:0}),n=new Ao.Rectangle(g,g,K.selectPoints&&K.selectedRect2s.isSelected(e)?W:b(T),0==B?null:Ao.dark,0==B?null:2,null,null,null,null,!1).centerReg(a).loc({x:l,y:0}),l=a.localToLocal(u.x,u.y,$),u.x=l.x,u.y=l.y,u.addTo(d,null,!1),l=a.localToLocal(t.x,t.y,$),t.x="none"==T?0:l.x-u.x,t.y="none"==T?0:l.y-u.y,t.addTo(d,null,!1),a=a.localToLocal(n.x,n.y,$),n.x="none"==T?0:a.x-u.x,n.y="none"==T?0:a.y-u.y,n.addTo(d,null,!1),d.x=u.x,d.y=u.y,u.x=0,u.y=0,"none"==T&&u.addTo(d,null,!1)):(r=(i=C[e])[8]||T,d.loc({x:i[0],y:i[1]}),u=new Ao.Circle(h,Ao.light,Ao.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(d).loc({x:i[2],y:i[3]}),t=new Ao.Rectangle(g,g,b(r),0==B?null:Ao.dark,0==B?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:i[4],y:i[5]}),n=new Ao.Rectangle(g,g,b(r),0==B?null:Ao.dark,0==B?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:i[6],y:i[7]})),u.mySet=d,u.rect1=t,u.rect2=n,u.index=e,0==B&&(u.expand(10),t.expand(10),n.expand(10)),p?u.on("mousedown",z):u.on("dblclick",y),t.ball=u,(t.other=n).ball=u,n.other=t,p&&(u.expand(),t.expand(),n.expand()),r=[d,u,t,n,i?i[8]:T],F.push(r),N.push(u),V.push(d);var f,m=!1;K.drawShape=function(){var e,t,o,n,r,i,l;s.c(),K.colorCommand||(K.colorCommand=s.f(K._color).command,w&&w.type&&K.specialColor(K.colorCommand,w,K)),(zot(K._borderWidth)||0<K._borderWidth)&&(zot(K._borderColor)&&zot(K._borderWidth)||(zot(K._borderColor)&&(K._borderColor="black"),K.borderColorCommand||(K.borderColorCommand=s.s(K._borderColor).command,K._borderColor&&K._borderColor.type&&K.specialColor(K.borderColorCommand,K._borderColor,K)),K.borderWidthCommand||(K.borderWidthCommand=s.ss(K._borderWidth,j.caps,j.joints,j.miterLimit,j.ignoreScale).command),K._dashed&&(K.borderDashedCommand||(K.borderDashedCommand=s.sd(Array.isArray(K._dashed)?K._dashed:[10,10],K._dashedOffset).command)))),o=(e=F[0][0]).localToLocal(F[0][1].x,F[0][1].y,G),s.mt(o.x,o.y),c.c().s(K.stickColor).ss(K.stickThickness);for(var a=0;a<F.length;a++)i=(a+1)%F.length,e=F[a][0],u=F[a][1],n=F[a][2],r=F[a][3],t=F[i][0],l=F[i][1],i=F[i][2],r=e.localToLocal(r.x,r.y,G),i=t.localToLocal(i.x,i.y,G),l=t.localToLocal(l.x,l.y,G),s.bt(r.x,r.y,i.x,i.y,l.x,l.y),o=e.localToLocal(u.x,u.y,G),n=e.localToLocal(n.x,n.y,G),c.mt(o.x,o.y).lt(n.x,n.y),c.mt(o.x,o.y).lt(r.x,r.y);s.cp(),s.append(K.colorCommand),K._dashed&&s.append(K.borderDashedCommand),K.borderWidthCommand&&s.append(K.borderWidthCommand),K.borderColorCommand&&s.append(K.borderColorCommand)},K.drawShape(),w.type&&(K.color=w),$.on("mousedown",function(e){var t,o,n;if(!K.lockControls&&(K.selectPoints&&(K.keyFocus=!0),f={x:e.target.x,y:e.target.y},e.target.rect1?((n=e.target).startX=n.x,n.startY=n.y,n.rect1.startX=n.rect1.x,n.rect1.startY=n.rect1.y,n.rect2.startX=n.rect2.x,n.rect2.startY=n.rect2.y):((o=e.target).startX=o.x,o.startY=o.y,t=(n=o.ball).index,e=T,zot(F[t][4])||(e=F[t][4]),"straight"==e&&(o=(e=o.other).x-n.x,n=e.y-n.y,e.stickLength=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)))),K.selectPoints)){var r=K.selectionManager.currentSet;if(r&&r.selections&&0<r.selections.length)for(var i=0;i<r.selections.length;i++){var l=K.pointObjects[r.selections[i]];l[1].startX=l[1].x,l[1].startY=l[1].y,l[2].startX=l[2].x,l[2].startY=l[2].y,l[3].startX=l[3].x,l[3].startY=l[3].y}}}),K.selectPoints&&$.tap(function(e){var t,o;e.target.rect1?(t=e.target,K.selectedBalls.toggle(t.parent.num)):((o=e.target).color="white",((t=o.ball).rect1==o?K.selectedRect1s:K.selectedRect2s).toggle(t.parent.num));for(var n=0;n<K.pointObjects.length;n++){var r=K.pointObjects[n];r[1].color=K.selectedBalls.isSelected(n)?Ao.white:Ao.light,r[2].color=K.selectedRect1s.isSelected(n)?Ao.white:b(r[4]),r[3].color=K.selectedRect2s.isSelected(n)?Ao.white:b(r[4])}e.target.stage.update()}),$.on("pressmove",function(e){if(!K.lockControls)if(K.selectPoints){var t=te();if(-1==t.indexOf(e.target))J(e.target),K.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,J(i)}K.drawShape()}}else J(e.target),K.drawShape()}),$.on("pressup",function(e){var t,o;K.lockControls||(t=e.target.x!=f.x||e.target.y!=f.y,o=new createjs.Event("change"),e.target.rect1?(o.controlType="bezierPoint",function(e){if(K.selectPoints){var t=te();if(t&&-1==t.indexOf(e))oe(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)oe(t[o]);else oe(e)}else oe(e)}(e.target)):o.controlType="bezierHandle",t&&K.dispatchEvent(o))}),K.changeControl=function(e,t,o,n,r,i,l,a,s){var c;if(c=zob(K.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e)){for(var u=0;u<F.length;u++)K.changeControl(u,t,o,n,r,i,l,a);return K}e=F[e];return"none"==(e[4]=t)?(zot(l)||(e[1].x=l),zot(a)||(e[1].y=a),e[2].x=e[1].x,e[2].y=e[1].y,e[3].x=e[1].x,e[3].y=e[1].y,e[1].parent.addChild(e[1])):(zot(l)||(e[1].x=l),zot(a)||(e[1].y=a),zot(o)||(e[2].x=o),zot(n)||(e[2].y=n),zot(r)||(e[3].x=r),zot(i)||(e[3].y=i),e[1].parent.addChildAt(e[1],0)),e[2].color=b(t),e[3].color=b(t),s&&(K.update(),K.stage&&K.stage.update()),K},K.transformPoints=function(e,t,o,n,r){return zot(r)&&(r=!0),K.points=Ao.transformPoints(K.points,e,t,o,n),r&&K.approximateBounds(),K},K.traverse=function(t,e,o,n){var r=Ao.copy(K.segmentRatios);r.unshift(0),zot(o)&&(o=e+1);var i,l=e<o,a=l?(i=100*r[e],100*r[o]):(i=50+(100-100*r[e])/2,50+(100-100*r[o])/2);return t.percentComplete=i,t.animate({ease:"linear",props:{path:K},rewind:!l,time:n,events:!0}),t.on("animation",function(e){(t.percentComplete>a||0==t.percentComplete)&&(t.stopAnimate(),e.remove(),(e=new createjs.Event("traversed")).obj=t,K.dispatchEvent(e))}),K},K.reversePoints=function(e){return zot(e)&&(e=!0),(C=Ao.copy(K.points)).reverse(),e&&C.unshift(C.pop()),Ao.loop(C,function(e){var t=e[6];e[6]=e[4],e[4]=t;t=e[7];e[7]=e[5],e[5]=t}),K.points=C,K.update(),K},K.splitPoints=function(e){var t=Ao.copy(K.points);if(!(e<1||e>t.length-1)){var o=Ao.copy(t.slice(0,e+1)),t=Ao.copy(t.slice(e));Ao.trimPointEnds(o),Ao.trimPointEnds(t);e=K.clone();return K.points=o,K.update(),e.points=t,K.parent&&e.addTo(K.parent),e}},K.makeSquiggle=function(e){var t=Ao.copy(K.points);zot(e)&&(e=0),e=(e+1e3*t.length)%t.length;var o=Ao.copy(t.slice(e)),e=Ao.copy(t.slice(0,e+1)),t=o.concat(e);return Ao.trimPointEnds(t),new Ao.Squiggle({points:t,color:K.borderColor,thickness:K.borderWidth,showControls:K.controlsVisible,interactive:K.interactive,onTop:K.onTop,dashed:K.dashed,stickColor:K.stickColor,stickThickness:K.stickThickness})},K.update=function(e){return e?K.points=K.pointsAdjusted:K.drawShape(),K.zimAnimateChanged=!0,K},K.move&&K.interactive&&G.drag({onTop:!1}),q=G.on("mousedown",function(e){Z=e.target.stage,f={x:G.x,y:G.y},K.selectPoints&&(K.keyFocus=!0),K.onTop&&(e=K.parent.numChildren-1,"Keyboard"==K.parent.getChildAt(e).type&&e--,K.parent.setChildIndex(K,e))}),U=G.on("pressmove",function(){$.x=G.x,$.y=G.y,o.x=G.x,o.y=G.y}),Q=G.on("pressup",function(){var e=G.x!=f.x||G.y!=f.y,t=G.localToLocal(K.regX,K.regY,K.parent);K.x=t.x,K.y=t.y,$.x=$.y=o.x=o.y=G.x=G.y=0,e&&((e=new createjs.Event("change")).controlType="move",K.dispatchEvent(e)),Z.update()}),E||re(!0),K.toggleEvent=K.on("mousedown",function(){K.allowToggle&&(R||(K.showControls(),K.dispatchEvent("controlsshow")))}),K.added(function(){Z=K.stage,K.toggleStageEvent&&K.stage.off("stagemousedown",K.toggleStageEvent),K.toggleStageEvent=K.stage.on("stagemousedown",function(e){K.allowToggle&&K.stage&&R&&!K.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY,!1)&&(K.hideControls(),K.dispatchEvent("controlshide"))})}),K.clickEvent=K.on("click",function(){K.ctrlKey&&setTimeout(function(){K.clone(!0).addTo(K.stage).mov(100),K.allowToggle&&(K.hideControls(),K.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",K.dispatchEvent(e),K.stage.update()},50)}),K.hideControls=function(){return K.toggled=!1,$.visible=!1,o.visible=!1,R=!1,K.stage&&K.stage.update(),!K.allowToggle&&K.move&&re(),K},R||K.hideControls(),K.showControls=function(){return K.toggled=!0,$.visible=!0,o.visible=!0,R=!0,$.x=G.x,$.y=G.y,o.x=G.x,o.y=G.y,K.addChildAt(G,0),K.move&&!K.allowToggle&&ne(),K.stage&&K.stage.update(),K},K.toggle=function(e){return!0!==e&&(!1===e||R)?K.hideControls():K.showControls(),K},K.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:K.parent?K.parent.getChildIndex(K):-1,x:K.x,y:K.y,points:K.recordPoints(),color:K.color,borderColor:K.borderColor,borderWidth:K.borderWidth,move:K.move,toggle:K.allowToggle,controlsVisible:R};return e?JSON.stringify(t):t},K.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n,t=e.points;for(n in zot(t)||K.setPoints(t),delete e.points,this.num=t.length,e)K[n]=e[n];return K.parent&&K.parent.setChildIndex(K,o),K}},K.recordPoints=function(e){zot(e)&&(e=!1);var t,o,n=K.points;return e&&(t||(t=K.pane=new Ao.Pane({displayClose:!1,container:K.stage,width:Math.min(500,K.stage.width-20),height:Math.min(500,K.stage.height-20),draggable:!0}),(o=K.textArea=new Ao.TextArea(Math.min(400,K.stage.width-70),Math.min(400,K.stage.height-70))).centerReg(t)),t.show(),o.text=JSON.stringify(n)),n},!(K.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=F[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8],t[2].color=b(t[4]),t[3].color=b(t[4]));return K.update(),K})!==L&&Ao.styleTransforms(K,D),K.clone=function(e,t){var o=[],n=!1;Ao.loop(K.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(n=!0),o.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])});e=K.cloneProps(new Ao.Blob(t?K.colorCommand:e||!Ao.isPick(H[0])?K.color:H[0],t?K.borderColorCommand:e||!Ao.isPick(H[1])?K.borderColor:H[1],K.borderWidth,K.recordPoints(),x,k,T,A,$.visible,P,B,K.allowToggle,K.move,I,S,K.stickColor,K.stickThickness,W,M,K.editPoints,O,j,L,K.group,_));return n&&(Ao.loop(e.pointControls,function(e,t){e.scaleX=o[t][0],e.scaleY=o[t][1],e.regX=o[t][2],e.regY=o[t][3],e.rotation=o[t][4]}),e.update()),K.linearGradientParams&&e.linearGradient.apply(e,K.linearGradientParams),K.radialGradientParams&&e.radialGradient.apply(e,K.radialGradientParams),e},K.shapeMousedownEvent=K.shape.on("mousedown",function(e){Z=e.target.stage,K.editPoints&&(K.controlsVisible?(K.pressX=e.stageX/Ao.scaX,K.pressY=e.stageY/Ao.scaY):(K.pressX=null,K.pressY=null))}),K.addPointFactor=10,K.addMinDistance=15,K.shapePressupEvent=K.shape.on("pressup",function(e){var o,t,n,r,i,l;K.editPoints&&K.pressX&&Math.abs(K.pressX-e.stageX/Ao.scaX)<ee&&Math.abs(K.pressY-e.stageY/Ao.scaY)<ee&&(K.selectPoints&&(K.lastPoints=Ao.copy(K.points)),l=K.points,o=K.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),t=Ao.closestPointAlongCurve(o,K.segmentPoints),"anywhere"==K.editPoints?(l.splice(t+1,0,[o.x,o.y,0,0,0,0,0,0]),K.points=l,K.changeControl({index:t+1,type:"mirror",update:!0})):(i=K.pointsAdjusted,e=K.getSegmentPoint(i[t],i[(t+1)%i.length]),i=Ao.distanceAlongCurve(e),e=Math.round(i/K.addPointFactor),i=K.interpolate(e,t,!1,l),n=1e4,Ao.loop(i,function(e,t){0==t||(e=Ao.dist(e,o))<n&&(n=e,r=t)}),n<K.addMinDistance&&(i=(l=K.segmentRatios)[t],l=0<t?l[t-1]:0,K.addPoint(100*(l+r/(e+1)*(i-l))))),K.lastSelectedIndex=t+1,K.lastSelected=K.controls.getChildAt(K.lastSelectedIndex),K.stage.update())}),K.controlsClickEvent=K.controls.on("click",function(e){K.lastSelected=e.target.parent,K.lastSelectedIndex=K.controls.getChildIndex(e.target.parent),K.editPoints&&K.selectionManager.shiftKey&&v(e)}),K.controls.hold(v),R||K.hideControls(),K.dispatchEvent("update")}function z(e){m?(e.preventDefault(),y(e)):(m=!0,setTimeout(function(){m=!1},300))}function y(e){var t,o;K.lockControlType||(t=e.target,o=F[t.index][4]||T,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=K.types[(K.types.indexOf(o)+(K.shiftKey?-1:1)+K.types.length)%K.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),F[t.index][4]=o,t.rect1.color=b(o),t.rect2.color=b(o),K.drawShape(),(o=new createjs.Event("change")).controlType="bezierSwitch",K.dispatchEvent(o),t.stage.update())}function b(e){var t={mirror:Ao.purple,free:Ao.yellow,none:Ao.blue};return t[e]||Ao.pink}function v(e){var t;"Circle"==e.target.type&&(t=K.lastSelectedIndex=K.controls.getChildIndex(e.target.parent),K.controls.numChildren<=2||(e=K.points,K.selectPoints&&(K.lastPoints=Ao.copy(e)),e.splice(t,1),K.points=e,K.stage.update(),K.lastSelected=K.lastSelectedIndex=null))}}function te(){var e=[],t=K.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=K.pointObjects[t.selections[o]];t==K.selectedBalls?e.push(n[1]):t==K.selectedRect1s?e.push(n[2]):t==K.selectedRect2s&&e.push(n[3])}return e}function oe(e){var t,o,n;K.selectPoints&&"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,e=t.rect2,n.x-=t.x,n.y-=t.y,e.x-=t.x,e.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function ne(){"always"!=K.move&&(u||(u=!0,G.drag({onTop:!1}),q=G.on("mousedown",q),U=G.on("pressmove",U),Q=G.on("pressup",Q)))}function re(e){"always"!=K.move&&(e||u)&&(u=!1,G.noDrag(),G.off("mousedown",q),G.off("pressmove",U),G.off("pressup",Q))}"string"==typeof(C=d(C))&&(t=new Ao.SVGContainer,(C=t.processPath(C))[0][0]==C[C.length-1][0]&&C[0][1]==C[C.length-1][1]&&(C[0][4]=C[C.length-1][4],C[0][5]=C[C.length-1][5],C.pop())),c&&"number"!=typeof C&&Ao.loop(C,function(e){"none"==(e[8]=c)&&(e[4]=e[5]=e[6]=e[7]=0)}),h(),K.selectionManager.on("keydown",function(e){if(K.selectPoints&&K.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=te();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=K.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=K.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=K.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=K.selectionManager.shiftKey?10:1),J(n)}K.drawShape(),K.dispatchEvent("update"),K.stage&&K.stage.update()}}}),K.selectionManager.on("keyup",function(e){if(K.selectPoints&&K.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=te();if(0<t.length)for(var o=0;o<t.length;o++)oe(t[o])}}),K.selectionManager.on("undo",function(){var e;K.selectPoints&&K.keyFocus&&K.lastPoints&&(e=Ao.copy(K.lastPoints),K.lastPoints=Ao.copy(K.points),K.points=e,K.stage&&K.stage.update())}),J=function(e){var t,o,n,r;K.lockControls||(e.rect1?(t=(o=e).x-o.startX,n=o.y-o.startY,o.rect1.x=o.rect1.startX+t,o.rect1.y=o.rect1.startY+n,o.rect2.x=o.rect2.startX+t,o.rect2.y=o.rect2.startY+n):(t=(r=e).other,n=(o=r.ball).index,e=T,zot(F[n][4])||(e=F[n][4]),"straight"!=e&&"mirror"!=e||(n=r.x-o.x,r=r.y-o.y,"mirror"==e?(t.x=o.x-n,t.y=o.y-r):(r=Math.atan2(r,n),n=-t.stickLength*Math.cos(r+Math.PI),r=-t.stickLength*Math.sin(r+Math.PI),t.x=o.x-n,t.y=o.y-r))))},Object.defineProperty(K,"move",{get:function(){return E},set:function(e){E!=e&&((E=e)?ne:re)()}}),Object.defineProperty(K,"interactive",{get:function(){return O},set:function(e){R=O=e,K.allowToggle=O,K.editPoints=O,K.lockControls=!O,K.selectPoints=O,K.move=O;e=K.points;K.points=e}}),Object.defineProperty(K,"allowToggle",{get:function(){return n},set:function(e){n!=e&&((n=e)?K.move&&ne():!R&&K.move&&re())}}),Object.defineProperty(K,"controlsVisible",{get:function(){return R},set:function(e){(R=e)?K.showControls():K.hideControls()}});var g=P;function p(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function f(e,t,o,n,r,i,l,a){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==K.type&&(n=99.99),n=(n+1e5)%100,Ao.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d=K.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,g=Ao.pointAlongCurve(d,h,null,a),o=[g.x,g.y,0,0];i||(l?K.interpolatedPoints.push({x:g.x,y:g.y,r:n/100}):("none"!=r&&(a=p(d[0],d[1],h),i=p(d[1],d[2],h),l=p(d[2],d[3],h),d=p(a,i,h),h=p(i,l,h),o[4]=d.x-g.x,o[5]=d.y-g.y,o[6]=h.x-g.x,o[7]=h.y-g.y,a=K.localToLocal(a.x,a.y,t[s]),e[s][6]=a.x,e[s][7]=a.y,t=K.localToLocal(l.x,l.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=t.x,e[(s+1)%e.length][5]=t.y),r&&(o[8]=r),e.splice(s+1,0,o)))}Object.defineProperty(K,"lockControls",{get:function(){return g},set:function(e){(g=e)?(K.controls.mouseChildren=!1,K.controls.mouseEnabled=!1):(K.controls.mouseChildren=!0,K.controls.mouseEnabled=!0)}}),K.lockControls=g,null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==K},set:function(){Ao.KEYFOCUS=K}}),K.selectPoints&&!Ao.KEYFOCUS&&function(){K.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(K,"points",{get:function(){for(var e,t,o=[],n=0;n<F.length;n++)t=F[n],e=[Ao.decimals(t[0].x),Ao.decimals(t[0].y),Ao.decimals(t[1].x),Ao.decimals(t[1].y),Ao.decimals(t[2].x),Ao.decimals(t[2].y),Ao.decimals(t[3].x),Ao.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=K.x,o=K.y,n=K.visible,r=[],i=!1;Ao.loop(K.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(i=!0),r.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])}),K.dispose(!0),C=d(e),K.shape&&(K.shape.graphics.clear(),K.sticks.graphics.clear(),K.controls.noDrag(),K.removeAllChildren(),delete K.shape,delete K.sticks,delete K.controls),K.visible=!1,h(),K.lockControls=g,K.x=t,K.y=o,K.visible=n,i&&(Ao.loop(K.pointControls,function(e,t){e.scaleX=r[t][0],e.scaleY=r[t][1],e.regX=r[t][2],e.regY=r[t][3],e.rotation=r[t][4]}),K.update())}}),Object.defineProperty(K,"pointsAdjusted",{get:function(){var o,n,r=[],i=K.pointObjects;return Ao.loop(i.length,function(e){var t;n=i[e],o=F[e],n=0==n[0].rotation&&0==n[0].scaleX&&0==n[0].scaleY?[Ao.decimals(o[0].x),Ao.decimals(o[0].y),Ao.decimals(o[1].x),Ao.decimals(o[1].y),Ao.decimals(o[2].x),Ao.decimals(o[2].y),Ao.decimals(o[3].x),Ao.decimals(o[3].y)]:(t=n[0].localToLocal(n[2].x,n[2].y,n[0].parent),e=n[0].localToLocal(n[3].x,n[3].y,n[0].parent),[Ao.decimals(o[0].x),Ao.decimals(o[0].y),Ao.decimals(o[1].x),Ao.decimals(o[1].y),Ao.decimals(t.x-o[0].x),Ao.decimals(t.y-o[0].y),Ao.decimals(e.x-o[0].x),Ao.decimals(e.y-o[0].y)]),o[4]&&"mirror"!==o[4]&&n.push(o[4]),r.push(n)}),r},set:function(){zon&&zogy("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(K,"pointObjects",{get:function(){return F},set:function(){zon&&zogy("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(K,"pointControls",{get:function(){return V},set:function(){zon&&zogy("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(K,"pointCircles",{get:function(){return N},set:function(){zon&&zogy("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(K,"segmentPoints",{get:function(){var o=K.pointsAdjusted,n=[];return Ao.loop(o.length,function(e,t){e=K.getSegmentPoint(o[e],o[e<t-1?e+1:0]);n.push(e)}),n},set:function(){zon&&zogy("Blob() - segmentPoints is read only")}}),Object.defineProperty(K,"segmentRatios",{get:function(){var t=[],o=0;Ao.loop(K.segmentPoints,function(e){e=Ao.distanceAlongCurve(e);t.push(e),o+=e});var n=[],r=0;return Ao.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(){zon&&zogy("Blob() - segmentRatios is read only")}}),K.approximateBounds=function(e,t){zot(e)&&(e=80),e/=K.num;var o=K.interpolate(e,null,!0,null,!0),e=Ao.boundsAroundPoints(o);if(K.setBounds(e.x,e.y,e.width,e.height),t){if(!K.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),K;K.hitPathPoints?K.hitPathPoints.removeAllChildren():K.hitPathPoints=(new Ao.Container).addTo(),K.hitPathPoints.top();for(var n=0;n<o.length;n++){var r=o[n],r=K.localToGlobal(r.x,r.y);new Ao.Circle(3).loc(r.x,r.y,K.hitPathPoints)}}return K},K.getPointAngle=function(e){var t,o=K.pointObjects[e][0],n=K.pointObjects[e][2],e=K.pointObjects[e][3],e=o==K.stage?(t=new Ao.Point(n.x,n.y),new Ao.Point(e.x,e.y)):(t=o.localToGlobal(n.x,n.y),o.localToGlobal(e.x,e.y));return Ao.angle(t.x,t.y,e.x,e.y)},K.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},e={x:t[0]+t[4],y:t[1]+t[5]},t={x:t[0],y:t[1]};return 0==$.x&&0==$.y||(o.x+=$.x,n.x+=$.x,e.x+=$.x,t.x+=$.x,o.y+=$.y,n.y+=$.y,e.y+=$.y,t.y+=$.y),[o,n,e,t]}},K.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=K.pointsAdjusted;if(2==K.num)return[[K.getSegmentPoint(t[0],t[1]),K.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[K.getSegmentPoint(t[K.num-1],t[0]),K.getSegmentPoint(t[0],t[1]),K.getSegmentPoint(t[1],t[2])],[K.num-1,0,1]];if(e>=K.num-1)return[[K.getSegmentPoint(t[K.num-2],t[K.num-1]),K.getSegmentPoint(t[K.num-1],t[0]),K.getSegmentPoint(t[0],t[1])],[K.num-2,K.num-1,0]];var o=e+2>=K.num?0:e+2;return[[K.getSegmentPoint(t[e-1],t[e]),K.getSegmentPoint(t[e],t[e+1]),K.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},K.getCurvePoint=function(o,e,t,n){zot(e)&&(e=K.segmentRatios),zot(t)&&(t=K.segmentPoints),zot(n)&&(n=!1);var r=e,i=t,e=Ao.loop(r,function(e,t){if(o<=e)return t}),t=0<e?r[e-1]:0,r=0<e?r[e]-r[e-1]:r[e],r=(o-t)/r,r=Ao.pointAlongCurve(i[e],r,n,!0);if(!zot(r)){n=K.localToGlobal(r.x,r.y);return n.angle=r.angle,n.z=e,zot(n)?void 0:n}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=K.points,n=K.segmentRatios;return f(o,K.pointControls,n,e,t=t||c),K.points=o,K.num=o.length,K},this.addPoints=function(r,i,l,a,s,c,u){zot(c)&&(c=Ao.copy(K.points));var d,e=Ao.copy(K.segmentRatios),h=0;return s&&(K.interpolatedPoints=[]),a&&(d=e.length*r),Ao.loop(e,function(t,o){s&&f(c,K.pointControls,K.segmentRatios,100*h,i,!zot(l)&&o!=l,s,u);var e=a?Math.round(d*(t-h)):r,n=1/(e+1);Ao.loop(e,function(e){e=h+(t-h)*n*(e+1);f(c,K.pointControls,K.segmentRatios,100*e,i,!zot(l)&&o!=l,s,u),!s&&0<r&&(K.points=c)}),h=t}),s&&"Squiggle"==K.type&&f(c,K.pointControls,K.segmentRatios,100,i,null,s,u),K.stage&&K.stage.update(),K.num=c.length,K},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),K.addPoints(e,"none",t,o,!0,n,r),K.interpolatedPoints},a&&K.approximateBounds(),this.dispose=function(e,t,o){if(K.shape){if(Ao.gD(K),Z&&K.toggleStageEvent&&Z.off("stagemousedown",K.toggleStageEvent),K.controls.noDrag(),K.controls.removeAllEventListeners(),K.selectPoints&&K.selectionManager&&K.selectionManager.dispose(),K.selectedBalls=null,K.selectedRect1s=null,K.selectedRect2s=null,K.selectionManager=null,K.off("mousedown",K.toggleEvent),K.off("click",K.clickEvent),e){K.shape.dispose(),K.shape=null;for(var n=0;n<K.points.length;n++)K.pointObjects[n][0].removeAllEventListeners(),K.pointObjects[n][1].removeAllEventListeners(),K.pointObjects[n][2].removeAllEventListeners(),K.pointObjects[n][3].removeAllEventListeners();K.controls.removeFrom(K),K.sticks.dispose(),N=F=null}else K.removeAllEventListeners(),N=F=null,o||this.zimCustomShape_dispose(!0);return!0}}},Ao.extend(Ao.Blob,Ao.CustomShape,["clone","dispose"],"zimCustomShape",!1),Ao.Flare=function(P,a,B,E,e,I,S,t,W,M,o,n,r,i,l,s,c,u,O,j,L,_,D,Y,X,R,H,F,N,V,d,h,g){if(p=zob(Ao.Flare,arguments,"color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",this))return p;z_d("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=h;var p=!1===d?{}:Ao.getStyle(this.type,this.group,g),G=this;zot(a)&&(a=null!=p.borderColor?p.borderColor:null),zot(B)&&(B=null!=p.borderWidth?p.borderWidth:null),a<0||B<0?a=B=null:null!=a&&null==B&&(B=1),zot(P)&&(P=null!=p.color?p.color:0<B?"rgba(0,0,0,0)":"black"),(zot(B)||0<B)&&(zot(a)&&zot(B)||zot(a)&&(a="black")),zot(E)&&(E=null!=p.crossAngle?p.crossAngle:0);var f,m,z=E;function y(d,h,g,p,f,e,m,o){G.removeAllChildren();var n,r,i=G.shape=(new Ao.Shape).addTo(G);G.colorCommand=i.c().f(P).command,P&&P.type&&G.specialColor(G.colorCommand,P,G),(zot(B)||0<B)&&(zot(a)&&zot(B)||(zot(a)&&(a="black"),G.borderColorCommand=i.s(a).command,a&&a.type&&G.specialColor(G.borderColorCommand,a,G),G.borderWidthCommand=i.ss(B,j.caps,j.joints,j.miterLimit,j.ignoreScale).command,O&&(G.borderDashedCommand=i.sd([10,10],5).command))),i.mt(0,0),0<_&&(n=G.spineShape=(new Ao.Shape).addTo(G),G.spineColorCommand=n.c().f(L).command,L&&L.type&&G.specialColor(G.spineColorCommand,L,G),(zot(_)||0<_)&&(zot(D)&&zot(_)||(zot(D)&&(D="black"),G.spineBorderColorCommand=n.s(D).command,D&&D.type&&G.specialColor(G.spineBorderColorCommand,D,G),G.spineBorderWidthCommand=n.ss(_,X.caps,X.joints,X.miterLimit,X.ignoreScale).command,Y&&(G.spineBorderDashedCommand=n.sd([10,10],5).command)))),zot(R)||(r=G.closeShape=(new Ao.Shape).addTo(G),G.closeColorCommand=r.c().f(R).command,R&&R.type&&G.specialColor(G.closeColorCommand,R,G),(zot(H)||0<H)&&(zot(F)&&zot(H)||(zot(F)&&(F="black"),G.closeBorderColorCommand=r.s(F).command,F&&F.type&&G.specialColor(G.closeBorderColorCommand,F,G),G.closeBorderWidthCommand=r.ss(H,V.caps,V.joints,V.miterLimit,V.ignoreScale).command,N&&(G.closeBorderDashedCommand=r.sd([10,10],5).command))),i.mt(0,0));var z,y,s=W,c=M,b=E,v=b-180,w=I,C=S,t=Math.max(d.length,h.length,g.length,p.length,f.length),x=v,u=[],k=[],T=[];G.points=[];var l=G.pinPoints=[];function A(e,t,o,n,r){var i=r-90,l=180-n-(90-i),r=Math.tan(i*Ao.RAD)*o,r=(e-t-r)/Math.sin(l*Ao.RAD)*Math.sin(n*Ao.RAD)+Math.sqrt(Math.pow(o,2)+Math.pow(r,2));return{x:r*Math.sin(i*Ao.RAD),y:r*Math.cos(i*Ao.RAD),t:r}}Ao.loop(t,function(e){var t=function(e){var t=h[e],o=d[e],n=g[e],r=p[e],i=f[e];m&&(u=m[e]);zot(t)&&(t=x,G.angles[e]=t);zot(o)&&(o=200,G.lengths[e]=o);zot(n)&&(n=0,G.anglesA[e]=n);zot(r)&&(r=0,G.anglesB[e]=r);zot(i)&&(i=0,G.anglesEnd[e]=i);m&&zot(u)&&(u=P,G.crossColors[e]=u);var l=180-(i+=90),a=Math.cos((x-t)*Ao.RAD),s=Math.sin((x-t)*Ao.RAD),c=new Ao.Point(0,0),e=new Ao.Point(o,0);{var u;u=zot(z)?new Ao.Point(Math.cos(b*Ao.RAD)*w,Math.sin(b*Ao.RAD)*w):new Ao.Point(z.x*a-z.y*s,z.x*s+z.y*a)}n=A(o,u.x,u.y,n,l),l=new Ao.Point(o-n.x,-n.y);a=zot(y)?new Ao.Point(Math.cos(v*Ao.RAD)*w,Math.sin(v*Ao.RAD)*C):new Ao.Point(y.x*a-y.y*s,y.x*s+y.y*a);r=A(o,a.x,a.y,r,i),i=new Ao.Point(o-r.x,r.y);return z=new Ao.Point(l.x-o,l.y),y=new Ao.Point(i.x-o,i.y),{a:x=t,A:u,B:l,C:i,D:a,E:e,F:c,tA:n.t,tB:r.t}}(e),o=Math.cos(t.a*Ao.RAD),n=Math.sin(t.a*Ao.RAD),r=new Ao.Point(s+t.A.x*o-t.A.y*n,c+t.A.x*n+t.A.y*o),i=new Ao.Point(s+t.B.x*o-t.B.y*n,c+t.B.x*n+t.B.y*o),l=new Ao.Point(s+t.C.x*o-t.C.y*n,c+t.C.x*n+t.C.y*o),a=new Ao.Point(s+t.D.x*o-t.D.y*n,c+t.D.x*n+t.D.y*o);u.push(r,i),k.unshift(l,a),T.push([r,i,l,a]);a=new Ao.Point(s+t.F.x*o-t.F.y*n,c+t.F.x*n+t.F.y*o),o=new Ao.Point(s+t.E.x*o-t.E.y*n,c+t.E.x*n+t.E.y*o);0==e&&G.pinPoints.push(a),G.pinPoints.push(o),s=o.x,c=o.y,w=t.tA,C=t.tB}),G.points=u.concat(k),e?(Ao.loop(T,function(e,t){i.mt(e[0].x,e[0].y),zot(m)||zot(m[t])||i.f(m[t]).mt(e[0].x,e[0].y),i.lt(e[1].x,e[1].y).lt(e[2].x,e[2].y).lt(e[3].x,e[3].y).cp()}),o&&i.mt(T[T.length-1][1].x,T[T.length-1][1].y).lt(T[T.length-1][2].x,T[T.length-1][2].y).lt(T[0][3].x,T[0][3].y).lt(T[0][0].x,T[0][0].y).cp()):(Ao.loop(u,function(e,t){0==t?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&(i.lt(u[0].x,u[0].y),i.cp()),Ao.loop(k,function(e,t){0==t&&o?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&i.lt(k[0].x,k[0].y),i.cp()),n&&(Ao.loop(l,function(e,t){0==t?n.mt(e.x,e.y):n.lt(e.x,e.y)}),o&&n.lt(l[0].x,l[0].y).cp()),zot(R)||(Ao.loop(k,function(e,t){0==t?r.mt(e.x,e.y):r.lt(e.x,e.y)}),o&&r.lt(k[0].x,k[0].y).cp())}E-=90,zot(e)&&(e=null!=p.thickness?p.thickness:null),zot(I)&&(I=null!=p.thicknessA?p.thicknessA:null),zot(S)&&(S=null!=p.thicknessB?p.thicknessB:null),zot(e)?zot(S)&&!zot(I)?S=I:zot(I)&&!zot(S)?I=S:S=I=10:zot(S)&&!zot(I)?S=e-I:zot(I)&&!zot(S)?I=e-S:S=I=e/2,G.thickness=I+S,zot(s)&&(s=null==p.cross||p.cross),zot(c)&&(c=null!=p.crossColors?p.crossColors:null),zot(c)||Array.isArray(c)||(c=[c]),zot(u)&&(u=null!=p.close&&p.close),zot(W)&&(W=null!=p.startX?p.startX:0),zot(M)&&(M=null!=p.startY?p.startY:0),zot(o)&&(o=null!=p.lengths?p.lengths:[200]),Array.isArray(o)||(o=[o]),zot(n)&&(n=null!=p.angles?p.angles:[0]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=p.anglesA?p.anglesA:[10]),Array.isArray(r)||(r=[r]),zot(i)&&(i=null!=p.anglesB?p.anglesB:Ao.copy(r)),Array.isArray(i)||(i=[i]),zot(l)&&(l=null!=p.anglesEnd?p.anglesEnd:[0]),Array.isArray(l)||(l=[l]),zot(j)&&(j=null!=p.strokeObj?p.strokeObj:{miterLimit:2}),zot(D)&&(D=null!=p.spineBorderColor?p.spineBorderColor:null),zot(_)&&(_=null!=p.spineBorderWidth?p.spineBorderWidth:null),D<0||_<0?D=_=null:null!=D&&null==_&&(_=1),zot(L)&&(L=null!=p.spineColor?p.spineColor:0<_?"rgba(0,0,0,0)":"black"),zot(Y)&&(Y=null!=p.spineDashed?p.spineDashed:null),zot(X)&&(X=null!=p.spineStrokeObj?p.spineStrokeObj:{miterLimit:2}),(zot(_)||0<_)&&(zot(D)&&zot(_)||zot(D)&&(D=a||"black")),zot(F)&&(F=null!=p.closeBorderColor?p.closeBorderColor:null),zot(H)&&(H=null!=p.closeBorderWidth?p.closeBorderWidth:null),F<0||H<0?F=H=null:null!=F&&null==H&&(H=1),zot(R)&&(R=null!=p.closeColor?p.closeColor:0<H?"rgba(0,0,0,0)":null),zot(N)&&(N=null!=p.closeDashed?p.closeDashed:null),zot(V)&&(V=null!=p.closeStrokeObj?p.closeStrokeObj:{miterLimit:2}),(zot(H)||0<H)&&(zot(F)&&zot(H)||zot(F)&&(F=a||"black")),this.thicknessA=I,this.thicknessB=S,this.cross=s,this.close=u,this.lengths=o,this.angles=n,this.anglesA=r,this.anglesB=i,this.anglesEnd=l,this.crossColors=c,y(o,n,r,i,l,s,c,u),P.type&&(G.color=P),this.add=function(e,t,o,n,r,i,l,a){var s;return(s=zob(G.add,arguments,"lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close"))?s:(zot(i)||(G.cross=i),zot(a)||(G.close=a),zot(e)||(Array.isArray(e)||(e=[e]),zot(G.lengths)?G.lengths=e:G.lengths=G.lengths.concat(e)),zot(t)||(Array.isArray(t)||(t=[t]),zot(G.angles)?G.angles=t:G.angles=G.angles.concat(t)),zot(o)||(Array.isArray(o)||(o=[o]),zot(G.anglesA)?G.anglesA=o:G.anglesA=G.anglesA.concat(o)),zot(n)||(Array.isArray(n)||(n=[n]),zot(G.anglesB)?G.anglesB=n:G.anglesB=G.anglesB.concat(n)),zot(r)||(Array.isArray(r)||(r=[r]),zot(G.anglesEnd)?G.anglesEnd=r:G.anglesEnd=G.anglesEnd.concat(r)),zot(l)||(zot(G.crossColors)?zon&&zogy("Flare() - must set crossColor for original object parameters"):(Array.isArray(l)||(l=[l]),zot(G.crossColors)?G.crossColors=l:G.crossColors=G.crossColors.concat(l))),G.remake(),G)},this.remake=function(){return I=this.thicknessA,S=this.thicknessB,y(G.lengths,G.angles,G.anglesA,G.anglesB,G.anglesEnd,G.cross,G.crossColors,G.close),G},Object.defineProperty(G,"color",{get:function(){return P},set:function(e){zot(e)&&(e="black"),(P=e)&&e.type?G.specialColor(G.colorCommand,e,G):G.colorCommand.style=e}}),this.setColorRange=function(e,t){return m=zot(t)?(f=G.color,e):(f=zot(e)?G.color:e,t),G};var b=0;Object.defineProperty(G,"colorRange",{get:function(){return b},set:function(e){b=e,zot(f)||zot(m)||(G.color=Ao.colorRange(f,m,e))}}),Object.defineProperty(G,"borderColor",{get:function(){return a},set:function(e){a=e,G.borderColorCommand?e&&e.type?G.specialColor(G.borderColorCommand,e,G):G.borderColorCommand.style=e:y()}}),Object.defineProperty(G,"borderWidth",{get:function(){return B},set:function(e){0<e||(e=0),B=e,G.borderWidthCommand&&0!=B?(G.borderWidthCommand.width=B,O&&(G.borderDashedCommand.segments=[20,10],G.borderDashedCommand.offset=5)):y()}}),Object.defineProperty(G,"spineColor",{get:function(){return L},set:function(e){zot(e)&&(e="black"),L=e,G.spineColorCommand?e&&e.type?G.specialColor(G.spineColorCommand,e,G):G.spineColorCommand.style=e:y()}}),Object.defineProperty(G,"spineBorderColor",{get:function(){return D},set:function(e){D=e,G.spineBorderColorCommand?e&&e.type?G.specialColor(G.spineBorderColorCommand,e,G):G.spineBorderColorCommand.style=e:y()}}),Object.defineProperty(G,"spineBorderWidth",{get:function(){return _},set:function(e){0<e||(e=0),_=e,G.spineBorderWidthCommand&&0!=_?(G.spineBorderWidthCommand.width=_,Y&&(G.spineBorderDashedCommand.segments=[20,10],G.spineBorderDashedCommand.offset=5)):y()}}),Object.defineProperty(G,"closeColor",{get:function(){return R},set:function(e){zot(e)&&(e="black"),R=e,G.closeColorCommand?e&&e.type?G.specialColor(G.closeColorCommand,e,G):G.closeColorCommand.style=e:y()}}),Object.defineProperty(G,"closeBorderColor",{get:function(){return F},set:function(e){F=e,G.closeBorderColorCommand?e&&e.type?G.specialColor(G.closeBorderColorCommand,e,G):G.closeBorderColorCommand.style=e:y()}}),Object.defineProperty(G,"closeBorderWidth",{get:function(){return H},set:function(e){0<e||(e=0),H=e,G.closeBorderWidthCommand&&0!=H?(G.closeBorderWidthCommand.width=H,N&&(G.closeBorderDashedCommand.segments=[20,10],G.closeBorderDashedCommand.offset=5)):y()}}),Object.defineProperty(G,"pin",{get:function(){return t},set:function(e){0<e||(e=0),e>G.pinPoints.length-1&&(t=0),t=e;e=G.pinPoints[t];e&&(G.regX=e.x,G.regY=e.y)}});h=Ao.boundsAroundPoints(G.points);this.setBounds(h.x,h.y,h.width,h.height),zot(t)||(G.pin=t),(this.mouseChildren=!1)!==d&&Ao.styleTransforms(this,p),this.clone=function(){return G.cloneProps(new Ao.Flare(P,a,B,z,Ao.copy(e),Ao.copy(I),Ao.copy(S),t,W,M,Ao.copy(o),Ao.copy(n),Ao.copy(r),Ao.copy(i),Ao.copy(l),s,Ao.copy(c),u,O,j,L,_,D,Y,X,R,H,F,N,V,d,this.group,g))}},Ao.extend(Ao.Flare,Ao.Container,["clone"],"zimContainer",!1),Ao.MultiFlare=function(n,r,i,l,e,t,o){var a;if(a=zob(Ao.MultiFlare,arguments,"flares, pins, angles, endToEnd, style, group, inherit",this))return a;z_d("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=t;var t=!1===e?{}:Ao.getStyle(this.type,this.group,o),s=this;zot(n)&&(n=null!=t.flares?t.flares:[]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=t.pins?t.pins:null),zot(i)&&(i=null!=t.angles?t.angles:null),zot(l)&&(l=null!=t.endToEnd&&t.endToEnd),s.flares=n,s.pins=r,s.angles=i,s.endToEnd=l,s.mouseChildren=!1,s.add=function(e,t){return zot(e)||(zot(t)&&(t=!0),Array.isArray(e)||(e=[e]),Ao.loop(e,function(e){t?s.flares.push(e.clone()):s.flares.push(e)}),s.remake(),s.stage&&s.stage.update()),s},s.remove=function(e){return zot(e)||(Array.isArray(e)||(e=[e]),Ao.loop(e,function(e){e=s.flares.indexOf(e);0<=e&&s.flares.splice(e,1)}),s.remake(),s.stage&&s.stage.update()),s},s.remake=function(){s.removeAllChildren(),Ao.loop(s.flares,function(e,t){var o;r&&!zot(r[t])&&(e.pin=r[t]),i&&!zot(i[t])&&(e.rotation=i[t]),e.addTo(s),s.flares.push(e),l&&0<t&&(t=(o=n[t-1]).pinPoints[o.pinPoints.length-1],o=o.localToLocal(t.x,t.y,s),t=e.pinPoints[0],t=e.localToLocal(t.x,t.y,s),e.mov(o.x-t.x,o.y-t.y))})},s.remake(),!1!==e&&Ao.styleTransforms(this,t),this.clone=function(){return s.cloneProps(new Ao.MultiFlare(Ao.copy(n,!0),Ao.copy(r),Ao.copy(i),l,e,this.group,o))}},Ao.extend(Ao.MultiFlare,Ao.Container,["clone"],"zimContainer",!1),Ao.FlareBox=function(o,n,e,t,r,i,l,a,s,c,u){var d;if(d=zob(Ao.FlareBox,arguments,"width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",this))return d;z_d("53.8"),this.group=c;c=!1===s?{}:Ao.getStyle("FlareBox",this.group,u);zot(o)&&(o=null!=c.width?c.width:220),zot(n)&&(n=null!=c.height?c.height:80),this.zimContainer_constructor(o,n),this.type="FlareBox";var h=this;if(this.mouseChildren=!1,zot(t)&&(t=null!=c.borderColor?c.borderColor:null),zot(r)&&(r=null!=c.borderWidth?c.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(e)&&(e=null!=c.color?c.color:0<r?"rgba(0,0,0,0)":"black"),(zot(r)||0<r)&&(zot(t)&&zot(r)||zot(t)&&(t="black")),zot(i)&&(i=null!=c.flares?c.flares:null),zot(l)&&(l=null!=c.corners?c.corners:null),zot(a)&&(a=null!=c.pins?c.pins:null),h.backing=new Ao.Rectangle(o,n,e,t,r).addTo(this),!zot(i)){if("MultiFlare"!=i.type){if(!Array.isArray(i)){if("Flare"!=i.type)return;i=[i]}i=new Ao.MultiFlare(i,a)}i.addTo(h),h.multiFlare=i,h.flares=h.multiFlare.flares,i.loop(function(e,t){a&&!zot(a[t])?e.pin=a[t]:zot(e.pin)&&(e.pin=0),l&&!zot(l[t])?e.corner=l[t]:zot(e.corner)&&(e.corner=0),1==e.corner?e.loc(o,0):2==e.corner?e.loc(o,n):3==e.corner?e.loc(0,n):e.loc(0,0),e.rot(90*(e.corner-e.pin))}),!1!==s&&Ao.styleTransforms(this,c),this.clone=function(){return h.cloneProps(new Ao.FlareBox(o,n,e,t,r,Ao.copy(i,!0),Ao.copy(l),Ao.copy(a),s,this.group,u))}}},Ao.extend(Ao.FlareBox,Ao.Container,["clone"],"zimContainer",!1),Ao.Label=function(e,i,t,o,n,r,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O){var j;if(j=zob(Ao.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",this))return j;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=M;var L=!1===W?{}:Ao.getStyle(this.type,this.group,O);zot(e)&&(e=null!=L.text?L.text:"LABEL"),zot(i)&&(i=null!=L.size?L.size:36),zot(t)&&(t=null!=L.font?L.font:"arial"),zot(o)&&(o=null!=L.color?L.color:"black"),zot(c)&&(c=null!=L.bold&&L.bold),zot(u)&&(u=null!=L.italic&&L.italic);var _=function(){return arguments}(e,i,t,o,c,u);e=Ao.Pick.choose(e);var D=!1;""===e&&(e=" ",D=!0),i=Ao.Pick.choose(i),t=Ao.Pick.choose(t),o=Ao.Pick.choose(o),c=Ao.Pick.choose(c),u=Ao.Pick.choose(u),zot(n)&&(n=null!=L.rollColor?L.rollColor:null),!zot(r)&&"ignore"!=r||(r=null!=L.shadowColor&&"ignore"!=r?L.shadowColor:-1),!zot(l)&&"ignore"!=l||(l=null!=L.shadowBlur&&"ignore"!=l?L.shadowBlur:14),zot(a)&&(a=null!=L.align?L.align:"left"),zot(s)&&(s=null!=L.valign?L.valign:"top"),zot(f)&&zot(L.outlineColor)||!zot(m)||(m=null!=L.outlineWidth?L.outlineWidth:Math.round(.2*i)),zot(m)&&zot(L.outlineWidth)||!zot(f)||(f=null!=L.outlineColor?L.outlineColor:"#000000"),zot(m)&&(m=null!=L.outlineWidth?L.outlineWidth:0),!zot(z)&&"ignore"!=z||(z=null!=L.backgroundColor&&"ignore"!=z?L.backgroundColor:null),zot(y)&&(y=null!=L.backgroundBorderColor&&"ignore"!=y?L.backgroundBorderColor:null),zot(b)&&(b=null!=L.backgroundBorderWidth&&"ignore"!=b?L.backgroundBorderWidth:null),!zot(C)&&"ignore"!=C||(C=null!=L.padding&&"ignore"!=C?L.padding:10),zot(x)&&(x=null!=L.paddingHorizontal?L.paddingHorizontal:C),zot(k)&&(k=null!=L.paddingVertical?L.paddingVertical:C),zot(T)&&(T=null!=L.shiftHorizontal?L.shiftHorizontal:0),zot(A)&&(A=null!=L.shiftVertical?L.shiftVertical:0),zot(d)&&(d=null!=L.variant&&L.variant),zot(h)&&(h=null!=L.lineWidth?L.lineWidth:null),zot(g)&&(g=null!=L.lineHeight?L.lineHeight:null),!zot(p)&&"ignore"!=p||(p=null!=L.backing&&"ignore"!=p?L.backing.clone():null),zot(P)&&(P=null!=L.rollPersist&&L.rollPersist),null!=L.labelWidth&&(h=L.labelWidth),zot(B)||(h=B),"middle"==a&&(a="center"),zot(E)&&(E=null!=L.labelHeight?L.labelHeight:null),zot(I)&&(I=null!=L.maxSize?L.maxSize:null),i=I?Math.min(i,I):i,zot(S)&&(S=null!=L.splitWords&&L.splitWords);var Y=WW.zdf&&WW.zdf.retina,X=this;this.mouseChildren=!1,this.paddingVertical=k,this.paddingHorizontal=x,WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Ao.DIR?"start"==a?a="right":"end"==a&&(a="left"):"start"==a?a="left":"end"==a&&(a="right");var R=[];R[0]=u?"italic":"normal",R[1]=d?"small-caps":"normal",R[2]=c?"bold":"normal",R[3]=i+"px",R[4]=t;var H,F=R.join(" ");e=String(e);var N,V,G,q=!1,U=h,Q=E;function Z(e){e=new createjs.Text(e,F,o);return e.lineWidth=U,e.lineHeight=g,e}if(zot(p)&&zot(z)?(M=new createjs.Shape,X.hitArea=M):(U&&(U-=2*x),Q&&(Q-=2*k)),H=Z(e),S&&1.2*i<U)for(var K=H.getMetrics(),J=0;K.width>U&&J<1e3;)J++,Ao.loop(K.lines,function(e,t){var o=Z(e=e.replace(/^[\s\t]+/,"")),o=o.getMeasuredWidth();if(U<o){e=function(e,t){var o=Math.ceil(U/e*t.length),n=t.substr(0,o),r=Z(n),i=r.getMeasuredWidth();if(U<i)for(;U<i;)o--,i=(r=Z(n=t.substr(0,o))).getMeasuredWidth();else if(i<U){for(;i<U;)o++,i=(r=Z(n=t.substr(0,o))).getMeasuredWidth();o--,n=t.substr(0,o)}return{endIndex:o,start:n,end:t.substr(o,t.length)}}(o,e);return K.lines[t]=e.start,K.lines.length>t+1?(e.end.trim(),K.lines[t+1]=e.end+" "+K.lines[t+1]):K.lines.push(e.end),K=(H=Z(K.lines.join(" "))).getMetrics(),!1}});function $(){X.removeChild(X.background),X.background=new Ao.Rectangle(X.getBounds().width+2*x,X.getBounds().height+2*k,z,y,b,v,w,null,null,!1),Ao.center(X.background,X,0),X.setBounds(X.background.x,X.background.y,X.background.width,X.background.height)}function ee(){var e,t,o=H.getBounds(),n=o.y,r=o.height;U&&!Q&&(e=o.x,"right"==a?e=o.x-U+o.width:"center"==a&&(e=-U/2),H.setBounds(e,n,U,r),o=H.getBounds()),"baseline"==s?t=o.y:"top"==s?(H.y=i-i/6,t=0):"center"==s||"middle"==s?(t=-o.height/2,H.y=.3*i):t=-o.height,X.setBounds(o.x,t,L.width?L.width-2*C:o.width,L.height?L.height-2*C:o.height),X.hitArea&&X.hitArea.graphics.c().f("black").r(X.getBounds().x,X.getBounds().y,X.getBounds().width,X.getBounds().height),"center"!=s&&"middle"!=s||(Ao.pos(H,null,0),Ao.mov(H,0,1)),E||(p?q&&te():zot(z)||$()),"baseline"==s||Y||(H.y+=i/32),oe()}function te(){var e=p.boundsToGlobal(),e=X.boundsToGlobal(e,!0);X.setBounds(e.x,e.y,e.width,e.height)}function oe(){Ao.pos(H,"left"==a||"right"==a?p||X.background?x:0:null,"top"==s||"baseline"==s||"bottom"==s?p||X.background?k:0:null,"right"==a,"bottom"==s),H.x+=T,H.y+=A}function ne(){N&&(N.x=H.x,N.y=H.y,X.addChildAt(N,X.background||X.backing?1:0))}(this.label=H).textAlign=a,H.textBaseline="alphabetic",0<m&&((N=this.outlineLabel=H.clone()).color=f,N.outline=m),-1!=r&&0<l&&(H.shadow=new createjs.Shadow(r,3,3,l)),this.addChild(H),ee(),zot(p)||("Pattern"==p.type?(X.backing=new Ao.Container(X.width+2*x,X.height+2*k,null,null,!1).centerReg(null,null,!1),-1!=r&&0<l&&(new Ao.Rectangle(X.width+2*x-2,X.height+k-2,"#666",null,null,v,null,null,null,!1).center(X.backing).shadow=new createjs.Shadow(r,3,3,l)),e=new Ao.Rectangle(X.width+2*x,X.height+2*k,z,null,null,v,null,null,null,!1).addTo(X.backing),p.centerReg(e),p.setMask(e),X.backing.pattern=p):X.backing=p,X.backing.center(X,0),p=X.backing,te(),q=!0),oe(),ne(),Object.defineProperty(X,"text",{get:function(){return" "==H.text&&D?"":H.text},set:function(e){D=!1,""===e&&(e=" ",D=!0),H.text=String(e),H.setBounds(null),X.setBounds(null),ee(),N&&(N.text=String(e)),zot(h)||zot(E)||(le(),N&&ne())}}),Object.defineProperty(X,"size",{get:function(){return i},set:function(e){i=I?Math.min(e,I):e,R[3]=i+"px",this.label.font=R.join(" "),N&&(N.font=R.join(" ")),H.setBounds(null),X.setBounds(null),ee(),ne()}}),Object.defineProperty(X,"bold",{get:function(){return Boolean(this.label.font.match("bold"))},set:function(e){c=e,R[2]=e?"bold":"normal",this.label.font=R.join(" "),N&&(N.font=R.join(" "))}}),Object.defineProperty(X,"italic",{get:function(){return Boolean(this.label.font.match("italic"))},set:function(e){u=e,R[0]=e?"italic":"normal",this.label.font=R.join(" "),N&&(N.font=R.join(" "))}}),Object.defineProperty(X,"variant",{get:function(){return Boolean(this.label.font.match("small-caps"))},set:function(e){d=e,R[1]=e?"small-caps":"normal",this.label.font=R.join(" "),N&&(N.font=R.join(" "))}}),Object.defineProperty(X,"font",{get:function(){return R[4]},set:function(e){zot(e)||(t=e,R[4]=e,this.label.font=R.join(" "),N&&(N.font=R.join(" ")))}}),Object.defineProperty(X,"align",{get:function(){return a},set:function(e){zot(e)||(a=e,this.label.textAlign=a,N&&(N.textAlign=a),ee(),ne())}}),Object.defineProperty(X,"valign",{get:function(){return s},set:function(e){zot(e)||(s=e,ee(),ne())}}),Object.defineProperty(X,"color",{get:function(){return o},set:function(e){n==o&&(n=e),o=e,H.color=o,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"colorOnly",{get:function(){return o},set:function(e){o=e,H.color=o,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update()}}),this.setColorRange=function(e,t){return G=zot(t)?(V=X.color,e):(V=zot(e)?X.color:e,t),X};var re=0;function ie(){X.mouseoverEvent=X.on("mouseover",function(){X.showRollColor&&X.showRollColor()}),X.mouseoutEvent=X.on("mouseout",function(){X.rollPersist||X.showRollColor(!1)}),X.pressupEvent=X.on("pressup",function(){X.rollPersist&&X.showRollColor(!1)})}function le(){X.size=I||200;for(var e=0;g<Q/2&&(X.height>Q||X.width>U)&&(e++,X.size=X.size/2,!(50<e)););for(e=0;X.height<=Q&&X.width<=U&&(e++,X.size=Math.ceil(X.size+1),!(50<e)););X.size=X.size-1,ne(),H.setBounds(null);var t=H.getBounds(),o=t.y,n=t.height;Q&&("bottom"==s?o=o-Q+n:"center"!=s&&"middle"!=s||(o=(o+o-Q+n)/2),n=Q),H.setBounds(t.x,o,t.width,n),X.setBounds(null),t=X.getBounds(),X.setBounds(t.x,t.y,t.width,t.height),p?q&&te():zot(z)||$()}Object.defineProperty(X,"colorRange",{get:function(){return re},set:function(e){re=e,zot(V)||zot(G)||(X.color=Ao.colorRange(V,G,e))}}),Object.defineProperty(X,"backgroundColor",{get:function(){return z},set:function(e){z=e,X.background?X.background.color=e:X.backing?X.backing.color=e:$(),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"outlineColor",{get:function(){return f},set:function(e){f=e,N&&(N.color=f),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"rollColor",{get:function(){return n},set:function(e){!X.mouseoverEvent&&e&&ie(),null==e&&X.mouseoverEvent&&(X.off("mouseover",X.mouseoverEvent),X.off("mouseout",X.mouseoutEvent),X.off("pressup",X.pressupEvent)),n=e}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(e){rt(X,e),H.color=o,X.mouseChildren=!1,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),H.color=e?n:o,X.stage&&X.stage.update(),X},n&&ie(),Object.defineProperty(X,"labelWidth",{get:function(){return h},set:function(e){0<e&&(U=h=e,zot(p)&&zot(z)||U&&(U-=2*x),X.label.lineWidth=U,N&&(N.lineWidth=U),H.setBounds(null),X.setBounds(null),ee(),E&&le(),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update())}}),Object.defineProperty(X,"labelHeight",{get:function(){return E},set:function(e){0<e&&(Q=E=e,zot(p)&&zot(z)||Q&&(Q-=2*k),h&&le(),X.setBounds(null),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!X.stage||X.stage.update())}}),zot(h)||zot(E)||le(),Ao.styleTransforms(this,L),this.clone=function(e){return X.cloneProps(new Ao.Label(e||!Ao.isPick(_[0])?X.text:_[0],e||!Ao.isPick(_[1])?i:_[1],e||!Ao.isPick(_[2])?t:_[2],e||!Ao.isPick(_[3])?o:_[3],n,r,l,a,s,e||!Ao.isPick(_[4])?c:_[4],e||!Ao.isPick(_[5])?u:_[5],d,h,g,zot(p)?null:p.clone(e),f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,this.group,O))}},Ao.extend(Ao.Label,Ao.Container,"clone","zimContainer"),Ao.LabelOnPath=function(o,i,l,a,e,t,n,r,s,c,u,d){var h;if(h=zob(Ao.LabelOnPath,arguments,"label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",this))return h;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=u;u=!1===c?{}:Ao.getStyle(this.type,this.group,d);zot(o)&&(o=null!=u.label?u.label:new Ao.Label("Label on Path")),zot(i)&&(i=null!=u.path?u.path:new Ao.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(l)&&(l=null!=u.percentAngle?u.percentAngle:100),zot(a)&&(a=null!=u.percents?u.percents:null),zot(e)&&(e=null==u.showPath||u.showPath),zot(t)&&(t=null==u.allowToggle||u.allowToggle),zot(n)&&(n=null==u.interactive||u.interactive),zot(r)&&(r=null!=u.onTop&&u.onTop),zot(s)&&(s=null!=u.rtl?u.rtl:"rtl"==WW.DIR||"rtl"==Ao.DIR),s&&i.reversePoints();var g=o.color;i.addTo(this);var p=this;this.path=i,this.allowToggle=t,i.interactive=n,"string"==typeof o&&(o=new Ao.Label(o));var f=i.alpha;e||i.alp(0),i.onTop=r;var m=this.letters=(new Ao.Container).addTo(this);if(!a){a=[];for(var z=0;z<o.text.length;z++)a.push(Ao.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*z))}function y(){for(var e=m.numChildren-1;0<=e;e--)m.getChildAt(e).dispose();for(p.numLetters=o.text.length,e=0;e<p.numLetters;e++){var t=o.clone();t.text=o.text[e],t.centerReg(m).reg(null,t.height),""!=t.text&&" "!=t.text&&t.expand(0),p.allowToggle&&(t.cursor="pointer"),t.on("mousedown",function(){p.allowToggle&&p.toggle()})}p.resize()}this.percents=a,this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<this.numLetters;o++){var n,r=i.getCurvePoint(a[o]/100,e,t,!0);r&&((n=this.globalToLocal(r.x,r.y))&&(m.getChildAt(o).loc(n).rot((180<r.angle?r.angle-360:r.angle)*l/100),s&&(m.getChildAt(o).rotation+=180)))}return this},y(),this.showPath=function(e){return this.toggle(!0),i.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(p,"text",{get:function(){return o.text},set:function(e){o.text=e,a=[];for(var t=0;t<o.text.length;t++)a.push(Ao.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*t));y()}}),Object.defineProperty(this,"color",{get:function(){return g},set:function(e){g=e;for(var t=0;t<p.letters.numChildren;t++)p.letters.getChildAt(t).color=g;p.stage&&p.stage.update()}}),Object.defineProperty(p,"interactive",{get:function(){return n},set:function(e){n=e,i.interactive=e,this.ticker&&Ao.Ticker.remove(this.ticker),n&&(this.ticker=Ao.Ticker.add(function(){p.resize()}))}}),this.interactive&&(this.ticker=Ao.Ticker.add(function(){p.resize()}));var b=p.toggled=e;this.toggle=function(e){if(this.allowToggle)return(b=zot(e)?!b:!!e)?(i.alp(f),this.interactive&&(i.showControls(),m.mouseEnabled=!1,m.mouseChildren=!1,m.cursor="default",this.controlHideEvent&&i.off("controlshide",this.controlHideEvent),this.controlHideEvent=i.on("controlshide",function(){m.mouseEnabled=!0,m.mouseChildren=!0,m.cursor="pointer",f=i.alpha,i.alp(0),b=!1,p.toggled=b,p.stage&&p.stage.update()},null,!0))):(f=i.alpha,i.alp(0),m.mouseEnabled=!0,m.mouseChildren=!0,m.cursor="pointer"),p.toggled=b,p.stage&&p.stage.update(),p},p.toggle(!0),Ao.styleTransforms(this,u),this.clone=function(){return p.cloneProps(new Ao.LabelOnPath(p.label.clone(),p.path.clone(),l,Ao.copy(a),e,t,n,r,s,c,this.group,d))},this.dispose=function(e,t,o){return this.ticker&&Ao.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.LabelOnPath,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.LabelOnArc=function(n,e,t,o,r,i,l,a,s,c,u,d,h,g,p,f,m,z){if(y=zob(Ao.LabelOnArc,arguments,"label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",this))return y;z_d("54.55"),this.group=m;var y=!1===f?{}:Ao.getStyle("LabelOnArc",this.group,z);zot(e)&&(e=null!=y.size?y.size:30),zot(n)&&(n=null!=y.label?y.label:new Ao.Label("Label on Arc",e)),zot(t)&&(t=null!=y.font?y.font:"verdana"),zot(o)&&(o=null!=y.color?y.color:"white"),zot(r)&&(r=null!=y.radius?y.radius:100),zot(i)&&(i=null!=y.flip&&y.flip),zot(l)&&(l=null!=y.spacing?y.spacing:0),zot(a)&&(a=null!=y.letterSpacing?y.letterSpacing:5),zot(s)&&(s=null!=y.angles?y.angles:null);var b=!zot(s),v=Ao.copy(s);zot(c)&&(c=null!=y.showCircle&&y.showCircle),zot(u)&&(u=null!=y.arcColor?y.arcColor:null),zot(d)&&(d=null!=y.arcBorderColor?y.arcBorderColor:null),zot(h)&&(h=null!=y.arcBorderWidth?y.arcBorderWidth:null),zot(g)&&(g=null!=y.radiusSpread&&y.radiusSpread),zot(p)&&(p=null!=y.rtl?y.rtl:"rtl"==WW.DIR||"rtl"==Ao.DIR);m=this.outerRadius=r+l+n.height;this.innerRadius=r+l,this.zimContainer_constructor(-m,-m,2*m,2*m,!1),this.type="LabelOnArc";var w,C,x,k,T,A,P=this;function B(){var e,t;for(P.disposeAllChildren(),i&&(e=n.text.split("").reverse().join(""),n.text=e),w=P.letters=new Ao.Container(P.width,P.height).centerReg(P),P.numLetters=n.text.length,P.letterHeight=n.height,C=P.labels=[],t=0;t<P.numLetters;t++){var o=n.clone();C.push(o),o.text=n.text[t],o.letterHolder=new Ao.Container(o.width,o.height),o.centerReg(o.letterHolder).rot(i?180:0)}if(p&&C.reverse(),k=P.circle=new Ao.Circle(r),c&&k.addTo(P),x=P.arc=(new Ao.Shape).addTo(P),E(),s){for(t=T=0;t<s.length;t++)T+=s[t];T+=s[s.length-1]/2}I()}function E(){A=[T=0];for(var e=0;e<P.numLetters;e++){var t=C[e],o=180*Math.atan((t.width+a)/2/(r+l))/Math.PI*2;A.push(o),T+=o,t.letterHolder.centerReg(w).reg(null,r+l+t.height+(i?.13*t.height:0))}P.circle.radius=r,(u||d||h)&&(0<h&&zot(d)?d="#000000":zot(h)&&!zot(d)&&(h=2),x.graphics.c().f(null).s(d).ss(h).arc(0,0,r,(P.startAngle-90)*Math.PI/180,(P.startAngle-90+T)*Math.PI/180))}function I(){if(!b)for(s=[],t=0;t<A.length-1;t++)s[t]=Math.round((A[t]+A[t+1])/2*100)/100;P.angles=s,P.startAngle=-T/2;for(var e=P.startAngle,t=0;t<w.numChildren;t++)e=w.getChildAt(t).rotation=e+s[t]}"Label"!=n.type&&(n=new Ao.Label(n,e,t,o)),n.text,B(),Object.defineProperty(this,"radius",{get:function(){return r},set:function(e){r=e,E(),b||g||I()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(e){o=e;for(var t=0;t<P.labels.length;t++)P.labels[t].color=o;P.stage&&P.stage.update()}}),Object.defineProperty(P,"text",{get:function(){return n.text},set:function(e){n.text=e,s=v?Ao.copy(v):null,B()}}),Ao.styleTransforms(this,y),this.clone=function(){return P.cloneProps(new Ao.LabelOnArc(n,e,t,o,r,i,l,a,s,c,u,d,h,g,p,f,this.group,z))}},Ao.extend(Ao.LabelOnArc,Ao.Container,"clone","zimContainer",!1),Ao.LabelLetters=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p){if(f=zob(Ao.LabelLetters,arguments,"label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",this))return f;z_d("54.57"),this.group=g;var f=!1===h?{}:Ao.getStyle("LabelLetters",this.group,p);zot(e)&&(e=null!=f.label?f.label:new Ao.Label("Label Letters")),zot(t)&&(t=null!=f.align?f.align:"center"),zot(o)&&(o=null!=f.valign?f.valign:"center"),zot(n)&&(n=null!=f.letterSpacing?f.letterSpacing:5),zot(r)&&(r=null!=f.letterSpacings?f.letterSpacings:null),zot(a)&&(a=null!=f.lineHeight?f.lineHeight:null),zot(i)&&(i=null!=f.lineSpacing?f.lineSpacing:5),zot(l)&&(l=null!=f.lineSpacings?f.lineSpacings:null),zot(d)&&(d=null!=f.rtl&&f.rtl),zot(s)&&(s=null!=f.lineAlign?f.lineAlign:d?"right":"left"),zot(c)&&(c=null!=f.lineValign?f.lineValign:"bottom"),zot(u)&&(u=null!=f.cache&&f.cache),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var m,z,y=this,g=y.letterData=[];function b(o){var n,i=[];d&&(G=-1,n=(o=(o=(o=(o=(o=o.replace(/[\u0591-\u07FF]+/gi,function(e){return e.split("").reverse().join("")})).replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2")).replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2")).replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).split(/-!!-/g),Ao.loop(n,function(e,t){e.match(/[\u0591-\u07FF]/i)&&(n[t]=e.split(" ").reverse().join(" "))}),o=n.join("")),o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/\n|\r/g,"<br>")).replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>")).replace(/<\/strong>/gi,"</b>")).replace(/<em>|<em \/>|<em\/>/gi,"<i>")).replace(/<\/em>/gi,"</i>")).replace(/\\n|\\r/g,"<br>")).replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>")).replace(/<b/gi,"<b")).replace(/<i/gi,"<i")).replace(/<u/gi,"<u")).replace(/<br/gi,"<br")).replace(/<a/gi,"<a")).replace(/<font/gi,"<font");var r,l=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g];Ao.loop(["b","a","i","u","font"],function(e,t){r=o.replace(l[2*t],""),a("font"==e?r.split("<font "):"a"==e?r.split("<a "):r.split("<"+e+">"),e,0),a((r=o.replace(l[2*t+1],"")).split("</"+e+">"),e,1)});var e=(r=(r=o.replace(/<br>/gi,"@^#")).replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"")).split("@^#");function a(e,o,n){var t,r;1<e.length&&("font"!=o&&"a"!=o||0!=n?(e.pop(),t=0,Ao.loop(e,function(e){t+=e.length;e=i[t];e||(i[t]=[]),(e=i[t])[n]?e[n].push(o):e[n]=[o]})):(r=e[0].length,Ao.loop(e,function(e,t){0!=t&&((t=i[r])||(i[r]=[]),t=i[r],e=e.split(">"),t[n]?t[n].push(o+" "+e[0]):t[n]=[o+" "+e[0]],r+=e[1].length)})))}return m=e.join("\n"),r=e.join(""),a(e,"br",0),{text:r,data:i,original:m}}"Label"!=e.type?(g=(z=b(e)).data,e=new Ao.Label(z.text)):(g=(z=b(e.text)).data,e.text=z.text),y.text=z.original,y._color=e.color,WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Ao.DIR?"start"==s?s="right":"end"==s&&(s="left"):"start"==s?s="left":"end"==s&&(s="right"),y.numLetters=e.text.length;var v=!zot(r);if(r&&!Array.isArray(r)&&(r=null),r)for(K=0;K<y.numLetters;K++)zot(r[K])&&(r[K]=n);else for(r=[],K=0;K<y.numLetters;K++)r.push(n);if(y.letterSpacings=r,l&&!Array.isArray(l)&&(l=null),l)for(K=0;K<y.numLetters-1;K++)zot(l[K])&&(l[K]=i);else for(l=[],K=0;K<y.numLetters-1;K++)l.push(i);y.lineSpacings=l,y.labels=[],y.lines=[[]];var w=[],C=[],x=[0],k=0,T=0,A=0,P=0,B=0,E=g,I=!1,S=!1,W=!1,M=!1,O=!1,j=!1,L=!1,_=!1,D=!1,Y=!1,X=!1,R=!1;for(y.rolls=[[]],K=0;K<y.numLetters;K++){var H,M=!1;E[K]&&(E[K][1]&&(0<=E[K][1].indexOf("b")&&(I=!1),0<=E[K][1].indexOf("i")&&(S=!1),0<=E[K][1].indexOf("u")&&(W=!1),Ao.loop(E[K][1],function(e){return e.match(/^font/i)?(X=O=!1,R&&y.rolls.push([]),void(L=_=j=R=!1)):void(e.match(/^a/i)&&(Y=D=!1))})),E[K][0]&&(0<=E[K][0].indexOf("b")&&(I=!0),0<=E[K][0].indexOf("i")&&(S=!0),0<=E[K][0].indexOf("u")&&(W=!0),M=0,Ao.loop(E[K][0],function(e){"br"==e&&M++}),Ao.loop(E[K][0],function(e){var t,o;return e.match(/^font/i)?((t=e.match(/ color\s?=\s?(\S*)/i))&&(O=t[1],0<=(o=Ao.colors.indexOf(O))&&(O=Ao.colorsHex[o]),O=O.replace(/'/g,"")),(t=e.match(/size\s?=\s?(\S*)/i))&&(j=t[1]),(t=e.match(/backgroundColor\s?=\s?(\S*)/i))&&(X=t[1],0<=(o=Ao.colors.indexOf(X))&&(X=Ao.colorsHex[o]),X=X.replace(/'/g,"")),(t=e.match(/rollBackgroundColor\s?=\s?(\S*)/i))&&(R=t[1],0<=(o=Ao.colors.indexOf(R))&&(R=Ao.colorsHex[o]),R=R.replace(/'/g,"")),(t=e.match(/group\s?=\s?(\S*)/i))&&(L=t[1]),void((t=e.match(/family\s?=\s?(.*)/i))&&(_=(_=t[1]).split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]))):void(e.match(/^a/i)&&((t=e.match(/href\s?=\s?(\S*)/i))&&(D=t[1]),(t=e.match(/target\s?=\s?(\S*)/i))&&(Y=t[1])))}))),L?H=new Ao.Label({text:e.text[K],group:L}):(H=e.clone()).text=e.text[K],y.labels.push(H),I&&(H.bold=!0),S&&(H.italic=!0),O&&(H.color=O),X&&(H.backgroundColor=X);var F=v||zot(H.backgroundColor)?r[K]:-.5;R&&(H.rollIndex=y.rolls.length-1,H.zrbc=R,H.zobc=H.backgroundColor,y.rolls[H.rollIndex].push(H),H.expand(0),H.on("mouseover",N),H.on("mouseout",V)),D&&(H.expand(F,0),H.zurl=D,H.ztar=Y,H.cur(),H.on("click",function(e){var t=e.currentTarget;V(e),t.ztar||(t.ztar="_self"),zgo(t.zurl,t.ztar)})),j&&(H.size=j),_&&(H.font=_),M&&(k+=(zot(a)?A:a)+l[P],x.push(k),C.push(zot(a)?A:a),w.push(T),B=Math.max(B,T)),M&&(1<M&&Ao.loop(M-1,function(){y.lines.push([]),k+=(zot(a)?A:a)+l[P],x.push(k),C.push(zot(a)?A:a),w.push(0),P++}),T=A=0,y.lines.push([]),P++),T+=H.width+F,A=Math.max(A,H.height),K==y.numLetters-1&&(w.push(T),C.push(A),B=Math.max(B,T)),y.lines[P].push(H),W&&(H.underline=new Ao.Line(H.width+F+1,1,H.color).center(H,this).mov(0,H.height/2))}function N(e){var t=e.currentTarget,e=y.rolls[t.rollIndex];Ao.loop(e,function(e){e.backgroundColor=t.zrbc}),t.stage&&t.stage.update()}function V(e){var t=e.currentTarget,e=y.rolls[t.rollIndex];Ao.loop(e,function(e){e.backgroundColor=t.zobc}),t.stage&&t.stage.update()}for(var G=0,q=0;q<y.lines.length;q++)for(var U=y.lines[q],T=w[q],A=C[q],k=x[q],Q="left"==s?0:"right"==s?B-T:(B-T)/2,Z=k,K=0;K<U.length;K++){G++,u&&H.cache(),(H=U[K]).regX="left"==t?0:"right"==t?H.width:H.width/2,H.regY="top"==o?0:"bottom"==o?H.height:H.height/2;var J=Z+("top"==o?0:"bottom"==o?H.height:H.height/2);"center"==c||"middle"==c?J+=(C[q]-H.height)/2:"bottom"==c&&(J+=C[q]-H.height),F=v||zot(H.backgroundColor)?r[G-1]:-.5,Q="left"==t?(H.loc(Q,J,this),H.x+H.width+F):"right"==t?(H.loc(Q+H.width,J,this),H.x+F):(H.loc(Q+H.width/2,J,this),H.x+H.width/2+F)}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(e){this._color=e;for(var t=0;t<y.numChildren;t++)y.getChildAt(t).color=this._color;y.stage&&y.stage.update()}}),this.dispose=function(){Ao.gD(this),Ao.loop(y.labels,function(e){e.removeFrom(),e.dispose()}),y.removeFrom()},Ao.styleTransforms(this,f),this.clone=function(){return y.cloneProps(new Ao.LabelLetters(e,t,o,n,r,i,l,a,s,c,u,d,h,this.group,p))}},Ao.extend(Ao.LabelLetters,Ao.Container,"clone","zimContainer",!1),Ao.Emoji=function(t,e,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m){var z;if(z=zob(Ao.Emoji,arguments,"code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, style, group, inherit",this))return z;z_d("54.58"),this.group=f;f=!1===p?{}:Ao.getStyle("Emoji",this.group,m);zot(t)&&(t=null!=f.code?f.code:""),zot(e)&&(e=null!=f.size?f.size:30),zot(o)&&(o=null!=f.monochrome&&f.monochrome),zot(n)&&(n=null!=f.italic&&f.italic),!zot(r)&&"ignore"!=r||(r=null!=f.backgroundColor&&"ignore"!=r?f.backgroundColor:null),zot(i)&&(i=null!=f.backgroundBorderColor&&"ignore"!=i?f.backgroundBorderColor:null),zot(l)&&(l=null!=f.backgroundBorderWidth&&"ignore"!=l?f.backgroundBorderWidth:null),!zot(c)&&"ignore"!=c||(c=null!=f.padding&&"ignore"!=c?f.padding:10),zot(u)&&(u=null!=f.paddingHorizontal?f.paddingHorizontal:c),zot(d)&&(d=null!=f.paddingVertical?f.paddingVertical:c),zot(h)&&(h=null!=f.shiftHorizontal?f.shiftHorizontal:0),zot(g)&&(g=null!=f.shiftVertical?f.shiftVertical:0);var y=function(){return arguments}(t,e);t=Ao.Pick.choose(t),e=Ao.Pick.choose(e),"U+"==t.substring(0,2)&&(t=Ao.unicodeToUTF(t)),this.zimLabel_constructor(t,e,null,null,null,null,null,null,null,null,n,null,null,null,s,null,null,r,null,null,a,null,c,u,d,h,g),this.type="Emoji",this.code=t,this.size=e;var b=this,e=this.getBounds();this.bounds=this.setBounds(e.x+3,e.y-5+1,e.width-6,e.height+5),o&&(this.saturation=-100);var v=o;Object.defineProperty(b,"monochrome",{get:function(){return v},set:function(e){e!=v&&(v=e)&&(this.saturation=e?-100:0)}}),this.cache=function(e,t,o,n){return zot(e)?(t=this.getBounds(),this.zimLabel_cache(t.x-20,t.y-20,t.width+40,t.height+40)):this.zimLabel_cache(e,t,o,n),this},Ao.styleTransforms(this,f),this.clone=function(e){return b.cloneProps(new Ao.Emoji(e||!Ao.isPick(y[0])?t:y[0],e||!Ao.isPick(y[1])?b.size:y[1],o,n,r,i,l,a,s,c,u,d,h,g,p,b.group,m))}},Ao.extend(Ao.Emoji,Ao.Label,["clone","cache"],"zimLabel",!1),Ao.Button=function(n,r,t,i,l,o,a,s,c,u,e,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he,ge){if(fe=zob(Ao.Button,arguments,"width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentHorizontal, indentVertical, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",this))return fe;z_d("55"),this.group=he;var pe=!1===de?{}:Ao.getStyle("Button",he,ge);zot(n)&&(n=null!=pe.width?pe.width:200),zot(r)&&(r=null!=pe.height?pe.height:60),zot(WW.M)&&(WW.M=Ao.mobile());var fe=a,he=s;zot(a)&&(a=null!=pe.color?pe.color:"white"),zot(s)&&(s=null!=pe.rollColor?pe.rollColor:"white"),zot(S)&&(S=null!=pe.autoPadding?pe.autoPadding:20),zot(W)&&(W=null!=pe.autoPaddingH?pe.autoPaddingH:S),zot(M)&&(M=null!=pe.autoPaddingV?pe.autoPaddingV:S),zot(T)&&(T=null!=pe.align?pe.align:"center"),zot(A)&&(A=null!=pe.valign?pe.valign:"center"),zot(t)&&(t=zot(m)?null!=pe.label?pe.label:"PRESS":""),"string"==typeof t||"number"==typeof t?t=new Ao.Label({text:t,size:null!=pe.size?pe.size:36,font:null!=pe.font?pe.font:"arial",color:null!=pe.color&&null==fe?pe.color:a,rollColor:pe.rollColor&&null==he!=null?pe.rollColor:s,align:T,valign:A,rollPersist:null!=pe.rollPersist&&pe.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftVertical:null!=pe.shiftVertical?pe.shiftVertical:0,shiftHorizontal:null!=pe.shiftHorizontal?pe.shiftHorizontal:0,style:!1,group:this.group}):(zot(fe)||(t.color=fe),a=t.color,!zot(t.rollColor)&&zot(he)||(t.rollColor=s),s=t.rollColor),zot(c)&&(c=null!=pe.downColor?pe.downColor:s),"auto"==n&&(n=t.width+2*W),"auto"==r&&(r=t.height+2*M),this.zimContainer_constructor(n,r,null,null,!1),this.type="Button",zot(i)&&(i=null!=pe.backgroundColor?pe.backgroundColor:Ao.purple),zot(l)&&(l=null!=pe.rollBackgroundColor?pe.rollBackgroundColor:Ao.pink),zot(o)&&(o=null!=pe.downBackgroundColor?pe.downBackgroundColor:l);var me=function(){return arguments}(i,l,o,a,s,c);i=zik(i),l=zik(l),o=zik(o),a=zik(a),s=zik(s),c=zik(c);var ze=u,ye=e;zot(u)&&(u=null!=pe.borderColor?pe.borderColor:null),zot(e)&&(e=null!=pe.borderWidth?pe.borderWidth:null),u<0||e<0?u=e=null:null!=u&&null==e&&(e=1),zot(d)&&(d=null!=pe.rollBorderColor?pe.rollBorderColor:u),zot(h)&&(h=null!=pe.downBorderColor?pe.downBorderColor:d),zot(b)&&(b=null!=pe.corner?pe.corner:10),zot(w)&&(w=null!=pe.shadowColor?pe.shadowColor:"rgba(0,0,0,.3)"),zot(C)&&(C=null!=pe.shadowBlur?pe.shadowBlur:14),zot(I)&&(I=null!=pe.hitPadding?pe.hitPadding:0),zot(P)&&(P=null!=pe.indent?pe.indent:10),zot(B)&&(B=null!=pe.indentHorizontal?pe.indentHorizontal:P),zot(E)&&(E=null!=pe.indentVertical?pe.indentVertical:P),zot(x)&&(x=null!=pe.gradient?pe.gradient:0),zot(k)&&(k=null!=pe.gloss?pe.gloss:0);var be=(!zot(j)||!zot(H)||!zot(F)||!zot(N)||!zot(V)||!zot(G)||!zot(q))&&zot(Q)&&zot(ne)&&zot(re);be&&zot(U)&&(U=WW.M?"mousedown":"click"),zot(O)&&(O=null!=pe.rollPersist&&pe.rollPersist),this.rollPersist=O,zot(v)&&(v=null!=pe.dashed&&pe.dashed),zot(j)||"Label"!=j.type||zon&&zogy("Button() - do not pass Label to toggle parameter - just pass a String"),zot(L)&&(L=null!=pe.toggleBackgroundColor?pe.toggleBackgroundColor:i),zot(_)&&(_=null!=pe.rollToggleBackgroundColor?pe.rollToggleBackgroundColor:l),zot(D)&&(D=null!=pe.downToggleBackgroundColor?pe.downToggleBackgroundColor:_),zot(Y)&&(Y=null!=pe.toggleColor?pe.toggleColor:t.color),zot(X)&&(X=null!=pe.rollToggleColor?pe.rollToggleColor:t.rollColor),zot(R)&&(R=null!=pe.downToggleColor?pe.downToggleColor:t.rollToggleColor),zot(K)&&(K=null!=pe.waitBackgroundColor?pe.waitBackgroundColor:i),zot(J)&&(J=null!=pe.rollWaitBackgroundColor?pe.rollWaitBackgroundColor:l),zot($)&&($=null!=pe.downWaitBackgroundColor?pe.downWaitBackgroundColor:l),zot(ee)&&(ee=null!=pe.waitColor?pe.waitColor:t.color),zot(te)&&(te=null!=pe.rollWaitColor?pe.rollWaitColor:t.rollColor),zot(oe)&&(oe=null!=pe.downWaitColor?pe.downWaitColor:te);var ve=this;this.mouseChildren=!1,this.cursor="pointer",ve.focus=!1,ve.rolled=!1;var we=Po(Z);zot(g)&&(g=null!=pe.backing?pe.backing.clone():null),zot(g)?ve.backing=new Ao.Rectangle(n,r,i,null,null,b,v,null,null,!1).centerReg(null,null,!1):ve.backing=g,ve.rollBacking=zot(p)?null!=pe.rollBacking?pe.rollBacking.clone():null:p,ve.downBacking=zot(f)?null!=pe.downBacking?pe.downBacking.clone():null:f,ve.waitBacking=zot(ne)?null!=pe.waitBacking?pe.waitBacking.clone():null:ne,ve.rollWaitBacking=zot(re)?null!=pe.rollWaitBacking?pe.rollWaitBacking.clone():null:re,ve.downWaitBacking=zot(ie)?null!=pe.downWaitBacking?pe.downWaitBacking.clone():null:ie,ve.toggleBacking=zot(H)?null!=pe.toggleBacking?pe.toggleBacking.clone():null:H,ve.rollToggleBacking=zot(F)?null!=pe.rollToggleBacking?pe.rollToggleBacking.clone():null:F,ve.downToggleBacking=zot(N)?null!=pe.downToggleBacking?pe.downToggleBacking.clone():null:N;for(var Ce,xe,ke=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],Te=0;Te<ke.length;Te++)Ce=ke[Te],(xe=ve[Ce])&&("Pattern"==xe.type?xe=Ae(Ce,xe):-1!=w&&0<C&&(xe.shadow=new createjs.Shadow(w,3,3,C)),xe.x=n/2,xe.y=r/2);function Ae(e,t){ve[e]=new Ao.Container(n,r,null,null,!1).centerReg(null,null,!1),-1!=w&&0<C&&(new Ao.Rectangle(n-2,r-2,"#666",null,null,b,null,null,null,!1).center(ve[e]).shadow=new createjs.Shadow(w,3,3,C));var o=ve[e].mask=new Ao.Rectangle(n,r,0<=e.indexOf("roll")?l:i,null,null,b,null,null,null,!1).addTo(ve[e]);return t.centerReg(o),t.setMask(o.shape),ve[e].pattern=t,ve[e]}ve.addChild(ve.backing),e&&(ve.border=new Ao.Rectangle(n,r,"rgba(0,0,0,0)",u,e,b,v,null,null,!1),ve.addChild(ve.border)),ve.icon=zot(m)?null!=pe.icon?pe.icon.clone():null:m,ve.rollIcon=zot(z)?null!=pe.rollIcon?pe.rollIcon.clone():null:z,ve.downIcon=zot(y)?null!=pe.downIcon?pe.downIcon.clone():null:y,ve.waitIcon=zot(le)?null!=pe.waitIcon?pe.waitIcon.clone():null:le,ve.rollWaitIcon=zot(ae)?null!=pe.rollWaitIcon?pe.rollWaitIcon.clone():null:ae,ve.downWaitIcon=zot(se)?null!=pe.downWaitIcon?pe.downWaitIcon.clone():null:se,ve.toggleIcon=zot(V)?null!=pe.toggleIcon?pe.toggleIcon.clone():null:V,ve.rollToggleIcon=zot(G)?null!=pe.rollToggleIcon?pe.rollToggleIcon.clone():null:G,ve.downToggleIcon=zot(q)?null!=pe.downToggleIcon?pe.downToggleIcon.clone():null:q;var Pe,Be,Ee,Ie=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(Te=0;Te<Ie.length;Te++){var Se=Ie[Te],Se=ve[Se];Se&&(Se.x=n/2,Se.y=r/2)}function We(){(Ee=new createjs.Shape).graphics.f("#000").r(-I,-I,n+2*I,r+2*I),ve.hitArea=Be=Ee}ve.icon&&ve.addChild(ve.icon),Array.isArray(b)||(b=[b,b,b,b]),0<x&&((Pe=new createjs.Shape).graphics.lf(["rgba(255,255,255,"+x+")","rgba(0,0,0,"+x+")"],[0,1],0,0,0,r-e),Pe.graphics.rc(e/2,e/2,n-e,r-e,b[0],b[1],b[2],b[3]),this.addChild(Pe)),0<k&&((Pe=new createjs.Shape).graphics.f("rgba(255,255,255,"+k+")"),Pe.graphics.rc(e/2,e/2,n-e,(r-e)/2,b[0],b[1],0,0),Pe.graphics.f("rgba(0,0,0,"+k+")"),Pe.graphics.rc(e/2,r/2,n-e,(r-e)/2,0,0,b[2],b[3]),this.addChild(Pe)),0<I&&We(),this.addChild(t),t.center(this),t.y+=1,this.label=t,Ao.pos(t,"left"==T||"right"==T?B:null,"top"==A||"bottom"==A?E:null,"right"==T,"bottom"==A);var Me,Oe,je,Le=t.color;function _e(){ve.toggled?(zot(j)||(ve.label.text=!0===j?Me:j),zot(Y)||(ve.label.colorOnly=Le=Y),zot(X)||(ve.label.rollColor=X),ve.rolled?(ve.rollToggleBacking?Qe("rollToggleBacking"):ve.toggleBacking&&Qe("toggleBacking"),ve.rollToggleIcon?Qe("rollToggleIcon"):ve.toggleIcon&&Qe("toggleIcon"),zot(g)&&zot(ve.rollToggleBacking)&&(ve.backing.color=_)):(ve.toggleBacking&&Qe("toggleBacking"),ve.toggleIcon&&Qe("toggleIcon"),zot(g)&&(ve.backing.color=L))):(ve.label.colorOnly=Le=Oe,ve.label.rollColor=je,ve.rolled&&ve.label.showRollColor(!0),ve.label.text=Me,De()),ve.stage&&ve.stage.update()}function De(){ve.pressed?(zot(g)&&ve.backing&&!ve.downBacking&&(ve.backing.color=o),ve.downBacking?Qe("downBacking"):ve.rollBacking?Qe("rollBacking"):ve.backing&&Qe("backing"),ve.downIcon?Qe("downIcon"):ve.rollIcon?Qe("rollIcon"):ve.icon?Qe("icon"):Qe("icon",null)):ve.rolled?(zot(g)&&ve.backing&&!ve.rollBacking&&(ve.backing.color=l),ve.rollBacking?Qe("rollBacking"):ve.backing&&Qe("backing"),ve.rollIcon?Qe("rollIcon"):ve.icon?Qe("icon"):Qe("icon",null)):(zot(g)&&ve.backing&&(ve.backing.color=i),ve.backing&&Qe("backing"),ve.icon,Qe("icon"))}this.toggled=!1,be&&(Me=t.text,Oe=t.color,je=t.rollColor,this.on(U,function(){ve.toggled=!ve.toggled,_e()}));var Ye,Xe,Re,He,Fe=!(this.toggle=function(e){return be?(zot(e)?ve.toggled=!ve.toggled:ve.toggled=e,_e()):zon&&zogy("Button() - can't toggle with wait parameters provided"),ve}),Ne=ve.waiting=!1,Ve=ve.label.color,Ge=ve.label.rollColor,qe=this.on("mousedown",function(){Fe=!0,Ue()});function Ue(){zot(Q)&&zot(ne)&&zot(re)||ve.waiting||(Ne=!0,zot(ue)&&(ue=!0),ce&&(He=ve.stage.on("stagemousedown",function(e){ve.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY)||ve.clearWait()},null,!0)),setTimeout(function(){ve.waiting=!0},50),Xe=t.text,zot(ee)||(ve.label.colorOnly=Le=ee),zot(te)||(ve.label.rollColor=te),Re=ve.enabled,!ue&&ve.enabled&&(ve.enabled=!1),zot(Q)||(ve.label.text=Q),ve.rolled?(zot(g)&&!ve.rollWaitBacking&&(ve.backing.color=J),ve.rollWaitBacking?Qe("rollWaitBacking"):ve.waitBacking&&Qe("waitBacking"),ve.rollWaitIcon?Qe("rollWaitIcon"):ve.waitIcon&&Qe("waitIcon")):(zot(g)&&!ve.waitBacking&&(ve.backing.color=K),ve.waitBacking&&Qe("waitBacking"),ve.waitIcon&&Qe("waitIcon")),zot(Z)&&(Z="s"==we?5:5e3),Ye&&Ye.clear(),Ye=Ao.timeout(Z,function(){ve.enabled||(ve.enabled=Re),ve.clearWait(),ve.dispatchEvent("waited")}),ve.stage&&ve.stage.update())}function Qe(e,t){var o;if(0<=e.indexOf("con")){for(o=0;o<Ie.length;o++){var n=Ie[o],n=ve[n];ve.removeChild(n)}ve[e]&&ve.addChildAt(ve[e],1)}else if(ve[e]||t){for(o=0;o<ke.length;o++){var r=ke[o],r=ve[r];ve.removeChild(r)}ve[e]&&ve.addChildAt(ve[e],0)}}this.wait=Ue,this.clearWait=function(){return Ye&&(He&&ve.stage.off("stagemousedown",He),Ye.clear(),ve.label.text=Xe,De(),ve.label.colorOnly=Le=Ve,ve.label.rollColor=Ge,setTimeout(function(){ve.waiting=!1},55),Ne=!1,ve.stage&&ve.stage.update()),ve};var Ze=!(this.removeWait=function(){return ve.clearWait(),Q=null,ve.waitBacking=null,ve.rollWaitBacking=null,ve.off("mousedown",qe),ve});function Ke(){ve.rolled=!0,Ze=!0,Ne?(ve.pressed&&ve.downWaitBacking?Qe("downWaitBacking"):ve.pressed&&ve.downBacking?Qe("downBacking"):ve.rollWaitBacking?Qe("rollWaitBacking"):ve.waitBacking?Qe("waitBacking"):ve.rollBacking?Qe("rollBacking"):Qe("backing"),ve.pressed&&ve.downWaitIcon?Qe("downWaitIcon"):ve.rollWaitIcon?Qe("rollWaitIcon"):ve.waitIcon?Qe("waitIcon"):ve.rollIcon?Qe("rollIcon"):Qe("icon",!0)):be&&ve.toggled?(ve.pressed&&ve.downToggleBacking?Qe("downToggleBacking"):ve.pressed&&ve.downBacking?Qe("downBacking"):ve.rollToggleBacking?Qe("rollToggleBacking"):ve.toggleBacking?Qe("toggleBacking"):ve.rollBacking?Qe("rollBacking"):Qe("backing"),ve.pressed&&ve.downToggleIcon?Qe("downToggleIcon"):ve.rollToggleIcon?Qe("rollToggleIcon"):ve.toggleIcon?Qe("toggleIcon"):ve.rollIcon?Qe("rollIcon"):Qe("icon",!0)):(ve.pressed&&ve.downBacking?Qe("downBacking"):ve.rollBacking?Qe("rollBacking"):Qe("backing"),ve.pressed&&ve.downIcon?Qe("downIcon"):ve.rollIcon?Qe("rollIcon"):Qe("icon",!0)),ve.pressed?zot(g)&&ve.backing?ve.backing.color=o:g&&!zot(g.mask)&&ve.backing&&(ve.backing.mask.color=o):zot(g)&&ve.backing?ve.backing.color=l:g&&!zot(g.mask)&&ve.backing&&(ve.backing.mask.color=l),ve.border&&(ve.border.borderColor=ve.pressed?h:d),ve.pressed?ve.label.colorOnly=c:ve.label.showRollColor?ve.label.showRollColor():ve.label.colorOnly=Le,ve.stage&&ve.stage.update()}this.on("mouseover",function(e){ve.stage&&ve.stage.frame.leftMouseDown&&!Je||Ke()});var Je=!1;function $e(){Ze=!1,ve.rollPersist&&Fe||et()}function et(){ve.rolled=!1,Ne||ve.waiting?(zot(g)&&ve.backing&&zot(ve.waitBacking)&&(ve.backing.color=zot(K)?i:K),ve.waitBacking?Qe("waitBacking"):ve.backing&&Qe("backing"),ve.waitIcon?Qe("waitIcon"):ve.icon?Qe("icon"):Qe("icon",null)):ve.toggled&&be?(zot(g)&&ve.backing&&zot(ve.toggleBacking)&&(ve.backing.color=L),ve.toggleBacking?Qe("toggleBacking"):ve.backing&&Qe("backing"),ve.toggleIcon?Qe("toggleIcon"):ve.icon?Qe("icon"):Qe("icon",null)):(zot(g)&&ve.backing?ve.backing.color=i:g&&!zot(g.mask)&&ve.backing&&(ve.backing.mask.color=i),ve.backing&&Qe("backing"),ve.icon?Qe("icon"):Qe("icon",null)),ve.border&&(ve.border.borderColor=u),ve.label.colorOnly=Le,ve.label.showRollColor&&ve.label.showRollColor(!1),ve.stage&&ve.stage.update()}function tt(e,t){return zot(e)||(ve.contains(ve[e])&&(ve.removeChild(ve[e]),t&&ve.addChildAt(t,0<=e.indexOf("con")?ve.numChildren-1:0),ve.stage&&ve.stage.update()),t?(zot(g)&&"backing"==e&&(g=t),"Pattern"==t.type&&(t=Ae(e,t)),ve[e]=t,ve[e].x=n/2,ve[e].y=r/2):ve[e]=null,De()),ve}this.on("mousedown",function(){ve.pressed=Je=!0,Ke(),ve.rolled}),this.on("pressup",function(){ve.pressed=Je=Fe=!1,Ze?Ke():ve.rollPersist&&et(),WW.M&&$e()}),this.on("pressmove",function(){var e=ve.stage?ve.stage.frame:WW.zdf,e=ve.hitTestPoint(e.mouseX,e.mouseY);Je&&!e?($e(),Je=!1):!Je&&e&&(Ke(),Je=!0)}),this.on("mouseout",$e),ve.removeRoll=et,ve.rollBacking&&ve.rollBacking.removeFrom(),Object.defineProperty(ve,"text",{get:function(){return" "==t.text?"":t.text},set:function(e){t.text=e,Me=Me&&e,t.center(this),t.y+=1,Ao.pos(t,"left"==T||"right"==T?B:null,"top"==A||"bottom"==A?E:null,"right"==T,"bottom"==A)}}),Object.defineProperty(ve,"color",{get:function(){return a},set:function(e){a=e,Oe=Oe&&a,ve.label&&!zot(ve.label.color)&&(ve.label.color=Le=a),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"rollColor",{get:function(){return s},set:function(e){s=e,je=je&&s,ve.label&&(ve.label.rollColor=s)}}),Object.defineProperty(ve,"downColor",{get:function(){return c},set:function(e){c=e,originalDownColor=originalDownColor&&c,ve.label&&(ve.label.downColor=c)}}),Object.defineProperty(ve,"backgroundColor",{get:function(){return i},set:function(e){i=e,ve.backing.color?ve.backing.color=i:ve.backing.mask&&(ve.backing.mask.color=i),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"rollBackgroundColor",{get:function(){return l},set:function(e){l=e,ve.rollBacking&&ve.rollBacking.color?ve.rollBacking.color=l:ve.rollBacking&&ve.rollBacking.mask&&(ve.rollBacking.mask.color=l)}}),Object.defineProperty(ve,"downBackgroundColor",{get:function(){return o},set:function(e){o=e,ve.downBacking&&ve.downBacking.color?ve.downBacking.color=o:ve.downBacking&&ve.downBacking.mask&&(ve.downBacking.mask.color=o)}}),Object.defineProperty(ve,"borderColor",{get:function(){return u},set:function(e){u=e,ve.rolled||(ve.backing&&ve.backing.borderColor&&(ve.backing.borderColor=e),ve.border&&(ve.border.borderColor=e))}}),Object.defineProperty(ve,"rollBorderColor",{get:function(){return d},set:function(e){d=e,ve.rolled&&(ve.backing&&ve.backing.borderColor&&(ve.backing.borderColor=e),ve.border&&(ve.border.borderColor=e))}}),Object.defineProperty(ve,"hitPadding",{get:function(){return I},set:function(e){0==(I=e)?Be&&(this.hitArea=null):We()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ve,"enabled",{get:function(){return ve._enabled},set:function(e){ve._enabled&&(ve.startMouseChildren=ve.mouseChildren),e?(rt(ve,e),ve.mouseChildren=ve.startMouseChildren):(et(),rt(ve,e));e=t.color;t.color=Le=e,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!ve.stage||ve.stage.update()}}),this.setBacking=function(e,t){tt(e,t)},!(this.setIcon=function(e,t){tt(e,t)})!==de&&Ao.styleTransforms(this,pe),this.clone=function(e){e=new Ao.Button(n,r,t.clone(),e||!Ao.isPick(me[0])?i:me[0],e||!Ao.isPick(me[1])?l:me[1],e||!Ao.isPick(me[2])?o:me[2],e||!Ao.isPick(me[3])?a:me[3],e||!Ao.isPick(me[4])?s:me[4],e||!Ao.isPick(me[5])?c:me[5],ze,ye,d,h,zot(g)?null:ve.backing.clone(),zot(p)?null:ve.rollBacking.clone(),zot(f)?null:ve.downBacking.clone(),zot(m)?null:m.clone(),zot(z)?null:z.clone(),zot(y)?null:y.clone(),b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,zot(H)?null:H.clone(),zot(F)?null:F.clone(),zot(N)?null:N.clone(),zot(V)?null:V.clone(),zot(G)?null:G.clone(),zot(q)?null:q.clone(),U,Q,Z,K,J,$,ee,te,oe,zot(ne)?null:ne.clone(),zot(re)?null:re.clone(),zot(ie)?null:ie.clone(),zot(le)?null:le.clone(),zot(ae)?null:ae.clone(),zot(se)?null:se.clone(),ce,ue,de,this.group,ge);return ve.cloneProps(e)},this.doDispose=function(e,t,o){return ve.icon&&ve.icon.dispose(),ve.rollIcon&&ve.rollIcon.dispose(),ve.downIcon&&ve.downIcon.dispose(),ve.waitIcon&&ve.waitIcon.dispose(),ve.rollWaitIcon&&ve.rollWaitIcon.dispose(),ve.downWaitIcon&&ve.downWaitIcon.dispose(),ve.toggleIcon&&ve.toggleIcon.dispose(),ve.rollToggleIcon&&ve.rollToggleIcon.dispose(),ve.downToggleIcon&&ve.downToggleIcon.dispose(),ve.icon=ve.rollIcon=ve.downIcon=ve.waitIcon=ve.rollWaitIcon=ve.downWaitIcon=ve.toggleIcon=ve.rollToggleIcon=ve.downToggleIcon=null,o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.Button,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},Ao.CheckBox=function(t,o,n,r,i,l,a,s,c,u,d,h,g,p,e,f){if(v=zob(Ao.CheckBox,arguments,"size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",this))return v;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=e;var m=!1===p?{}:Ao.getStyle(this.type,this.group,f);zot(t)&&(t=null!=m.size?m.size:60),zot(o)&&(o=null!=m.label?m.label:null),zot(n)&&(n=null!=m.startChecked&&m.startChecked),zot(r)&&(r=null!=m.color?m.color:"#111"),zot(i)&&(i=null!=m.backgroundColor?m.backgroundColor:"rgba(255,255,255,.8)"),zot(l)&&(l=null!=m.borderColor?m.borderColor:"#111"),zot(a)&&(a=null!=m.borderWidth?m.borderWidth:t/10),l<0||a<0?l=a=null:null!=l&&null==a&&(a=t/10),zot(s)&&(s=null!=m.corner?m.corner:0),zot(c)&&(c=null!=m.margin?m.margin:t/5),"box"!=u&&"square"!=u&&"x"!=u&&(u=null!=m.indicatorType?m.indicatorType:"check"),zot(d)&&(d=null!=m.indicatorColor?m.indicatorColor:0<a?l:"black"),this.setBounds(-c,-c,t+2*c,t+2*c),zot(h)&&(h=null!=m.tap&&m.tap),zot(g)&&(g=null!=m.rtl?m.rtl:"rtl"==WW.DIR);var z=this;this.cursor="pointer";var y=function(){return arguments}(o,n);o=Ao.Pick.choose(o);var b=n=Ao.Pick.choose(n);"string"!=typeof o&&"number"!=typeof o||(o=new Ao.Label({text:o,size:5*t/6,color:r,valign:"center",align:g?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:p,group:this.group}));var v=this.box=new Ao.Rectangle(t,t,i,null,null,s),e=this.box2=new Ao.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",l,a,s);e.x=t/7,e.y=t/7,this.addChild(v,e);v=t;o&&(o.center(z),this.label=o,g?(o.x=-c,this.setBounds(-o.width-2*c,-c,t+3*c+o.getBounds().width,Math.max(t+2*c,o.getBounds().height)),v=t+o.width+c,this.regX=t):(o.x=z.getBounds().width,this.setBounds(-c,-c,t+4*c+o.getBounds().width,Math.max(t+2*c,o.getBounds().height)),v=o.x+o.width));e=new Ao.Shape({style:!1});e.graphics.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,v+2*c,this.getBounds().height),this.hitArea=e;var w=new Ao.Shape({style:!1}),C=w.graphics;"check"==u?C.f(d).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==u||"square"==u?C.f(d).dr(-35,-35,70,70):C.f(d).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");w.setBounds(-47.5,-47.5,95,95);var x=t/161;function k(){b=!b,z.setChecked(b),z.dispatchEvent("change")}w.scaleX=w.scaleY=x,w.alpha=.9,w.x=t/2,w.y=t/2,b&&this.addChild(w),h?this.tap(k):this.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",k),Object.defineProperty(z,"checked",{get:function(){return b},set:function(e){z.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!b),z.setChecked(e)},Object.defineProperty(z,"toggled",{get:function(){return b},set:function(e){z.setChecked(e)}}),Object.defineProperty(z,"text",{get:function(){return o?o.text:null},set:function(e){o&&(o.text=e,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!z.stage||z.stage.update())}}),Object.defineProperty(w,"indicatorColor",{get:function(){return d},set:function(e){b&&z.removeChild(w),w=new createjs.Shape,C=w.graphics,d=e,C.f(d).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),w.scaleX=w.scaleY=x,w.alpha=.9,w.x=t/2,w.y=t/2,b&&z.addChild(w),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!z.stage||z.stage.update()}}),Object.defineProperty(z,"indicator",{get:function(){return w},set:function(){zogy("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(z,"enabled",{get:function(){return z._enabled},set:function(e){rt(z,e)}}),!(this.setChecked=function(e){return zot(e)&&(e=!0),(b=e)?z.addChild(w):z.removeChild(w),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!z.stage||z.stage.update(),z})!==p&&Ao.styleTransforms(this,m),this.clone=function(e){return z.cloneProps(new Ao.CheckBox(t,e||!Ao.isPick(y[0])?o?o.clone():null:y[0],e||!Ao.isPick(y[1])?n:y[1],r,i,l,a,s,c,u,d,h,g,p,this.group,f))}},Ao.extend(Ao.CheckBox,Ao.Container,"clone","zimContainer",!1),Ao.RadioButtons=function(l,i,a,s,c,u,d,h,g,o,p,n,f,m,e,r){var t;if(t=zob(Ao.RadioButtons,arguments,"size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",this))return t;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=e;var z=!1===m?{}:Ao.getStyle(this.type,this.group,r);zot(l)&&(l=null!=z.size?z.size:60),l=Math.max(5,l),zot(i)&&(i=null!=z.buttons?z.buttons:["A","B","C"]),zot(a)&&(a=null==z.vertical||z.vertical),zot(s)&&(s=null!=z.color?z.color:"#111"),zot(c)&&(c=null!=z.backgroundColor?z.backgroundColor:"rgba(255,255,255,.8)"),zot(u)&&(u=null!=z.borderColor?z.borderColor:"#111"),zot(d)&&(d=null!=z.borderWidth?z.borderWidth:l/9),u<0||d<0?u=d=null:null!=u&&null==d&&(d=l/10),zot(h)&&(h=a?null!=z.spacing?z.spacing:.2*l:null!=z.spacing?z.spacing:l),zot(g)&&(g=null!=z.margin?z.margin:l/5),zot(o)&&(o=null!=z.always&&z.always),zot(p)&&(p=null!=z.indicatorColor?z.indicatorColor:0<d?u:"black"),zot(f)&&(f=null!=z.rtl?z.rtl:"rtl"==WW.DIR);var y=this;this.cursor="pointer",this.labels=[],this.indicators=[];var b,v=0;if("string"==typeof i){var w=i;i=[];for(var C=0;C<w.length;C++)i.push({label:w[C]})}var x=new Ao.Container({style:!1});function k(e){e=x.getChildIndex(e.target);o&&y.selectedIndex==e||(y.setSelected(e),y.dispatchEvent("change"))}this.addChild(x),function(){var e,t,o=!1;for(t=i.length-1;0<=t;t--)(e=i[t]).selected&&!0===e.selected&&(o?e.selected="false":(o=!0,y.id=e.id));x.removeAllChildren(),y.buttons=[];var n,r=0;for(t=0;t<i.length;t++)"string"!=typeof(e=i[t])&&"number"!=typeof e||(n={selected:!1,label:new Ao.Label({text:e,size:5*l/6,color:null!=z.color?z.color:s,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:m,group:y.group})},e=n),(e.label&&"string"==typeof e.label||"number"==typeof e.label)&&(e.label=new Ao.Label({text:e.label,size:null!=z.size?z.size:5*l/6,color:null!=z.color?z.color:s,valign:"center",style:m})),y.labels.push(e.label),e.index=t,i[t]=e,(n=function(e,t){var o=new Ao.Container({style:!1});y.buttons.push(o),o.mouseChildren=!1,o.setBounds(-g,-g,l+2*g,l+2*g);var n=new Ao.Shape({style:!1}),r=n.graphics;r.f(c).dc(l/2,l/2,l/1.85),r.s(u).ss(d).dc(l/2,l/2,l/2-l/2/5),o.addChild(n);var i=o.check=new Ao.Circle(l/5.2,p,null,null,null,null,null,null,!1);y.indicators.push(i),i.mouseEnabled=!1,i.alpha=.95,i.regX=i.regY=-l/2;n=l;t&&(0==v&&(v=t.width),o.addChild(t),t.y=l/2,o.text=t.text,n=f?(t.x=-t.width-g,o.setBounds(-t.width-g,-g,l+2*g+t.getBounds().width,Math.max(l+2*g,t.getBounds().height)),t.width+g+l):(t.x=o.getBounds().width,o.setBounds(-g,-g,l+2*g+t.getBounds().width,Math.max(l+2*g,t.getBounds().height)),t.x+t.width));e&&(o.addChild(i),y.label=t,y.label&&(y.text=t.text));t=new Ao.Shape({style:!1});return(r=t.graphics).f("rgba(0,0,0,.01)").r(o.getBounds().x,o.getBounds().y,n+2*g,o.getBounds().height),o.hitArea=t,o}(e.selected,e.label)).type="RadioButton",(n.obj=e).selected&&(b=n.obj),x.addChild(n),a?(n.y=r,r+=n.getBounds().height+h):(n.x=r,r+=n.getBounds().width+h)}();for(var T=0;T<x.numChildren;T++)x.getChildAt(T).on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",k);this.getBounds()||this.setBounds(0,0,l,l),f?(this.setBounds(2*-g-v,-g,this.getBounds().width+2*g,this.getBounds().height),this.regX=a?l+g:this.getBounds().width-v-3*g):this.setBounds(-g,-g,this.getBounds().width+2*g,this.getBounds().height),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||x.getChildAt(e)){for(var t,o,n=0;n<x.numChildren;n++)(t=x.getChildAt(n)).removeChild(t.check);return 0<=e&&(t=x.getChildAt(e),o=-2,b&&(o=b.index),b=t.obj),-1==e||o==b.index?(b=null,y.id=null,y.label=null,y.text=""):(t.addChild(t.check),y.id=b.id,y.label=b.label,y.label&&(y.text=y.label.text)),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!y.stage||y.stage.update(),y}},Object.defineProperty(y,"selected",{get:function(){return b},set:function(){zogy("ZIM RadioButton - selected is read only")}}),Object.defineProperty(y,"selectedIndex",{get:function(){return b?b.index:-1},set:function(e){o&&y.selectedIndex==e||y.setSelected(e)}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){rt(y,e)}}),zot(n)&&(n=null!=z.selectedIndex?z.selectedIndex:0),y.selectedIndex=n,Ao.styleTransforms(this,z),this.clone=function(){for(var e=Ao.copy(i),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return y.cloneProps(new Ao.RadioButtons(l,e,a,s,c,u,d,h,g,o,p,n,f,m,this.group,r))}},Ao.extend(Ao.RadioButtons,Ao.Container,"clone","zimContainer",!1),Ao.Toggle=function(o,n,e,t,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w){if(C=zob(Ao.Toggle,arguments,"width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",this))return C;z_d("57.5"),this.group=v;var C=!1===b?{}:Ao.getStyle("Toggle",this.group,w);zot(o)&&(o=null!=C.width?C.width:80),zot(n)&&(n=null!=C.height?C.height:50),this.zimContainer_constructor(o,n,null,null,!1),this.type="Toggle",zot(r)&&(r=null!=C.backgroundColor?C.backgroundColor:"#C60"),zot(i)&&(i=null!=C.margin?C.margin:10),zot(l)&&(l=null!=C.indicatorType?C.indicatorType:"circle"),zot(a)&&(a=null!=C.indicatorColor?C.indicatorColor:"#fff"),zot(c)&&(c=null!=C.toggleBackgroundColor?C.toggleBackgroundColor:"#F93"),zot(u)&&(u=null!=C.color?C.color:"#111"),zot(d)&&(d=null!=C.borderColor?C.borderColor:null),zot(h)&&(h=null!=C.borderWidth?C.borderWidth:null),d<0||h<0?d=h=null:null!=d&&null==h&&(h=1),zot(g)&&(g=null!=C.corner?C.corner:"circle"!=l?0:25),zot(p)&&(p=null!=C.indicatorCorner?C.indicatorCorner:0),zot(f)&&(f=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=C.shadowBlur?C.shadowBlur:14),zot(t)&&(t=null!=C.startToggled&&C.startToggled);v=Po(z);zot(z)&&(z=null!=C.time?C.time:"s"==v?.1:100),zot(e)&&(e=null!=C.label?C.label:null),zot(y)&&(y=null!=C.labelLeft?C.labelLeft:null);var x=this;x.cursor="pointer","string"!=typeof e&&"number"!=typeof e||(e=this.label=new Ao.Label({text:e,size:C.size||5*n/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof y&&"number"!=typeof y||(y=this.labelLeft=new Ao.Label({text:y,size:C.size||5*n/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new Ao.Rectangle(o,n,r,d,h,g).addTo(this),this.indicator="rectangle"==l||"square"==l?new Ao.Rectangle(.65*n,.65*n,a,null,null,p).center(this.background).pos(.2*n,null,t):new Ao.Circle(.35*n,a).center(this.background).pos(.175*n,null,t);var k=t;function T(e){var t,o=x.indicator.x,e=!0===e?0:z;"rectangle"==l||"square"==l?x.indicator.pos(.2*n,null,k):x.indicator.pos(.175*n,null,k),0<z&&x.indicator.animate({props:{x:o},from:!0,time:e}),x.background.color=k?c:r,x.text=k?x.label?x.label.text:"on":x.labelLeft?x.labelLeft.text:"off",x.zimAccessibility&&(t="Toggle set to "+(k?x.label?x.label.text+".":"on.":x.labelLeft?x.labelLeft.text+".":"off."),setTimeout(function(){x.zimAccessibility.talk(t)},50))}x.background.color=k?c:r,-1!=f&&0<m&&(this.background.shadow=new createjs.Shadow(f,3,3,m)),e&&(this.addChild(e),e.x=o+2+i+h,e.y=n/2,this.label=e,this.setBounds(-i,-i,o+3*i+h+e.getBounds().width,Math.max(n+2*i,e.getBounds().height))),y&&(this.addChild(y),y.x=0,x.background.x+=y.width+3+i+h,x.label.x+=y.width+3+i+h,y.y=n/2,this.labelLeft=y,this.setBounds(-i,-i,x.getBounds().width+y.width+3+i+h,x.getBounds().height)),this.expand(Ao.mobile()?20:10),this.tap(function(e){if(y){var t=x.localToGlobal(y.width+3+i+h+o/2,0);if(e.stageX/Ao.scaX<t.x-o/2&&!k||e.stageX/Ao.scaX>=t.x+o/2&&k)return}k=!k,T(),x.dispatchEvent("change")},Ao.mobile()?20:10),new Ao.Swipe(this,20,"s"==v?.2:200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&k||-1==e.swipeX&&!k||(k=!k,T(),x.dispatchEvent("change")))}),Object.defineProperty(x,"textLeft",{get:function(){return y?y.text:null},set:function(e){y&&(y.text=e,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!x.stage||x.stage.update())}}),x.toggle=function(e,t){var o=k;return zot(e)&&(e=!0),o!=(k=e)&&T(t),x},x.text=k?x.label?x.label.text:"on":x.labelLeft?x.labelLeft.text:"off",Object.defineProperty(x,"toggled",{get:function(){return k},set:function(e){x.toggle(e)}}),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){rt(x,e)}}),!1!==b&&Ao.styleTransforms(this,C),this.clone=function(){return x.cloneProps(new Ao.Toggle(o,n,e?e.clone():"",t,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y?y.clone():"",b,this.group,w))}},Ao.extend(Ao.Toggle,Ao.Container,"clone","zimContainer",!1),Ao.Tip=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N){if(G=zob(Ao.Tip,arguments,"text, align, valign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, textAlign, textValign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",this))return G;z_d("57.6"),this.group=F;var V=!1===H?{}:Ao.getStyle("Tip",this.group,N);zot(e)&&(e=null!=V.text?V.text:"Here's a tip!"),zot(n)&&(n=null!=V.margin?V.margin:40),zot(r)&&(r=null!=V.marginH?V.marginH:n),zot(i)&&(i=null!=V.marginV?V.marginV:n),zot(t)&&(t=null!=V.align?V.align:"right"),zot(o)&&(o=null!=V.valign?V.valign:"bottom"),zot(l)&&(l=null!=V.outside&&V.outside),zot(k)&&(k=null!=V.backgroundColor?V.backgroundColor:Ao.blue),zot(g)&&(g=null!=V.color?V.color:Ao.white),zot(P)&&(P=null!=V.corner?V.corner:25),zot(P)&&(P=null!=V.corner?V.corner:25),zot(P)&&(P=null!=V.corner?V.corner:25),zot(I)&&(I=null!=V.paddingHorizontal?V.paddingHorizontal:14+(Array.isArray(P)?P[0]:P)),!zot(f)&&"ignore"!=f||(f=null!=V.shadowColor&&"ignore"!=f?V.shadowColor:"rgba(0,0,0,.3)"),!zot(m)&&"ignore"!=m||(m=null!=V.shadowBlur&&"ignore"!=m?V.shadowBlur:1),zot(s)&&(s=null!=V.delay?V.delay:0);var G=Po(c);zot(c)&&(c=null!=V.time?V.time:"s"==G?2:2e3),zot(u)&&(u=null==V.mouseClose||V.mouseClose),this.zimLabel_constructor(e,d,h,g,p,null,null,z,y,D,Y,X,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,R,H,F,Ao.copy(V)),this.type="Tip",l&&(r=-r,i=-i);var q=this;q.align=t,q.valign=o,this.background.sha(f,3,5,m),this.show=function(e,o){Po(o);if(zot(e)&&(e=s),zot(o)&&(o=c),zot(a)){if(!WW.zdf)return q;a=WW.zdf.stage}else{if(!a.getBounds)return zogy("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),q;if(zot(a.stage))return zogy("zim display - Waiter(): The container must have a stage property"),q}function t(){var e=a.boundsToGlobal?a.boundsToGlobal():a.getBounds(),t=new Ao.Container(e.x,e.y,e.width,e.height);t.zimTemp=!0,t.loc(0,0,a.stage),"center"!=q.align&&"middle"!=q.align&&"center"!=q.valign&&"middle"!=q.valign||q.center(t),q.pos("center"==q.align||"middle"==q.align?null:r,"center"==q.valign||"middle"==q.valign?null:i,"right"==q.align,"bottom"==q.valign,t),l&&("right"==q.align?q.x+=q.width:"left"==q.align&&(q.x-=q.width),"bottom"==q.valign?q.y+=q.height:"top"==q.valign&&(q.y-=q.height)),q.addTo(t.stage),t.zimTemp&&t.removeFrom&&(t.removeFrom(),t=null),t=q.stage,q.timeoutID&&q.timeoutID.clear(),q.timeoutID=Ao.timeout(o,function(){q.hide(),t.stage.update()}),u&&(q.upID&&t.stage.off("stagemouseup",q.upID),q.upID=t.stage.on("stagemouseup",function(){q.hide(),t.stage&&t.stage.update()})),t.stage&&t.stage.update()}return 0<e?q.showID=Ao.timeout(e,t):t(),q},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&a.stage&&a.stage.off("stagemouseup",this.upID),q},this.clear=function(){q.showID&&q.showID.clear(),q.hide()},!(this.dispose=function(e,t,o){q.upID&&q.stage&&q.stage.off("stagemouseup",q.upID),o||this.zimLabel_dispose(!0)})!==H&&Ao.styleTransforms(this,V),this.clone=function(){return q.cloneProps(new Ao.Tip(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,R,H,this.group,N))}},Ao.extend(Ao.Tip,Ao.Label,["dispose","clone"],"zimLabel",!1),Ao.Pane=function(r,i,t,n,l,a,s,c,u,d,h,g,p,f,m,z,y,e,b,v,w,C,x,k,T,o,A){if(B=zob(Ao.Pane,arguments,"width, height, content, backgroundColor, color, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, style, group, inherit",this))return B;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var P="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(e)){if(!WW.zdf)return void zogy(P);e=WW.zdf.stage}else{if(!e.getBounds)return void zogy(P);if(zot(e.getStage))return void zogy("zim display - Pane(): The container must have a stage property")}this.group=o;var B=!1===T?{}:Ao.getStyle(this.type,this.group,A);zot(r)&&(r=null!=B.width?B.width:200),zot(i)&&(i=null!=B.height?B.height:200),zot(t)&&(t=null!=B.content?B.content:null),"string"!=typeof t&&"number"!=typeof t||(t=new Ao.Label({text:t,size:null!=B.size?B.size:40,align:null!=B.align?B.align:"center",valign:null!=B.valign?B.valign:"center",color:null!=B.color?B.color:l,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse()),t=t&&(this.content=Ao.makeContent(t,r,Ao.dark)),zot(n)&&(n=null!=B.backgroundColor?B.backgroundColor:"white"),zot(a)&&(a=null!=B.draggable&&B.draggable),zot(s)&&(s=null==B.resets||B.resets),zot(c)&&(c=null==B.modal||B.modal),zot(u)&&(u=null!=B.corner?B.corner:20),zot(b)&&(b=null!=B.titleBar?B.titleBar:null),zot(v)&&(v=null!=B.titleBarColor?B.titleBarColor:null),zot(w)&&(w=null!=B.titleBarBackgroundColor?B.titleBarBackgroundColor:null),zot(C)&&(C=null!=B.titleBarHeight?B.titleBarHeight:null),zot(d)&&(d=null!=B.backdropColor?B.backdropColor:"rgba(0,0,0,.2)"),zot(h)&&(h=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.3)"),zot(g)&&(g=null!=B.shadowBlur?B.shadowBlur:20),zot(p)&&(p=null==B.center||B.center),zot(f)&&(f=null==B.displayClose||B.displayClose),a&&(f=!1),zot(m)&&(m=null==B.backdropClose||B.backdropClose),zot(y)&&(y=null!=B.fadeTime?B.fadeTime:0),zot(x)&&(x=null!=B.close&&B.close),zot(k)&&(k=null!=B.closeColor?B.closeColor:"#555");P=this.backdrop=new Ao.Shape({style:!1}),o=P.graphics;o.f(d),o.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-r/2,-i/2,r,i);var E=this;t&&["header","message","text","display","buttons","config"].forEach(function(e){t[e]&&(E[e]=t[e])}),E.label=E.message,E.container=e,P.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",m?L:function(e){e.stopImmediatePropagation()});var I,S,W,M,O,j=new Ao.Dictionary(!0);function L(e){E.dispatchEvent("closing"),setTimeout(function(){_(),E.dispatchEvent("close")},10),e.stopImmediatePropagation()}function _(){function e(){E.container.removeChild(E),E.closeCall&&E.closeCall(E.closeParams),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||E.container.stage.update(),s&&(isNaN(E.resetX)||(E.x=E.resetX),isNaN(E.resetY)||(E.y=E.resetY))}0<y?E.animate({obj:{alpha:0},time:y,call:function(){e(),E.dispatchEvent("fadedout")}}):e()}P.on("mousedown",function(e){e.stopImmediatePropagation()}),this.addChild(P),c||P.noMouse(),zot(z)?I=this.backing=new Ao.Rectangle({width:r,height:i,color:n,corner:u,style:!1}):("Pattern"==z.type?(M=z,I=new Ao.Rectangle(r,i,n,null,null,u,null,null,null,!1),M.centerReg(I),M.setMask(I.shape)):I=z,E.display=E.backing=I),f&&(I.cursor="pointer",I.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",L)),-1!=h&&0<g&&(I.shadow=new createjs.Shadow(h,8,8,g)),I.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,a&&(I.cursor="pointer",I.on("mousedown",function(e){isNaN(E.resetX)&&(E.resetX=E.x),isNaN(E.resetY)&&(E.resetY=E.y),S=e.stageX/Ao.scaX-E.x,W=e.stageY/Ao.scaY-E.y,I.cursor="pointer"}),I.on("pressmove",function(e){var t,o,e=(t=e.stageX/Ao.scaX-S,e=e.stageY/Ao.scaY-W,t=Math.max(r/2,Math.min(E.container.getBounds().width-r/2,t)),e=Math.max(i/2,Math.min(E.container.getBounds().height-i/2,e)),{x:t,y:e});E.x=e.x,E.y=e.y;for(var n=0;n<E.numChildren;n++)"TextArea"!=(o=E.getChildAt(n)).type&&"Loader"!=o.type&&"Tag"!=o.type||o.resize();E.stage.update()}),this.on("pressup",function(){I.cursor="pointer",E.stage&&E.stage.update()})),I.centerReg(this),t&&t.center(this),zot(b)||("string"==typeof b&&(b=new Ao.Label(b,null,null,v)),M=E.titleBarLabel=b,zot(C)&&(C=1.5*M.height),zot(v)&&(v="black"),zot(w)&&(w="rgba(0,0,0,.2)"),E.titleBar=b=new Ao.Container(r,C,null,null,!1).centerReg(E).mov(0,-i/2+C/2),b.mouseEnabled=!1,b.mouseChildren=!1,E.titleBar.backing=new Ao.Rectangle(r,C,w,null,null,[.95*u,.95*u,0,0],null,null,null,!1).addTo(b),M.center(b).pos({x:Math.max(u/2,10),reg:!0})),x&&((x=E.close=new Ao.Shape(-40,-40,80,80,null,!1)).graphics.f(k).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),(b?x.addTo(E).scaleTo(b,null,50).mov(r/2-Math.max(u/2,10)-x.width/2,-i/2+C/2):x.addTo(E).sca(.3).mov(r/2-x.width-3,-i/2+x.height)).expand(40),x.cursor="pointer",x.expand(),x.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",L)),Object.defineProperty(E,"text",{get:function(){if(E.message)return" "==E.message.text?"":E.message.text},set:function(e){E.message&&(E.message.text=e)}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){rt(E,e)}}),this.hide=function(e,t){return zot(e)||(E.closeParams=e),_(),t&&(E.dispatchEvent("close"),E.dispatchEvent("change")),E},this.on("removed",function(){var e,t;for(E.toggled=!1,t=0;t<E.numChildren;t++){var o;"TextArea"!=(e=E.getChildAt(t)).type&&"Loader"!=e.type&&"Tag"!=e.type||(o={obj:e,depth:E.getChildIndex(e)},j.add(e,o))}for(t=E.numChildren-1;0<=t;t--)"TextArea"!=(e=E.getChildAt(t)).type&&"Loader"!=e.type&&"Tag"!=e.type||E.removeChild(e);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||E.container.stage.update();s&&(isNaN(E.resetX)||(E.x=E.resetX),isNaN(E.resetY)||(E.y=E.resetY));{var n;E.zimAccessibility&&((n=E.zimAccessibility).resize(E),(O||E.zimTabTag.nextSibling).focus(),setTimeout(function(){n.talk("Pane has been closed.")},50))}}),this.show=function(e,t){return zot(e)||(E.closeCall=e),zot(t)||(E.closeParams=t),p&&isNaN(E.resetX)&&(E.x=E.container.getBounds().width/2,E.y=E.container.getBounds().height/2),E.container.addChild(E),0<y?(E.alpha=0,E.animate({props:{alpha:1},time:y,call:function(){E.dispatchEvent("fadedin")}})):setTimeout(function(){E.container.stage&&E.container.stage.update()},10),E},this.on("added",function(){for(var e=0;e<j.length;e++)E.addChildAt(j.values[e].obj,j.values[e].depth);{var t;E.zimAccessibility&&(t=E.zimAccessibility,setTimeout(function(){t.activatedObject&&(O=t.activatedObject.zimTabTag)},50),t.resize(E),t.tabIndex=E.zimTabIndex)}E.toggled=!0}),!(this.toggle=function(e){return!0!==e&&(!1===e||E.container.contains(E))?E.hide():E.show(),E})!==T&&Ao.styleTransforms(this,B),this.clone=function(){var e=label.x,t=label.y,o=E.cloneProps(new Ao.Pane(r,i,label.clone(),n,l,a,s,c,u,d,h,g,p,f,m,zot(z)?z.clone():null,y,E.container,b,v,w,C,x,k,T,this.group,A));return o.label.x=e,o.label.y=t,o}},Ao.extend(Ao.Pane,Ao.Container,"clone","zimContainer",!1),Ao.Panel=function(t,e,o,n,l,a,r,s,c,i,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A){if(O=zob(Ao.Panel,arguments,"width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",this))return O;z_d("57.7"),this.group=T;var P=!1===k?{}:Ao.getStyle("Panel",this.group,A);zot(t)&&(t=null!=P.width?P.width:250),zot(e)&&(e=null!=P.height?P.height:300),this.zimContainer_constructor(t,e,null,null,!1),this.type="Panel",zot(o)&&(o=null!=P.content?P.content:null);var B=this.content=o;zot(n)&&(n=null!=P.titleBar?P.titleBar:"PANEL"),zot(l)&&(l=null!=P.titleBarColor?P.titleBarColor:"#fff"),zot(a)&&(a=null!=P.titleBarBackgroundColor?P.titleBarBackgroundColor:"#555"),zot(r)&&(r=null!=P.titleBarHeight?P.titleBarHeight:30),zot(s)&&(s=null!=P.backgroundColor?P.backgroundColor:"#eee"),zot(c)&&(c=null!=P.borderColor?P.borderColor:"#888"),zot(i)&&(i=null!=P.borderWidth?P.borderWidth:null),c<0||i<0?c=i=null:null!=c&&null==i&&(i=1),zot(u)&&(u=null!=P.corner?P.corner:5),zot(b)&&(b=null!=P.align?P.align:"left"),zot(v)&&(v=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.3)"),zot(w)&&(w=null!=P.shadowBlur?P.shadowBlur:14),zot(C)&&(C=null!=P.draggable&&P.draggable),zot(x)&&(x=null!=P.boundary?P.boundary:null),zot(d)&&(d=null!=P.close&&P.close),zot(h)&&(h=null!=P.closeColor?P.closeColor:zot(l)?"#555":l),zot(g)&&(g=null!=P.next?P.next:Ao.vee(n)),zot(p)&&(p=null!=P.nextColor?P.nextColor:zot(l)?"#555":l),Array.isArray(u)||(u=[u,u,u,u]),zot(m)&&(m=null!=P.collapse&&P.collapse),zot(z)&&(z=null!=P.collapseColor?P.collapseColor:zot(l)?"#555":l),zot(y)&&(y=null!=P.collapsed&&P.collapsed);var E=this,I=["header","message","text","display","buttons","config"];o&&I.forEach(function(e){o[e]&&(E[e]=o[e])}),E.label=E.message;var S=this.background=new Ao.Rectangle(t,e,s,c,i,u).addTo(this);-1!=v&&0<w&&(this.background.shadow=new createjs.Shadow(v,3,3,w));var W=n,M=Ao.Pick.choose(W),O=Ao.Pick.choose(l),T=Ao.Pick.choose(a),o=E.contentContainer=new Ao.Container(t,e-r).addTo(E).mov(0,r);"string"==typeof M&&(M=new Ao.Label({text:M,color:O,size:null!=P.size?P.size:20,bold:null!=P.bold&&P.bold,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var j=E.titleBarLabel=M;zot(T)&&(T="rgba(0,0,0,.2)"),E.titleBar=n=new Ao.Container(t,r,null,null,!1).loc(0,0,E);var L,_,D,Y,X=E.titleBar.backing=new Ao.Rectangle(t+i,r,T,null,null,[.95*u[0],.95*u[1],0,0],!0,null,null,!1).center(n);function R(){"right"==b?j.center(n).pos(Math.max(u[0]/2,10),null,!0):"center"==b||"middle"==b?j.center(n):j.center(n).loc(Math.max(u[0]/2,10)),j.mov(0,2)}n&&R(),E.label=M,E.text=M.text,d&&((L=E.closeIcon=new Ao.Shape(-40,-40,80,80,null,!1)).graphics.f(h).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),n?(L.centerReg(n).scaleTo(n,null,50),L.pos(Math.max(u[1]/2,15),null,!0)):L.addTo(E).sca(.3).mov(t/2-L.width-3,-e/2+d.height),L.expand(40),L.cursor="pointer",L.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){var e=E.stage;E.removeFrom(),E.dispatchEvent("close"),e.update()})),E.add=function(e,t,o){o&&E.contentContainer.removeAllChildren(),t?e.center(E.contentContainer):e.addTo(E.contentContainer)},E.content&&(B=Ao.makeContent(E.content,t),(I=["header","message","text","display","buttons","config"]).forEach(function(e){B[e]&&(E[e]=B[e])}),E.label=E.message,E.add(B,!0)),this.nextPanel=function(e,t){var o=zot(e)||zot(W.array)?Ao.Pick.choose(W):W.array[e],n=zot(e)||zot(l.array)?Ao.Pick.choose(l):l.array[e],r=zot(e)||zot(a.array)?Ao.Pick.choose(a):a.array[e],i=zot(e)||zot(s.array)?Ao.Pick.choose(s):s.array[e],e=zot(e)||zot(c.array)?Ao.Pick.choose(c):c.array[e];"string"==typeof o&&(o=new Ao.Label({text:o,color:n,size:null!=P.size?P.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),E.label=o,E.text=o.text,j.removeFrom(),j=E.titleBarLabel=o,R(),X.color=r,E.background.color=i,E.background.borderColor=e,t&&E.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!E.stage||E.stage.update()},C&&(n.cursor="pointer",n.on("mousedown",function(){E.drag({rect:x,currentTarget:!0})}),n.on("pressup",function(){E.noDrag(!1)})),0<g&&((_=E.nextIcon=new Ao.Shape(-20,-20,40,40,null,!1)).graphics.f(l).p("AiJieIETCeIkTCfg"),_.centerReg(n).scaleTo(n,null,70).alp(.8).hov(1).expand(),_.pos(Math.max(u[1]/2,15),null,!0),L&&_.mov(-L.width-8),_.cursor="pointer",_.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){E.nextPanel(),E.dispatchEvent("change")})),zot(f)||((f=E.extraButton=new Ao.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(n,null,70).centerReg(n).expand()).pos(Math.max(u[1]/2,15),null,!0),L&&f.mov(-L.width-8),_&&f.mov(-_.width-8)),m&&(Y=y,E.collapse=function(e){if(zot(e)&&(e=!0),e==Y)return E;e?(D.rot(180),S.visible=!1,o.visible=!1,Y=!0,E.dispatchEvent("collapse")):(D.rot(0),S.visible=!0,o.visible=!0,Y=!1,E.dispatchEvent("expand")),E.stage&&E.stage.update()},E.collapseEvent=E.titleBar.on("dblclick",function(){E.collapsed=!E.collapsed}),zot(z)&&(z="#555"),(D=E.collapseIcon=new Ao.Triangle(90,90,90,Ao.faint,z,16)).centerReg(E).scaleTo(n,null,41).pos({x:t-Math.max(u[1]/2,15)-D.width/2-4,y:r/2,reg:!0}).expand(40),f&&D.mov(-f.width-8),L&&D.mov(-L.width-8),_&&D.mov(-_.width-8),D.cursor="pointer",D.expand(),Y=!1,D.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){Y?E.collapse(!1):E.collapse(!0)})),E.overlay=new Ao.Rectangle(t,e,null,null,null,u).alp(.3),Object.defineProperty(E,"panelHeight",{get:function(){return E.background.height},set:function(e){S.removeFrom(),S=this.background=new Ao.Rectangle(t,e,s,c,i,u).addTo(this).bot(),-1!=v&&0<w&&(this.background.shadow=new createjs.Shadow(v,3,3,w)),E.setBounds(t,e),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!E.stage||E.stage.update()}}),Object.defineProperty(E,"collapsed",{get:function(){return Y},set:function(e){E.collapse&&E.collapse(e)}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){rt(E,e),e?E.overlay.removeFrom():E.overlay.addTo(E),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!E.stage||E.stage.update()}}),y&&(y=!1,E.collapsed=!0),!1!==k&&Ao.styleTransforms(this,P),this.clone=function(){return E.cloneProps(new Ao.Toggle(t,e,n?n.clone():"",l,a,r,s,c,i,u,d,h,g,p,f,m,z,E.collapsed,b,v,w,C,x,k,this.group,A))},this.doDispose=function(e,t,o){return m&&this.titleBar.off("dblclick",this.collapseEvent),o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.Panel,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},Ao.Window=function(l,a,s,o,e,c,n,u,d,h,g,t,r,i,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V){if(G=zob(Ao.Window,arguments,"width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, style, group, inherit",this))return G;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=N;var G=!1===F?{}:Ao.getStyle(this.type,this.group,V);zot(l)&&(l=null!=G.width?G.width:300),zot(a)&&(a=null!=G.height?G.height:200),zot(o)&&(o=null!=G.backgroundColor?G.backgroundColor:"#333");var q=e,U=c;zot(e)&&(e=null!=G.borderColor?G.borderColor:"#999"),zot(c)&&(c=null!=G.borderWidth?G.borderWidth:1),zot(n)&&(n=null!=G.padding?G.padding:0),zot(u)&&(u=null!=G.corner?G.corner:0),zot(d)&&(d=null==G.swipe||G.swipe),zot(h)&&(h=null==G.scrollBarActive||G.scrollBarActive),zot(g)&&(g=null!=G.scrollBarDrag&&G.scrollBarDrag),zot(t)&&(t=null!=G.scrollBarColor?G.scrollBarColor:e),zot(r)&&(r=null!=G.scrollBarAlpha?G.scrollBarAlpha:.3),zot(i)&&(i=null==G.scrollBarFade||G.scrollBarFade),zot(p)&&(p=null==G.scrollBarH||G.scrollBarH),zot(f)&&(f=null==G.scrollBarV||G.scrollBarV),g&&(i=null!=G.scrollBarFade&&G.scrollBarFade),zot(m)&&(m=null==G.slide||G.slide),zot(z)&&(z=null!=G.slideDamp?G.slideDamp:.6),zot(y)&&(y=null!=G.slideSnap?G.slideSnap:"vertical"),zot(b)&&(b=null==G.interactive||G.interactive),zot(v)&&(v=null!=G.shadowColor?G.shadowColor:"rgba(0,0,0,.3)"),zot(w)&&(w=null!=G.shadowBlur?G.shadowBlur:20),zot(x)&&(x=null!=G.paddingVertical?G.paddingVertical:n),zot(C)&&(C=null!=G.paddingHorizontal?G.paddingHorizontal:n),zot(k)&&(k=null==G.scrollWheel||G.scrollWheel),zot(A)&&(A=null!=G.titleBar?G.titleBar:null),zot(P)&&(P=null!=G.titleBarColor?G.titleBarColor:null),zot(B)&&(B=null!=G.titleBarBackgroundColor?G.titleBarBackgroundColor:null),zot(E)&&(E=null!=G.titleBarHeight?G.titleBarHeight:null),zot(I)&&(I=null!=G.draggable?G.draggable:null),zot(S)&&(S=null!=G.boundary?G.boundary:null),zot(W)&&(W=null!=G.onTop?G.onTop:null),zot(M)&&(M=null!=G.close?G.close:null),zot(O)&&(O=null!=G.closeColor?G.closeColor:null),zot(j)&&(j=null!=G.cancelCurrentDrag&&G.cancelCurrentDrag),zot(L)&&(L=null!=G.fullSize?G.fullSize:null),zot(_)&&(_=null!=G.fullSizeColor?G.fullSizeColor:null),zot(D)&&(D=null!=G.resizeHandle?G.resizeHandle:null),zot(Y)&&(Y=null!=G.collapse&&G.collapse),zot(X)&&(X=null!=G.collapseColor?G.collapseColor:null),zot(R)&&(R=null!=G.collapsed&&G.collapsed),zot(H)&&(H=null==G.optimize||G.optimize),!1===A&&(A=null),zot(A)||(zot(E)&&(E=30),a-=E);var Q=this;Q.optimize=H,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var Z=this.backing=new Ao.Shape({style:!1});this.addChild(Z);var K=new createjs.Shape;K.type="WindowBacking";var J,$,ee,te,oe=K.graphics;this.addChild(K),s&&(J=s),s=this.contentContainer=new Ao.Container({style:!1}),this.addChild(s),s.mask=K,b||(ee=new createjs.Shape),0<c&&(te=new createjs.Shape,this.addChild(te));var ne=A?0:u;function re(){Q.setBounds(0,0,l,a),Z.graphics.c().f(o).rc(0,0,l,a,ne,ne,u,u),-1!=v&&0<w&&(Z.shadow=new createjs.Shadow(v,4,4,w)),0<c&&(u?te.graphics.c().s(e).ss(c,"square","miter").rc(0,0,l,a,ne,ne,u,u):te.graphics.c().s(e).ss(c,"square","miter").dr(0,0,l,a)),zot(be)||(be.widthOnly=Q.width+c,Q.setBounds(0,-E,Q.width,a+E)),ve&&(A?ve.pos({x:l-Math.max(u/2,10)-ve.width/2,y:E/2,reg:!0}):M.pos(Math.max(u/2,10)/2,ve.height/2,!0,!1,Q)),Pe&&(Pe.pos({x:l-Math.max(u/2,10)-Pe.width/2,y:E/2,reg:!0}),ve&&Pe.mov(-ve.width-10)),Ee&&(Ee.pos({x:l-Math.max(u/2,10)-Ee.width/2,y:E/2,reg:!0}),ve&&Ee.mov(-ve.width-10),Pe&&Ee.mov(-Pe.width-10))}re();var ie,le,ae,se,ce,ue,de,he,ge,pe,fe,me,ze,ye,be,ve,we,Ce,xe,ke,Te,Ae,Pe,Be,Ee,Ie,Se,We=this.scrollBar={};function Me(e){e.currentTarget.loc(0,0,Q).top().alp(.01).mov(Q.width,Q.height-(Q.titleBar?Q.titleBar.height:0))}function Oe(e){"right"==e.align?(e.x=C,e.resize(Q.width-(he?We.size+2*We.spacing:C)-2*C)):("center"==e.align||e.align,e.resize(Q.width-(he?We.size+2*We.spacing:0)-2*C)),e.alpha=e.wrapperLastAlpha}function je(e){zot($)&&($=Q.stage||WW.zdf.stage),zot(e)&&(e=!0),e?Ao.dragBoundary(s,new createjs.Rectangle(0,0,de?-Q.scrollXMax:0,he?-Q.scrollYMax:0)):Ao.dragBoundary(s,new createjs.Rectangle(-1e3,-1e3,$.width+2e3,$.height+2e3))}We.color=t,We.size=6,We.minSize=2*We.size,We.spacing=3.5+c/2,We.margin=0,We.corner=We.size/2,We.showTime=.5,We.fadeTime=3,h&&(ie=We.horizontal=new Ao.Shape({style:!1}),le=ie.graphics,ie.alpha=r,this.addChild(ie),g&&ie.drag({localBounds:!0}),ae=We.vertical=new Ao.Shape({style:!1}),se=ae.graphics,ae.alpha=r,this.addChild(ae),g&&ae.drag({localBounds:!0})),this.update=function(){h&&(le.clear(),se.clear()),ge=h?We.size+2*We.spacing:0,pe=s.getBounds()?s.getBounds().width:0,fe=s.getBounds()?s.getBounds().height:0,de=p&&l-C<pe&&(h||!0===d||"auto"==d||"horizontal"==d),he=f&&a-x<fe&&(h||!0===d||"auto"==d||"vertical"==d),Q.scrollXMax=pe+2*C-l+(he?ge+We.margin:0),Q.scrollYMax=fe+2*x-a+(de?ge+We.margin:0),oe.clear();var e=c/2,t=c/2,o=l-(he&&h?We.size+2*We.spacing:0)-(he?0:c),n=a-(de&&h?We.size+2*We.spacing:0)-(de?0:c);oe.f("rgba(0,0,0,0)").rc(e,t,o,n,ne,ne,he&&h?0:u,de&&h?0:u),K.setBounds(Q.getBounds().x,Q.getBounds().y,Q.getBounds().width,Q.getBounds().height),Ao.expand(K,0),b||(ee.graphics.c().f("red").dr(e,t,o,n),s.hitArea=ee);var r,i,e=Math.max(u,Math.min(We.corner,We.spacing)),t=e+c/2,o=e+(he?ge:0)+c/2,n=e+c/2,e=e+(de?ge:0)+c/2;de&&h&&(r=Math.max(We.minSize,(l-t-o)*(l-t-o)/(pe+C+We.margin)),le.f(We.color).rr(0,0,r,We.size,We.corner),ie.x=t,ie.y=a-We.size-We.spacing,ce=new Ao.Proportion(-Q.scrollXMax,0,t,l-r-o,-1),g&&(ie.setBounds(0,0,r,We.size),i=new createjs.Rectangle(t,ie.y,l-r-t-o,0),ie.dragBoundary(i),ie.proportion=new Ao.Proportion(i.x,i.x+i.width,0,-Q.scrollXMax),ie.off("pressmove",me),me=ie.on("pressmove",function(){Q.dispatchEvent("scrolling"),ee&&(ee.x=-s.x,ee.y=-s.y),s.x=ie.proportion.convert(ie.x),Ye()}))),he&&h&&(r=Math.max(We.minSize,(a-n-e)*(a-n-e)/(fe+x+We.margin)),se.f(We.color).rr(0,0,We.size,r,We.corner),ae.x=l-We.size-We.spacing,ae.y=n,ue=new Ao.Proportion(-Q.scrollYMax,0,n,a-r-e,-1),g&&(ae.setBounds(0,0,We.size,r),i=new createjs.Rectangle(ae.x,n,0,a-r-n-e),ae.dragBoundary(i),ae.proportion=new Ao.Proportion(i.y,i.y+i.height,0,-Q.scrollYMax),ae.off("pressmove",ze),ze=ae.on("pressmove",function(){Q.dispatchEvent("scrolling"),ee&&(ee.x=-s.x,ee.y=-s.y),et=s.y=ae.proportion.convert(ae.y),Ye()}))),Xe(),clearTimeout(Q.d2Timeout),Q.d2Timeout=setTimeout(function(){ie&&ie.proportion&&(s.x=ie.proportion.convert(ie.x)),ae&&ae.proportion&&(s.y=ae.proportion.convert(ae.y))},50),clearTimeout(Q.dTimeout),Q.dTimeout=setTimeout(function(){je()},300),je(),Ye()},this.resize=function(e,t){zot(e)&&(e=l),zot(t)&&(t=a);var o=20;A&&(o=ye.x+ye.width+10),e<o&&(e=o),t<20&&(t=20),l=e,a=t,re();for(var n=0;n<s.numChildren;n++){var r=s.getChildAt(n);"Wrapper"==r.type&&Oe(r)}return Q.update(),et=s.y,T&&tt.immediate(et),Q.dispatchEvent("resize"),Q},zot(A)||(zot(I)&&(I=!0),"string"==typeof A&&(A=new Ao.Label({text:A,color:P,size:null!=G.size?G.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),ye=Q.titleBarLabel=A,zot(B)&&(B="rgba(0,0,0,.2)"),Q.titleBar=A=new Ao.Container(l,E,null,null,!1).centerReg(Q).mov(0,-a/2-E/2),be=Q.titleBar.backing=new Ao.Rectangle(l+c,E,B,null,null,[.95*u,.95*u,0,0],!0,null,null,!1).center(A),ye.center(A).pos({x:Math.max(u/2,Math.max(10,n)),reg:!0}),Q.regX=0,Q.regY=-E,Q.setBounds(0,-E,l,a+E),I?(A.cursor="pointer",A.on("mousedown",function(){Q.drag({rect:S,currentTarget:!0,onTop:W})}),A.on("pressup",function(){Q.noDrag(!1)})):A.on("mousedown",function(){})),M&&(zot(O)&&(O="#555"),(ve=Q.closeIcon=new Ao.Shape(-40,-40,80,80,null,!1)).graphics.f(O).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),(A?ve.centerReg(Q).scaleTo(A,null,50).pos({x:l-Math.max(u/2,10)-ve.width/2,y:E/2,reg:!0}):ve.sca(.3).pos(Math.max(u/2,10)/2,ve.height/2,!0,!1,Q)).expand(40),ve.cursor="pointer",ve.expand(),ve.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){var e=Q.stage;Q.removeFrom(),Q.dispatchEvent("close"),e&&e.update()})),zot(A)||(L&&(Q.fullSize=function(e){if(zot(e)&&(e=!0),e==Ce||!Q.parent)return Q;e?(xe=Q.width,ke=Q.height,Te=Q.x,Ae=Q.y,Q.resize(Q.parent.width,Q.parent.height),Q.x=0,Q.y=0,Ce=!0,Be.alpha=1,Pe.getChildAt(0).alpha=.01,Q.dispatchEvent("fullsize")):(Q.resize(xe,ke-A.height),Q.x=Te,Q.y=Ae,Ce=!1,Be.alpha=0,Pe.getChildAt(0).alpha=1,Q.dispatchEvent("originalsize")),Q.stage&&Q.stage.update()},zot(_)&&(_="#555"),Pe=Q.fullSizeIcon=new Ao.Rectangle(80,80,Ao.faint,_,16),Be=(new Ao.Shape).s(_).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(Pe).mov(40,40).alp(0),Pe.centerReg(Q).scaleTo(A,null,42).pos({x:l-Math.max(u/2,10)-Pe.width/2,y:E/2,reg:!0}).expand(40),ve&&Pe.mov(-ve.width-10),Pe.cursor="pointer",Pe.expand(),Ce=!1,xe=l,ke=a,Te=Q.x,Ae=Q.y,Pe.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){Ce?Q.fullSize(!1):Q.fullSize(!0)})),Y&&(we=R,Q.collapse=function(e){if(zot(e)&&(e=!0),e==we)return Q;e?(Ee.rot(180),Q.backing.visible=!1,Q.contentContainer.visible=!1,K.visible=!1,ie&&(ie.visible=!1),ie&&(ae.visible=!1),te&&(te.visible=!1),we=!0,be.sha(v,5,5,w),Q.dispatchEvent("collapse")):(Ee.rot(0),Q.backing.visible=!0,Q.contentContainer.visible=!0,K.visible=!0,ie&&(ie.visible=!0),ie&&(ae.visible=!0),te&&(te.visible=!0),we=!1,be.sha(null),Q.dispatchEvent("expand")),Q.stage&&Q.stage.update()},zot(X)&&(X="#555"),(Ee=Q.collapseIcon=new Ao.Triangle(90,90,90,Ao.faint,X,16)).centerReg(Q).scaleTo(A,null,42).pos({x:l-Math.max(u/2,10)-Ee.width/2,y:E/2,reg:!0}).expand(40),ve&&Ee.mov(-ve.width-10),Pe&&Ee.mov(-Pe.width-10),Ee.cursor="pointer",Ee.expand(),we=!1,xe=l,ke=a,Te=Q.x,Ae=Q.y,Ee.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){we?Q.collapse(!1):Q.collapse(!0)}))),D&&((Ie=Q.resizeHandle=new Ao.Rectangle(25,25,Ao.grey,Ao.white).alp(.01).centerReg().rot(45).hov(.5).loc(0,0,Q).mov(Q.width,Q.height-(Q.titleBar?Q.titleBar.height:0)).drag()).on("pressmove",function(){Q.resize(Ie.x,Ie.y)}),Ie.on("pressup",Me),Q.titleBar&&Q.titleBar.on("pressup",Me)),this.add=function(e,t,o,n){var r;if(r=zob(Q.add,arguments,"obj, index, center, replace",Q))return r;var i=e;if(i.getBounds())return nt(i),zot(t)&&(t=s.numChildren),n&&(t=0,Q.removeAll()),o?(i.center(Q).addTo(s,t).mov(0,E?E/2:0),s.height>Q.height-(E||0)&&i.loc(null,0),s.width>Q.width&&i.loc(0)):i.addTo(s,t),"Wrapper"==i.type&&(ae.alpha=0,p=!1,i.wrapperLastAlpha=i.alpha,i.alpha=0,this.added(function(){Oe(i),Q.resize(),ie.alpha=1,ae.alpha=1})),0==i.x&&(i.x=C),0==i.y&&(i.y=x),Q.update(),Q;zogy("Window.add() - please add content with bounds set")},J&&(Se=Ao.makeContent(J,l),["header","message","text","display","buttons","config"].forEach(function(e){Se[e]&&(Q[e]=Se[e])}),Q.label=Q.message,Q.add(Se,0,!0)),this.remove=function(e){return s.removeChild(e),Q.update(),Q};var Le,_e=!(this.removeAll=function(){return s.removeAllChildren(),Q.update(),Q});function De(){et=s.y,T&&tt.immediate(et),h&&Xe()}function Ye(){Q.optimize&&($=Q.stage,s.loop(function(e){e.hitTestBounds&&e.stage&&(e.hitTestBounds($)?(e.visible=!0,e.loop&&e.loop(function(e){e.hitTestBounds&&(e.hitTestBounds($)?e.visible=!0:e.visible=!1)})):e.visible=!1)}))}function Xe(){Ye(),Q.dispatchEvent("scrolling"),ee&&(ee.x=-s.x,ee.y=-s.y),de&&h&&(ie.x=ce.convert(s.x)),he&&h&&(ae.y=ue.convert(s.y))}function Re(e){zot(e)&&(e=100),nt(Q),d&&setTimeout(function(){s&&(Ao.drag({obj:s,currentTarget:!0,localBounds:!0,slide:m,slideDamp:z,slideSnap:!((!p||!0!==d&&"auto"!=d&&"horizontal"!=d)&&(!f||!0!==d&&"auto"!=d&&"vertical"!=d))&&y}),s.removeAllEventListeners("slidestart"),s.on("slidestart",function(){Q.dispatchEvent("slidestart")}),s.removeAllEventListeners("slidestop"),!h&&H&&(Q.zDE&&s.off(Q.zDE),Q.zDE=s.on("mousedown",()=>{Q.zTI&&Ao.Ticker.remove(Ye)}),Q.zME&&s.off(Q.zME),Q.zME=s.on("pressmove",Ye),Q.zSTA&&s.off(Q.zSTA),Q.zSTA=s.on("slidestart",function(){Q.zTI=Ao.Ticker.add(Ye)}),Q.zSTO&&s.off(Q.zSTO),Q.zSTO=s.on("slidestop",function(e){Q.zTI&&Ao.Ticker.remove(Q.zTI)})),s.on("slidestop",function(e){m&&He(),Q.dispatchEvent("slidestop")}),s.getBounds()&&0<s.getBounds().width&&je())},e)}function He(){Ao.Ticker.remove(De),_e=!1,de&&i&&h&&Ao.animate(ie,{alpha:0},We.fadeTime),he&&i&&h&&Ao.animate(ae,{alpha:0},We.fadeTime)}d&&s.on("mousedown",function(){_e||Ao.Ticker.add(De,s.stage),_e=!0,de&&h&&i&&Ao.animate(ie,{alpha:r},We.showTime),he&&h&&i&&Ao.animate(ae,{alpha:r},We.showTime)}),this.on("added",function(){Re(50)},null,!0),this.cancelCurrentDrag=function(){Q.contentContainer&&Q.contentContainer.noDrag(!1),setTimeout(function(){s&&(Ao.drag({obj:s,currentTarget:!0,localBounds:!0,slide:m,slideDamp:z,slideSnap:!((!p||!0!==d&&"auto"!=d&&"horizontal"!=d)&&(!f||!0!==d&&"auto"!=d&&"vertical"!=d))&&y}),s.getBounds()&&0<s.getBounds().width&&je())},300)},this.added(function(e){Le=($=e).on("stagemousemove",function(e){Q.windowMouseX=e.stageX/Ao.scaX,Q.windowMouseY=e.stageY/Ao.scaY})}),m?s.on("slidestop",He):s.on("mousedown",function(){s.stage.on("stagemouseup",He,null,!0)}),j&&(Q.blurEvent=function(){Q.cancelCurrentDrag(),He()},document.WW.addEventListener("blur",Q.blurEvent));var Fe,Ne,Ve,Ge=!1,qe=0,Ue=0,Qe=0,Ze=0,Ke=300,Je=2;function $e(){if(!s.stage)return Ge||(Q.dispatchEvent("hoverout"),Ge=!0),void Ao.Ticker.remove($e);Math.abs(qe-Q.windowMouseX)>Je||Math.abs(Ue-Q.windowMouseY)>Je?(Ge||(Q.dispatchEvent("hoverout"),Ge=!0),Fe=Date.now(),qe=Q.windowMouseX,Ue=Q.windowMouseY):Date.now()-Fe>Ke&&((Math.abs(Qe-Q.windowMouseX)>Je||Math.abs(Ze-Q.windowMouseY)>Je)&&(Q.contentMouse=s.globalToLocal(Q.windowMouseX,Q.windowMouseY),Q.dispatchEvent("hoverover"),Qe=Q.windowMouseX,Ze=Q.windowMouseY,Ge=!1),Fe=Date.now())}b&&(s.on("mousedown",function(e){$=e.target.stage,Ne=e.stageX/Ao.scaX,Ve=Date.now()}),s.on("click",function(e){Date.now()-Ve<600&&Math.abs(e.stageX/Ao.scaX-Ne)<5&&(Q.contentMouse=s.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),Q.dispatchEvent("select"))}),s.on("mouseover",function(){Fe=Date.now(),Ao.Ticker.add($e,s.stage)}),s.on("mouseout",function(){Ge||(Q.dispatchEvent("hoverout"),Ge=!0),Ao.Ticker.remove($e)}));var et=Q.scrollY;Q.scrollWindow=function(e){var t;he&&Q.stage&&Q.hitTestPoint(Q.windowMouseX,Q.windowMouseY)&&Q.contains(Q.stage.getObjectUnderPoint(Q.windowMouseX*Ao.scaX,Q.windowMouseY*Ao.scaY))&&(zot(e)&&(e=event),zot(t=e.detail?-19*e.detail:e.wheelDelta)&&(t=-19*e.deltaY),et+=t,et=Math.max(-Q.scrollYMax,Math.min(0,et)),T||(Q.scrollY=et,s.stage.update())),H&&Ye()},k&&(WW.addEventListener("mousewheel",Q.scrollWindow),WW.addEventListener("wheel",Q.scrollWindow),WW.addEventListener("DOMMouseScroll",Q.scrollWindow));var tt,ot=!1;function nt(e){T&&!ot&&e.stage&&(ot=!0,tt=new Ao.Damp(Q.scrollY,T),Q.dampTicker=Ao.Ticker.add(function(){_e||null!=Q.scrollY&&null!=et&&Q.scrollY!=et&&Math.round(Q.scrollY)==Math.round(et)||zot(et)||(Q.scrollY=tt.convert(et))},e.stage))}this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(e){e?Re():(clearTimeout(Q.dTimeout),Ao.noDrag(s)),rt(Q,e)}}),this._scrollEnabled=!0,Object.defineProperty(Q,"scrollEnabled",{get:function(){return Q._scrollEnabled},set:function(e){e?(Re(),g&&(me&&(ie.mouseEnabled=!0),ze&&(ae.mouseEnabled=!0)),WW.addEventListener("mousewheel",Q.scrollWindow),WW.addEventListener("wheel",Q.scrollWindow),WW.addEventListener("DOMMouseScroll",Q.scrollWindow)):(clearTimeout(Q.dTimeout),Ao.noDrag(s),g&&(me&&(ie.mouseEnabled=!1),ze&&(ae.mouseEnabled=!1)),WW.removeEventListener("mousewheel",Q.scrollWindow),WW.removeEventListener("wheel",Q.scrollWindow),WW.removeEventListener("DOMMouseScroll",Q.scrollWindow)),Q._scrollEnabled=e}}),Object.defineProperty(Q,"scrollX",{get:function(){return s.x},set:function(e){s.x=e,clearTimeout(Q.d2Timeout),s.zimDragImmediate&&s.zimDragImmediate(s.x,s.y),Xe()}}),Object.defineProperty(Q,"scrollY",{get:function(){return s.y},set:function(e){s.y=et=e,T&&tt.immediate(et),clearTimeout(Q.d2Timeout),s.zimDragImmediate&&s.zimDragImmediate(s.x,s.y),Xe()}}),Object.defineProperty(Q,"backgroundColor",{get:function(){return o},set:function(e){o=e,re()}}),Object.defineProperty(Q,"fullSized",{get:function(){return Ce},set:function(e){Q.fullSize&&Q.fullSize(e)}}),Object.defineProperty(Q,"collapsed",{get:function(){return we},set:function(e){Q.collapse&&Q.collapse(e)}}),R&&(we=!1,Q.collapsed=!0),Q.titleBar&&(Q.collapseEvent=Q.titleBar.on("dblclick",function(){Q.collapsed=!Q.collapsed})),!1!==F&&Ao.styleTransforms(this,G),this.clone=function(e){zot(e)&&(e=!0);var t=Q.cloneProps(new Ao.Window(l,a,null,o,q,U,n,u,d,h,g,We.color,r,i,p,f,m,z,y,b,v,w,C,x,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V));return e&&(Q.contentContainer.cloneChildren(t.contentContainer),t.update()),t},this.doDispose=function(e,t,o){return k&&(WW.removeEventListener("mousewheel",Q.scrollWindow),WW.removeEventListener("wheel",Q.scrollWindow),WW.removeEventListener("DOMMouseScroll",Q.scrollWindow)),s&&(Q.zDE&&s.off(Q.zDE),Q.zME&&s.off(Q.zME),Q.zSTA&&s.off(Q.zSTA),Q.zSTO&&s.off(Q.zSTO),Q.zTI&&Ao.Ticker.remove(Q.zTI)),Q.titleBar&&Q.titleBar.removeAllEventListeners(),Le&&$&&$.off("stagemousemove",Le),Q.resizeHandle&&Q.resizeHandle.removeAllEventListeners(),Q.blurEvent&&WW.removeEventListener("blur",Q.blurEvent),Ao.Ticker.remove($e),zot(De)||Ao.Ticker.remove(De),o||this.zimContainer_dispose(!0),!(s=Q.contentContainer=null)}},Ao.extend(Ao.Window,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},Ao.Page=function(o,n,r,i,l,a,s,c,u,d,h){if(t=zob(Ao.Page,arguments,"width, height, color, color2, vertical, pattern, scalePattern, cache, style, group, inherit",this))return t;z_d("58.3"),this.group=d;var e=!1===u?{}:Ao.getStyle("Page",this.group,h);zot(o)&&(o=(null!=e.width?e:WW.zdf).width),zot(n)&&(n=(null!=e.height?e:WW.zdf).height),this.zimContainer_constructor(0,0,o,n,!1),this.type="Page";var g=this;zot(l)&&(l=null==e.vertical||e.vertical),zot(r)&&(r=null!=e.color?e.color:Ao.light),zot(i)&&(i=null!=e.color2?e.color2:null),zot(a)&&(a=null!=e.pattern?e.pattern:null),zot(s)&&(s=null!=e.scalePattern?e.scalePattern:"fill"),zot(c)&&(c=null!=e.cache&&e.cache),zot(i)||(r=new Ao.GradientColor([r,i],[0,1],0,0,l?0:o,l?n:0),i=null);var t=this.backing=new Ao.Rectangle({width:o,height:n,color:r,style:!1}).addTo(this);!zot(c)||zot(i)&&zot(a)||(c=!0),c&&t.cache(),zot(a)||(this.pattern=a.addTo(this),s&&a.scaleTo(this,100,100,s).center(this),c&&a.cache()),Object.defineProperty(g,"color",{get:function(){return r},set:function(e){zot(e)&&(e="black"),r=e,g.backing.color=e}}),!1!==u&&Ao.styleTransforms(this,e),this.clone=function(e){zot(e)&&(e=!1),r.type&&(i=null);var t=g.cloneProps(new Ao.Page(o,n,r,i,l,a,s,c,u,d,h));return e&&g.cloneChildren(t),t}},Ao.extend(Ao.Page,Ao.Container,["clone"],"zimContainer",!1),Ao.Layer=function(e,t,n,a,s,c,o,r,u,d,i,l,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){var E;if(E=zob(Ao.Layer,arguments,"width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, style, group, inherit",this))return E;z_d("58.5"),this.group=P;var I=!1===A?{}:Ao.getStyle("Layer",this.group,B);zot(e)&&(e=null!=I.width?I.width:500),zot(t)&&(t=null!=I.height?I.height:500),this.zimContainer_constructor(0,0,e,t,!1),this.type="Layer";var S=this;S.distX=40,S.distY=0,zot(n)&&(n=null!=I.titleBar?I.titleBar:"LAYER");var W=n,M=n,O=!0;zot(s)&&(s=null!=I.backgroundColor?I.backgroundColor:"#eee"),zot(c)&&(c=null!=I.rollBackgroundColor?I.rollBackgroundColor:"#fff"),zot(o)&&(o=null!=I.selectedBackgroundColor?I.selectedBackgroundColor:"#666"),zot(u)&&(u=null!=I.color?I.color:"#666"),zot(d)&&(d=null!=I.rollColor?I.rollColor:"#666"),zot(i)&&(i=null!=I.selectedColor?I.selectedColor:"#ddd"),zot(h)&&(h=null!=I.borderWidth?I.borderWidth:1),zot(g)&&(g=null!=I.borderColor?I.borderColor:s),(g<0||h<0)&&(g=h=null),zot(p)&&(p=null==I.dashed||I.dashed),zot(f)&&(f=null!=I.titleBar?I.titleBar:null),zot(m)&&(m=null!=I.titleBarWidth?I.titleBarWidth:100);var j,L=m;if(zot(z)&&(z=null!=I.titleBarHeight?I.titleBarHeight:40),zot(y)&&(y=null!=I.titleBarX?I.titleBarX:null),zot(b)&&(b=null!=I.titleBarY?I.titleBarY:null),zot(v)&&(v=null==I.titleBarDraggable||I.titleBarDraggable),zot(w)&&(w=null==I.close||I.close),zot(C)&&(C=null!=I.closeColor?I.closeColor:o),zot(x)&&(x=null!=I.closeBackgroundColor?I.closeBackgroundColor:o),zot(k)&&(k=null!=I.closeIndicatorColor?I.closeIndicatorColor:i),zot(T)&&(T=null==I.anchor||I.anchor),v||(T=!1),S.anchor=T,w&&(m+=30),f=Ao.merge({borderColor:o},f,{events:!0,visible:!1,ghostColor:g,ghostWidth:h,ghostDashed:p,ghostHidden:!0}),zot(a)&&(a=null!=I.titleBarContainer?I.titleBarContainer:null),zot(a)){if(!WW.zdf)return void zogy("zim Layer(): Please pass in a reference to a container with bounds set.");a=WW.zdf.stage}S.active=!1,S.turnOff=function(){S.active=!1,w&&(S.checkBox.visible=!1),S.transformControls.remove(),S.mouseChildren=!0,S.button.backgroundColor=s,S.button.rollBackgroundColor=c,S.button.color=u,S.button.rollColor=u,S.transformControls.allowToggleOff(),S.resizeChildren&&S.resizeChildren()},S.turnOn=function(){S.active=!0,w&&(S.checkBox.visible=!0,S.checkBox.checked=!0),S.button.backgroundColor=o,S.button.rollBackgroundColor=o,S.button.color=i,S.button.rollColor=i,S.mouseChildren=!1,S.transformControls.add(),S.transformControls.allowToggleOn()},S.titleBarPos=function(e,t){if(S.titleBar)return S.titleBar.pos?(S.titleBar.pos(e,t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),j.update()):(S.distX=e,S.distY=t),O=!1,S};var _=S.visible;S.visible=!1;P=Po();this.added(function(l){j=l,S.transform(f),0<=h&&S.transformControls.hideGhost(),setTimeout(function(){S.visible=_,0<=h&&setTimeout(function(){S.transformControls.showGhost(),S.stage&&S.stage.update()},200),j=l;var e,t,r=S.titleBar=new Ao.Container(m,z).reg(0,z).loc(S,null,a).mov(S.distX,S.distY);function o(e){var t,o,n;O&&v&&(t=a.localToLocal(r.x-S.distX,r.y-S.distY,S.parent),o=S.localToLocal(S.regX,S.regY,S.parent),n=S.localToLocal(0,0,S.parent),S.x=t.x+(o.x-n.x),S.y=t.y+(o.y-n.y),S.transformControls.resize(e),i(S),S.stage&&S.stage.update())}function i(e){e.loop(function(e){"Layer"==e.type&&(S.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),i(e))})}function n(){return 0==r.x||(r.y==r.height||(r.x==a.width-r.width||r.y==a.height))}v&&r.drag({all:!0,boundary:new Ao.Boundary(0,z,a.width-m,a.height-z),localBounds:!0}),40==S.distX&&0==S.distY||r.pos(S.distX,S.distY),w&&(S.checkBox=new Ao.CheckBox({borderColor:C,backgroundColor:x,indicatorColor:k,size:20,startChecked:!0}).center(r).pos(0,null,!0).change(function(){S.turnOff(),S.dispatchEvent("transformhide")}),S.checkBox.visible=!1),r.mouseChildren=!0,(r.layer=S).resetTitleBar=function(){S.distX=40,S.distY=0,O=!0,S.move(!0),S.stage&&S.stage.update()},"string"!=typeof M&&"number"!=typeof M||(M=new Ao.Label({text:M,color:u,rollColor:d,size:null!=I.size?I.size:18,group:this.group})),S.label=M,S.label.center(r),S.button=new Ao.Button({shadowBlur:-1,width:L,height:z-1,label:S.label,color:u,rollColor:d,backgroundColor:s,rollBackgroundColor:c,corner:null!=I.corner?I.corner:0,inherit:Ao.copy(I)}).addTo(r),S.button.on("mousedown",function(){a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),S.active||(S.turnOn(),S.dispatchEvent("transformshow")),r.top()}),S.button.on("pressmove",function(){o()}),S.button.on("pressup",function(){o(!0);var e=S.localToLocal(0,0,a);S.distX=r.x-e.x,S.distY=r.y-e.y,r.top(),!n()&&v&&(e=S.localToGlobal(0,0),S.button.hitTestPoint(e.x,e.y)&&S.resetTitleBar())}),S.button.on("dblclick",function(){v&&S.resetTitleBar()}),S.turnOff(),S.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(v&&S.move(),i(S))}),S.move=function(e){!e&&!O&&S.anchor&&n()||(r.loc(S.localToLocal(0,0,a)).mov(S.distX,S.distY),r.x<0&&(O=!1,r.x=0),r.y<r.height&&(O=!1,r.y=r.height),r.x>a.width-r.width&&(O=!1,r.x=a.width-r.width),r.y>a.height&&(O=!1,r.y=a.height),S.anchor||(O=!0))},S.on("transformhide",function(){S.turnOff(),a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),S.resizeChildren=function(e){S.transformControls.resize(e),S.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type?e.resizeChildren():e.transformControls.resize())})},S.resize=function(e){return S.move(),S.resizeChildren(e),S},S.toggled=!1,S.toggle=function(e){return zot(e)?S.toggled=!S.toggled:S.toggled=e,S.toggled?(a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),S.turnOn(),S.dispatchEvent("transformshow")):(r.top(),S.turnOff(),a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),S.dispatchEvent("transformhide")),S.stage&&S.stage.update(),S},Object.defineProperty(S,"titleBarDraggable",{get:function(){return v},set:function(e){(v=e)?r.drag({all:!0,boundary:Ao.Boundary(0,40,a.width-m,a.height-z),localBounds:!0}):r.noDrag(!1)}}),S.stageUpEvent=j.on("stagemouseup",function(){S.transformControls.visible&&r.top()}),zot(y)&&zot(b)||(O=!1,e=zot(y)?r.x:y,t=zot(b)?r.y-z:b,S.titleBarStartX=y,S.titleBarStartY=b,S.titleBarPos(e,t),t=S.parent.localToLocal(S.x,S.y,a),S.distX=r.x-t.x,S.distY=r.y-t.y)},50)},"s"==P?.05:50),!1!==A&&Ao.styleTransforms(this,I),this.clone=function(){return S.cloneProps(new Ao.Layer(e,t,W,a,s,c,o,r,u,d,i,l,h,g,p,f,L,z,y,b,v,w,C,x,k,T,A,this.group,B))},this.dispose=function(e,t,o){return S.stageUpEvent&&j.off("stagemouseup",S.stageUpEvent),a&&a.loop(function(e){e.layer=null}),S.transformControls.dispose(),S.transformControls=null,o||this.zimContainer_dispose(!0),S.titleBar.layer=null,S.titleBar.dispose(),S.checkBox=S.button=null,!(n=S.titleBar=f=null)}},Ao.extend(Ao.Layer,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Waiter=function(l,a,e,t,o,n,r,s,i,c,u){if(m=zob(Ao.Waiter,arguments,"container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",this))return m;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=c;var d=!1===i?{}:Ao.getStyle(this.type,this.group,u),h=Po(a);zot(a)&&(a=null!=d.speed?d.speed:"s"==h?.6:600),zot(e)&&(e=null!=d.foregroundColor?d.foregroundColor:"white"),zot(t)&&(t=null!=d.backgroundColor?d.backgroundColor:"orange"),zot(o)&&(o=null!=d.corner?d.corner:16),zot(n)&&(n=null!=d.shadowColor?d.shadowColor:"rgba(0,0,0,.3)"),zot(r)&&(r=null!=d.shadowBlur?d.shadowBlur:14),zot(s)&&(s=null!=d.fadeTime?d.fadeTime:0);this.setBounds(-52,-20,104,40);var g,p=this,f=this.display=new Ao.Shape({style:!1});this.addChild(f),f.setBounds(0,0,104,40),f.regX=52,f.regY=20;var m=f.graphics;m.f(t);c=o;Array.isArray(c)||(c=[o,o,o,o]),m.rc(0,0,104,40,c[0],c[1],c[2],c[3]),-1!=n&&0<r&&(f.shadow=new createjs.Shadow(n,3,3,r)),f.on("click",function(e){e.stopImmediatePropagation()});var z,y=new Ao.Container({style:!1});this.addChild(y);for(var b,v=0;v<3;v++)(z=new createjs.Shape).graphics.f(e).dc(0,0,12),z.x=32*(v-1),y.addChild(z),z.cache(-12,-12,24,24),z.alpha=0;this.hide=function(){function e(){var e;p.parent&&p.parent.removeChild(p),(g=p.stage)&&g.update(),p.zimAccessibility&&((e=p.zimAccessibility).resize(p),(b||p.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("Waiter has finished.")},50))}return 0<s?p.animate({obj:{alpha:0},time:s,call:e}):e(),p.toggled=!1,p};var w=[];this.show=function(){var e,t="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(l)){if(!WW.zdf)return void zogy(t);l=WW.zdf.stage}else{if(!l.getBounds)return void zogy(t);if(zot(l.stage))return void zogy("zim display - Waiter(): The container must have a stage property")}for(var o,n=0,r=a*("s"==h?1e3:1),i=0;i<y.numChildren;i++)y&&w.push(setTimeout(function(){e=y.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},r/3/2).wait(r/3).to({alpha:0},r/3).wait(r-r/3-r/3/2),n++},i*r/3));return p.ticker=createjs.Ticker.on("tick",function(){l.stage.update()}),p.x=l.getBounds().width/2,p.y=l.getBounds().height/2,l.addChild(p),0<s&&(p.alpha=0,p.animate({alpha:1},s)),p.zimAccessibility&&(o=p.zimAccessibility,setTimeout(function(){o.activatedObject&&(b=o.activatedObject.zimTabTag)},50),o.resize(p),o.talk(p.zimTabTag.getAttribute("aria-label"))),p.toggled=!0,p},!(p.toggle=function(e){return!0!==e&&(!1===e||p.parent)?p.hide():p.show(),p})!==i&&Ao.styleTransforms(this,d),this.clone=function(){return p.cloneProps(new Ao.Waiter(l,a,e,t,o,n,r,s,i,this.group,u))},this.dispose=function(e,t,o){p.ticker&&createjs.Ticker.off("tick",p.ticker),createjs.Tween.removeTweens(p),p.removeFrom();for(var n=0;n<y.numChildren;n++){var r=y.getChildAt(n);clearInterval(w[n]),createjs.Tween.removeTweens(r)}return o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.Waiter,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.ProgressBar=function(t,o,n,r,i,l,a,e,s,c,u,d,h,g,p,f,m,z,y,b,v){if(w=zob(Ao.ProgressBar,arguments,"barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, style, group, inherit",this))return w;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=b;var w=!1===y?{}:Ao.getStyle(this.type,this.group,v);zot(o)&&(o=null!=w.foregroundColor?w.foregroundColor:"#acd241"),zot(n)&&(n=null!=w.backgroundColor?w.backgroundColor:"#444"),zot(r)&&(r=null!=w.borderColor?w.borderColor:n),zot(i)&&(i=null!=w.borderWidth?w.borderWidth:null),zot(s)&&(s=null!=w.labelPosition?w.labelPosition:"bottom"),zot(t)&&(t=null!=w.barType?w.barType:"circle"),zot(l)&&(l=null!=w.padding?w.padding:"circle"==t?2:-.5),zot(u)&&(u=null!=w.corner?w.corner:15),zot(d)&&(d=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=w.shadowBlur?w.shadowBlur:14),zot(g)&&(g=null!=w.backing?w.backing.clone():null),zot(f)&&(f=null==w.fastClose||w.fastClose),r<0||i<0?r=i=null:null!=r&&null==i&&(i="circle"==t?10:2);var C=Po(p);zot(p)&&(p=null!=w.delay?w.delay:"s"==C?.1:100),zot(z)&&(z=null==w.autoHide||w.autoHide),zot(a)&&(a=null!=w.label?w.label:null),zot(e)&&(e=null!=w.color?w.color:o),"string"!=typeof a&&"number"!=typeof a||(a=new Ao.Label({text:a,color:e,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!zot(c)&&zot(a)&&(a=new Ao.Label("")),this.label=a;var x,k,T,A,P=30,B=this,E=0;function I(e){var t,o;return B.backing?(t=B.getChildIndex(B.backing),B.removeChild(B.backing)):t=B.numChildren,B.border&&B.removeChild(B.border),zot(e)||"Pattern"!=e.type?e=B.backing=(zot(e)?new Ao.Rectangle(x,P,n,r,i,u,null,null,null,!1):g).addTo(B,t):(o=e,((e=B.backing=new Ao.Rectangle(x,P,n,null,null,u,null,null,null,!1).addTo(B,t)).pattern=o).center(e),o.setMask(e.shape),i&&(B.border=new Ao.Rectangle(x,P,"rgba(0,0,0,0)",r,i,u,null,null,null,!1).addTo(B,t+1))),e}function S(e){"circle"==t?k.graphics.c().mt(0,0).s(o).ss(i-2*l+.5).a(0,0,x,0,360*e/100*Math.PI/180):(T.sca(e/100,1),k.setMask(T)),zot(c)||(a.text=a.startText+" "+Math.min(Math.round(e),100)+"%"),z&&f&&100<=Math.round(e)&&(B.timeOut=setTimeout(function(){B.hide()},200)),!B.dispatched&&100<=Math.round(e)&&(B.dispatchEvent("complete"),B.dispatched=!0,setTimeout(function(){B&&(B.dispatched=!1)},100)),B.stage&&B.stage.update()}B.visible=!1,setTimeout(function(){B.visible=!0,B.stage&&B.stage.update()},p),"circle"==t?(x=20,g=this.backing=new Ao.Circle(x,"rgba(0,0,0,0)",n,i,null,null,null,null,!1).addTo(B),k=this.bar=new Ao.Shape({style:!1}).addTo(B).loc(g.x,g.y).rot(-90)):(x=200,-1!=d&&0<h&&(new Ao.Rectangle(x-2,P-2,n,null,null,u,null,null,null,!1).addTo(this).shadow=new createjs.Shadow(d,3,3,h)),g=I(g),b=u,Array.isArray(b)||(b=[u,u,u,u]),W=1.2*(l+i/2),k=this.bar=new Ao.Rectangle(x-1.8*(l+i/2),P-1.8*(l+i/2),o,null,null,[b[0]-W,b[1]-W,b[2]-W,b[3]-W],null,null,null,!1).center(this),T=this.mask=new Ao.Rectangle(x-1.8*(l+i/2),P-1.8*(l+i/2),null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1),k.setMask(T)),B.setBacking=function(e){I(e),B.stage&&B.stage.update()},g.on("click",function(e){e.stopImmediatePropagation()}),zot(a)||(a.scaleX=a.scaleY=.8,a.startText=a.text,zot(c)||(a.text=a.startText+"  0%"),a.center(B),"above"==s?a.y-=60:a.y+=60,a.alpha=.8),this.hide=function(){var e,t=B.stage;return B.parent&&B.parent.removeChild(B),"Pattern"==B.backing.type&&B.backing.pauseInterval&&B.backing.pauseInterval(),t&&t.update(),B.zimAccessibility&&((e=B.zimAccessibility).resize(B),(A||B.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("Progress Bar has finished.")},50)),B.toggled=!1,B},this.show=function(){var e,t="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(m)){if(!WW.zdf)return void zogy(t);m=WW.zdf.stage}else{if(!m.getBounds)return void zogy(t);if(zot(m.stage))return void zogy("zim display - Waiter(): The container must have a stage property")}return B.timeOut&&clearTimeout(B.timeOut),S(0),B.zimActiveLoader&&B.zimActiveLoader.on("progress",function(e){S(E=100*e.progress)}),B.center(m),"Pattern"==B.backing.type&&B.backing.pauseInterval&&B.backing.pauseInterval(!1),B.zimAccessibility&&(e=B.zimAccessibility,setTimeout(function(){e.activatedObject&&(A=e.activatedObject.zimTabTag)},50),e.resize(B),e.talk(B.zimTabTag.getAttribute("aria-label"))),B.toggled=!0,B},B.toggle=function(e){return!0!==e&&(!1===e||B.parent)?B.hide():B.show(),B},B.run=function(e,t){zot(t)||(z=t),zot(e)&&(e="s"==C?3:3e3),Bo(e,C);var o=e*("s"==C?1e3:1);B.runInterval&&clearInterval(B.runInterval),B.percent=0;var n=Date.now();return B.runInterval=setInterval(function(){B.percent=(Date.now()-n)/o*100,100<=B.percent&&(B.percent=100,clearInterval(B.runInterval))},30),B},B.dispatched=!1,Object.defineProperty(B,"percent",{get:function(){return E},set:function(e){S(E=e)}});var W=B.getBounds();B.setBounds(W.x-5,W.y-5,W.width+10,W.height+10),!1!==y&&Ao.styleTransforms(this,w),this.clone=function(){return B.cloneProps(new Ao.ProgressBar(t,o,n,r,i,l,a,e,s,c,u,d,h,g,p,f,m,z,y,this.group,v))},this.dispose=function(e,t,o){return"Pattern"==B.backing.type&&B.backing.clearInterval&&B.backing.clearInterval(),B.runInterval&&clearInterval(B.runInterval),o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.ProgressBar,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Indicator=function(e,t,r,i,l,o,n,a,s,c,u,d,h,g,p,f,m,z,y,b,v){if(w=zob(Ao.Indicator,arguments,"width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",this))return w;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=b;var w=!1===y?{}:Ao.getStyle(this.type,this.group,v);zot(e)&&(e=null!=w.width?w.width:300),zot(t)&&(t=null!=w.height?w.height:50),zot(r)&&(r=null!=w.num?w.num:6),zot(c)&&(c=null!=w.indicatorType?w.indicatorType:"dot"),zot(i)&&(i=null!=w.foregroundColor?w.foregroundColor:"star"==c?Ao.yellow:"heart"==c?Ao.red:"#f58e25"),zot(l)&&(l=null!=w.backgroundColor?w.backgroundColor:"#666"),l<0&&(l=null!=w.backgroundColor?w.backgroundColor:"rgba(0,0,0,.01)"),zot(o)&&(o=null!=w.borderColor?w.borderColor:null),zot(n)&&(n=null!=w.borderWidth?w.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(a)&&(a=null!=w.backdropColor?w.backdropColor:-1),zot(s)&&(s=null!=w.corner?w.corner:0),zot(u)&&(u=null!=w.fill&&w.fill),zot(d)&&(d=null!=w.scale?w.scale:1),zot(h)&&(h=null!=w.lightScale?w.lightScale:1),zot(g)&&(g=null!=w.interactive&&w.interactive),zot(p)&&(p=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=w.shadowBlur?w.shadowBlur:5),zot(z)&&(z=null!=w.backgroundAlpha?w.backgroundAlpha:.2);var C,x=(zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",k=this;this.lights=[],-1!=a&&(b=k.backdrop=new Ao.Rectangle(e,t,a,o,n,s,null,null,null,!1),this.addChild(b));var T,A=this.lightsContainer=new Ao.Container({style:!1});this.addChild(A);var P=.5*t,B=e/(r+1),E=new createjs.Shape,I=!1;"square"==c||"box"==c||"Emoji"==c.type?E.graphics.f("black").dr(-B/2/h+P/2,-t/2+P/2,B/h,t):E.graphics.f("black").dr(-B/2/h,-t/2,B/h,t);for(var S=0;S<r;S++)"square"==c||"box"==c?((T=new Ao.Rectangle(P,P,l,o,n,null,null,null,null,!1)).regX=T.width/2,T.regY=T.height/2):"star"==c?T=new Ao.Poly(.6*P,5,.5,l,o,n,null,null,!1):"heart"==c?T=new Ao.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:l,interactive:!1}).transformPoints("scale",.15):"Emoji"==c.type?(I=!0,(T=c.clone().reg("center","center")).myCache=!1):T=new Ao.Circle(P/2,l,o,n,null,null,null,null,!1),this.lights.push(T),T.znum=S,T.scaleX=T.scaleY=h,T.hitArea=E,T.x=B+B*S,T.y=t/2,A.addChild(T);function W(e){var t;r<=e&&(e=-1);for(var o=0;o<r;o++){t=u&&o<e?i:l,o==e&&(t=i);var n=A.getChildAt(o);I&&(n.alpha=t==i?1:z),n.color=t}k.zimAccessibility&&k.zimAccessibility.changeTitle(k),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!k.stage||k.stage.update()}A.setBounds(0,0,e,t),A.regX=A.x=e/2,A.regY=A.y=t/2,this.addChild(A),-1!=p&&0<f&&(A.shadow=new createjs.Shadow(p,2,2,f)),g&&(A.cursor="pointer",k.lightsEvent=A.on(x,function(e){if(C==e.target.znum){if(0<C)return;if(0==C)return W(C=-1),void k.dispatchEvent("change")}W(C=e.target.znum),k.dispatchEvent("change")})),A.scaleX=A.scaleY=d,Object.defineProperty(this,"selectedIndex",{get:function(){return C},set:function(e){C=Math.floor(e),W(C=Ao.constrain(C,-1,r-1))}}),Object.defineProperty(this,"num",{get:function(){return r},set:function(){zon&&zogy("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){rt(k,e)}}),zot(m)&&(m=null!=w.selectedIndex?w.selectedIndex:0),k.selectedIndex=m,!1!==y&&Ao.styleTransforms(this,w),this.dispose=function(e,t,o){o||(k.lightsEvent&&A.off(x,k.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return k.cloneProps(new Ao.Indicator(e,t,r,i,l,o,n,a,s,c,u,d,h,g,p,f,m,z,y,this.group,v))}},Ao.extend(Ao.Indicator,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.TextInput=function(o,t,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,e,j,L,_,D,Y,X){if(R=zob(Ao.TextInput,arguments,"width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, multiline, wrap, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, number, inputType, rtl, uppercase, style, group, inherit",this))return R;z_d("54.2"),this.group=Y;var R=!1===D?{}:Ao.getStyle("TextInput",this.group,X);zot(i)&&(i=null!=R.size?R.size:36),!zot(w)&&"ignore"!=w||(w=null!=R.padding&&"ignore"!=w?R.padding:5),zot(C)&&(C=null!=R.paddingHorizontal?R.paddingHorizontal:w),zot(x)&&(x=null!=R.paddingVertical?R.paddingVertical:w),zot(o)&&(o=null!=R.width?R.width:300),zot(t)&&(t=null!=R.height?R.height:i+2*x),zot(n)&&(n=null!=R.placeholder?R.placeholder:null),zot(r)&&(r=null!=R.text?R.text:""),zot(l)&&(l=null!=R.font?R.font:"arial"),zot(a)&&(a=null!=R.color?R.color:Ao.dark),zot(s)&&(s=null!=R.backgroundColor?R.backgroundColor:Ao.lighter),zot(c)&&(c=null!=R.borderColor?R.borderColor:null),zot(u)&&(u=null!=R.borderWidth?R.borderWidth:null);var H=function(){return arguments}(o,t,n,r,a,s,c);o=Ao.Pick.choose(o),t=Ao.Pick.choose(t),n=Ao.Pick.choose(n),r=Ao.Pick.choose(r),a=Ao.Pick.choose(a),s=Ao.Pick.choose(s),c=Ao.Pick.choose(c),zot(g)&&(g=null!=R.selectionColor?R.selectionColor:a),zot(p)&&(p=null!=R.selectionAlpha?R.selectionAlpha:.2),zot(f)&&(f=null!=R.cursorColor?R.cursorColor:a),zot(m)&&(m=null!=R.cursorSpeed?R.cursorSpeed:.5),zot(z)&&(z=null!=R.shadowColor?R.shadowColor:"rgba(0,0,0,.3)"),zot(y)&&(y=null!=R.shadowBlur?R.shadowBlur:20),zot(b)&&(b=null!=R.align?R.align:"left"),zot(v)&&(v=null!=R.corner?R.corner:0),zot(k)&&(k=null!=R.shiftHorizontal?R.shiftHorizontal:0),zot(h)&&(h=null!=R.password&&R.password),zot(T)&&(T=null!=R.shiftVertical?R.shiftVertical:h?.25*i:0),zot(d)&&(d=null!=R.maxLength?R.maxLength:"center"==b?1.8*Math.floor(o/i):null),zot(A)&&(A=null!=R.multiline&&R.multiline),zot(P)&&(P=null!=R.wrap&&R.wrap),zot(B)&&(B=null!=R.scrollBarActive&&R.scrollBarActive),zot(E)&&(E=null!=R.scrollBarDrag&&R.scrollBarDrag),zot(I)&&(I=null!=R.scrollBarColor?R.scrollBarColor:c),zot(S)&&(S=null!=R.scrollBarAlpha?R.scrollBarAlpha:.3),zot(W)&&(W=null==R.scrollBarFade||R.scrollBarFade),zot(M)&&(M=null==R.scrollBarH||R.scrollBarH),zot(O)&&(O=null==R.scrollBarV||R.scrollBarV),e&&zot(j)&&(j="number"),zot(j)&&(j=null!=R.inputType?R.inputType:"text"),!0===j&&(j="number"),E&&(W=null!=R.scrollBarFade&&R.scrollBarFade),zot(L)&&(L=null!=R.rtl?R.rtl:"rtl"==WW.DIR||"rtl"==Ao.DIR?"rtl":null),zot(_)&&(_=null!=R.uppercase?R.uppercase:null),_&&(r=r&&r.toUpperCase(),n=n&&n.toUpperCase()),this.zimWindow_constructor(o,t,null,s,c,u,w,v,!1,B,E,I,S,W,M,O,!1,null,!1,!0,z,y,C,x,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,D,Y,Ao.copy(R)),this.type="TextInput";var F=this;this.placeholderLabel=new Ao.Label({text:n||"",size:i,color:a,font:l,shiftHorizontal:k,shiftVertical:T,valign:"top"}).alp(.5),""==r&&this.add(this.placeholderLabel);e=new Ao.Rectangle({width:o-2*w,height:t-2*w,color:Ao.clear,style:!1}).center(this);this.cursor="text";var N=this.label=new Ao.TextInput.LabelInput(r,i,d,h,g,p,f,m,l,a,null,null,null,b,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,k,T,null,null,null,null,j,L,_,D,Y,X);this.add(N),N.setMask(e),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,"right"==b?(N.x=o-C,this.placeholderLabel.x=o-this.placeholderLabel.width-C):"center"==b&&(N.x=o/2,this.placeholderLabel.x=(o-this.placeholderLabel.width)/2);e=new Ao.Rectangle({width:w,height:t,color:Ao.clear,style:!1}).addTo(this).expand(0);e.on("mousedown",function(e){N.onMousedown(e),e.stopImmediatePropagation()}),e.on("pressmove",function(e){N.onPressmove(e),e.stopImmediatePropagation()}),e.on("dblclick",function(e){N.onDblclick(e),e.stopImmediatePropagation()});e=new Ao.Rectangle({width:w,height:t,color:Ao.clear,style:!1}).pos(0,0,Ao.RIGHT,Ao.TOP,this).expand(0);e.on("mousedown",function(e){N.onMousedown(e),e.stopImmediatePropagation()}),e.on("pressmove",function(e){N.onPressmove(e),e.stopImmediatePropagation()}),e.on("dblclick",function(e){N.onDblclick(e),e.stopImmediatePropagation()});var V="";this.on("mousedown",function(e){N.onMousedown(e),V=N.text}),this.on("pressmove",function(e){N.onPressmove(e),e.stopImmediatePropagation()}),this.on("dblclick",function(e){N.onDblclick(e),e.stopImmediatePropagation()}),this.added(function(e){e.on("stagemousedown",function(e){F.hitTestPoint(e.stageX,e.stageY)||(N.focus=!1,N.text!=V&&F.dispatchEvent("change"),V=N.text)})}),this.label.on("focus",function(){F.dispatchEvent("focus")}),this.label.on("blur",function(){F.dispatchEvent("blur")}),this.label.on("input",function(){""!=N.text&&F.placeholderLabel.parent&&(F.placeholderLabel.removeFrom(),F.stage&&F.stage.update()),""!=N.text||F.placeholderLabel.parent||(F.add(F.placeholderLabel),F.stage&&F.stage.update()),F.dispatchEvent("input")}),this.label.on("keydown",function(){F.dispatchEvent("keydown")}),this.label.on("blinker",function(){var e=N.x+N.blinker.x,t=Ao.constrain(e,C,o-C-N.blinker.width);e!=t&&(N.x-=e-t),F.stage&&F.stage.update()}),Object.defineProperty(F,"text",{get:function(){return N.hiddenInput.value},set:function(e){N.setText(e),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()}}),Object.defineProperty(F,"focus",{get:function(){return N.focus},set:function(e){N.focus=e}}),Object.defineProperty(F,"color",{get:function(){return N.color},set:function(e){N.color=latestColor=e,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()}}),Object.defineProperty(F,"size",{get:function(){return N.size},set:function(e){N.size=e,N.hiddenInput.style.fontSize=e+"px",Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()}}),Object.defineProperty(F,"align",{get:function(){return N.align},set:function(e){b=N.align=e,N.x="right"==b?o-N.width:"center"==b?o/2:0,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()}}),Object.defineProperty(F,"font",{get:function(){return N.font},set:function(e){N.font=e,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()}}),Object.defineProperty(F,"selectionAlpha",{get:function(){return N.selectionAlpha},set:function(e){N.selectionAlpha=e,0!=N.selection.alpha&&(N.selection.alpha=e),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()}}),Ao.styleTransforms(this,R),this.clone=function(e){return F.cloneProps(e||!Ao.isPick(H[0])?o:H[0],e||!Ao.isPick(H[1])?t:H[1],e||!Ao.isPick(H[2])?n:H[2],e||!Ao.isPick(H[3])?r:H[3],i,l,e||!Ao.isPick(H[4])?a:H[4],e||!Ao.isPick(H[5])?s:H[5],e||!Ao.isPick(H[6])?c:H[6],u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,_,D,this.group,X)}},Ao.extend(Ao.TextInput,Ao.Window,"clone","zimWindow",!1),Ao.TextInput.LabelInput=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H){this.zimLabel_constructor(e,t,s,c,null,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,null,O,j,null,L,X,R,H),this.type="LabelInput",zot(c)&&(c=Ao.dark),zot(r)&&(r=c),zot(i)&&(i=.2),this.selectionAlpha=i,zot(l)&&(l=c),zot(a)&&(a=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.value=e,"text"==_&&n&&(_="password"),"number"==(this.hiddenInput.type=_)&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),0<o&&(this.hiddenInput.maxLength=o),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(F=this.stage.frame),F.zil&&WW.removeEventListener("keydown",F.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(F=this.stage.frame),F.zil&&WW.addEventListener("keydown",F.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=_,this.dispatchEvent("blur")},this.onInput=function(){Y&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var e=this.hiddenInput.value;"number"==_&&(e=e.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=e),this.text="password"==this.hiddenInput.type?e.replace(/./g,"*"):e,this.measureText(),this.positionBlinkerAndSelection(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var F,N=this;this.onKeydown=function(e){this.blinker.replayTween(),setTimeout(function(){N.positionBlinkerAndSelection.call(N),N.dispatchEvent("keydown")},10)},this.onMousedown=function(e){var t=this.text.length,e=this.eventPositionGlobalToLocal(e);this.focus||(this.hiddenInput.focus(),"number"!=_&&"email"!=_||(this.hiddenInput.type="text"));e=this.mapPointToIndex(e);D?this.hiddenInput.setSelectionRange(t-e,t-e):this.hiddenInput.setSelectionRange(e,e),this.positionBlinkerAndSelection()},this.onPressmove=function(e){var t=this.text.length;this.focus||this.hiddenInput.focus();e=this.eventPositionGlobalToLocal(e),e=D?t-this.mapPointToIndex(e):this.mapPointToIndex(e);this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=e?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,e,D?"backward":"forward"):this.hiddenInput.setSelectionRange(e,this.hiddenInput.selectionEnd,D?"forward":"backward"):this.hiddenInput.selectionDirection===(D?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,e,D?"backward":"forward"):this.hiddenInput.setSelectionRange(e,this.hiddenInput.selectionEnd,D?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var e,t,o,n,r=this.text.length;this.focus&&(e=this.backing||this.background?this.paddingHorizontal:0,t=this.backing||this.background?this.paddingVertical:0,this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd?(D?(n=this.textWidthArray[r-this.hiddenInput.selectionStart],o=this.textWidthArray[r-this.hiddenInput.selectionEnd],this.selection.widthOnly=o-n,this.selection.pos(o+e-1+S,t+W)):(n=this.textWidthArray[this.hiddenInput.selectionStart],o=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=o-n,this.selection.pos(n+e-1+S,t+W)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)):this.selection.alp(0),this.blinker.heightOnly=this.textHeight,n=(n="backward"===this.hiddenInput.selectionDirection?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd)||0,D&&(n=r-n),this.blinker.pos(this.textWidthArray[n]+e-1+("right"==g&&""==this.text?this.width:"center"==g&&""==this.text?this.width/2:0)+S,t+W),this.dispatchEvent("blinker")),this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(e){e=this.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY);return e.x-="right"==g?this.label.x-this.width:"center"==g?(this.label.x-this.width)/2:this.label.x,e.y-=this.label.y,e},this.mapPointToIndex=function(e){for(var t=this.textWidthArray.length-1,o=0;o<this.textWidthArray.length-1;o++){var n=(this.textWidthArray[o]+this.textWidthArray[o+1])/2;if(e.x<=n){t=o;break}}return t},this.measureText=function(){var e=this.label.clone(),t=this.text;D&&(t=t.split("").reverse().join(""));for(var o=0;o<t.length&&o<this.previousMeasuredText.length&&t[o]===this.previousMeasuredText[o];)o++;for(this.textWidthArray=this.textWidthArray.slice(0,o+1),o++;o<=t.length;o++)e.text=t.slice(0,o),this.textWidthArray.push(e.getMeasuredWidth());this.previousMeasuredText=t,this.textHeight=e.getMeasuredLineHeight()},this.setText=function(e){Y&&(e=e.toUpperCase()),this.hiddenInput.value=e,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===N.hiddenInput},set:function(e){!0===e?N.hiddenInput.focus():N.hiddenInput.blur()}}),this.added(function(e){F=e.frame,N.hiddenInput.addEventListener("focus",N.onFocus.bind(N)),N.hiddenInput.addEventListener("blur",N.onBlur.bind(N))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cursor="text",this.blinker=new Ao.Rectangle({width:2,height:1,color:l,style:!1}).animate({obj:{alpha:0},wait:a,time:.1,rewind:!0,rewindWait:a,loop:!0,loopWait:a}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new Ao.Rectangle({width:1,height:1,color:r,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},Ao.extend(Ao.TextInput.LabelInput,Ao.Label,null,"zimLabel",!1),Ao.List=function(i,o,n,e,r,t,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he,ge,pe,fe,me,ze){if(ve=zob(Ao.List,arguments,"width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, spacing, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideDamp, slideSnap, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, style, group, inherit",this))return ve;z_d("60.5"),this.group=me;var ye=!1===fe?{}:Ao.getStyle("List",this.group,ze);zot(i)&&(i=null!=ye.width?ye.width:300);var be=o;zot(o)&&(o=null!=ye.height?ye.height:zot(ie)?200:200+ie.height),zot(n)&&(n=null!=ye.list?ye.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==n.length&&(n=["%-&"]),this.originalList=n,zot(e)&&(e=null!=ye.viewNum?ye.viewNum:5),zot(r)&&(r=null==ye.vertical||ye.vertical),zot(t)&&(t=null==ye.currentSelected||ye.currentSelected);var ve=!zot(l)||!zot(s);zot(le)&&(le=null!=ye.checkBox&&ye.checkBox),zot(l)&&(l=null!=ye.align?ye.align:le?"left":"center"),zot(a)&&(a=null!=ye.valign?ye.valign:"center"),zot(s)&&(s=null!=ye.labelAlign?ye.labelAlign:l),zot(c)&&(c=null!=ye.labelValign?ye.labelValign:a),zot(g)&&(g=null!=ye.indent?ye.indent:le?0:10),zot(u)&&(u=null!=ye.labelIndent?ye.labelIndent:g),zot(d)&&(d=null!=ye.labelIndentHorizontal?ye.labelIndentHorizontal:u),zot(h)&&(h=null!=ye.labelIndentVertical?ye.labelIndentVertical:u),zot(p)&&(p=null!=ye.spacing?ye.spacing:2),zot(b)&&(b=null!=ye.backdropColor?ye.backdropColor:"#333"),zot(f)&&(f=null!=ye.backgroundColor?ye.backgroundColor:"#777"),zot(m)&&(m=null!=ye.rollBackgroundColor?ye.rollBackgroundColor:"#555"),zot(z)&&(z=null!=ye.selectedBackgroundColor?ye.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=ye.selectedRollBackgroundColor?ye.selectedRollBackgroundColor:"#555"),zot(v)&&(v=null!=ye.color?ye.color:"white"),zot(w)&&(w=null!=ye.rollColor?ye.rollColor:v),zot(C)&&(C=null!=ye.selectedColor?ye.selectedColor:v),zot(x)&&(x=null!=ye.selectedRollColor?ye.selectedRollColor:w),zot(b)&&(b=null!=ye.backdropColor?ye.backdropColor:b);var we=k,Ce=T;zot(k)&&(k=null!=ye.borderColor?ye.borderColor:"#999"),zot(T)&&(T=null!=ye.borderWidth?ye.borderWidth:1),zot(A)&&(A=null!=ye.padding?ye.padding:p),zot(P)&&(P=null!=ye.corner?ye.corner:0),zot(B)&&(B=null==ye.swipe||ye.swipe),zot(E)&&(E=null==ye.scrollBarActive||ye.scrollBarActive),zot(I)&&(I=null==ye.scrollBarDrag||ye.scrollBarDrag),zot(S)&&(S=null!=ye.scrollBarColor?ye.scrollBarColor:k),zot(W)&&(W=null!=ye.scrollBarAlpha?ye.scrollBarAlpha:.3),zot(M)&&(M=null==ye.scrollBarFade||ye.scrollBarFade),zot(O)&&(O=null!=ye.scrollBarH?ye.scrollBarH:!r),zot(j)&&(j=null!=ye.scrollBarV?ye.scrollBarV:r),I&&(M=null!=ye.scrollBarFade&&ye.scrollBarFade),zot(L)&&(L=null==ye.scrollBarOverlay||ye.scrollBarOverlay),zot(_)&&(_=null==ye.slide||ye.slide),zot(D)&&(D=null!=ye.slideDamp?ye.slideDamp:.6),zot(Y)&&(Y=null!=ye.slideSnap?ye.slideSnap:r?"vertical":"horizontal"),zot(X)&&(X=null!=ye.shadowColor?ye.shadowColor:"rgba(0,0,0,.3)"),zot(R)&&(R=null!=ye.shadowBlur?ye.shadowBlur:20),zot(F)&&(F=null!=ye.paddingVertical?ye.paddingVertical:A),zot(H)&&(H=null!=ye.paddingHorizontal?ye.paddingHorizontal:A),zot(N)&&(N=null==ye.scrollWheel||ye.scrollWheel),zot(G)&&(G=null!=ye.titleBar?ye.titleBar:null),zot(q)&&(q=null!=ye.titleBarColor?ye.titleBarColor:null),zot(U)&&(U=null!=ye.titleBarBackgroundColor?ye.titleBarBackgroundColor:null),zot(Q)&&(Q=null!=ye.titleBarHeight?ye.titleBarHeight:35),zot(Z)&&(Z=null!=ye.draggable?ye.draggable:null),zot(K)&&(K=null!=ye.boundary?ye.boundary:null),zot(J)&&(J=null!=ye.onTop?ye.onTop:null),zot($)&&($=null!=ye.close?ye.close:null),zot(ee)&&(ee=null!=ye.closeColor?ye.closeColor:null),zot(te)&&(te=null!=ye.collapse?ye.collapse:null),zot(oe)&&(oe=null!=ye.collapseColor?ye.collapseColor:null),zot(re)&&(re=null!=ye.excludeCustomTap&&ye.excludeCustomTap),zot(le)&&(le=null!=ye.checkBox&&ye.checkBox),zot(ae)&&(ae=null!=ye.pulldown&&ye.pulldown),zot(he)&&(he=null!=ye.pulldownToggle&&ye.pulldownToggle),zot(de)&&(de=null!=ye.noScale&&ye.noScale),zot(se)&&(se=null!=ye.clone&&ye.clone),zot(ge)&&(ge=null==ye.optimize||ye.optimize),zot(pe)&&(pe=null!=ye.keyEnabled?ye.keyEnabled:null),!1===G&&(G=null),this.vertical=r;var xe=this,ke=o;WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Ao.DIR?"start"==l?l="right":"end"==l&&(l="left"):"start"==l?l="left":"end"==l&&(l="right"),le&&Ao.loop(n,function(e,t){n[t]=Ao.List.checkItem(e,null,i,"left",10,10,p,v,w,C,x,f,m,z,y)});var Te,Ae,Pe,Be,Ee,Ie,Se,We,Me,Oe=Po();n.constructor=={}.constructor&&(Ae=zot(n.shade)?zot(ye.shade)?.2:ye.shade:n.shade,Pe=zot(n.dim)?zot(ye.dim)?.1:ye.dim:n.dim,Be=zot(n.shift)?zot(ye.shift)?15:ye.shift:n.shift,Ee=zot(n.bloom)?!zot(ye.bloom)&&ye.bloom:n.bloom,Ie=zot(n.whither)?!zot(ye.whither)&&ye.whither:n.whither,Se=zot(n.open)?!zot(ye.open)&&ye.open:n.open,"arrows"==(We=(We=zot(n.expander)?zot(ye.expander)?"plus":ye.expander:n.expander).toLowerCase())&&(We="arrow"),"none"!=We&&"arrow"!=We&&(We="plus"),!0===Ee&&(Ee="s"==Oe?.01:10),!0===Ie&&(Ie="s"==Oe?.01:10),Bo(Ee),Bo(Ie),!0===Be&&(Be=15),!0===Ae&&(Ae=.2),!0===Pe&&(Pe=.1),Me=zot(n.subStyles)?zot(ye.subStyles)?{}:ye.subStyles:n.subStyles,zot(n.menu)||(n=n.menu),Te=xe.tree=new Ao.Hierarchy(n),n=Te.getLinearList(),ve||(l=s="left")),ae&&(e=(zot(Te)?n:Te).length,zot(be)&&(o=e*i/620*100+(e+1)*p+(zot(G)?0:Q)),T=0,z=f,b=Ao.clear,B=!1);var je,Le=0,_e=0;Ao.loop(n,function(e){"ListItem"==e.type&&(e.width=i-2*p),de&&(e.width&&(Le+=e.width),e.height&&(_e+=e.height))}),Le&&(Le+=p*(n.length-1)),_e&&(_e+=p*(n.length-1)),this.align=l,this.valign=a,this.indent=g,zot(ie)||(o-=ie.height,((ie.list=xe).organizer=ie).setButtons(),Q+=ie.height),this.zimWindow_constructor(i,o,null,b,k,T,A,P,B,E,I,S,W,M,O,j,_,D,Y,!0,X,R,H,F,N,V,G,q,U,Q,Z,K,J,$,ee,ce,!1,null,!1,te,oe,ne,ge,fe,me,Ao.copy(ye)),this.type="List",zot(G)||(this.titleBarLabel.pos(null,Q-30,null,!0),zot(Q)&&(Q=30),o-=Q),zot(ie)||ie.addTo(xe).loc(0,-ie.height),Le&&de?(xe.itemWidth=r?i-2*H-(!E||L?0:6):Le/n.length,xe.itemHeight=r?_e/n.length:o-2*F-(!E||L?0:6)):(xe.itemWidth=r?i-2*H-(!E||L?0:6):(i-2*H)/e,xe.itemHeight=r?(o-2*F)/e:o-2*F-(!E||L?0:6));var De,Ye,Xe,Re,He,Fe=Ao.copy(ye);function Ne(e,t,o){e.listZID=t,e.label&&(Ae&&new Ao.Rectangle(Be*(o.level+1),e.height).alp(Ae).pos(0,0,"right"==xe.align,!1,e),Pe&&new Ao.Rectangle(e.width,e.height).alp((o.level+1)*Pe).addTo(e).bot().ord(1),Be&&"center"!=xe.align&&(e.label.x+=("right"==xe.align?-1:1)*Be*(o.level+1)));t=Te.getData(t);t.obj=e,t.list&&!Ao.isEmpty(t.list)&&(e.expander=new Ao.Label({size:"arrow"==We?22:36,text:t.open?"arrow"==We?"":"-":"arrow"==We?"":"+",align:"center",color:Ao.convertColor(v,"rgba",.6)}).center(e).alp("none"==We?0:.7).pos(15,null,"right"!=xe.align).mov(0,t.open?-3:0))}function Ve(){var n,r,o,t,i,l,a,s;xe.selected.expander&&((n=Te.getData(xe.selected.listZID)).open?(xe.selected.expander&&(xe.selected.expander.text="arrow"==We?"":"+",xe.selected.expander.mov(0,3)),n.open=!1,o=Te.getNextSibling(xe.selected.listZID),t=zot(o)?xe.items.length-1:Ao.loop(xe.items,function(e,t){if(e.listZID==o)return t-1}),Ie?(r=0,xe.enabled=!1,Ao.interval(Ie,function(e){xe.removeAt(1,xe.selectedIndex+t-xe.selectedIndex-r),r++,e.total==e.count+1&&(xe.enabled=!0,xe.dispatchEvent("collapsed"))},t-xe.selectedIndex,!0)):(xe.removeAt(t-xe.selectedIndex,xe.selectedIndex+1),xe.dispatchEvent("collapsed"))):(n.open=!0,xe.selected.expander&&(xe.selected.expander.text="arrow"==We?"":"-",xe.selected.expander.mov(0,-3)),i=Te.getLinearList(n.list),l=Te.getLinearIDs(n.list),n.opened?Array.isArray(i)&&(Ee?(r=0,xe.enabled=!1,Ao.interval(Ee,function(e){xe.addAt(i[r],xe.selectedIndex+1+r),(a=new createjs.Event("bloom")).item=i[r],xe.dispatchEvent(a),e.total==e.count+1&&(xe.enabled=!0,(a=new createjs.Event("expanded")).items=i,xe.dispatchEvent(a)),r++},i.length,!0)):(xe.addAt(i,xe.selectedIndex+1),(a=new createjs.Event("expanded")).items=i,xe.dispatchEvent(a))):(n.opened=!0,zot(s=Me[n.level])&&(s={}),Array.isArray(i)&&(Ee?(r=0,xe.enabled=!1,Ao.interval(Ee,function(e){xe.addAt(i[r],xe.selectedIndex+1+r,{backgroundColor:s.backgroundColor,color:s.color,rollBackgroundColor:s.rollBackgroundColor,rollColor:s.rollColor,selectedBackgroundColor:s.selectedBackgroundColor,selectedColor:s.selectedColor,selectedRollBackgroundColor:s.selectedRollBackgroundColor,selectedRollColor:s.selectedRollColor});var t=l[r],o=xe.items[xe.selectedIndex+1+r];s.borderColor&&(o.borderColor=s.borderColor),Ne(o,t,n),o.label&&(o.label.backgroundColor=Ao.clear),(a=new createjs.Event("bloom")).item=o,xe.dispatchEvent(a),e.total==e.count+1&&(xe.enabled=!0,(a=new createjs.Event("expanded")).items=i,xe.dispatchEvent(a)),r++,xe.stage&&xe.stage.update()},i.length,!0)):(xe.addAt(i,xe.selectedIndex+1,{backgroundColor:s.backgroundColor,color:s.color,rollBackgroundColor:s.rollBackgroundColor,rollColor:s.rollColor,selectedBackgroundColor:s.selectedBackgroundColor,selectedColor:s.selectedColor,selectedRollBackgroundColor:s.selectedRollBackgroundColor,selectedRollColor:s.selectedRollColor}),Ao.loop(l,function(e,t){t=xe.items[xe.selectedIndex+1+t];Ne(t,e,n),t.label&&(t.label.backgroundColor=Ao.clear)}),(a=new createjs.Event("expanded")).items=i,xe.dispatchEvent(a))))))}function Ge(e){if(r){var t=-(xe.itemHeight+p)*e+o/2-xe.itemHeight/2;return(xe.itemHeight+p)*xe.length<o&&(t=0),0<t&&(t=0),(xe.itemHeight+p)*xe.length>o&&t<-xe.tabs.height+o-2*F&&(t=-xe.tabs.height+o-2*F),t}e=-(xe.itemWidth+p)*e+i/2-xe.itemWidth/2;return(xe.itemWidth+p)*xe.length<i&&(e=0),0<e&&(e=0),(xe.itemWidth+p)*xe.length>i&&e<-xe.tabs.width+i-2*H&&(e=-xe.tabs.width+i-2*H),e}delete Fe.borderWidth,delete Fe.borderColor,De=Ao.copy(n,se),je=xe.tabs=new Ao.Tabs({width:r?xe.itemWidth:xe.itemWidth*n.length,height:r?xe.itemHeight*n.length:xe.itemHeight,tabs:De,spacing:p,vertical:r,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,backdropColor:b,currentEnabled:!0,currentSelected:t,align:l,valign:a,labelAlign:s,labelValign:c,labelIndent:u,labelIndentHorizontal:d,labelIndentVertical:h,indent:g,useTap:!0,excludeCustomTap:re,keyWrap:!1,keyEnabled:pe,style:fe,group:me,inherit:Fe}).mov(r?0:H,r?F:0),xe.add(je),Ao.loop(je.labels,function(e){e&&(e.backgroundColor=Ao.clear)}),xe.expandList=function(e){return xe.selectedIndex=e,xe.selected&&Ve(),xe.selected},Te&&(he&&xe.added(function(e){Ye=e,xe.stageToggleEvent=Ye.on("stagemousedown",function(){var e=Ye.getObjectUnderPoint(Ye.frame.mouseX,Ye.frame.mouseY);e&&xe.contains(e)||xe.enabled&&xe.selected&&Te.getData(xe.selected.listZID).open&&Ve()})}),T=Te.getLinearIDs(),Ao.loop(T,function(e,t){xe.tabs.buttons[t].listZID=e}),Ao.loop(xe.tabs.buttons,function(e){var t=Te.getData(e.listZID);Ao.isEmpty(t.list)||(e.expander=new Ao.Label({size:"arrow"==We?22:36,text:"arrow"==We?"":"+",align:"center",color:Ao.convertColor(v,"rgba",.6)}).center(e).alp("none"==We?0:.7).pos(15,null,"right"!=xe.align))}),Xe=Se,xe.toggle=function(e){if(zot(e))e=!Xe;else if(e==Xe)return;xe.selectedIndex=0,Xe=e,Ve()},Object.defineProperty(xe,"toggled",{get:function(){return Xe},set:function(e){Xe!=e&&xe.toggle()}}),xe.tap(Ve)),je.tap(function(e){e.target.selectedIndex!=xe.selectedIndex&&(xe.selectedIndex=je.selectedIndex,xe.dispatchEvent("change"),he&&(xe.selectedIndex=0),e.preventDefault())}),je.on("keychange",function(e){var t;e.target.selectedIndex!=xe.selectedIndex&&(xe.selectedIndex=je.selectedIndex,setTimeout(function(){r?((t=xe.selected.y+xe.scrollY)<0||t>xe.height-xe.selected.height)&&xe.animateTo(xe.selectedIndex,"ms"==Oe?100:.1):((t=xe.selected.x+xe.scrollX)<0||t>xe.width-xe.selected.width)&&xe.animateTo(xe.selectedIndex,"ms"==Oe?100:.1)},100),xe.dispatchEvent("change"))}),this.getItemIndex=function(e){return xe.items.indexOf(e)},this.animateTo=function(e,t){zot(e)&&(e=0),zot(t)&&(t=.05);var o,n=Po(t),e=Ge(xe.selectedIndex=e);return r?(o=Math.abs(xe.scrollY-e)/xe.itemHeight,xe.animate({scrollY:e},o*t/("s"==n?1:1e3))):(o=Math.abs(xe.scrollX-e)/xe.itemWidth,xe.animate({scrollX:e},o*t/("s"==n?1:1e3))),xe},this.addAt=function(t,e,o,n){return zot(t)||(xe.tabs.loop(function(e){e.visible=!0}),"ListItem"==t.type?t.width=i-2*p:Array.isArray(t)&&Ao.loop(t,function(e){"ListItem"==e.type&&(e.width=i-2*p)}),n?Array.isArray(t)?(r=[],Ao.loop(t,function(e){e.clone?r.push(t.clone()):r.push(Ao.copy(t,n))}),xe.tabs.addAt(r,e,o)):t.clone?xe.tabs.addAt(t.clone(),e,o):xe.tabs.addAt(Ao.copy(t,n),e,o):xe.tabs.addAt(t,e,o),xe.update()),xe;var r},this.removeAt=function(e,t){xe.tabs.removeAt(e,t),xe.tabs.loop(function(e){e.visible=!0}),Re=xe.tabs.selectedIndex;t=je.getBounds();return je.setBounds(0,0,t.width,t.height),t.height<o&&(xe.scrollY=0),xe.update(),xe},"%-&"==n[0]&&1==n.length&&xe.removeAt(1,0),this.clear=function(){return xe.tabs.removeAt(xe.length,0),xe.contentContainer.x=0,xe.contentContainer.y=0,xe.update(),xe},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),xe.items[e].checkBox.checked=t,xe.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),xe.items[e].checkBox.checked},this.setChecks=function(t){return Ao.loop(xe.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),xe},Object.defineProperty(xe,"items",{get:function(){return xe.tabs.buttons},set:function(){zon&&zogy("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(xe,"list",{get:function(){return xe.tabs.buttons},set:function(){zon&&zogy("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(xe,"length",{get:function(){return xe.tabs.buttons.length},set:function(){zon&&zogy("List() - length is read only")}}),Object.defineProperty(xe,"selectedIndex",{get:function(){return Re},set:function(e){je.selectedIndex=e,xe.label=je.label,xe.selected=je.selected,Re=e,Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!xe.stage||xe.stage.update()}}),t&&(xe.selectedIndex=0),Object.defineProperty(xe,"selectedIndexPlusPosition",{get:function(){return Re},set:function(e){xe.selectedIndex=e,Re=e,r?xe.scrollY=Ge(e)-2:xe.scrollX=Ge(e),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!xe.stage||xe.stage.update()}}),Object.defineProperty(xe,"text",{get:function(){return xe.label?xe.label.text:null},set:function(e){xe.label&&(xe.label.text=e)}}),Object.defineProperty(xe,"bloom",{get:function(){return Ee},set:function(e){Ee=e}}),Object.defineProperty(xe,"currentValue",{get:function(){return xe.label?xe.label.text:null},set:function(n){var e=Ao.loop(xe.list,function(e,t){var o;e.label&&(o=e.label.text),"Label"==e.type&&(o=e.text);e=new RegExp(n,"i");if(o&&o.match(e))return t});!0!==e&&(xe.selectedIndexPlusPosition=e)}}),Object.defineProperty(xe,"itemDown",{get:function(){return xe.tabs.buttonDown},set:function(){}}),Object.defineProperty(xe,"itemsText",{get:function(){for(var e=[],t=0;t<xe.tabs.buttons.length;t++){var o=xe.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(){zon&&zogy("List() - itemsText is read only")}}),t&&(xe.selectedIndex=0),Object.defineProperty(xe,"checkBoxes",{get:function(){for(var e=[],t=0;t<xe.tabs.buttons.length;t++){var o=xe.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(){zon&&zogy("List() - checkBoxes is read only")}}),Object.defineProperty(xe,"accordionIndex",{get:function(){var e=xe.selected.listZID;return e?Number(e.split("id")[1]):null},set:function(){zon&&zogy("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(e){var o,n;zot(e)||(o=[],Ao.loop(e,function(e){o.push(e)}),n=xe.bloom,xe.bloom=!1,Ao.interval(.01,function(e){var t=xe.items[e.count];t?-1!=o.indexOf(xe.tree.getData(t.listZID).level)&&xe.expandList(e.count):(e.clear(),xe.bloom=n)},null,!0,!1,"s"))},this.openAtNum=function(e){if(!zot(e)){if(!He){var n;He={},function e(t,o){for(n in t)He[n]=o,e(t[n].list,n)}(xe.tree.data);var t,o={};for(t in He){o[t]||(o[t]=[]);for(var r=He[t];r;)o[t].unshift(r),r=He[r];o[t].push(t)}}var i=o["id"+e],l=xe.bloom;xe.bloom=!1,interval(.01,function(e){var t=xe.items[e.count];t?-1!=i.indexOf(t.listZID)&&xe.expandList(e.count):(e.clear(),xe.bloom=l)},null,!0,!1,"s")}},Se&&Ve&&xe.openAtLevel(1e4),zot(ue)&&(ue=null!=ye.selectedIndex?ye.selectedIndex:0),xe.selectedIndex=ue,!1!==fe&&Ao.styleTransforms(this,ye),this.clone=function(){return xe.cloneProps(new Ao.List(i,ke,Ao.copy(xe.originalList,!0),e,r,t,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,we,Ce,A,Ao.copy(P),B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he,ge,pe,fe,this.group,ze))},this.dispose=function(e,t,o){return o||(xe.stageToggleEvent&&Ye.off("stagemousedown",xe.stageToggleEvent),xe.organizer&&xe.organizer.dispose(),this.zimWindow_dispose()),!0}},Ao.extend(Ao.List,Ao.Window,["clone","dispose"],"zimWindow",!1),Ao.List.makeBase=function(e,t,o,n){zot(n)&&(n=Ao.dark),e.backing=new Ao.Rectangle(e.width,e.height,n).center(e),"Label"==t.type?e.label=t:e.label=new Ao.Label(t,null,null,Ao.white),e.text=e.label.text,e.label.center(e).loc(o)},Ao.List.slider=function(e,t,o,n,r,i,l,a,s,c,u,d,h){var g;if(g=zob(Ao.List.slider,arguments,"label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor"))return g;var p=new Ao.Container(620,100);return p.type="ListItem",p.listItem="Slider",zot(s)&&(s=20),zot(c)&&(c=30),zot(u)&&(u=1),zot(d)&&(d=0),Ao.List.makeBase(p,e,s,h),p.slider=new Ao.Slider({inside:!0,barWidth:40,barLength:150,barColor:Ao.blue,min:t,max:o,step:i}).sca(1.5).center(p).mov(20).change(function(){p.stepper.currentValue=d+Math.round(p.slider.currentValue*u),l&&a&&(l[a]=p.slider.currentValue),r&&"function"==typeof r&&r(p.slider.currentValue,p.parent),p.slider.stage&&p.slider.stage.update()}),zot(n)||(p.slider.currentValue=n),p.stepper=new Ao.Stepper({corner:0,arrows:!1,stepperType:"number",min:d+t*u,max:d+o*u,step:i}).sca(.5).center(p).pos(c,null,!0).change(function(){p.slider.currentValue=p.stepper.currentValue/(u||1)-d,l&&a&&(l[a]=p.slider.currentValue),r&&"function"==typeof r&&r(p.slider.currentValue,p.parent),p.stepper.stage&&p.stepper.stage.update()}),zot(n)||(p.stepper.currentValue=d+n*u),p},Ao.List.checkBox=function(e,t,o,n,r,i,l,a){var s;if(s=zob(Ao.List.checkBox,arguments,"label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor"))return s;var c=new Ao.Container(620,100);return c.type="ListItem",c.listItem="CheckBox",zot(i)&&(i=20),zot(l)&&(l=30),Ao.List.makeBase(c,e,i,a),c.checkBox=new Ao.CheckBox({startChecked:t,label:""}).sca(1.2).center(c).pos(256+l,null,!0).change(function(){n&&r&&(n[r]=c.checkBox.checked),o&&"function"==typeof o&&o(c.checkBox.checked,c.parent),c.checkBox.stage&&c.checkBox.stage.update()}),c},Ao.List.colorPicker=function(e,t,o,n,r,i,l,a,s){var c;if(c=zob(Ao.List.colorPicker,arguments,"label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor"))return c;var u=new Ao.Container(620,100);return u.type="ListItem",u.listItem="ColorPicker",zot(l)&&(l=20),zot(a)&&(a=30),Ao.List.makeBase(u,e,l,s),zot(t)&&(t=Ao.pink),u.colorPicker=o||new Ao.ColorPicker({alphaPicker:!1,selectedColor:t}),u.swatch=new Ao.Rectangle(132,66,t,Ao.lighter,5).center(u).pos(270,null,!0).cur(),u.swatch.on("mousedown",function(){u.colorPicker.selectedColor=u.swatch.color,u.colorPicker.show()}),u.colorLabel=new Ao.Label(u.swatch.color.toUpperCase(),40,null,Ao.light).center(u).pos(a,null,!0),u.colorPicker.on("close",function(){var e=u.colorPicker.stage;u.colorPicker.hide(),e&&e.update()}),u.colorPicker.on("change",function(){var e=u.colorPicker.stage;u.swatch.color=u.colorPicker.selectedColor,u.colorLabel.text=u.swatch.color.toUpperCase(),u.colorPicker.hide(),r&&i&&(r[i]=u.colorPicker.selectedColor),n&&"function"==typeof n&&n(u.colorPicker.selectedColor,u.parent),e&&e.update()}),u},Ao.List.checkItem=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m){if(z=zob(Ao.List.checkItem,arguments,"label, size, width, align, paddingHorizontal, paddingVertical, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit"))return z;var z=Ao.getStyle("CheckBox",f,m);zot(t)&&(t=null!=z.size?z.size:20);m=Ao.getStyle("List",f,m);zot(o)&&(o=300),zot(r)&&(r=10),zot(i)&&(i=10),zot(n)&&(n=null!=m.align?m.align:"center"),zot(l)&&(l=null!=m.spacing?m.spacing:2),zot(d)&&(d=null!=m.backgroundColor?m.backgroundColor:"#777"),zot(h)&&(h=null!=m.rollBackgroundColor?m.rollBackgroundColor:"#555"),zot(g)&&(g=null!=m.selectedBackgroundColor?m.selectedBackgroundColor:"#444"),zot(p)&&(p=null!=m.selectedRollBackgroundColor?m.selectedRollBackgroundColor:"#555"),zot(a)&&(a=null!=m.color?m.color:"white"),zot(s)&&(s=null!=m.rollColor?m.rollColor:a),zot(c)&&(c=null!=m.selectedColor?m.selectedColor:a),zot(u)&&(u=null!=m.selectedRollColor?m.selectedRollColor:s);var y=new Ao.Container;return y.type="CheckItem",y.checkBox=new Ao.CheckBox({size:t,label:e,color:a,tap:!0}),y.backing=new Ao.Rectangle(o-2*l,y.checkBox.height+2*i,d).addTo(y),y.checkBox.center(y),"center"!=n&&"middle"!=n&&y.checkBox.pos(r,null,"right"==n),y.backing.tap(function(){y.checkBox.toggle(),y.zimOut()}),y.checkBox.change(function(){y.zimOut()}),y.zimOver=function(){y.backing.color=y.checkBox.checked?p:h,y.checkBox.label.color=y.checkBox.checked?u:s,y.stage&&y.stage.update()},y.zimOut=function(){y.backing.color=y.checkBox.checked?g:d,y.checkBox.label.color=y.checkBox.checked?c:a,y.stage&&y.stage.update()},y.backing.on("mouseover",y.zimOver),y.checkBox.on("mouseover",y.zimOver),y.backing.on("mouseout",y.zimOut),y.checkBox.on("mouseout",y.zimOut),y},Ao.Stepper=function(o,e,n,t,r,i,l,s,a,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L){var _;if(_=zob(Ao.Stepper,arguments,"list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, style, group, inherit",this))return _;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=j;j=!1===O?{}:Ao.getStyle(this.type,this.group,L);zot(o)&&(o=null!=j.list?j.list:[]),zot(e)&&(e=null!=j.width?j.width:200),zot(n)&&(n=null!=j.backgroundColor?j.backgroundColor:"white"),zot(t)&&(t=null!=j.borderColor?j.borderColor:null),zot(r)&&(r=null!=j.borderWidth?j.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(l)&&(l=null!=j.color?j.color:"#555"),zot(i)&&(i=null!=j.label?j.label:""),"string"!=typeof i&&"number"!=typeof i||(i=new Ao.Label({text:i,size:null!=j.size?2*j.size:64,color:l,align:null!=j.align?j.align:"center",valign:null!=j.valign?j.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),zot(s)&&(s=null!=j.vertical&&j.vertical),zot(a)&&(a=null==j.arrows||j.arrows),zot(c)&&(c=null!=j.corner?j.corner:16),zot(u)&&(u=null!=j.shadowColor?j.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=j.shadowBlur?j.shadowBlur:14),zot(h)&&(h=null!=j.continuous&&j.continuous),zot(g)&&(g=null==j.display||j.display),zot(p)&&(p=null==j.press||j.press),zot(f)&&(f=null==j.hold||j.hold);var D=Po(m);zot(m)&&(m=null!=j.holdDelay?j.holdDelay:"s"==D?.4:400),zot(z)&&(z=null!=j.holdSpeed?j.holdSpeed:"s"==D?.2:200),Bo(z,D),zot(y)&&(y=null==j.draggable||j.draggable),(zot(b)||b<=0)&&(b=null!=j.dragSensitivity?j.dragSensitivity:.1),zot(v)&&(v=null!=j.dragRange?j.dragRange:200),zot(w)&&(w=null!=j.stepperType?j.stepperType:0<o.length?"list":"number"),zot(C)&&(C=null!=j.min?j.min:0),zot(x)&&(x=null!=j.max?j.max:10),zot(k)&&(k=null!=j.step?j.step:1),zot(T)&&(T=null!=j.step2?j.step2:k),zot(A)&&T!=k&&"number"==w&&(A=null==j.arrows2||j.arrows2),zot(P)&&(P=null!=j.arrows2Scale?j.arrows2Scale:.5),zot(B)&&(B=null==j.keyEnabled||j.keyEnabled),zot(E)&&(E=null==j.keyArrows||j.keyArrows),zot(I)&&(I=null==j.rightForward||j.rightForward),zot(S)&&(S=null!=j.downForward?j.downForward:"number"!=w);var Y,X=this;n=zik(n);var R,H,F,N=k,V=1;function G(e){e=String(e).split(".")[1];return e=e?e.length:0}"number"==w?(C=Number(C),x=Number(x),isNaN(C)&&(C=0),isNaN(x)&&(x=100),R=x<C?(V=-1,$=x,x=C,C=$,x):C,this.min=C,this.max=x,C<0&&0<x&&(R=0),k=Math.abs(k),H=Math.max(G(k),G(T))):"letter"==w?(o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof C&&(C="A"),"string"!=typeof x&&(x="Z"),C=C.substr(0,1).toUpperCase(),x=x.substr(0,1).toUpperCase(),(ee=o.indexOf(C))<0&&(C="A",ee=0),(te=o.indexOf(x))<0&&(x="Z",te=o.length),te<ee&&(o.reverse(),ee=o.length-1-ee,te=o.length-1-te),o=o.splice(ee,te-ee+1)):w="list";var q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae=0,se=0;function ce(r,i,l,e,t){var a;f&&(0==(oe=e)&&(oe=1),0==(ne=t)&&(ne=1),y||(b=1),e=m*("s"==D?1e3:1),a=t=z*("s"==D?1e3:1),re=new Ao.Proportion(0,v,t,t*b),q=setTimeout(function(){!function n(){U=setTimeout(function(){var e,t,o=r;y&&(e=Math.abs(ae-oe),t=Math.abs(se-ne),s?(i||l||(e=0),l&&(t=0)):(i||l||(t=0),l&&(e=0)),(10<=e||10<=t)&&(a=t<e?(N=s?T:k,o=0<ae-oe?1:-1,re.convert(Math.abs(oe-ae))):(N=s?k:T,o=0<se-ne?1:-1,"number"!=w&&S||(o*=-1),re.convert(Math.abs(ne-se))))),de(o),n()},a)}()},e))}function ue(){X.zimAccessibility&&X.zimAccessibility.aria||(clearTimeout(q),clearTimeout(U))}function de(e){if("number"==w){var t=R=Number(R);R+=Number(N*e*V),R=Ao.decimals(R,H),h?R>X.max?R=X.min:R<X.min&&(R=X.max):(R>X.max?(R=1==k?X.max:t,g&&(ie.cursor="default")):g&&(ie.cursor="pointer"),R<X.min&&(R=1==k?X.min:t))}else{if(e=Y+e,h)e>o.length-1&&(e=0),e<0&&(e=o.length-1);else{if(e>o.length-1)return void(g&&(ie.cursor="default"));if(g&&(ie.cursor="pointer"),e<0)return}Y=e}ge("number"==w?R:o[Y],"number"==w?R:Y),X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue}function he(){X.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function ge(e,t){Y=t,g&&("number"==w&&0!=e&&0<H&&(e=Ao.decimals(e,H,!0)),i.text=e,i.center(X)),a&&(Q.alpha=1,Z.color=n,Q.cursor="pointer",K.alpha=1,J.color=n,K.cursor="pointer",h||("number"==w?(Y==X.min&&(0<V?pe:fe)(),Y==X.max&&(0<V?fe:pe)()):(0==Y&&(s?fe:pe)(),Y==o.length-1&&(s?pe:fe)()))),!K||Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!K.stage?!i||Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!i.stage||i.stage.update():K.stage.update(),X.zimAccessibility&&X.zimAccessibility.changeTitle(X,null,!0)}function pe(){a&&(Q.alpha=.8,Z.color="#aaa",Q.cursor="default")}function fe(){a&&(K.alpha=.8,J.color="#aaa",K.cursor="default")}y&&this.on("mousedown",function(e){X.zimAccessibility&&X.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ae=e.rawX/Ao.scaX,se=e.rawY/Ao.scaY,F=this.stage.on("stagemousemove",function(e){ae=e.rawX/Ao.scaX,se=e.rawY/Ao.scaY}))},null,!0),(this.label=i).mouseChildren=!1,i.mouseEnabled=!1,a&&(Q=this.containerPrev=new Ao.Container({style:!1}),this.addChild(Q),Z=this.arrowPrev=new Ao.Triangle(100,80,80,n,null,null,null,null,null,null,null,!1),-1!=u&&0<d&&(Q.shadow=new createjs.Shadow(u,3,3,d)),Q.addChild(Z),Q.expand(),Q.cursor="pointer",Q.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(N=k,de(t=s?S?1:-1:I?-1:1),ce(t,null,null,e.stageX/Ao.scaX,e.stageY/Ao.scaY))}),f&&Q.on("pressup",ue),s?(Q.rotation=180,Q.x=e/2,Q.y=g?Q.height+25+100+Q.height/2+25:2*Q.height):(Q.rotation=-90,Q.x=Q.height/2,Q.y=Q.width/2)),g?((ie=this.textBox=new Ao.Rectangle(e,100,n,t,r,c,null,null,null,!1)).cursor="pointer",this.addChild(ie),-1!=u&&0<d&&(ie.shadow=new createjs.Shadow(u,3,3,d)),a&&(s?a&&(ie.y=Z.height+25):a&&(ie.x=Z.height+25)),this.addChild(i),0<o.length&&(Y=0,i.text=o[Y]),i.center(X),ie.on("mousedown",function(e){X.zimAccessibility&&X.zimAccessibility.aria||(le=X.currentValue,p&&de(1),ce(1,!0,null,e.stageX/Ao.scaX,e.stageY/Ao.scaY))}),ie.on("pressup",function(){X.zimAccessibility&&X.zimAccessibility.aria})):0<o.length&&(Y=0),a&&(K=this.containerNext=new Ao.Container({style:!1}),this.addChild(K),J=this.arrowNext=new Ao.Triangle(100,80,80,n,null,null,null,null,null,null,null,!1),-1!=u&&0<d&&(K.shadow=new createjs.Shadow(u,3,3,d)),K.addChild(J),K.expand(),K.cursor="pointer",K.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(N=k,de(t=s?S?-1:1:I?1:-1),ce(t,null,null,e.stageX/Ao.scaX,e.stageY/Ao.scaY))}),f&&K.on("pressup",ue),s?(K.rotation=0,K.x=e/2,K.y=K.getBounds().height/2):(K.rotation=90,K.x=g?ie.x+ie.getBounds().width+K.getBounds().height/2+25:Q.x+Q.getBounds().width,K.y=K.getBounds().width/2)),f&&g&&ie.on("pressup",ue),A&&($=this.prev2=new Ao.Container({style:!1}),te=this.arrowPrev2=new Ao.Triangle(100,80,80,"rgba(0,0,0,.2)",n,2,null,null,null,null,null,!1),$.addChild(te),$.expand(),$.cursor="pointer",$.sca(P),$.alpha=.5,$.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(N=T,de(t=s?I?-1:1:S?1:-1),ce(t,null,!0,e.stageX/Ao.scaX,e.stageY/Ao.scaY))}),f&&$.on("pressup",ue),ee=this.next2=new Ao.Container({style:!1}),te=this.arrowNext2=new Ao.Triangle(100,80,80,"rgba(0,0,0,.2)",n,2,null,null,null,null,null,!1),ee.addChild(te),ee.expand(),ee.cursor="pointer",ee.sca(P),ee.alpha=.5,ee.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(N=T,de(t=s?I?1:-1:S?-1:1),ce(t,null,!0,e.stageX/Ao.scaX,e.stageY/Ao.scaY))}),f&&ee.on("pressup",ue),s?($.y=this.height/2,$.x=-$.width/2-25*Math.max(.2,Math.min(1,P)),$.rotation=270,ee.y=this.height/2,ee.x=this.width+ee.width/2+25*Math.max(.2,Math.min(1,P)),ee.rotation=90):(ee.x=this.width/2,ee.y=-ee.height/2-25*Math.max(.2,Math.min(1,P)),ee.rotation=0,$.x=this.width/2,$.y=this.height+$.height/2+25*Math.max(.2,Math.min(1,P)),$.rotation=180),this.addChild($,ee)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){o=[];for(var e=X.min;e<=X.max;e+=Math.min(k,T))o.push(Number(Ao.decimals(e,H,null,!1)))}return o},set:function(e){o=e;e=X.selectedIndex;X.selectedIndex=e}}),Object.defineProperty(this,"min",{get:function(){return C},set:function(e){var t;"number"==w?(X.currentValue<e&&(X.currentValue=e),C=e,t=X.selectedIndex,X.selectedIndex=t):C=e}}),Object.defineProperty(this,"max",{get:function(){return x},set:function(e){var t;"number"==w?(X.currentValue>e&&(X.currentValue=e),x=e,t=X.selectedIndex,X.selectedIndex=t):x=e}}),ge("number"==w?R:o[Y],"number"==w?R:Y),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==w?X.stepperArray.indexOf(X.currentValue):Y},set:function(e){zot(e)||("number"==w?(Y=Math.min(X.stepperArray.length-1,Math.max(0,e)),ge(R=X.stepperArray[Y],R)):(e=Math.min(o.length-1,Math.max(0,e)),ge(o[Y=e],Y)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?Number(R):o[Y]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),X.max>X.min){if(e>X.max||e<X.min)return}else if(e<X.max||e>X.min)return;var t=X.stepperArray.indexOf(e);t<0||(Y=t,ge(R=Number(X.stepperArray[Y]),R))}else-1<o.indexOf(e)&&(e=o.indexOf(e))!=X.selectedIndex&&ge(o[Y=e],Y)}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return X.currentValue},set:function(e){String(e)!=String(X.currentValue)&&(X.currentValue=e,X.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return h},set:function(e){h=e,"number"==w?ge(R,R):ge(o[X.selectedIndex],X.selectedIndex)}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(e){rt(X,e),e?("number"==w?ge(R,R):ge(o[X.selectedIndex],X.selectedIndex),WW.addEventListener("keydown",X.keyDownEvent)):(pe(),fe(),WW.removeEventListener("keydown",X.keyDownEvent),g&&(i.mouseChildren=!1),g&&(i.mouseEnabled=!1)),!K||Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!K.stage?!i||Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!i.stage||i.stage.update():K.stage.update()}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==X},set:function(){Ao.KEYFOCUS=X}}),Ao.KEYFOCUS||he(),this.on("mousedown",function(){he()});var me=!0,ze="";this.on("mousedown",function(){me=!0,ze="",X.zimAccessibility&&X.zimAccessibility.aria||(X.focus=!0,0)}),this.keyDownEvent=function(e){if(X.stage&&(X.zimAccessibility&&X.focus||!X.zimAccessibility&&X.keyFocus)){var t,o=(e=e||event).keyCode;if(E&&37<=o&&o<=40&&(r=I?39:37,i=S?38:40,n=I?37:39,o==(t=S?40:38)||o==r?(N=s&&o==t||!s&&o==r?k:T,de(1)):o!=i&&o!=n||(N=s&&o==i||!s&&o==n?k:T,de(-1))),B)if("number"==w){var n,r=null,i=null;if(8==o&&((n=String(ze).split("")).pop(),r=n.pop(),ze=n.join("")),!e.shiftKey&&48<=o&&o<=57?r=o-48:96<=o&&o<=105?r=o-96:190==o?(ze=String(ze)+".",i=!0):173==o||189==o?(X.currentValue=-1*X.currentValue,X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue,0):46==o&&(me=!0,ze=""),zot(r)&&zot(i))return me=!0,void(ze="");zot(r)||(ze=me?(me=!1,r):r=Number(ze+""+r),r<C||x<r||(X.currentValue=r,X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue))}else me=!0,ze="",X.currentValue=String.fromCharCode(e.keyCode),X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue}},WW.addEventListener("keydown",this.keyDownEvent),this.next=function(){de(1)},this.prev=function(){de(-1)},zot(W)&&(W=null!=j.selectedIndex?j.selectedIndex:0),X.selectedIndex=W,zot(M)&&(M=null!=j.currentValue?j.currentValue:null),zot(M)||(X.currentValue=M),!1!==O&&Ao.styleTransforms(this,j),this.clone=function(){return X.cloneProps(new Ao.Stepper(o,e,n,t,r,i.clone(),l,s,a,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,this.group,L))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",X.keyDownEvent),X.removeAllEventListeners(),X.stage&&X.stage.off(F),o||this.zimContainer_dispose(!0),Q=this.containerPrev=Z=this.arrowPrev=null,K=this.containerNext=J=this.arrowNext=null,!(ie=this.textBox=i=this.label=null)}},Ao.zut=function(e){if(zot(e)||!e.key)return!0;Ao.async("https://zimjs.com/gamdata.php?id="+e.key+"&player="+e.player+"&score="+e.score+"&reverse="+e.info.reverse+"&total="+e.info.total+"&allowZero="+e.info.allowZero,e.info.type)},Ao.extend(Ao.Stepper,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Slider=function(n,r,t,i,o,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,e,P,B,E,I,S,W,M,O,j){if(F=zob(Ao.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, style, group, inherit",this))return F;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=O;var L,_=!1===M?{}:Ao.getStyle(this.type,this.group,j);if(zot(n)&&(n=null!=_.min?_.min:0),zot(r)&&(r=null!=_.max?_.max:10),r-n!=0){zot(v)&&(v=null!=_.sound&&_.sound),zot(t)&&(t=null!=_.step?_.step:0),zot(i)&&(i=null!=_.button?_.button:v?"aztec":null),i&&"Button"==i.type&&(i=i.clone()),zot(o)&&(o=null!=_.barLength?_.barLength:300),zot(l)&&(l=null!=_.barWidth?_.barWidth:3),zot(a)&&(a=null!=_.barColor?_.barColor:v?Ao.lighter:"#666"),zot(s)&&(s=null!=_.vertical?_.vertical:!!v),zot(c)&&(c=null!=_.useTicks?_.useTicks:!!v),zot(d)&&(d=null!=_.tickStep?_.tickStep:t||(c||v?(r-n)/40:0)),zot(h)&&(h=null!=_.semiTicks?_.semiTicks:d?3:0),zot(u)&&(u=null!=_.tickColor?_.tickColor:v?Ao.tin:a),zot(g)&&(g=null!=_.tickScale?_.tickScale:v?1.25:1),zot(p)&&(p=null!=_.semiTickScale?_.semiTickScale:1),zot(f)&&(f=null!=_.accentSize?_.accentSize:v?10:0),zot(m)&&(m=null!=_.accentOffset?_.accentOffset:v?-(f+l)/2:0),zot(z)&&(z=null!=_.accentColor?_.accentColor:Ao.pink),zot(y)&&(y=null!=_.accentBackgroundColor?_.accentBackgroundColor:v?Ao.blue:Ao.clear),zot(b)&&(b=null!=_.accentDifference?_.accentDifference:-.5),zot(w)&&(w=null!=_.inside&&_.inside),zot(C)&&(C=null==_.keyArrows||_.keyArrows),zot(k)&&(k=null==_.keyArrowsH||_.keyArrowsH),zot(T)&&(T=null==_.keyArrowsV||_.keyArrowsV),zot(x)&&(x=null!=_.keyArrowsStep?_.keyArrowsStep:(r-n)/100),zot(A)&&(A=null!=_.damp&&_.damp),zot(e)&&(e=null!=_.currentValue&&_.currentValue),zot(P)&&(P=null!=_.expand?_.expand:Ao.mobile()?10:null),zot(B)&&(B=null!=_.expandVertical?_.expandVertical:P),zot(E)&&(E=null!=_.expandBar?_.expandBar:null),zot(I)&&(I=null!=_.expandBarVertical?_.expandBarVertical:P),zot(S)&&(S=null!=_.useLabels&&_.useLabels),zot(W)&&(W=null!=_.labelMargin?_.labelMargin:20);var D=this,Y=function(){return arguments}(n,r,t,e);n=Ao.Pick.choose(n),r=Ao.Pick.choose(r);var X,R=t=Ao.Pick.choose(t);e=Ao.Pick.choose(e),f&&(D.accentBacking=new Ao.Rectangle(o-.25,f+b,y).addTo(this).rot(s?90:0).mov(s?-m-l/2+b/2:.25,s?0:m+l/2-b/2),X=D.accent=new Ao.Rectangle(o,f,z).sca(0,1).rot(s?-90:0).mov(s?-m-f-l/2:0,s?o:m+l/2).addTo(this));var H,F,N,V,G=!(!zot(_.backing)&&"Pattern"!=_.backing.type);!zot(i)&&"string"!=typeof i||(H=30,F=40,s&&(H=50,F=40),"pill"!=i&&"aztec"!=i&&"circle"!=i&&"grip"!=i||("pill"==i?N={width:s?40:18,height:s?18:40,borderColor:Ao.tin,borderWidth:3,corner:8}:"aztec"==i?(N={width:H=null!=_.width?_.width:.9*Math.max(H,F),height:F=null!=_.height?_.height:.6*Math.min(H,F),backing:be(null!=_.backgroundColor?_.backgroundColor:Ao.lighter,H,F).rot(s?0:-90),rollBacking:be(null!=_.rollBackgroundColor?_.rollBackgroundColor:Ao.white,H,F).rot(s?0:-90)},_.borderWidth=0,_.borderColor=0):"circle"==i&&(H=null!=_.width?_.width:30,F=null!=_.height?_.height:30,N={width:H,height:H,corner:null!=_.corner?_.corner:H/2}),D.buttonType=i),O=null!=_.borderColor?_.borderColor:N?N.borderColor:G?"#666":null,i=new Ao.Button({width:null!=_.width?_.width:N?N.width:H,height:null!=_.height?_.height:N?N.height:F,label:"",backgroundColor:null!=_.backgroundColor?_.backgroundColor:"#fff",rollBackgroundColor:null!=_.rollBackgroundColor?_.rollBackgroundColor:"#ddd",borderColor:O,rollBorderColor:null!=_.rollBorderColor?_.rollBorderColor:O,borderWidth:null!=_.borderWidth?_.borderWidth:N?N.borderWidth:G?1:null,corner:null!=_.corner?_.corner:N?N.corner:0,backing:null!=_.backing?_.backing.clone():N?N.backing:null,rollBacking:null!=_.rollBacking?_.rollBacking.clone():N?N.rollBacking:null,shadowColor:null!=_.shadowColor?_.shadowColor:null,shadowBlur:null!=_.shadowBlur?_.shadowBlur:null,hitPadding:30,style:!1}),"circle"==D.buttonType?(i.scaleY=F/H,s||i.rot(-90)):"grip"==D.buttonType&&Ao.loop([1,1,1],function(e,t,o){s?new Ao.Line(.62*i.width,e,i.borderColor||Ao.grey).pos(0,.4*i.height/2+(t+1)*(.6*i.height)/(o+1),Ao.CENTER,Ao.TOP,i):new Ao.Line(.62*i.height,e,i.borderColor||Ao.grey).rot(90).pos(.4*i.width/2+(t+1)*(.6*i.width)/(o+1),0,Ao.LEFT,Ao.CENTER,i)})),i.rollPersist=!0,zot(P)&&zot(B)||i.expand(P,B),s?(V=i.width,w?($=o,this.setBounds(0,0,V,$)):($=o+i.height,this.setBounds(-i.width/2,-i.height/2,V,$))):($=Math.max(i.height,l),w?(V=o,this.setBounds(0,0,V,$)):(V=o+i.width,this.setBounds(-i.width/2,-i.height/2,V,$)));var q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he=n,ge=0;if(this.button=i,this.cursor="pointer",c&&(Z=this.ticks=new Ao.Shape({style:!1}),this.addChild(Z),(K=Z.graphics).ss(1).s(u),J=Math.round((r-n)/(d||t)),$=(r-n)/J,d?($!=d&&zon&&zogy("Slider() - non-divisible step ("+d+") adjusted to "+$),d=$):($!=t&&zon&&zogy("Slider() - non-divisible step ("+t+") adjusted to "+$),t=$),ee=w?(o-(s?i.height:i.width))/Math.abs(J):o/Math.abs(J)),s){if(te=w?i.height/2:0,q=this.bar=new Ao.Rectangle(l,o,a,null,null,null,null,null,null,!1),E?q.expand(E,I):q.expand(20,0),q.centerReg(this),i.centerReg(this),Q=q.getBounds(),U=new createjs.Rectangle(q.x,Q.y+te,0,Q.height-2*te),c){for(S&&(oe=D.labels=(new Ao.Container).addTo(D)),ne=0;ne<=Math.abs(J);ne++)ie=(re=ne%(h+1)==0)?25*g:15*p,le=te+ee*ne,K.mt(0,le).lt(ie,le),S&&(h&&re||!h)&&(ae=Math.max(Ao.countDecimals(R),Ao.countDecimals(n),Ao.countDecimals(r)),new Ao.Label({text:Ao.decimals(r-(r-n)/Math.abs(J)*ne,ae+1),size:_.size||10,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(ie+W+2,le-1,oe));Z.x=q.x+15}}else if(te=w?i.width/2:0,q=this.bar=new Ao.Rectangle(o,l,a,null,null,null,null,null,null,!1),E?q.expand(E,I):q.expand(0,20),q.centerReg(this),i.centerReg(this),Q=q.getBounds(),U=new createjs.Rectangle(Q.x+te,q.y,Q.width-2*te,0),c){for(S&&(oe=D.labels=(new Ao.Container).addTo(D)),ne=0;ne<=Math.abs(J);ne++)ie=te+ee*ne,le=-((re=ne%(h+1)==0)?25*g:15*p),K.mt(ie,0).lt(ie,le),S&&(h&&re||!h)&&(ae=Math.max(Ao.countDecimals(R),Ao.countDecimals(n),Ao.countDecimals(r)),new Ao.Label({text:Ao.decimals(n+(r-n)/Math.abs(J)*ne,ae+1),size:_.size||10,align:"center",valign:"center"}).centerReg({add:!1}).loc(ie,le-W,oe));Z.y=q.y-10}i.x=U.x,i.y=U.y,i.on("mousedown",function(e){L=e.target.stage,D.focus=!0;e=D.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY);se=e.x-i.x,ce=e.y-i.y,L&&(L.mouseMoveOutside=!0)}),i.on("pressmove",function(e){we(e)}),q.on("mousedown",function(e){L=e.target.stage,ce=se=0,D.zimAccessibility&&D.zimAccessibility.aria||we(e)}),A&&(ue=n,de=new Ao.Damp(ue,A),D.ticker=Ao.Ticker.add(function(){ue=de.convert(he)})),Object.defineProperty(this,"currentValue",{get:function(){return A?ue:he},set:function(e){zot(e)||(n<r?(e<n&&(e=n),r<e&&(e=r)):(n<e&&(e=n),e<r&&(e=r)),he=e=ve(e),de&&de.immediate(he),ge=s?(i.y=(e-r)/(n-r)*U.height+te,i.y):(i.x=(e-n)/(r-n)*U.width+te,i.x),X&&ye(),xe(),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!D.stage||D.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return A?ue:he},set:function(e){e!=D.currentValue&&(D.currentValue=e,D.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(){zon&&zogy("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){zon&&zogy("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return t},set:function(){zon&&zogy("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return k},set:function(e){k=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return T},set:function(e){T=e}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==D},set:function(){Ao.KEYFOCUS=D}}),C&&!Ao.KEYFOCUS&&ke(),this.on("mousedown",function(){C&&ke()});var pe=!1,fe=!1,me=!1,ze=!1;this.keyDownEvent=function(e){D.stage&&(D.zimAccessibility&&D.focus||!D.zimAccessibility&&D.keyFocus)&&(37==e.keyCode&&k?pe=!0:40==e.keyCode&&T?fe=!0:39==e.keyCode&&k?me=!0:38==e.keyCode&&T&&(ze=!0),null==D.keyInterval&&(pe||fe||me||ze)&&(Te(),D.keyTimeout=setTimeout(function(){null==D.keyInterval&&(pe||fe||me||ze)&&(D.keyInterval=setInterval(Te,40))},140)))},WW.addEventListener("keydown",this.keyDownEvent),D.keyUpEvent=function(e){37==e.keyCode?pe=!1:40==e.keyCode?fe=!1:39==e.keyCode?me=!1:38==e.keyCode&&(ze=!1),null==D.keyInterval||pe||fe||me||ze||(clearInterval(D.keyInterval),D.keyInterval=null)},WW.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(D,"enabled",{get:function(){return D._enabled},set:function(e){rt(D,e),e?(WW.addEventListener("keydown",D.keyDownEvent),WW.addEventListener("keyup",D.keyUpEvent)):(WW.removeEventListener("keydown",D.keyDownEvent),WW.removeEventListener("keyup",D.keyUpEvent))}}),zot(e)||(D.currentValue=e),Ao.setSwipe(this,!1),!1!==M&&Ao.styleTransforms(this,_),this.clone=function(e){return D.cloneProps(new Ao.Slider(e||!Ao.isPick(Y[0])?D.min:Y[0],e||!Ao.isPick(Y[1])?D.max:Y[1],e||!Ao.isPick(Y[2])?D.step:Y[2],i.clone(),o,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,e||!Ao.isPick(Y[3])?D.currentValue:Y[3],P,B,E,I,S,W,M,this.group,j))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",D.keyDownEvent),WW.removeEventListener("keyup",D.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zogy("ZIM Slider range must not be 0");function ye(){X.sca((D.currentValue-D.min)/Math.abs(D.max-D.min),1)}function be(e,t,o){var n=new Ao.Shape(t,o);return n.f(e).s(null!=_.borderColor?_.borderColor:Ao.tin).ss(null!=_.borderWidth?_.borderWidth:3).mt(2,0).lt(t+2,.2*o).lt(t+2,.8*o).lt(2,o).cp().centerReg({add:!1}),n}function ve(e){return 0==t?e:Math.round(e/t)*t}function we(e){var t,o=D.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),e=(t=o.x-se,e=o.y-ce,o=U,t=Math.max(o.x,Math.min(o.x+o.width,t)),e=Math.max(o.y,Math.min(o.y+o.height,e)),{x:t,y:e});ge=s?(i.x=e.x,he=ve((e.y-U.y)/U.height*(n-r)),i.y=U.y+he*U.height/(n-r),he+=r,i.y!=ge&&D.dispatchEvent("change"),i.y):(he=ve((e.x-U.x)/U.width*(r-n)),i.x=U.x+he*U.width/(r-n),he+=n,i.y=e.y,i.x!=ge&&D.dispatchEvent("change"),i.x),X&&ye(),xe(),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!D.stage||D.stage.update()}function Ce(e){return 0<e?1:-1}function xe(){D.zimAccessibility&&D.zimAccessibility.changeTitle(D,null,!0)}function ke(){D.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Te(){(pe||fe)&&(D.currentValueEvent-=0<t?t*Ce(r-n):x*Ce(r-n)),(me||ze)&&(D.currentValueEvent+=0<t?t*Ce(r-n):x*Ce(r-n))}},Ao.extend(Ao.Slider,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Selector=function(l,n,r,i,a,s,c,u,d,h,g,p,f,m,z,y,e,t,o){var b;if(b=zob(Ao.Selector,arguments,"tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingHorizontal, paddingVertical, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit",this))return b;z_d("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=t;var t=!1===e?{}:Ao.getStyle(this.type,this.group,o),v=Po();zot(l)&&(l=null!=t.tile?t.tile:new Ao.Tile(new Ao.Circle(20,Ao.red),4,4,10,10)),zot(n)&&(n=null!=t.borderColor?t.borderColor:"white"),zot(r)&&(r=null!=t.borderWidth?t.borderWidth:2),zot(i)&&(i=null!=t.backgroundColor?t.backgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=t.corner?t.corner:10),zot(s)&&(s=null!=t.dashed&&t.dashed),zot(c)&&(c=null!=t.padding?t.padding:l.spacingH/2),zot(u)&&(u=null!=t.paddingVertical?t.paddingVertical:l.spacingV/2),zot(d)&&(d=null!=t.speed?t.speed:2),zot(h)&&(h=null!=t.diagonal&&t.diagonal),zot(g)&&(g=null!=t.dim&&t.dim),zot(p)&&(p=null!=t.multi&&t.multi),p&&(d=0),zot(f)&&(f=null==t.keyArrows||t.keyArrows),zot(m)&&(m=null!=t.behind&&t.behind),zot(z)&&(z=null!=t.resizeScale&&t.resizeScale),zot(y)&&(y=null!=t.selectedIndex?t.selectedIndex:null);var w=[],C=[];Ao.loop(l.items.length,function(){w.push(zik(n)),C.push(zik(i))});var x,k,T,A,P,B,E=this;zot(y)&&p||(o=zot(k=y)||y<0?0:y,x=l.getChildAt(o),E.currentItem=l.getChildAt(o),zot(y=k)&&(y=null!=t.selectedIndex?t.selectedIndex:0)),(k=x||l.getChildAt(0))&&(T=k.width+2*c,A=k.height+2*u),E.tile=l.addTo(E).cur(),p?(B=this.selectors=[],Ao.loop(10,function(){(P=new Ao.Rectangle(T,A,Ao.faint,Ao.faint,r,a,s,{ignoreScale:!z}).centerReg(E,m?0:1)).visible=!1,B.push(P),P.mouseEnabled=!1}),this.selector=P):((P=this.selector=new Ao.Rectangle(T,A,Ao.faint,Ao.faint,r,a,s,{ignoreScale:!z}).centerReg(E)).loc(l.width/2,k.y+u,E,m?0:1),P.visible=!1),y<0||zot(x)||(P.loc(k.x+c,k.y+u,E,m?0:1),P.color=C[y],P.borderColor=w[y],P.visible=!0),l.mov(c,u),this.setBounds(l.width+2*c,l.height+2*u);var I={};function S(e,t,o){zot(o)&&(o=P),y=(x=e).tileNum,o.color=C[y],o.borderColor=w[y],p&&(E.upItem=E.upIndex=null,E.downItem=x,E.downIndex=y),E.animating=!0;var n=l.localToLocal(e.x,e.y,E),r=Math.abs(n.x-P.x),i=Math.abs(n.y-P.y),t=E.noAnimate||t?0:d;E.noAnimate=!1,0==t?(o.loc(n.x,n.y).siz(e.width+2*c,e.height+2*u),E.animating=!1,E.dispatchEvent("change")):(h||(r+i)*t<=0?o.animate({x:n.x,y:n.y},(i+r)*t):(o.stopAnimate(),i<=r?o.animate([{props:{x:n.x},time:Math.max("s"==v?.1:100,r*t/("s"==v?1e3:1))},{props:{y:n.y},time:Math.max("s"==v?.1:100,i*t/("s"==v?1e3:1))}]):o.animate([{props:{y:n.y},time:Math.max("s"==v?.1:100,i*t/("s"==v?1e3:1))},{props:{x:n.x},time:Math.max("s"==v?.1:100,r*t/("s"==v?1e3:1))}])),o.animate({props:{widthOnly:e.width+2*c,heightOnly:e.height+2*u},time:Math.max("s"==v?.2:200,(i+r)*t/("s"==v?1e3:1)),call:function(){E.animating=!1,E.dispatchEvent("change")}}),g&&(t=!0===g?.7:Ao.constrain(g,0,1),l.animate({props:{alpha:t},rewind:!0,time:(i+r)*d*.7/("s"==v?1e3:1)}))),l.stage&&l.stage.update()}function W(){E.keyFocus=!0;var e=document.activeElement;e&&e.blur()}this.tileDown=l.on("mousedown",function(e){var t=P;if(!p||!zot(t=B.shift())){t.visible=!0;for(var o=e.target,n=0;o.parent!=l&&n<10;)o=o.parent,n++;o.parent==l&&S(o,null,t),p&&(e="id"+Math.abs(e.pointerID+1),I[e]={index:y,item:x,selector:t})}}),p&&(this.tileMove=l.on("pressmove",function(e){var t="id"+Math.abs(e.pointerID+1),o=I[t];zot(o)||(t=l.itemUnderPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY),o.item!=t&&(E.upItem=o.item,E.upIndex=o.index,E.downItem=o.item=t,E.downIndex=o.index=t?t.tileNum:null,E.dispatchEvent("change"),zot(t)?o.selector.visible=!1:(e=l.localToLocal(t.x,t.y,E),o.selector.loc(e.x,e.y).siz(t.width+2*c,t.height+2*u),o.selector.color=C[o.index],o.selector.borderColor=w[o.index],o.selector.visible=!0),E.stage.update()))}),this.tileUp=l.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1),e=I[t];zot(e)||(E.downIndex=E.downItem=null,E.upIndex=e.index,E.upItem=e.item,B.push(e.selector),e.selector.visible=!1,E.dispatchEvent("change"),!E.stage||Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||E.stage.update(),delete I[t])})),E.noAnimate=!1,f&&E.added(function(){E.keyEvent=E.stage.frame.on("keydown",function(e){var t,o,n,r;E.stage&&E.enabled&&(E.animating||(E.zimAccessibility&&E.focus||!E.zimAccessibility&&E.keyFocus)&&(!0===(t=Ao.loop(l.items2D,function(e,o){e=Ao.loop(e,function(e,t){if(e==x)return[t,o]});if(Array.isArray(e))return e}))&&(t=[0,0]),o=l.items2D[t[1]].length,n=l.items2D.length,"39"==e.keyCode?(r=(t[0]+1)%o,S(l.items2D[t[1]][r],r<t[0])):"37"==e.keyCode?(r=(t[0]-1+o)%o,S(l.items2D[t[1]][r],r>t[0])):"38"==e.keyCode?(r=(t[1]-1+n)%n,S(l.items2D[r][t[0]],r>t[1])):"40"==e.keyCode&&(r=(t[1]+1)%n,S(l.items2D[r][t[0]],r<t[1]))))})}),Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(e){zot(e)&&(E.currentItem=null),E.currentItem=l.items[e]}}),Object.defineProperty(this,"text",{get:function(){return x.text},set:function(){zon&&zogy("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return x},set:function(e){if(zot(e))return y=x=null,P.visible=!1,E.selectedCol=null,void(E.selectedRow=null);P.visible=!0,E.lastItem=x,E.lastIndex=y,E.lastCol=E.selectedCol,E.lastRow=E.selectedRow,E.selectedCol=e.tileCol,E.selectedRow=e.tileRow,y=e.tileNum,S(x=e)}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){e?E.mouse():E.noMouse(),E._enabled=e}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==E},set:function(){Ao.KEYFOCUS=E}}),Ao.KEYFOCUS||W(),this.on("mousedown",function(){W()}),!1!==e&&Ao.styleTransforms(this,t),this.clone=function(e){if(e)for(var t=[],o=0;o<E.tile.items.length;o++)t.push(E.tile.items[o].clone(!0));return E.cloneProps(new Ao.Selector(e?Ao.series(t):l.clone?l.clone():l,n,r,i,a,s,c,u,d,h,g,p,f,m,z,y,this.style,this.group))},this.dispose=function(e,t,o){E.keyEvent&&E.stage&&E.stage.frame.off("keydown",E.keyEvent),l.off(E.tileDown),l.dispose(),p&&(l.off(E.tileMove),l.off(E.tileUp)),o||this.zimContainer_dispose(!0)}},Ao.extend(Ao.Selector,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Dial=function(n,i,r,t,o,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,e,_,D,Y,X,R){if(Z=zob(Ao.Dial,arguments,"min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",this))return Z;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=X;var H=!1===Y?{}:Ao.getStyle(this.type,this.group,R);if(zot(n)&&(n=null!=H.min?H.min:0),zot(i)&&(i=null!=H.max?H.max:10),i-n!=0){zot(T)&&(T=null!=H.sound&&H.sound),zot(r)&&(r=null!=H.step?H.step:T?0:1),zot(t)&&(t=null!=H.width?H.width:100),zot(o)&&(o=null!=H.backgroundColor?H.backgroundColor:"#666"),zot(l)&&(l=null!=H.indicatorColor?H.indicatorColor:T?"white":"#222"),zot(a)&&(a=null!=H.indicatorScale?H.indicatorScale:1),zot(s)&&(s=null!=H.indicatorType?H.indicatorType:T?"aztec":"arrow"),zot(c)&&(c=null!=H.useTicks?H.useTicks:0!=r),zot(u)&&(u=null!=H.innerTicks&&H.innerTicks),zot(h)&&(h=null!=H.tickStep?H.tickStep:r||(c?.25:0)),zot(g)&&(g=null!=H.semiTicks?H.semiTicks:T?3:0),zot(d)&&(d=null!=H.tickColor?H.tickColor:T?Ao.tin:o),zot(p)&&(p=null!=H.tickScale?H.tickScale:T?1.25:1),zot(f)&&(f=null!=H.semiTickScale?H.semiTickScale:1.25),zot(m)&&(m=null==H.innerCircle||H.innerCircle),zot(y)&&(y=null!=H.innerColor?H.innerColor:T?Ao.pink:"rgba(0,0,0,.2)"),zot(b)&&(b=null!=H.inner2Color?H.inner2Color:T?Ao.light:"rgba(0,0,0,.1)"),zot(z)&&(z=null!=H.innerScale?H.innerScale:T?.4:.5),zot(v)&&(v=null!=H.accentSize?H.accentSize:T?t/2*.15:0),zot(w)&&(w=null!=H.accentOffset?H.accentOffset:t/2*.45),zot(k)&&(k=null!=H.accentDifference?H.accentDifference:-.25),zot(C)&&(C=null!=H.accentColor?H.accentColor:Ao.pink),zot(x)&&(x=null!=H.accentBackgroundColor?H.accentBackgroundColor:T?Ao.blue:Ao.clear),zot(P)&&(P=null!=H.gap?H.gap:T?.25:0),zot(A)&&(A=null!=H.linear?H.linear:T),P&&(M=!(A=!0)),zot(B)&&(B=null==H.limit||H.limit),zot(E)&&(E=null==H.keyArrows||H.keyArrows),zot(I)&&(I=null!=H.keyArrowsStep?H.keyArrowsStep:(i-n)/100),zot(S)&&(S=null==H.keyArrowsH||H.keyArrowsH),zot(W)&&(W=null==H.keyArrowsV||H.keyArrowsV),zot(M)&&(M=null!=H.continuous&&H.continuous),M&&(B=null!=H.limit&&H.limit),zot(L)&&(L=null!=H.damp&&H.damp),zot(e)&&(e=null!=H.currentValue&&H.currentValue),zot(_)&&(_=null!=H.useLabels&&H.useLabels),zot(D)&&(D=null!=H.labelMargin?H.labelMargin:10),0==B&&(L=null);var F=this;this.cursor="pointer";var N=function(){return arguments}(n,i,r,e);n=Ao.Pick.choose(n),i=Ao.Pick.choose(i);var V=r=Ao.Pick.choose(r);e=Ao.Pick.choose(e);var G,q,U,Q=t/2,Z=t,K=n,J=0;v&&(q=t/2+w+v/2,U=360*P/2,F.accentBacking=new Ao.Shape(-Q,-Q,2*Q,2*Q).addTo(this).s(x).ss(v+k).a(0,0,q,(U-90)*Ao.RAD,(360-U-90)*Ao.RAD),G=F.accent=new Ao.Shape(-Q,-Q,2*Q,2*Q).addTo(this));X=this.backing=new Ao.Circle(Q,o,null,null,null,null,null,null,!1);v?X.center(this):this.addChild(X),m&&(ee=this.inner=new Ao.Circle(Q*z,y,null,null,null,null,null,null,!1),this.addChild(ee),te=this.inner2=new Ao.Circle(Q*(z-.1),b,null,null,null,null,null,null,!1),this.addChild(te)),T&&(F.rotation=180);var $,ee,te,oe,ne,re,ie,le,ae=Math.abs(i-n)/(h||r)+(P?1:0),se=r?Math.abs(i-n)/r:0;if(c){var ce,ue=this.ticks=new Ao.Container({style:!1});this.addChild(ue),_&&(ce=F.labels=new Ao.Container(2*t,2*Z).centerReg(F));for(var de=0;de<ae;de++){var he=de%(g+1)==0,ge=new Ao.Rectangle(1,Q*(he?.2*p:.1*f),d,null,null,null,null,null,null,!1);ge.regY=Q+(u?z-.05:ge.height+.1*Q),ge.regX=.5,ge.rotation=(360-360*P)/(ae-(P?1:0))*de+360*P/2,ue.addChild(ge),_&&(g&&he||!g)&&(he=Math.max(Ao.countDecimals(V),Ao.countDecimals(n),Ao.countDecimals(i)),new Ao.Label({text:Ao.decimals(n+(i-n)/Math.abs(se)*de,he+1),size:H.size||10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-D-1,ge).addTo(ce))}F.expand(ge.height)}this.setBounds(-Q,-Q,t,t),"dot"==s||"circle"==s?($=this.indicator=new Ao.Container({style:!1}),oe=this.indicatorShape=new Ao.Circle(.19*Q,l,null,null,null,null,null,null,!1),$.addChild(oe),Ao.sca($,a),$.regY=Q-$.getBounds().width*a/2-.07*Q):"line"==s||"rectangle"==s?($=this.indicator=new Ao.Container({style:!1}),oe=this.indicatorShape=new Ao.Rectangle(.1*Q,.3*Q,l,null,null,null,null,null,null,null,null,!1),$.addChild(oe),Ao.sca($,a),$.regY=Q-$.getBounds().width*a/2-.07*Q,$.regX=.05*Q):"aztec"==s?($=this.indicator=new Ao.Container({style:!1}),ee=.05*Q,te=.1*Q,Z=.42*Q,oe=this.indicatorShape=new Ao.Shape(-te,0,2*te,Z).f(l).mt(-ee,0).lt(ee,0).lt(te,Z).lt(-te,Z).cp(),$.addChild(oe),Ao.sca($,a),$.regY=Q-$.getBounds().width*a/2-.04*Q):($=this.indicator=new Ao.Container({style:!1}),oe=this.indicatorShape=new Ao.Triangle(.4*Q,.4*Q,.4*Q,l,null,null,null,null,null,null,null,!1),$.addChild(oe),Ao.sca($,a),$.regY=Q-$.getBounds().height*a*(u?.85:.75),u&&(oe.rotation=180)),$.regY/=a,this.addChild($);var pe,fe,me,ze,ye,be,ve,we,Ce,xe=0;M&&(me=fe=pe=0,be=!(ye=ze=!1)),A?this.on("mousedown",function(e){var o,n;F.zimAccessibility&&F.zimAccessibility.aria||(o=ne=$.rotation,n=F.parent.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),ie=F.on("pressmove",function(e){var t=F.parent.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY);$.rotation=o=ne+100*(n.y-t.y)/(this.width||1),B&&(360-360*P/2<o||o<0+360*P/2)&&(o=Ao.constrain(o,360*P/2,360-360*P/2),n=F.parent.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY),ne=o),We(o)}),le=this.on("pressup",function(){F.off("pressmove",ie),F.off("pressup",le)}))}):(ve=!0,this.on("mousedown",function(e){var t,o,n,r;F.zimAccessibility&&F.zimAccessibility.aria||(ne=$.rotation,t=F.parent.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),o=t.x-F.x,n=F.y-t.y,re=180*Math.atan2(o,n)/Math.PI,r=(new Date).getTime(),ie=F.on("pressmove",function(e){var t,o;ze&&(o=(t=F.parent.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY)).x-F.x,n=F.y-t.y,re=180*Math.atan2(o,n)/Math.PI,ne=$.rotation),o=(t=F.parent.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY)).x-F.x,n=F.y-t.y;var n=180*Math.atan2(o,n)/Math.PI,n=((n=ne+n-re)+36e5)%360;B&&ve&&(180<n-xe&&F.currentValue!=i?n=0:n-xe<-180&&(n=359)),ve=!0,We(n),xe=n}),le=this.on("pressup",function(e){F.currentValue!=F.min&&F.currentValue!=F.max&&(ve=!1),(new Date).getTime()-r<200&&(t=F.parent.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY),o=t.x-F.x,n=F.y-t.y,We(180*Math.atan2(o,n)/Math.PI-F.rotation)),ne=$.rotation,F.off("pressmove",ie),F.off("pressup",le)}))})),L&&(we=n,Ce=new Ao.Damp(we,L),F.ticker=Ao.Ticker.add(function(){we=Ce.convert(K)})),Object.defineProperty(this,"currentValue",{get:function(){return L?we:K},set:function(e){zot(e)||(M?(ze=!1,zot(O)||zot(j)?zot(O)?zot(j)||j<e&&(e=j,ze=!0):e<O&&(e=O,ze=!0):O<j?(e<O&&(e=O,ze=!0),j<e&&(e=j,ze=!0)):(O<e&&(e=O,ze=!0),e<j&&(e=j,ze=!0)),be&&(ye=!0,me=360*Math.floor(e/(i-n)))):n<i?(e<n&&(e=B?n:i),i<e&&(e=B?i:n)):(n<e&&(e=B?n:i),e<i&&(e=B?i:n)),e=Ee(K=e),L&&L.immediate(K),$.rotation=360*P/2+(e-n)*(360-360*P)/(i-n),$.rotation=($.rotation+36e5)%360,J=e-n,xe=$.rotation,G&&Be(),Se(),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return L?we:K},set:function(e){e!=F.currentValue&&(F.currentValue=e,F.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){M?n=e:zon&&zogy("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return i},set:function(e){M?i=e:zon&&zogy("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return M},set:function(){zon&&zogy("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return O},set:function(e){O=e,F.currentValue<O&&(F.currentValue=O)}}),Object.defineProperty(this,"continuousMax",{get:function(){return j},set:function(e){j=e,F.currentValue>j&&(F.currentValue=j)}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(){zon&&zogy("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return S},set:function(e){S=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return W},set:function(e){W=e}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==F},set:function(){Ao.KEYFOCUS=F}}),E&&!Ao.KEYFOCUS&&Me(),this.on("mousedown",function(){E&&Me()});var ke=!1,Te=!1,Ae=!1,Pe=!1;this.keyDownEvent=function(e){F.stage&&(F.zimAccessibility&&F.focus||!F.zimAccessibility&&F.keyFocus)&&(37==e.keyCode&&S?ke=!0:40==e.keyCode&&W?Te=!0:39==e.keyCode&&S?Ae=!0:38==e.keyCode&&W&&(Pe=!0),null==F.keyInterval&&(ke||Te||Ae||Pe)&&(Oe(),F.keyTimeout=setTimeout(function(){null==F.keyInterval&&(ke||Te||Ae||Pe)&&(F.keyInterval=setInterval(Oe,40))},140)))},WW.addEventListener("keydown",this.keyDownEvent),F.keyUpEvent=function(e){37==e.keyCode?ke=!1:40==e.keyCode?Te=!1:39==e.keyCode?Ae=!1:38==e.keyCode&&(Pe=!1),null==F.keyInterval||ke||Te||Ae||Pe||(clearInterval(F.keyInterval),F.keyInterval=null)},WW.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(F,"enabled",{get:function(){return F._enabled},set:function(e){e?(WW.addEventListener("keydown",F.keyDownEvent),WW.addEventListener("keyup",F.keyUpEvent)):(WW.removeEventListener("keydown",F.keyDownEvent),WW.removeEventListener("keyup",F.keyUpEvent)),F._enabled=e}}),zot(e)&&(e=null!=H.currentValue?H.currentValue:n),F.currentValue=e,!1!==Y&&Ao.styleTransforms(this,H),this.clone=function(e){return F.cloneProps(new Ao.Dial(e||!Ao.isPick(N[0])?F.min:N[0],e||!Ao.isPick(N[1])?F.max:N[1],e||!Ao.isPick(N[2])?F.step:N[2],t,o,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,e||!Ao.isPick(N[3])?F.currentValue:N[3],_,D,Y,this.group,R))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",F.keyDownEvent),WW.removeEventListener("keyup",F.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zogy("ZIM Dial range must not be 0");function Be(){G.c().s(C).ss(v),A?G.a(0,0,q,(U-90)*Ao.RAD,($.rotation-2*U)*Ao.RAD):G.a(0,0,q,(U-90)*Ao.RAD,($.rotation-90)*Ao.RAD)}function Ee(e){return 0==r?e:Math.round(e/r)*r}function Ie(e){return 0<e?1:-1}function Se(){F.zimAccessibility&&F.zimAccessibility.changeTitle(F,null,!0)}function We(e){if(M){ye&&(pe=e,ye=!1),pe+180<e?me-=360:e<pe-180&&(me+=360),fe=me+e,be=!1;var t=F.currentValue;return F.currentValue=Ee(fe*(i-n)/360),t!=F.currentValue&&F.dispatchEvent("change"),pe=e,be=!0,G&&Be(),1}var o;e<0&&(e+=360),e%=360,0!=r?(o=Ee(((e=Math.min(e,360))-360*P/2)/(360-360*P)*(i-n)),$.rotation=360*P/2+o*(360-360*P)/(i-n)):o=(($.rotation=e)-360*P/2)/(360-360*P)*(i-n),o!=J&&(K=(J=o)+n,G&&Be(),F.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!F.stage||F.stage.update()),Se()}function Me(){F.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Oe(){(ke||Te)&&(F.currentValueEvent-=0<r?r*Ie(i-n):I*Ie(i-n)),(Ae||Pe)&&(F.currentValueEvent+=0<r?r*Ie(i-n):I*Ie(i-n))}},Ao.extend(Ao.Dial,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Tabs=function(s,c,n,u,d,h,g,p,f,m,z,y,l,a,b,v,o,r,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,i,D,Y,X,R,H,F,N,V,G,e,q){var t;if(t=zob(Ao.Tabs,arguments,"width, height, tabs, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",this))return t;z_d("65");var U=!1===G?{}:Ao.getStyle("Tabs",e,q);zot(y)&&(y=null!=U.vertical&&U.vertical),zot(s)&&(s=null!=U.width?U.width:null);var Q=!zot(s);if(zot(s)&&(s=y?60:240),zot(c)&&(c=null!=U.height?U.height:y?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=e,(zot(n)||n.length<=0)&&(n=null!=U.tabs?U.tabs:[1,2,3,4]),zot(u)&&(u=null!=U.backgroundColor?U.backgroundColor:"#777"),zot(d)&&(d=null!=U.rollBackgroundColor?U.rollBackgroundColor:"#555"),zot(h)&&(h=null!=U.selectedBackgroundColor?U.selectedBackgroundColor:"#333"),zot(g)&&(g=null!=U.selectedRollBackgroundColor?U.selectedRollBackgroundColor:d),zot(p)&&(p=null!=U.color?U.color:"white"),zot(f)&&(f=null!=U.rollColor?U.rollColor:p),zot(m)&&(m=null!=U.selectedColor?U.selectedColor:p),zot(z)&&(z=null!=U.selectedRollColor?U.selectedRollColor:f),zot(x)&&(x=null!=U.backing?U.backing.clone():null),zot(k)&&(k=null!=U.rollBacking?U.rollBacking.clone():null),zot(O)&&(O=null!=U.align?U.align:"center"),zot(j)&&(j=null!=U.valign?U.valign:"center"),zot(L)&&(L=null!=U.labelAlign?U.labelAlign:O),zot(_)&&(_=null!=U.labelValign?U.labelValign:j),zot(X)&&(X=null!=U.indent?U.indent:10),zot(i)&&(i=null!=U.labelIndent?U.labelIndent:X),zot(D)&&(D=null!=U.labelIndentHorizontal?U.labelIndentHorizontal:i),zot(Y)&&(Y=null!=U.labelIndentVertical?U.labelIndentVertical:i),zot(a)&&(a=null!=U.currentEnabled&&U.currentEnabled),zot(b)&&(b=null==U.currentSelected||U.currentSelected),b||(a=!0),zot(l)&&(l=null!=U.spacing?U.spacing:1),zot(v)&&(v=null!=U.corner?U.corner:0),zot(w)&&(w=null!=U.gradient?U.gradient:null),zot(C)&&(C=null!=U.gloss?U.gloss:null),zot(o)&&(o=null!=U.base?U.base:0!=v||Array.isArray(v)?y?"left":"bottom":"none"),zot(r)&&(r=null==U.keyEnabled||U.keyEnabled),zot(R)&&(R=null!=U.useTap&&U.useTap),zot(H)&&(H=null!=U.excludeCustomTap&&U.excludeCustomTap),zot(M)&&(M=null!=U.backdropColor?U.backdropColor:null),zot(N)&&(N=null!=U.styleLabels?U.styleLabels:null),zot(V)&&(V=null==U.keyWrap||U.keyWrap),"none"==o||0==v||Array.isArray(v))Array.isArray(v)||(v=[v,v,v,v]);else switch(o){case"bottom":v=[v,v,0,0];break;case"left":v=[0,v,v,0];break;case"top":v=[0,0,v,v];break;case"right":v=[v,0,0,v]}var Z=this;this.keyEnabled=r;var K,J,$,ee=0,te=[],oe=[],ne=n.length,re=(s-l*(ne-1))/ne,ie=(c-l*(ne-1)-2)/ne;zot(M)||($=this.backdrop=new Ao.Rectangle(s,c,M,null,null,null,null,null,null,!1),this.addChild($));var le,ae=!1;function se(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?le="string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},le&&"TabObject"!=le&&(ae=!0),"TabObject"):(le&&"TabObject"==le&&(ae=!0),"Other"):(le&&"TabObject"!=le&&(ae=!0),le="TabObject",o.type="TabObject")}}se(n);for(var ce,ue=0,de=0,he=0;he<n.length;he++)J=n[he],y?Q&&(J.width=J.width||s):(zot(J.width)&&de++,ue+=zot(J.width)?re:J.width);if(!y)if(s-l*(ne-1)<ue)for(he=0;he<n.length;he++)(J=n[he]).width=(s-l*(ne-1))/ue*(zot(J.width)?re:J.width);else if(Math.round(ue)<Math.round(s-l*(ne-1))&&0<de)for(ce=(ne*re-(ue-de*re))/de,he=0;he<n.length;he++)(J=n[he]).width=zot(J.width)?ce:J.width;function ge(e,t){for(he=0;he<e.length;he++)""!=(J=e[he])&&"TabObject"==J.type&&(zot(J.label)&&(J.label=" "),"string"!=typeof J.label&&"number"!=typeof J.label||(J.label=new Ao.Label({text:J.label,size:null!=U.size?U.size:y?ie/2:c/2,font:null!=U.font?U.font:null,style:N,valign:_,inherit:t})))}ge(n,N?U:null);for(var pe=0,he=0;he<n.length;he++)!(J=n[he]).width&&y&&J.label.width>pe&&(pe=J.label.width);var fe=0;function me(e,t){var o=[],n=[];for(he=0;he<e.length;he++){if("TabObject"==(J=e[he]).type){var r={color:zot(J.color)?Ao.Pick.choose(p):J.color,rollColor:zot(J.rollColor)?Ao.Pick.choose(f):J.rollColor,selectedColor:zot(J.selectedColor)?Ao.Pick.choose(m):J.selectedColor,selectedRollColor:zot(J.selectedRollColor)?Ao.Pick.choose(z):J.selectedRollColor,backgroundColor:zot(J.backgroundColor)?Ao.Pick.choose(u):J.backgroundColor,rollBackgroundColor:zot(J.rollBackgroundColor)?Ao.Pick.choose(d):J.rollBackgroundColor,selectedBackgroundColor:zot(J.selectedBackgroundColor)?Ao.Pick.choose(h):J.selectedBackgroundColor,selectedRollBackgroundColor:zot(J.selectedRollBackgroundColor)?Ao.Pick.choose(g):J.selectedRollBackgroundColor,wait:zot(J.wait)?Ao.Pick.choose(T):J.wait};if(t)for(var i in t)zot(t[i])||(r[i]=t[i]);(K=new Ao.Button({width:y?zot(J.width)?Q?s:pe+ie/2+v[0]/2:J.width:zot(J.width)?re:J.width,height:y?ie:c,label:J.label,borderColor:null!=U.borderColor?U.borderColor:null,borderWidth:null!=U.borderWidth?U.borderWidth:null,backgroundColor:r.backgroundColor,rollBackgroundColor:r.rollBackgroundColor,corner:v,shadowColor:-1,gradient:w,gloss:C,backing:x?x.clone():null,rollBacking:k?k.clone():null,wait:r.wait,waitTime:zot(J.waitTime)?A:J.waitTime,waitBackgroundColor:zot(J.waitBackgroundColor)?P:J.waitBackgroundColor,rollWaitBackgroundColor:zot(J.rollWaitBackgroundColor)?B:J.rollWaitBackgroundColor,waitColor:zot(J.waitColor)?E:J.waitColor,rollWaitColor:zot(J.rollWaitBackgroundColor)?I:J.rollWaitColor,waitModal:zot(J.waitModal)?S:J.waitModal,waitEnabled:zot(J.waitEnabled)?W:J.waitEnabled,align:L,valign:_,indentHorizontal:D,indentVertical:Y,inherit:Ao.copy(U)})).tabInfo=r,K.color=K.tabInfo.color,K.rollColor=K.tabInfo.rollColor,K.type="TabsButton",K.content=J,K.listIndentReady=!0}else{if(J.listIndentReady)K=J;else{(K=new Ao.Container).type=J.type,K.content=J;for(var l=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],a=0;a<l.length;a++)J[l[a]]&&(K[l[a]]=J[l[a]])}J.checkBox&&(K.checkBox=J.checkBox),zot(K.tabInfo)&&(K.tabInfo={}),H&&(K.excludeTap=!0),K.tabInfo.color=zot(J.color)?p:J.color,K.tabInfo.backgroundColor=zot(J.backgroundColor)?u:J.backgroundColor,J.listIndentReady||(new Ao.Rectangle(Math.max(J.width,y?Q?s:pe+ie/2+v[0]/2:J.width),Math.max(J.height,y?ie:c),Ao.clear).addTo(K).expand(0).cur(),J.center(K).cur(),"center"!=O&&"middle"!=O&&J.pos(0,null,"right"==O),"center"!=j&&"middle"!=j&&J.pos(null,0,null,"bottom"==j),K.listIndentReady=!0)}K.width>fe&&(fe=K.width),R?K.tap(function(e){be(e.currentTarget.znum),Z.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}):K.zimTabEvent=K.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){be(e.currentTarget.znum),Z.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}),K.on("mousedown",function(e){Z.buttonDown=e.currentTarget}),K.on("pressup",function(){Z.buttonDown=null}),n.push(J.label),o.push(K),K.index=he}return[o,n]}var ze=me(n);function ye(){var e,t=0,o=0;for(he=0;he<oe.length;he++)(e=oe[he]).znum=he,e.selectedIndex=he,e.selectedIndex==ee&&b&&(e.backgroundColor=h,e.rollBackgroundColor=g,e.color=m),te[he]&&(te[he].znum=he),Z.addChild(e),y&&!Q||(e.x=(s-e.width)/2,e.y=(c-e.height)/2),y?(e.y=o,o=e.y+e.height+l,"left"==O?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:X)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==O&&(e.x=(Q?s:fe)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:X))):(e.x=t,t=e.x+e.width+l,"top"==j?e.y=("TabsButton"!=e.type||ae?X:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==j&&(e.y=c-e.height-("TabsButton"!=e.type||ae?X:0))),0!=he||a||(e.enabled=!1),e.enabled=!0;zot(M)||Z.removeChild($),Z._bounds=null;var n=Z.getBounds(),r=0,i=0;if(n||0==createjs.EaselJS.version[0]?n&&(r=y&&0!=n.width&&Q?s:n.width,i=y&&0!=n.height?n.height:c,Z.setBounds(r,i)):Z.setBounds(),zot(M)||($.widthOnly=r,$.heightOnly=i,Z.addChildAt($,0)),y&&!Q)for(he=0;he<=oe.length;he++)"center"!=O&&"middle"!=O||(e.x=(r-e.width)/2)}function be(e){var t;e!=ee&&((t=oe[ee])&&b&&(t.tabInfo&&zot(t.tabInfo.wait)&&(t.tabInfo.backgroundColor&&(t.backgroundColor=t.tabInfo.backgroundColor),t.tabInfo.rollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.rollBackgroundColor),t.tabInfo.color&&t.label&&(t.color=t.tabInfo.color),t.tabInfo.rollColor&&t.label&&(t.rollColor=t.tabInfo.rollColor)),a||(t.enabled=!0)),(t=oe[ee=e])&&(t.tabInfo&&zot(t.tabInfo.wait)&&b&&(t.tabInfo.selectedBackgroundColor&&(t.backgroundColor=t.tabInfo.selectedBackgroundColor),t.tabInfo.selectedRollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.selectedRollBackgroundColor),t.tabInfo.selectedColor&&t.label&&(t.color=t.tabInfo.selectedColor),t.tabInfo.selectedRollColor&&t.label&&(t.rollColor=t.tabInfo.selectedRollColor)),a||(t.enabled=!1)))}function ve(){Z.keyFocus=!0;var e=document.activeElement;e&&e.blur()}oe=ze[0],te=ze[1],ye(),this.addAt=function(e,t,o){zot(t)&&(t=oe.length),t=Ao.constrain(t,0,oe.length),Array.isArray(e)||(e=[e]),se(e),ge(e,o);e=me(e,o),o=e[0],e=e[1];t<=ee&&(ee+=o.length);o=[t,0].concat(o);return Array.prototype.splice.apply(oe,o),o=[t,0].concat(e),Array.prototype.splice.apply(te,o),ye(),Z},this.removeAt=function(e,t){if(0==oe.length)return Z;for(zot(e)&&(e=1),zot(t)&&(t=oe.length-e),(t=Ao.constrain(t,0,oe.length-e))<=ee&&ee<=t+e&&(ee=-1),t+e<ee&&(ee-=e),he=t;he<t+e;he++)oe[he].tabInfo&&(oe[he].tabInfo.backgroundColor&&(oe[he].backgroundColor=oe[he].tabInfo.backgroundColor),oe[he].tabInfo.color&&oe[he].label&&(oe[he].color=oe[he].tabInfo.color)),R?oe[he].noTap():oe[he].off((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",oe[he].zimTabEvent),oe[he].removeFrom();return oe.splice(t,e),te.splice(t,e),ye(),Z},Z.keyEvent=function(e){var t;Z.keyEnabled&&Z.keyFocus&&!Z.zimAccessibility&&9==e.keyCode&&(t=ee,e.shiftKey?be(--t<0?V?n.length-1:0:t):be(++t>n.length-1?V?0:n.length-1:t),Z.dispatchEvent("change"),Z.dispatchEvent("keychange"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update(),e.preventDefault())},WW.addEventListener("keydown",Z.keyEvent),Object.defineProperty(this,"selected",{get:function(){return oe[ee]},set:function(){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ee},set:function(e){be(e),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return ee},set:function(e){be(Math.min(Math.max(e,0),n.length-1)),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.color:p},set:function(e){if(p=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.color=e),t==ee&&b||(Z.buttons[t].color=p);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.rollColor:f},set:function(e){if(f=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.rollColor=e),Z.buttons[t].rollColor=f,t!=ee&&Z.buttons[t].rolled&&(Z.buttons[t].color=f);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedColor:m},set:function(e){if(m=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedColor=e),t==ee&&b&&(Z.buttons[t].color=m);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedRollColor:z},set:function(e){if(z=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedRollColor=e),t==ee&&b&&Z.buttons[t].rolled&&(Z.buttons[t].color=z);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.backgroundColor:u},set:function(e){if(u=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.backgroundColor=e),t==ee&&b||(Z.buttons[t].backgroundColor=u);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.rollBackgroundColor:d},set:function(e){if(d=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.rollBackgroundColor=e),Z.buttons[t].rollBackgroundColor=d,t!=ee&&Z.buttons[t].rolled&&(Z.buttons[t].backgroundColor=d);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedBackgroundColor:h},set:function(e){if(h=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedBackgroundColor=e),t==ee&&b&&(Z.buttons[t].backgroundColor=h);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedRollBackgroundColor:g},set:function(e){if(g=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedRollBackgroundColor=e),t==ee&&b&&Z.buttons[t].rolled&&(Z.buttons[t].backgroundColor=g);Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return te[ee]},set:function(){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=te[ee]?te[ee].text:void 0},set:function(){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return oe},set:function(){zon&&zogy("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return te},set:function(){zon&&zogy("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(Z,"enabled",{get:function(){return Z._enabled},set:function(e){rt(Z,e)}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==Z},set:function(){Ao.KEYFOCUS=Z}}),r&&Ao.KEYFOCUS&&ve(),this.on("mousedown",function(){r&&ve()});e=Z.getBounds();zot(e)||0==e.width?Z.setBounds(0,0,s,c):Z.width=s,zot(F)&&(F=null!=U.selectedIndex?U.selectedIndex:0),Z.selectedIndex=F,!1!==G&&Ao.styleTransforms(this,U),this.clone=function(){for(var e=Ao.copy(n,!0),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return Z.cloneProps(new Ao.Tabs(s,c,e,u,d,h,g,p,f,m,z,y,l,a,b,v,o,r,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,i,D,Y,X,R,H,F,N,V,G,this.group,q))},this.doDispose=function(e,t,o){Z.keyEvent&&WW.removeEventListener("keydown",Z.keyEvent),Ao.loop(Z.buttons,function(e){e.dispose()}),Z.keyEvent=null,o||this.zimContainer_dispose(!0),b=J=n=te=K=oe=null}},Ao.extend(Ao.Tabs,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},Ao.Pad=function(e,n,t,o,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S){var W;if(W=zob(Ao.Pad,arguments,"width, cols, rows, keys, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",this))return W;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=I;var M,O=!1===E?{}:Ao.getStyle(this.type,this.group,S);if(zot(e)&&(e=null!=O.width?O.width:150),zot(n)&&(n=null!=O.cols?O.cols:3),zot(t)&&(t=null!=O.rows?O.rows:n),zot(o))if(null!=O.keys)o=O.keys;else for(o=[],M=1;M<=t*n;M++)o.push(M);zot(g)&&(g=null==O.currentEnabled||O.currentEnabled),zot(h)&&(h=null!=O.spacing?O.spacing:1);var j,L=this;this.cols=n,this.rows=t;var _,D=e/n-h,Y=[],X=0;for(this.labels=[],this.buttons=[],M=0;M<t;M++){for(var R=[],H=0;H<n;H++)R.push(null!=o[X]?o[X]:""),X++;var F=null!=O.corner?O.corner:p;F&&!Array.isArray(F)&&(F=[F,F,F,F]),_=Y[M]=new Ao.Tabs({width:e,height:D,tabs:R,backgroundColor:null!=O.backgroundColor?O.backgroundColor:r,rollBackgroundColor:null!=O.rollBackgroundColor?O.rollBackgroundColor:i,selectedBackgroundColor:null!=O.selectedBackgroundColor?O.selectedBackgroundColor:l,color:null!=O.color?O.color:s,rollColor:null!=O.rollColor?O.rollColor:c,selectedColor:null!=O.selectedColor?O.selectedColor:u,spacing:null!=O.spacing?O.spacing:h,currentEnabled:null!=O.currentEnabled?O.currentEnabled:g,corner:F,backing:null!=O.backing?O.backing.clone():y,rollBacking:null!=O.rollBacking?O.rollBacking.clone():b,base:null,keyEnabled:!1,gradient:null!=O.gradient?O.gradient:m,gloss:null!=O.gloss?O.gloss:z,wait:null!=O.wait?O.wait:v,waitTime:null!=O.waitTime?O.waitTime:w,waitBackgroundColor:null!=O.waitBackgroundColor?O.waitBackgroundColor:C,rollWaitBackgroundColor:null!=O.rollWaitBackgroundColor?O.rollWaitBackgroundColor:x,waitColor:null!=O.waitColor?O.waitColor:k,rollWaitColor:null!=O.rollWaitColor?O.rollWaitColor:T,waitModal:null!=O.waitModal?O.waitModal:A,waitEnabled:null!=O.waitEnabled?O.waitEnabled:P,group:I,style:!1}),this.labels=this.labels.concat(_.labels),this.buttons=this.buttons.concat(_.buttons),this.addChild(_),_.selectedIndex=-1,_.y=(D+h)*M,_.znum=M,_.on("change",N)}function N(e){var t=e.target;L.selected=t.selected,L.text=t.text,L.label=t.label;for(var e=t.selectedIndex,o=0;o<Y.length;o++)Y[o].selectedIndex=-1;t.selectedIndex=e,j=t.znum*n+e,L.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!L.stage||L.stage.update()}this.tabs=Y,Object.defineProperty(this,"selectedIndex",{get:function(){return j},set:function(e){j=e;for(var t=0;t<Y.length;t++)Y[t].selectedIndex=-1;e=Math.floor(j/n);0<=e&&e<L.tabs.length&&(L.tabs[e].selectedIndex=j%n)}}),this._enabled=!0,Object.defineProperty(L,"enabled",{get:function(){return L._enabled},set:function(e){rt(L,e)}}),zot(B)&&(B=null!=O.selectedIndex?O.selectedIndex:0),L.selectedIndex=B,!1!==E&&Ao.styleTransforms(this,O),this.clone=function(){return L.cloneProps(new Ao.Pad(e,n,t,o,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,this.group,S))},this.dispose=function(e,t,o){Ao.loop(Y,function(e){e.dispose()}),this.labels=this.buttons=this.tabs=null,_=Y=L.rowTabs=null,o||this.zimContainer_dispose(!0)}},Ao.extend(Ao.Pad,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.DPad=function(e,o,t,n,r,i,l,a,s,c,u,d,h,g,p,f,m){if(z=zob(Ao.DPad,arguments,"axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",this))return z;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=f;var z=!1===p?{}:Ao.getStyle(this.type,this.group,m);zot(e)&&(e=null!=z.axis?z.axis:"all"),zot(o)&&(o=null!=z.width?z.width:100),zot(t)&&(t=null!=z.backgroundColor?z.backgroundColor:"#666666"),zot(r)&&(r=null!=z.borderColor?z.borderColor:null),zot(n)&&(n=null!=z.borderWidth?z.borderWidth:null),r<0||n<0?r=n=null:null!=r&&null==n&&(n=1),zot(i)&&(i=null!=z.indicatorColor?z.indicatorColor:"#dddddd"),zot(l)&&(l=null!=z.indicatorPressColor?z.indicatorPressColor:"#eeeeee"),zot(a)&&(a=null!=z.indicatorScale?z.indicatorScale:1),zot(s)&&(s=null!=z.indicatorRadius?z.indicatorRadius:null),zot(c)&&(c=null==z.innerCircle||z.innerCircle),zot(u)&&(u=null!=z.innerScale?z.innerScale:.5),zot(d)&&(d=null!=z.activeRadius?z.activeRadius:o),zot(h)&&(h=null==z.clamp||z.clamp),zot(g)&&(g=null!=z.logo&&z.logo);var y=this;this.axis=e,this.outer=new Ao.Circle(o/2,t,r,n).addTo(this);f=this.inner=new Ao.Circle(o*u/2,"rgba(0,0,0,.2)").center(this);g&&(this.logo=new Ao.Label({text:"D",bold:!0}).center(f).mov(1,2).alp(.3));var b=(new Ao.Container).addTo(this),v=.2*(o-n)*a,f=8;"vertical"==e?f=2:"horizontal"==e?(f=2,b.rotation=90):"both"==e&&(f=4),Ao.loop(f,function(e,t){new Ao.Triangle(v,v,v,i).addTo(b).reg(null,zot(s)?.475*(o-n):s).rot(360*e/t)});var w,C,x=0,k=0;this.on("mousedown",function(e){C=e,b.loop(function(e){e.color=l}),y.ticker=Ao.Ticker.add(function(){var e;x=(e=C).stageX/Ao.scaX,k=e.stageY/Ao.scaY,w=y.globalToLocal(x,k),(e=new createjs.Event("change")).dirX=2*((w.x+d)/(2*d)-.5),e.dirY=2*((w.y+d)/(2*d)-.5),h&&(e.dirX=Ao.constrain(e.dirX,-1,1),e.dirY=Ao.constrain(e.dirY,-1,1)),y.dirX=e.dirX,y.dirY=e.dirY,y.dispatchEvent(e)})}),this.on("pressmove",function(e){C=e}),this.on("pressup",function(){Ao.Ticker.remove(y.ticker),y.dirX=y.dirY=0,b.loop(function(e){e.color=i}),y.stage&&y.stage.update()}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){rt(y,e)}}),Ao.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new Ao.DPad(e,o,t,n,r,i,l,a,s,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&Ao.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.DPad,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Radial=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_){if(D=zob(Ao.Radial,arguments,"labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",this))return D;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=L;var D=!1===j?{}:Ao.getStyle(this.type,this.group,_);zot(e)&&(e=null!=D.labels?D.labels:["A","B","C","D","E"]),zot(t)&&(t=null!=D.size?D.size:30),zot(o)&&(o=null!=D.font?D.font:"verdana"),zot(l)&&(l=null!=D.startAngle?D.startAngle:null),zot(a)&&(a=null!=D.totalAngle?D.totalAngle:360),zot(s)&&(s=null!=D.angles?D.angles:null),zot(c)&&(c=null==D.flip||D.flip),zot(u)&&(u=null!=D.shiftRadial?D.shiftRadial:0),zot(d)&&(d=null!=D.icons?D.icons:null),zot(h)&&(h=null!=D.rollIcons?D.rollIcons:null),zot(g)&&(g=null!=D.rotateIcons&&D.rotateIcons),zot(p)&&(p=null!=D.iconsShiftRadial?D.iconsShiftRadial:0),zot(n)&&(n=null!=D.height?D.height:60),zot(r)&&(r=null!=D.coreRadius?D.coreRadius:100),zot(i)&&(i=null!=D.coreColor?D.coreColor:"#333"),zot(b)&&(b=null!=D.backdropColor?D.backdropColor:Ao.clear),zot(f)&&(f=null!=D.backgroundColor?D.backgroundColor:"#666"),zot(m)&&(m=null!=D.rollBackgroundColor?D.rollBackgroundColor:"#777"),zot(z)&&(z=null!=D.selectedBackgroundColor?D.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=D.selectedRollBackgroundColor?D.selectedRollBackgroundColor:z),zot(v)&&(v=null!=D.color?D.color:"white"),zot(w)&&(w=null!=D.rollColor?D.rollColor:v),zot(C)&&(C=null!=D.selectedColor?D.selectedColor:v),zot(x)&&(x=null!=D.selectedRollColor?D.selectedRollColor:w),zot(k)&&(k=null!=D.borderColor?D.borderColor:"#333"),zot(T)&&(T=null!=D.borderWidth?D.borderWidth:2),zot(B)&&(B=null!=D.gapAsAngle&&D.gapAsAngle),zot(P)&&(P=null!=D.gap?D.gap:B?3:6),zot(A)&&(A=null!=D.gradient?D.gradient:null),!0===A&&(A=.1),zot(E)&&(E=null!=D.spacing?D.spacing:6),zot(I)&&(I=null!=D.spacingInner?D.spacingInner:E),zot(S)&&(S=null!=D.spacingOuter?D.spacingOuter:E),zot(W)&&(W=null!=D.currentEnabled&&D.currentEnabled),zot(M)&&(M=null==D.currentSelected||D.currentSelected);var Y=this,X=this.innerRadius=r+I,R=this.outerRadius=X+n;this.setBounds(-R,-R,2*R,2*R);var H,L=this.backdrop=new Ao.Circle(R+S,b).center(this);if(0<r&&(this.core=new Ao.Circle(r,i).center(this)),s&&s.length<e.length-1)return zon&&zogy("Radial() - not enough angles provided"),this;if(e&&0<e.length||d&&0<d.length){if(e&&0<e.length&&(H=e.length),d&&0<d.length&&(H=0<H?Math.min(d.length,H):d.length),h&&h.length<H)for(var F=0;F<H-h.length;F++)h.push(new Ao.Circle(1,Ao.clear));var N=L.width,V=this.buttons=new Ao.Container(-N/2,-N/2,N,N).centerReg(this),G=P;B||(P=P/R*180/Math.PI,G=G/X*180/Math.PI);for(var q=(a-P*H+(360==a?0:P))/H,U=l||0,Q=0;Q<H;Q++){s&&(q=s[Q]);var Z=new Ao.Shape(-N/2,-N/2,N,N).centerReg(V);Z.num=Q,Z.zimSelected=!1,Z.angle=q;var K=Z.graphics;Z.backgroundColor=Ao.Pick.choose(f),Z.rollBackgroundColor=Ao.Pick.choose(m),Z.selectedBackgroundColor=Ao.Pick.choose(z),Z.selectedRollBackgroundColor=Ao.Pick.choose(y),Z.color=Ao.Pick.choose(v),Z.rollColor=Ao.Pick.choose(w),Z.selectedColor=Ao.Pick.choose(C),Z.selectedRollColor=Ao.Pick.choose(x),Z.colorCommand=K.f(Z.backgroundColor).command,(zot(T)||0<T)&&(zot(k)&&zot(T)||(zot(k)&&(k="black"),Z.borderColorCommand=K.s(k).command,Z.borderWidthCommand=K.ss(T).command));var J,$=(U-90-q/2)*Math.PI/180,ee=(U-90+q/2)*Math.PI/180,te=(U-90+(q+P-G)/2)*Math.PI/180,oe=(U-90-(q+P-G)/2)*Math.PI/180;K.arc(0,0,R,$,ee,!1),K.arc(0,0,X,te,oe,!0).cp(),A&&(K.s().ss().rf(["rgba(0,0,0,"+A+")","rgba(255,255,255,"+A+")"],[0,1],0,0,X,0,0,R),K.arc(0,0,R,$,ee,!1),K.arc(0,0,X,te,oe,!0).cp()),Z.cursor="pointer",Z.zimOverEvent=Z.on("mouseover",function(e){e=e.target;e.colorCommand.style=e==Y.selected&&M?e.selectedRollBackgroundColor:e.rollBackgroundColor,e.label&&(e.label.color=e==Y.selected&&M?e.selectedRollColor:e.rollColor),h&&(e.holder.removeAllChildren(),h[e.num].loc(1,0,e.holder)),Y.stage&&Y.stage.update()}),Z.zimOutEvent=Z.on("mouseout",function(e){e=e.target;e.colorCommand.style=e==Y.selected&&M?e.selectedBackgroundColor:e.backgroundColor,e.label&&(e.label.color=e==Y.selected&&M?e.selectedColor:e.color),h&&(e.holder.removeAllChildren(),d&&d[e.num].loc(1,0,e.holder)),Y.stage&&Y.stage.update()}),Z.zimDownEvent=Z.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){var t=e.target,e=t!==Y.selected;Y.lastSelected=Y.selected,ne=t.num,M?e?(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),Y.selected=t,Y.label=t.label,Y.label&&(Y.text=Y.label.text),Y.icon=t.icon,t.colorCommand.style=t.selectedRollBackgroundColor,t.label&&(t.label.color=t.selectedRollColor)):W||(ne=-1,Y.selected=null,Y.label=null,Y.text=null,Y.icon=null,t.colorCommand.style=t.rollBackgroundColor,t.label&&(t.label.color=t.rollColor)):(Y.selected=t,Y.label=t.label,Y.label&&(Y.text=Y.label.text),Y.icon=t.icon),Y.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}),d&&0<d.length&&(oe=X+n/2+p,(oe=Z.holder=new Ao.Container(3,oe).addTo(this).reg(1,oe).rot(U)).mouseChildren=!1,oe.mouseEnabled=!1,Z.icon=d[Q],d[Q].loc(1,0,oe),g||(d[Q].rotation=-U)),e&&0<e.length&&(J="LabelOnArc"!=e[Q].type?(J="Label"==e[Q].type?e[Q]:new Ao.Label({text:e[Q],size:t,font:o,color:v,style:j,inherit:_}),new Ao.LabelOnArc({label:J,color:v,size:t,spacing:-5,flip:c&&90<U&&U<270,radius:X+(n-J.height)/2+2+u,style:j,inherit:_})):e[Q],e[Q]=J,(Z.label=J).center(this).rot(U),J.mouseChildren=!1,J.mouseEnabled=!1),Q!=e.length-1&&(U+=(q+(s?s[Q+1]:q))/2+P)}zot(l)||(Y.rotation+=Y.buttons.getChildAt(0).angle/2)}var ne=null;Object.defineProperty(this,"selectedIndex",{get:function(){return ne},set:function(e){var t;Y.buttons&&(t=Y.buttons.getChildAt(e)),t!==Y.selected&&(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),(Y.selected=t)&&(M&&(t.colorCommand.style=t.selectedRollBackgroundColor),t.label&&(M&&(t.label.color=t.selectedColor),Y.text=t.label.text))),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),zot(O)&&(O=null!=D.selectedIndex?D.selectedIndex:0),Y.selectedIndex=O,Ao.styleTransforms(this,D),this.clone=function(){return Y.cloneProps(new Ao.Radial(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,this.group,_))}},Ao.extend(Ao.Radial,Ao.Container,"clone","zimContainer",!1),Ao.RadialMenu=function(e,i,l,a,s,t,o,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,r,E,I,S,W,M,O,j,L,_){var D="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",Y=D.split(", "),X=!1;if(e&&e.constructor==={}.constructor)for(var R in e)if(0<=Y.indexOf(R)){X=!0;break}if(e&&X&&(F=zob(Ao.RadialMenu,arguments,D,this)))return F;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=L;D=!1===j?{}:Ao.getStyle(this.type,this.group,_);zot(e)&&(e=null!=D.menu?D.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(i)&&(i=null!=D.size?D.size:30),zot(l)&&(l=null!=D.font?D.font:"verdana"),zot(c)&&(c=null!=D.startAngle?D.startAngle:null),zot(u)&&(u=null!=D.totalAngle?D.totalAngle:360),zot(d)&&(d=null==D.flip||D.flip),zot(g)&&(g=null!=D.rotateIcons&&D.rotateIcons),zot(h)&&(h=null!=D.shiftRadial?D.shiftRadial:0),zot(p)&&(p=null!=D.iconsShiftRadial?D.iconsShiftRadial:0),zot(a)&&(a=null!=D.height?D.height:60),zot(s)&&(s=null!=D.coreRadius?D.coreRadius:100),zot(t)&&(t=null!=D.coreColor?D.coreColor:"#333"),zot(o)&&(o=null!=D.title?D.title:"MENU"),zot(n)&&(n=null!=D.titleIcon?D.titleIcon:null),zot(b)&&(b=null!=D.backdropColor?D.backdropColor:Ao.clear),zot(f)&&(f=null!=D.backgroundColor?D.backgroundColor:"#666"),zot(m)&&(m=null!=D.rollBackgroundColor?D.rollBackgroundColor:"#777"),zot(z)&&(z=null!=D.selectedBackgroundColor?D.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=D.selectedRollBackgroundColor?D.selectedRollBackgroundColor:z),zot(v)&&(v=null!=D.color?D.color:"white"),zot(w)&&(w=null!=D.rollColor?D.rollColor:v),zot(C)&&(C=null!=D.selectedColor?D.selectedColor:v),zot(x)&&(x=null!=D.selectedRollColor?D.selectedRollColor:w),zot(k)&&(k=null!=D.borderColor?D.borderColor:"#333"),zot(T)&&(T=null!=D.borderWidth?D.borderWidth:2),zot(B)&&(B=null!=D.gapAsAngle&&D.gapAsAngle),zot(P)&&(P=null!=D.gap?D.gap:B?3:6),zot(r)&&(r=null!=D.spacing?D.spacing:6),zot(A)&&(A=null!=D.gradient?D.gradient:null),!0===A&&(A=.1),zot(E)&&(E=null!=D.spacingInner?D.spacingInner:r),zot(I)&&(I=null!=D.spacingOuter?D.spacingOuter:r),zot(S)&&(S=null!=D.currentEnabled&&D.currentEnabled),zot(W)&&(W=null==D.currentSelected||D.currentSelected),zot(M)&&(M=null!=D.open&&D.open),zot(O)&&(O=null==D.under||D.under);var H=this,F=(zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",N=null,L=this.core=new Ao.Circle({radius:s,color:t,style:j,inherit:_}).addTo(this);n&&(this.titleIcon=n.center(L)),o&&(this.title=new Ao.Label({text:o,size:i,font:l,color:v,style:j,inherit:_}).center(L)),L.cursor="pointer",L.on(F,function(){H.leafNode=!1,0==U.length?Q():(Ao.loop(U,function(e){e.selectedIndex=-1,e.removeFrom(),U=[]}),H.outerLevel=0,H.selected=H.outerMenu=H.selectedMenu=H.text=null),!S&&H.selected==N||H.dispatchEvent("change"),N=H.selected,H.stage&&H.stage.update()}),this.closeRings=function(e){zot(e)&&(e=H.outerLevel);var o=H.outerLevel-e;Ao.loop(U,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,U.pop())},!0),H.outerLevel=o,H.outerMenu=U[U.length-1],H.outerMenu&&(H.outerMenu.selectedIndex=-1),H.selected=H.selectedMenu=H.text=null,U[U.length-2]?(H.selectedMenu=U[U.length-2],H.selectedIndex=H.selectedMenu.selectedIndex):H.selectedIndex=-1,H.selected!=N&&H.dispatchEvent("change"),N=H.selected,H.stage&&H.stage.update()};var V,G,q={};H.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},V=H.tree=new Ao.Hierarchy(e),G=V.getLinearIDs()),H.lastRadial=null;var U=this.radials=[];function Q(e){var o,t,n,r;e?o=e.ringLevel:(o=0,r=s),Ao.loop(U,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,U.pop())},!0),e&&(t=e.selected),t?(n=t.id,r=e.outerRadius,Z(n,o+1,r)):e||Z("id0",o+1,r),H.selected=t,H.selected?(H.selectedMenu=U[H.selected.menu.ringLevel-1],H.selectedIndex=H.selected.num,H.selected.label?H.text=H.selected.label.text:H.text=null):S&&e?(H.selectedIndex=e.selectedIndex,H.label=e.label,H.text=e.text,H.icon=e.icon,H.selectedMenu=e):(H.text=null,H.selectedIndex=-1,H.selectedMenu=null),H.stage&&H.stage.update()}function Z(e,t,o){var n,r;t&&(H.outerLevel=t),q[e]||(t=(r=V.getData(e)).list)&&!Ao.isEmpty(t)&&(o={labels:V.getLinearList(t),coreRadius:o,size:i,font:l,startAngle:c,totalAngle:u,flip:d,rotateIcons:g,shiftRadial:h,iconsShiftRadial:p,height:a,coreColor:Ao.clear,backdropColor:b,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,borderColor:k,borderWidth:T,gapAsAngle:B,gap:P,gradient:A,spacingInner:E,spacingOuter:I,currentSelected:W,currentEnabled:S,style:j,inherit:_},r.styles&&(o=Ao.merge(o,r.styles)),n=q[e]=new Ao.Radial(o),G=V.getLinearIDs(t),n.buttons.loop(function(e,t){e.menu=n,e.id=G[t]}),n.ringLevel=H.outerLevel,n.selectedIndex=-1,n.on("change",function(e){H.leafNode=!1,Q(e.target),!S&&H.selected==N||H.dispatchEvent("change"),N=H.selected})),q[e]?(U.push(q[e]),q[e].center(H),O&&q[e].bot()):(H.leafNode=!0,--H.outerLevel),H.outerMenu=n}M&&Q(),Ao.styleTransforms(this,D),this.clone=function(){return H.cloneProps(new Ao.RadialMenu(e,i,l,a,s,t,o,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,r,E,I,S,W,M,O,j,this.group,_))}},Ao.extend(Ao.RadialMenu,Ao.Container,"clone","zimContainer",!1),Ao.ColorPicker=function(e,o,n,r,i,t,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){if(I=zob(Ao.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",this))return I;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=P;var E,I=!1===A?{}:Ao.getStyle(this.type,this.group,B);zot(e)&&(e=null!=I.width?I.width:500),zot(o)&&(o=null!=I.colors?I.colors:"spectrum"),"legacy"==o&&(E=!0),zot(n)&&(n=null!=I.cols?I.cols:10),zot(r)&&(r=null!=I.spacing?I.spacing:2);P=!E&&0<o.length&&o.length<=n;"spectrum"==o&&(n=10,P=!(r=2)),zot(t)&&(t=null!=I.alphaPicker?I.alphaPicker:!P),zot(k)&&(k=null!=I.tolerancePicker&&I.tolerancePicker),k&&(t=!1),zot(i)&&(i=null!=I.greyPicker?I.greyPicker:!P),zot(s)&&(s=null!=I.shadowColor?I.shadowColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=I.shadowBlur?I.shadowBlur:14),zot(u)&&(u=null!=I.buttonBar?I.buttonBar:!P),zot(a)&&(a=u||"spectrum"==o?null==I.draggable||I.draggable:null!=I.draggable&&I.draggable),zot(d)&&(d=null!=I.circles&&I.circles),zot(h)&&(h=null!=I.indicator&&I.indicator,u||(h=null==I.indicator||I.indicator)),zot(g)&&(g=null!=I.backgroundColor?I.backgroundColor:"black"),zot(l)&&(l=null!=I.startBackgroundColor?I.startBackgroundColor:null),zot(p)&&(p=null==I.keyArrows||I.keyArrows),zot(y)&&(y=null!=I.dropperTarget&&I.dropperTarget),zot(b)&&(b=null==I.spectrumCollapse||I.spectrumCollapse),zot(v)&&(v=null==I.spectrumMode||I.spectrumMode),zot(w)&&(w=null==I.spectrumClose||I.spectrumClose),zot(C)&&(C=null==I.spectrumOk||I.spectrumOk),zot(x)&&(x=null!=I.spectrumTitle?I.spectrumTitle:null),zot(T)&&(T=null!=I.collapsed&&I.collapsed);var S=this;if(zot(f)){if(!WW.zdf)return;f=WW.zdf.stage}else{if(!f.getBounds)return;if(zot(f.getStage))return}S.container=f;var W="#e472c4",M="#50c4b7",O=1,j=1,L=new createjs.Shape;this.addChild(L),L.x+=r,L.y+=r,E=!1;var _,D,Y=[],X="spectrum"==o;if(zot(o)||"legacy"==o||"spectrum"==o){E=!0;for(var R=6,R=Math.ceil(Math.pow(216,.5)),H=(e-r)/18-r,F=Math.floor(Math.pow(R*R,1/3)),N=[],V=0;V<6;V++)for(var G=0;G<6;G++)for(var q=0;q<6;q++)N.push("#"+K(3*V)+K(3*G)+K(3*q));for(o=[],V=0;V<N.length;V++)_=Math.floor(V/6),o[18*((D=V%6)+6*(F=18<=_?1:0))+(_-6*F*3)]=N[V];n=18,Y=[M,W]}else H=(e-r)/n-r;var U,Q=Math.ceil(o.length/n),P=1,Z=String(o[o.length-1]);function K(e){return(e=Math.floor(e).toString(16))+""+e}zot(l)||((te=l.match(/rgba\((.*)\)/))&&(P=(_=te[1].split(",")).pop(),l="rgb("+_.join(",")+")"),Z=String(l)),E&&(U=M),F=0;var J,$,ee=L.graphics,R=null!=I.borderColor?I.borderColor:null,te=null!=I.borderWidth?I.borderWidth:null;!zot(R)&&zot(te)&&(te=1),te&&zot(R)&&(R="#333"),te&&ee.s(R).ss(te);var oe=o.length;for(X&&(oe=56),V=0;V<oe;V++)_=V%n,D=Math.floor(V/n),J=_*(H+r),$=D*(H+r),d?ee.f(o[V]).dc(J+H/2,$+H/2,H/2):ee.f(o[V]).r(J,$,H,H);var ne=$+H+r;S.colors=o;var re=ne;if(i){for(V=0;V<16;V++)Y.push("#"+K(V)+K(V)+K(V));for(V=0;V<Y.length;V++)_=Math.floor(V/n),J=(D=V%n)*(H+r),$=_*(H+r)+ne,d?ee.f(Y[V]).dc(J+H/2,$+H/2,H/2):ee.f(Y[V]).r(J,$,H,H);ne=$+H+r;var ie=n,le=Math.ceil(Y.length/n)}function ae(e){zot(e)||e<0?h.visible=!1:(h.visible=!0,"#000"==Z||"#000000"==Z||"black"==Z?(h.color="#222",h.alpha=1):(h.color="black",h.alpha=.5),h.x=L.x+e%n*(H+r)+H/2,h.y=L.x+Math.floor(e/n)*(H+r)+H/2)}S.greys=Y,h&&!X&&((h=this.indicator=d?new Ao.Circle(H/2*.5,null,null,null,null,null,null,null,!1):new Ao.Rectangle(.5*H,.5*H,null,null,null,null,null,null,null,!1)).alpha=.5,h.centerReg(),this.addChild(h),h.mouseEnabled=!1,ae(o.indexOf(Z)));var se,ce,ue,de,he,ge,pe,R=ne;(t||k)&&((se=new Ao.Container({style:!1})).setBounds(0,0,600,70),this.addChild(se),se.x=0,se.y=ne,te=this.alphaBacking=new Ao.Rectangle(580,50,"#222",null,null,0,null,null,null,!1),se.addChild(te),Ao.centerReg(te,se),te=this.alphaBut=new Ao.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),(ce=this.alphaSlider=new Ao.Slider({min:0,max:1,step:k?0:.05,button:te,barLength:k?275:330,barWidth:2,barColor:"#999",vertical:!1,useTicks:!1,inside:!1,style:!1})).currentValue=zot(P)?1:P,k&&(ce.currentValue=.1),se.addChild(ce),ce.x=40,ce.y=se.height/2,ue=this.alphaText=new Ao.Label({text:k?"Tolerance: 0.1":"Alpha: "+Ao.decimals(P),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group}),se.addChild(ue),ue.x=ce.x+ce.bar.width+40,ue.y=se.height/2-ue.height/2,se.scaleX=se.scaleY=e/600,ce.on("change",function(){ue.text=k?"Tolerance: "+Je(ce.currentValue):"Alpha: "+Je(ce.currentValue),t&&pe&&(pe.alpha=j=ce.currentValue),S.dispatchEvent("change"),S.stage&&S.stage.update()}),ne+=se.height-10,k&&(S.toleranceBacking=S.alphaBacking,S.toleranceBut=S.alphaBut,S.toleranceSlider=S.alphaSlider,S.alphaBacking=S.alphaBut=S.alphaSlider=null)),u?((de=new Ao.Container({style:!1})).setBounds(0,0,600,100),this.addChild(de),de.x=0,de.y=ne+10,(he=this.swatchText=new Ao.TextInput({align:"left",selectionAlpha:.5,text:Z.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})).on("input",function(){4!=he.text.length&&7!=he.text.length||(pe.color=he.text)}),de.addChild(he),Ao.centerReg(he),he.x=90,he.y=48,a&&((ye=this.grip=new Ao.Shape({style:!1})).cursor="pointer",de.addChild(ye),ye.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),ye.x=70,ye.y=65,he.y=40,ye.mouseEnabled=!1),ge=this.closeBut=new Ao.Button({width:90,height:90,label:"X",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1}),de.addChild(ge),ge.x=600-ge.width-10,ge.y=0,ge.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){S.hide(),S.dispatchEvent("close")}),fe=this.okBut=new Ao.Button({width:150,height:90,label:"OK",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1}),de.addChild(fe),fe.x=ge.x-fe.width-10,fe.y=0,fe.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",Ye),ye=this.swatchBacking=new Ao.Shape({style:!1}),de.addChild(ye),(ee=ye.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ye.x=fe.x-150-10,ye.y=0,pe=this.swatch=new Ao.Rectangle(150,90,Z,null,null,null,null,null,null,!1),de.addChild(pe),pe.x=ye.x,pe.y=0,pe.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){S.dispatchEvent("swatch")}),pe.cursor="pointer",pe.alpha=j=P,de.scaleX=de.scaleY=e/600,ne+=de.height):L.cursor="pointer",t||u||(ne-=10-r);var fe=ne+10;this.setBounds(0,0,e,fe);var me=this.background=new Ao.Rectangle(e,fe,g,null,null,null,null,null,null,!1);this.addChildAt(me,0),-1!=s&&0<c&&(me.shadow=new createjs.Shadow(s,8,8,c));var ze,ye,be,ve,we,Ce,xe,ke,Te,Ae,Pe=WW.zdf,Be=!1;this.dropperTarget=y,X&&(o="spectrum",P=(ye=R-30+1)-20+1,be=S.bar=new Ao.Rectangle(S.width,31,Ao.black).addTo(S),x&&(S.title=new Ao.Label(x,18,null,Ao.light).pos(12,1,LEFT,CENTER,S.bar).noMouse()),a&&be.cur(),fe=new Ao.Container(S.width,ye).loc(0,30,S),R=new Ao.Rectangle(S.width,P,new Ao.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,.5,4/6,5/6,1],0,0,500,0)).addTo(fe).mov(0,19),new Ao.Rectangle(S.width,P/2,new Ao.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,P/2)).loc(R,null,fe),new Ao.Rectangle(S.width,P/2+.5,new Ao.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,P/2+.5)).loc(R,null,fe).mov(0,P/2),new Ao.Rectangle(S.width,20,new Ao.GradientColor(["black","white"],[.1,.9],0,0,S.width,0)).addTo(fe),ve=S.gradient=new Ao.Bitmap(fe).loc(fe,null,S).cur("none"),we=S.pixels=new Ao.Pixel(fe,.5).loc(fe,null,S).vis(!1).cur("none"),fe.dispose(),!u&&w&&((Ce=S.closeIcon=new Ao.Shape(-40,-40,80,80,null,!1)).graphics.f(Ao.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Ce.sca(.25).expand(10,10,10,1).pos(7,0,Ao.RIGHT,Ao.CENTER,be).cur().addTo(S),Ce.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){S.hide(),S.dispatchEvent("close")})),(xe=S.collapseIcon=new Ao.Triangle(20,20,20,Ao.faint,Ao.light,2).expand(10,10,10,1).pos(40+(Ce?30:0),0,Ao.RIGHT,Ao.CENTER,be).cur().addTo(S)).on("mousedown",function(){S.collapse(0==xe.rotation)}),fe=new Ao.Rectangle(20,20,Ao.white).reg("center"),new Ao.Tile(new Ao.Rectangle(10,10,Ao.series(Ao.silver,Ao.white,Ao.white,Ao.silver)),2,2,0,0).addTo(fe),fe.mouseChildren=!1,(ke=S.modeIcon=new Ao.Button({width:20,height:20,shadowColor:-1,label:"",backing:fe,toggleEvent:"mousedown",toggleBacking:new Ao.Rectangle(20,20,new Ao.GradientColor([Ao.white,Ao.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(Ce?30:0),5,Ao.RIGHT,Ao.TOP,S).expand(10,10,10,1)).on("mousedown",function(){we.vis(ke.toggled),S.spectrumToggled=!ke.toggled,Pe.stage.update()}),v||(ke.removeFrom(),xe.mov(28)),b||xe.removeFrom(),C||S.okBut&&S.okBut.removeFrom(),!w&&ge&&ge.removeFrom(),Te=new Ao.Rectangle(S.width,S.height-ye-30,Ao.faint).pos(0,0,Ao.LEFT,Ao.BOTTOM,S).noMouse(),Ae=this.dropper=new Ao.Circle(10,Ao.clear,Ao.white,8),new Ao.Circle(5,Ao.clear,Ao.black,2).center(Ae),new Ao.Circle(7,Ao.clear,Ao.white,2).center(Ae),Ae.noMouse()),this.updateDropperTarget=function(){Ae.vis(!1),Le(),Ae.vis(!0).top()},this.spectrumToggled=X;var Ee,Ie,Se=!(this.toggleSpectrum=function(e){e!=S.spectrumToggled&&(zot(e)&&(e=!S.spectrumToggled),S.spectrumToggled=e,ke.toggle(!e),we.vis(!e),S.updateDropperTarget())});function We(){var e;if(Pe.stage.mouseInBounds?Ae.alp(1):Ae.alp(0),Ae.loc(Pe.mouseX,Pe.mouseY),Se=(S.spectrumToggled?ve:we).hitTestReg(Ae),e=!!S.dropperTarget&&(Ae.x>=ze.x&&Ae.x<=ze.x+ze.width&&Ae.y>=ze.y&&Ae.y<=ze.y+ze.height),t=S.dropperTarget?(Se||e)&&!Te.hitTestReg(Ae)&&!be.hitTestReg(Ae):Se,!Be&&t)Me(e);else if(Be&&!t)return Be=!1,ze.dispose(),Ae.vis(!1),void Pe.stage.update();if(t){if(Se)o=S.spectrumToggled?ve:we;else{if(!S.dropperTarget)return;o=ze}var t=o.globalToLocal(Pe.mouseX,Pe.mouseY),o=o.getColorAt(t.x,t.y,!0),t="rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")";o[3]<.05&&(t=Pe.color),Ae.borderColor=t,Pe.stage.update()}}function Me(e){Be=!0,e&&Le(),Ae.vis(!0).top()}function Oe(){je(),S.dropperDown=Pe.stage.on("stagemousedown",We),S.dropperMove=Pe.stage.on("stagemousemove",We),S.dropperUp=Pe.stage.on("stagemouseup",function(){We(),pe&&X&&Se&&pe.color!=Ae.borderColor&&De()})}function je(){S.dropperDown&&Pe.stage.off("stagemousedown",S.dropperDown),S.dropperMove&&Pe.stage.off("stagemousemove",S.dropperMove),S.dropperUp&&Pe.stage.off("stagemouseup",S.dropperUp)}function Le(){ze&&ze.dispose&&ze.dispose();var e=new Ao.Rectangle(Pe.width,Pe.height,Pe.color).addTo(Pe.stage,0),t=S.dropperTarget&&S.dropperTarget.getBounds&&S.dropperTarget.type&&!S.dropperTarget.type.includes("Stage")?S.dropperTarget.boundsToGlobal():Pe.stage.getBounds();ze=new Ao.Bitmap(Pe.stage,t.width,t.height,t.x,t.y).loc(t).cur("none"),e.dispose(),ze.on("mousedown",De)}function _e(){ze&&ze.dispose&&ze.dispose(),Ae.vis(!1)}function De(){Ae.vis(!1),S.currentValue=Ao.convertColor(Ae.borderColor,"hex"),S.dispatchEvent("change"),y?(Le(),Ae.vis(!0).top(),setTimeout(function(){S.updateDropperTarget(),Pe.stage.update()},50)):(Ae.vis(!0).top(),Pe.stage.update())}function Ye(){if(E&&i){var e=[M=W,W=U];for(V=0;V<2;V++){var t=L.graphics;_=Math.floor(V/n),J=(D=V%n)*(H+r),$=_*(H+r)+re,Y[V]=e[V],t.f(me.color).r(J-1,$-1,H+2,H+2).f(e[V]).r(J,$,H,H)}}U=Z,O=j,S.dispatchEvent("change"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!S.stage||S.stage.update()}function Xe(e){Ee=e.stageX/Ao.scaX-S.x,Ie=e.stageY/Ao.scaY-S.y}function Re(e){S.x=e.stageX/Ao.scaX-Ee,S.y=e.stageY/Ao.scaY-Ie,S.stage&&S.stage.update()}function He(){S.stage&&S.stage.update()}this.collapsed=!1,this.collapse=function(e){zot(e)&&(e=!0),e!=S.collapsed&&((S.collapsed=e)?(ke.enabled=!1,xe.rot(180),S.background.vis(!1),ve.vis(!1),Te.vis(!1),L.visible=!1,we&&we.vis(!1),se&&se.vis(!1),u&&de.vis(!1),Be=!1,je(),_e(),S.dispatchEvent("collapsed")):(ke.enabled=!0,xe.rot(0),S.background.vis(!0),ve.vis(!0),Te.vis(!0),L.visible=!0,S.spectrumToggled||we.vis(!0),se&&se.vis(!0),u&&de.vis(!0),Be=!0,Oe(),Le(),be.hitTestReg(Ae)&&_e(),S.dispatchEvent("expanded")),Pe.stage.update())},T&&b&&(S.vis(!1),setTimeout(function(){S.collapse(!0),S.vis(!0),S.stage&&S.stage.update()},50)),a&&(me.on("mousedown",Xe),me.on("pressmove",Re),me.on("pressup",He),X&&(be.on("mousedown",Xe),be.on("pressmove",Re),be.on("pressup",He)));var Fe,Ne,Ve,Ge,qe=n*(H+r),Ue=Q*(H+r);function Qe(){S.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Ze(){S.zimAccessibility&&S.zimAccessibility.changeTitle(S,null,!0)}function Ke(e){e<0&&(e=S.colors.length-1),e>S.colors.length-1&&(e=0),S.selectedIndex=e,S.dispatchEvent("change"),S.stage&&S.stage.update()}i&&(Fe=ie*(H+r),Ne=le*(H+r)),L.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){var t=Ao.hitTestGrid(L,qe,Ue,n,Q,e.stageX,e.stageY,0,0,r,r);zot(t)||(Z=o[t],u&&(pe.color=Z,he.text=String(o[t]).toUpperCase()),Ye()),i&&(t=null,zot(t=Ao.hitTestGrid(L,Fe,Ne,ie,le,e.stageX,e.stageY,0,Ue,r,r))||(Z=Y[t],u&&(pe.color=Z,he.text=Y[t].toUpperCase()),Ye())),h&&ae(o.indexOf(Z)),u?S.stage&&S.stage.update():h&&S.stage&&S.stage.update(),Ze()}),Object.defineProperty(this,"selectedColor",{get:function(){return Z},set:function(e){e=e.toLowerCase(),U=Z=e,u&&(pe.color=Z,he.text=Z,S.stage&&S.stage.update()),h&&!X&&ae(o.indexOf(Z)),Ze()}}),Object.defineProperty(this,"currentValue",{get:function(){return Z},set:function(e){S.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return Z},set:function(e){e!=S.selectedColor&&(S.selectedColor=e,S.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return X?null:o.indexOf(Z)},set:function(e){X||(U=Z=o[e],u&&(pe.color=Z,he.text=Z,S.stage&&S.stage.update()),h&&ae(o.indexOf(Z)),Ze())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return t?Je(ce.currentValue):1},set:function(e){t&&(O=ce.currentValue=e,pe&&(pe.alpha=O),ue&&(ue.text="Alpha: "+Je(ce.currentValue)),S.stage&&S.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return k?Je(ce.currentValue):1},set:function(e){k&&(ce.currentValue=e,S.stage&&S.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return X?"spectrum":i?o.concat(Y):o},set:function(){zon&&zogy("ColorPicker() colors is read only - make a new ColorPicker to change")}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==S},set:function(){zns?Ao.KEYFOCUS=S:WW.KEYFOCUS=S}}),p&&Ao.KEYFOCUS&&Qe(),this.on("mousedown",function(){p&&Qe()}),this.keyDownEvent=function(e){var t;S.stage&&(X||(S.zimAccessibility&&S.focus||!S.zimAccessibility&&S.keyFocus)&&(t=S.selectedIndex,37==e.keyCode||40==e.keyCode?Ke(--t):38!=e.keyCode&&39!=e.keyCode||Ke(++t)))},WW.addEventListener("keydown",this.keyDownEvent),this.hide=function(){return Ve=S.stage,S.removeFrom(),Ve&&Ve.update(),S},this.on("removed",function(){X&&(Be=!1,je(),_e());{var e;S.toggled=!1,S.zimAccessibility&&((e=S.zimAccessibility).resize(S),(Ge||S.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50))}Ve&&Ve.update()});function Je(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}this.show=function(){return S.center(S.container),S},this.on("added",function(){var e;S.stage&&(Ve=S.stage),S.zimAccessibility&&(e=S.zimAccessibility,setTimeout(function(){e.activatedObject&&(Ge=e.activatedObject.zimTabTag)},50),e.resize(S),e.tabIndex=S.zimTabIndex),S.toggled=!0,setTimeout(function(){X&&(Be=!0,Le(),Oe(),Me(),We()),S.stage&&S.stage.update()},20)}),this.toggle=function(e){return!0!==e&&(!1===e||S.container.contains(S))?S.hide():S.show(),S},zot(m)&&(m=null!=I.selectedIndex?I.selectedIndex:0),S.selectedIndex=m,zot(z)&&(z=null!=I.selectedColor?I.selectedColor:null),null!=z&&(S.selectedColor=z),X&&(S.selectedColor="#888888"),!1!==A&&Ao.styleTransforms(this,I),this.clone=function(){return S.cloneProps(new Ao.ColorPicker(e,E?null:o,n,r,i,t,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,this.group,B))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",S.keyDownEvent),X&&(je(),S.gradient.cur("default"),S.pixels.cur("default"),y&&y.cur("default"),ze.cur("default"),Be=!1,_e()),ce&&ce.dispose(),Ae&&Ae.dispose(),S.dropperDown&&Pe.stage.off("stagemousedown",S.dropperDown),S.dropperMove&&Pe.stage.off("stagemousemove",S.dropperMove),S.dropperUp&&Pe.stage.off("stagemouseup",S.dropperUp),o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.ColorPicker,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.EmojiPicker=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y){if(b=zob(Ao.EmojiPicker,arguments,"width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",this))return b;z_d("67.05"),this.group=z;var b=!1===m?{}:Ao.getStyle("EmojiPicker",this.group,y);zot(e)&&(e=null!=b.width?b.width:400),zot(t)&&(t=null!=b.height?b.height:600),zot(n)&&(n=null!=b.monochrome&&b.monochrome),zot(r)&&(r=null!=b.backgroundColor?b.backgroundColor:Ao.lighter),zot(i)&&(i=null!=b.titleBar?b.titleBar:"Emojis"),zot(l)&&(l=null!=b.titleBarColor?b.titleBarColor:null),zot(a)&&(a=null!=b.titleBarBackgroundColor?b.titleBarBackgroundColor:Ao.silver.toAlpha(.8)),zot(s)&&(s=null!=b.titleBarHeight?b.titleBarHeight:40),zot(c)&&(c=null!=b.cache?b.cache:!!Ao.mobile()),zot(u)&&(u=null!=b.size?b.size:30),zot(p)&&(p=null!=b.colSize?b.colSize:u+15),zot(f)&&(f=null!=b.rowSize?b.rowSize:u+14),zot(d)&&(d=null!=b.collapse&&b.collapse),zot(h)&&(h=null!=b.collapseColor?b.collapseColor:zot(l)?"#555":l),zot(g)&&(g=null!=b.collapsed&&b.collapsed),this.zimWindow_constructor(e,t,null,r,null,null!=b.borderWidth?b.borderWidth:2,null!=b.padding?b.padding:10,null!=b.corner?b.corner:10,null,null==b.scrollBarActive||b.scrollBarActive,null==b.scrollBarDrag||b.scrollBarDrag,null,null,null,!1,null,null,null,null,!0,null,null,null,null,null,null,i,l,a,s,null==b.draggable||b.draggable,null,null,null==b.close||b.close,null,null,null!=b.fullSize&&b.fullSize,null,null!=b.resizeHandle&&b.resizeHandle,d,h,g,null,m,z,Ao.copy(b)),this.type="EmojiPicker";var v=this;this.emojiData=zot(o)?["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]:o;var w=[];Ao.loop(this.emojiData,function(e){e=new Ao.Emoji(e,u,n);w.push(e)}),this.wrapper=new Ao.Wrapper({items:w,width:e,alignInner:Ao.CENTER,valignInner:Ao.CENTER,wrapperType:"column",colSize:p,rowSize:f}).cur(),this.backdrop=new Ao.Rectangle(this.wrapper.width,this.wrapper.height,Ao.faint),Ao.timeout(.2,function(){v.scrollBar&&v.scrollBar.vertical&&v.scrollBar.vertical.getBounds()&&v.scrollBar.vertical.expand(),v.backdrop.heightOnly=v.wrapper.height,c&&v.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(e){v.currentEmoji=e.target,v.dispatchEvent("change")}),!1!==m&&Ao.styleTransforms(this,b),this.clone=function(){return v.cloneProps(new Ao.EmojiPicker(e,t,m,this.group,y))},this.dispose=function(){return!0}},Ao.extend(Ao.EmojiPicker,Ao.Window,["clone","dispose"],"zimWindow",!1),Ao.TextEditor=function(i,n,e,t,o,r,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O){if(j=zob(Ao.TextEditor,arguments,"width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",this))return j;z_d("67.1"),this.group=M;var j=!1===W?{}:Ao.getStyle("TextEditor",this.group,O);if(zot(i)&&(i=null!=j.width?j.width:400),zot(e)&&(e=null!=j.backgroundColor?j.backgroundColor:Ao.lighter),zot(h)&&(h=null!=j.titleBar?j.titleBar:"Text Editor"),zot(P)&&(P=null==j.draggable||j.draggable),zot(f)&&(f=null!=j.titleBarHeight?j.titleBarHeight:30),zot(t)&&(t=null!=j.fieldColor?j.fieldColor:e.darken(.05)),zot(u)&&(u=null==j.live||j.live),zot(m)&&(m=null==j.wrap||j.wrap),zot(y)&&(y=null==j.scroll||j.scroll),zot(x)&&(x=null!=j.margin?j.margin:10),zot(z)&&(z=null!=j.limit?j.limit:null),zot(h)&&(h=null!=j.titleBar?j.titleBar:null),zot(l)&&(l=null!=j.sizeList?j.sizeList:null),zot(s)&&(s=null!=j.colorList?j.colorList:null),zot(a)&&(a=null!=j.optionList?j.optionList:null),zot(c)&&(c=null!=j.fontList?j.fontList:null),zot(t)&&(t=null!=j.fieldColor?j.fieldColor:null),zot(o)&&(o=null!=j.fieldHeight?j.fieldHeight:null),zot(r)&&(r=null!=j.textSize?j.textSize:null),zot(I)&&(I=null!=j.fontListHeight?j.fontListHeight:100),zot(S)&&(S=null!=j.fontListViewNum?j.fontListViewNum:3),void 0===E){if(!WW.zdf)return void(zon&&zogy("zim.TextEditor - please provide a reference to zim Frame"));E=WW.zdf}this.zimPanel_constructor(i,300,null,h,g,p,f,e,w,C,k,!0,null,null,null,T,A,P,B,null,W,M,O);var L=this;zot(d)&&(d=new Ao.Button({width:50,height:50,label:"",icon:(new Ao.Shape).sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:Ao.white,corner:10,backgroundColor:Ao.green.darken(.2),borderColor:Ao.white,borderWidth:2,rollBackgroundColor:Ao.green,shadowBlur:3}).pos(x,f+2*x,Ao.RIGHT,Ao.TOP,L)),(L.button=d).on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){u||(D.text=_.text);L.hide(),L.dispatchEvent("set")}),zot(o)&&(o=null!=j.fieldHeight?j.fieldHeight:d.height+2*x);var _=L.textArea=new Ao.TextArea({color:n,backgroundColor:t,width:i-d.width-3*x,height:zot(o)?d.height+2*x:o,expand:10,password:v,placeholder:b,frame:E}).loc(x,f+x+(o&&o<d.height+2*x?(d.height-o)/2+x:0),null,null,!1);m||(_.tag.style.whiteSpace="nowrap"),z&&_.tag.setAttribute("maxLength",z),y&&(_.tag.style.overflowY="auto");var D=new Ao.Label;L.on("pressmove",function(){_.resize()}),L.on("close",function(){L.inputEvent&&_.off("input",L.inputEvent),_.removeFrom()}),L.panelHeight=f+x+Math.max(o,d.height+2*x)+x;var Y,X,R,H,F,N,V,G,q,U=Ao.mobile(),Q=U?35:30;function Z(){_.tag.style.display="block",X.hide(),L.stage&&L.stage.update()}function K(){D&&(_.text=D.text),n&&(n.color=D.color),R&&R.toggle(1==D.bold),H&&H.toggle(1==D.italic),F&&(F.noAnimate=!0,"center"==D.align?F.selectedIndex=1:"right"==D.align?F.selectedIndex=2:F.selectedIndex=0),N&&(N.currentValue=D.size),q&&(q.currentValue=D.font),L.inputEvent&&_.off("input",L.inputEvent),L.inputEvent=_.on("input",function(){u&&(D.text=_.text),L.dispatchEvent("input"),L.dispatchEvent("update"),L.stage&&L.stage.update()})}(l||a||s)&&(new Ao.Rectangle(i,Q+x,"rgba(0,0,0,.05)").loc(0,L.panelHeight,L),Y=[],s&&(V=Array.isArray(s),(X=L.colorPicker=new Ao.ColorPicker({colors:V?s:null,cols:V?Math.min(s.length,12):null,alphaPicker:!1,greyPicker:!V,container:E.stage})).on("close",Z),X.on("change",function(){D.color=n.color=X.selectedColor,L.dispatchEvent("update"),Z()}),L.closeColorPicker=function(){Z()},(n=L.swatch=new Ao.Rectangle(Q,Q,D.color,Ao.dark,1).cur()).on("mousedown",function(){L.dispatchEvent("color"),_.tag.style.display="none",X.selectedColor=n.color,X.show(),L.stage&&L.stage.update()}),Y.push(n)),a&&(!0===a&&(a=["bold","italic","align"]),zot(WW.STYLE)&&(WW.STYLE={}),zot(WW.STYLE.group)&&(WW.STYLE.group={}),WW.STYLE.group.zimEditor={width:Q,height:Q,corner:0,borderColor:Ao.tin,shadowBlur:-1,backgroundColor:Ao.light,rollBackgroundColor:Ao.light,toggleBackgroundColor:Ao.green,toggleColor:Ao.grey},Ao.loop(a,function(e){var o,n;"bold"==e.toLowerCase()?((R=L.bold=new Ao.Button({label:new Ao.Label({text:"B",color:Ao.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"})).on("click",function(){D.bold=R.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),Y.push(R),D.bold&&R.toggle()):"italic"==e.toLowerCase()?((H=L.italic=new Ao.Button({label:new Ao.Label({text:"I",color:Ao.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"})).on("click",function(){D.italic=H.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),Y.push(H),D.italic&&H.toggle()):"align"==e.toLowerCase()&&(o=new Ao.Tile(new Ao.Rectangle(Q-10,Q-10,Ao.grey).centerReg(),3,1,10,10),n=U?["","",""]:["","",""],Ao.loop(3,function(e){var t=o.getChildAt(e);new Ao.Label(n[e],2*Q/3,null,Ao.white).center(t).expand(10)}),e=0,"right"==D.align?e=2:"center"!=D.align&&"middle"!=D.align||(e=1),(F=L.align=new Ao.Selector({tile:o,corner:0,borderWidth:1,borderColor:Ao.grey,backgroundColor:Ao.clear,selectedIndex:e})).on("change",function(){0==F.selectedIndex?D.align="left":1==F.selectedIndex&&(D.align="center"),2==F.selectedIndex&&(D.align="right"),L.dispatchEvent("update"),L.stage&&L.stage.update()}),Y.push(F))}),delete WW.STYLE.group.zimEditor),l&&((N=L.sizePicker=new Ao.Stepper({list:!0===l?null:l,stepperType:!0===l?null:"list",min:!0===l?5:null,max:!0===l?500:null,width:150,shadowBlur:-1,borderColor:Ao.dark,borderWidth:2,corner:0,backgroundColor:Ao.green,downForward:!1}).siz(null,Q)).arrowPrev.expand(0),N.textBox.color=Ao.lighter,N.on("change",function(){D.size=N.currentValue,L.dispatchEvent("update"),L.stage&&L.stage.update()}),N.currentValue=D.size,Y.push(N)),V=new Ao.Tile(Y,Y.length,1,10,10,!0).loc(x,L.panelHeight+x/2,L),L.panelHeight=L.panelHeight+x+V.height+x),c&&(Array.isArray(c)?G=c:(G=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],U||(G=G.concat(["Comic Sans MS","Impact"])),G.sort()),(q=L.fonts=new Ao.List({width:i-2*x,height:I,viewNum:S,backgroundColor:Ao.moon,color:Ao.grey,rollColor:Ao.dark,rollBackgroundColor:Ao.green.lighten(.5),selectedBackgroundColor:Ao.mist,selectedRollBackgroundColor:Ao.green.lighten(.6),selectedColor:Ao.dark,backdropColor:Ao.light,scrollBarColor:Ao.dark,shadowBlur:-1,list:G}).center(L).loc(null,L.panelHeight)).on("change",function(){D.font=q.currentValue,L.dispatchEvent("update"),L.stage&&L.stage.update()}),L.panelHeight=L.panelHeight+x+q.height+x),L.show=function(e,t,o,n){if(L.parent)return e==L.label||(L.label=e),L;var r;if(D=e,_.addTo(L),D&&D.stage)r=D.stage;else if(n)r=n.stage;else{if(!WW.zdf)return L;r=WW.zdf.stage}return zot(t)&&zot(o)?D&&D.y>r.height/2?L.loc(r.width/2-i/2,D.y-L.panelHeight-.05*r.height,r):D&&D.y<=r.height/2?L.loc(r.width/2-i/2,D.y+D.height+.05*r.height,r):L.center(r):L.loc(t,o),L.y<20&&(L.y=20),L.y+L.height>L.stage.height&&(L.y=L.stage.height-L.height-20),K(),L.stage.update(),L},L.hide=function(){if(s&&X.hide(),_&&_.removeFrom(),!zot(L.stage)){var e=L.stage;return L.removeFrom(),e.update(),L}},Object.defineProperty(L,"label",{get:function(){return D},set:function(e){D=e,K()}}),!1!==W&&Ao.styleTransforms(this,j),this.clone=function(){return L.cloneProps(new Ao.TextEditor(i,n,e,t,o,r,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,this.group,O))},this.dispose=function(e,t,o){return L.inputEvent&&_.off("input",L.inputEvent),X&&X.dispose(),n&&n.dispose(),q&&q.dispose(),d&&d.dispose(),_&&_.dispose(),F&&F.dispose(),R&&R.dispose(),H&&H.dispose(),N&&N.dispose(),o||this.zimPanel_dispose(),L.stage&&L.stage.update(),!(L.textArea=L.color=L.colorPicker=L.font=L.button=L.selector=L.bold=L.italic=L.size=null)}},Ao.extend(Ao.TextEditor,Ao.Panel,["clone","dispose"],"zimPanel",!1),Ao.Keyboard=function(n,p,f,r,i,l,a,t,m,z,y,o,b,s,c,u,d,h,v,g,w,C,x,k,T,e,A){var P;if(P=zob(Ao.Keyboard,arguments,"labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl, hardKeyboard, layout, style, group, inherit",this))return P;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=e;var B=!1===T?{}:Ao.getStyle(this.type,this.group,A);zot(n)&&(n=null!=B.labels?B.labels:[]),Array.isArray(n)||(n=[n]),zot(p)&&(p=null!=B.backgroundColor?B.backgroundColor:"#333"),zot(f)&&(f=null!=B.color?B.color:"white"),zot(r)&&(r=null!=B.shiftBackgroundColor?B.shiftBackgroundColor:"orange"),zot(i)&&(i=null!=B.shiftHoldBackgroundColor?B.shiftHoldBackgroundColor:"red"),zot(l)&&(l=null!=B.placeBackgroundColor?B.placeBackgroundColor:"#50c4b7"),zot(a)&&(a=null!=B.placeColor?B.placeColor:f),zot(t)&&(t=null!=B.cursorColor?B.cursorColor:"#50c4b7"),zot(m)&&(m=null!=B.shadeAlpha?B.shadeAlpha:.2),zot(z)&&(z=null!=B.borderColor?B.borderColor:"rgba(0,0,0,.1)"),zot(y)&&(y=null!=B.borderWidth?B.borderWidth:null),z<0||y<0?z=y=null:null!=z&&null==y&&(y=1),zot(o)&&(o=null!=B.margin?B.margin:5),zot(b)&&(b=null!=B.corner?B.corner:30),zot(s)&&(s=null!=B.draggable&&B.draggable),zot(c)&&(c=null==B.placeClose||B.placeClose),zot(u)&&(u=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.2)"),zot(d)&&(d=null!=B.shadowBlur?B.shadowBlur:14),zot(v)&&(v=null!=B.data?B.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC"]]]),v[3]||(v[3]={e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]});var E=this;zot(g)&&(g=null==B.place||B.place),zot(C)&&(C=null!=B.rtl&&B.rtl),zot(x)&&(x=null==B.hardKeyboard||B.hardKeyboard),zot(k)&&(k=null!=B.layout?B.layout:"qwerty"),"qwerty"!=(k=k.toLowerCase())&&("arabic"==k?v=[[["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","","back"],["?123",""]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["","","","$","","~","`","","","","*"],["2/2","_","\\","|","","","","","*","backspace"],["ABC","*"]],{"":["","","",""],"":[""],"":["",""],"":[""],"":["","","","","","","",""],"*":["","","","","","","",""],n:["",""]}]:"hebrew"==k?v=[[["","","","","","","","","backspace"],["","","","","","","","","",""],["","","","","","","","",""],["?123",","]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC",","]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC",","]],{e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]}]:"azerty"==k?v=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","","backspace"],["?123",","]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC",","]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC",","]],{e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]}]:"turkish"==k&&(v=[[["q","w","e","r","t","y","u","","o","p","",""],["a","s","d","f","g","h","j","k","l","","i"],["shift","z","x","c","v","b","n","m","","","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["","","","$","","~","`","","","","*"],["2/2","_","\\","|","","","","","*","backspace"],["ABC","*"]],{e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]},{"":"I",i:""},{I:"","":"i"}])),E.data=v;e="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(h)){if(!WW.zdf)return void zogy(e);h=WW.zdf.stage}else{if(!h.getBounds)return void zogy(e);if(zot(h.stage))return void zogy("zim display - Keyboard(): The container must have a stage property")}-1!=u&&0<d&&(E.shadow=new createjs.Shadow(u,3,3,d));var I,S=WW.zdf?WW.zdf.stage:null;E.labels=n;var W=10;Ao.loop(v[0],function(e){e.length>W&&(W=e.length)});var M=W,e=["@","",".","/","away"];zot(w)||e.splice(1,0,w);var O=Ao.copy(v[0]);O[3]=O[3].concat(e);var j=Ao.copy(v[1]);j[3]=j[3].concat(e);var L=Ao.copy(v[2]);L[3]=L[3].concat(e);var _,D,Y,X,R,H,F,N,V,G,q,U,Q=[],Z=(1e3-5*(M-1))/M,K={def:"default",shift:"shift",number1:"number1",number2:"number2"},J=K.def,$=!1,ee=0,te=[];function oe(e){var t,o,n=!1;if(J===K.def){for(X.color=e?i:r,t=0;t<Q.length-6-(zot(w)?0:1);t++)0<(o=Q[t]).label.text.length&&(1===o.na.length?(v[4]&&v[4][o.label.text]?o.label.text=v[4][o.label.text]:o.label.text=o.label.text.toUpperCase(),o.label.centerReg(o).mov(0,6)):o.label.centerReg(o));e||(n=!0,setTimeout(function(){n&&($=!0,X.color=i,_.updateCache(),E.stage&&E.stage.update())},500),U=E.on("pressup",function(){E.off("pressup",U),n=!1})),J=K.shift}else{for(X.color=p,$=!1,t=0;t<Q.length-6;t++)0<(o=Q[t]).label.text.length&&(1===o.na.length?(v[5]&&v[5][o.label.text]?o.label.text=v[5][o.label.text]:o.label.text=o.label.text.toLowerCase(),o.label.centerReg(o).mov(0,3)):o.label.centerReg(o));J=K.def}_.updateCache(),E.stage&&E.stage.update()}function ne(e){var t,o,n,r,i,l,a=0,s=0,c=!1,u=!1;zot(e)&&(e=K.def),e===K.def?t=O:e===K.number1?t=j:e===K.number2&&(t=L),_=new Ao.Container(1e3,430,null,null,!1).addTo(E);for(var d=0;d<t.length;d++){(d<=1||e==K.def&&2==d&&"shift"!=t[2][0])&&(a=(Z/2+2.5)*(M-t[d].length));for(var h=0;h<t[d].length;h++){var c=!1,g=null,u=!1;"backspace"==t[d][h]?(g=N,u=i=!0):"back"==t[d][h]?(g=N,u=!(i=!1)):"shift"==t[d][h]?(i=!0,g=F):(3==d||e!=K.def&&2==d)&&0==h?u=i=!0:""==t[d][h]?c=!(i=!1):"away"==t[d][h]?(g=V,u=i=!0):i=!1,i?r=1.5*Z+2.5:c?(r=(Z+5)*((zot(w)?4:3)+M-10+1-v[0][3].length)-5,-1!=v[0][3].indexOf("backspace")&&(r-=Z/2)):r=Z,n=new Ao.Rectangle(r,Z,p,z,y,b,null,null,null,!1).cur().addTo(_),u&&n.addChild(new Ao.Rectangle(r,Z,"black",null,null,b,null,null,null,!1).alp(m)),n.label=o=g?new Ao.Label({text:"",backgroundColor:"ignore",font:null!=B.font?B.font:null,style:!1}):new Ao.Label({lineWidth:10,lineHeight:25,font:null!=B.font?B.font:null,text:t[d][h],color:f,align:"center",style:!1}),g&&((g=g.clone()).scaleTo(n,70,70),g.centerReg(n)),l?(l=!1,a+=67.33):(o.centerReg(n).mov(0,isNaN(o.text)?3:7),n.x=a,n.y=s,n.na=t[d][h],2==d&&0==h&&e==K.number1&&(n.toggle="1/2"),2==d&&0==h&&e==K.number2&&(n.toggle="2/2"),3==d&&0==h&&e==K.def&&(n.toggle="?123"),3==d&&0==h&&e!=K.def&&(n.toggle="ABC"),n.toggle&&o.mov(0,3),Q.push(n),"shift"==n.na&&(X=n),a=n.x+n.width+5)}s+=Z+5,a=0}_.cache(y?-y:0,y?-y:0,y?_.width+2*y:_.width,y?_.height+2*y:_.height)}function re(){E.mouseYAmount&&(E.y=E.parent.globalToLocal(0,E.mouseYAmount-q).y)}function ie(){S.off("pressmousemove",E.tickerMouseEvent),Ao.Ticker.remove(re)}function le(){if(R&&Y){for(var e=R.label.x+R.label.getBounds().x,t=0;t<ee;t++)e+=R.widthArray[t]||0;Y.heightOnly=R.getBounds().height*(R.backing&&zot(R.padding)?.9:1)-(R.paddingVertical&&R.background?2*R.paddingVertical:0),Y.center(R),Y.x=e}}function ae(){if(H)return E;if(!R)return E;var e,t,o=c?["<",">","x"]:["<",">"];te=[],t=R.localToLocal(0,0,E),H=new Ao.Container({style:!1}).addTo(E).pos({x:t.x,y:t.y+R.height+15,reg:!0}).cur();for(var n=0;n<o.length;n++)e=new Ao.Rectangle(Z,Z,l,z,y,b,null,null,null,!1),"x"==o[n]&&new Ao.Rectangle(Z,Z,"black",null,null,b,null,null,null,!1).alp(m).addTo(e),(e=new Ao.Label({lineWidth:10,text:o[n],backing:e,font:null!=B.font?B.font:null,color:a,align:"center",valign:"center",style:!1})).pos(0,0,Ao.LEFT,Ao.TOP,H).cache(),e.x=e.x+n*(Z+5),te.push(e);t=R.localToLocal(0,0,E),H.x=t.x,H.y=t.y+R.height+15,H.on("click",function(e){0==te.indexOf(e.target)?0<ee&&ee--:1==te.indexOf(e.target)?ee<R.text.length&&ee++:se();le()}),E.stage&&E.stage.update()}function se(){if(!H)return E;H.removeAllEventListeners(),E.removeChild(H),H=null}function ce(e){var t,o;R&&("del"===e?(R&&(R.text=[R.text.slice(0,ee-1),R.text.slice(ee)].join("")),ee--,de()):(J===K.shift&&(e=e.toUpperCase()),o=R.text,(t=R.clone().removeFrom()).text=e,t=t.label.getMeasuredWidth(),R.widthArray?R.widthArray.splice(ee,0,t):R.widthArray=[R.breedte],ee<R.text.length?R.text=[R.text.slice(0,ee),e,R.text.slice(ee)].join(""):R.text+=e,R&&R.label.getBounds().width<I?(ee++,le()):R.text=o),J!==K.shift||$||(E.removeChild(_),ne(),J=K.def),le(),(o=new createjs.Event("keydown")).letter=e,E.dispatchEvent(o),E.stage&&E.stage.update())}function ue(e){if(E.stage){var t,o=0,n=!1;(R=e.target).widthArrayCheck||de(),I=R.label.lineWidth||1e4,(t=R.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY)).x-=R.label.x,t.y-=R.label.y;for(var r=0;r<R.widthArray.length;r++)if(o+=R.widthArray[r],t.x<o-R.widthArray[r]/2+R.label.getBounds().x){ee=r,n=!0;break}n||(ee=R.text.length),le(),g&&!H&&0<R.text.length&&ae(),H&&R&&(0<R.text.length?(t=R.localToLocal(0,0,E),H.x=t.x,H.y=t.y+R.height+15):se())}}function de(){if(R){var e=new Ao.Label("");R.widthArray=[];for(var t=0;t<R.text.length;t++)(e=R.clone().removeFrom()).text=R.text[t],R.widthArray.push(e.label.getMeasuredWidth());e.text=R.text,R.widthArrayCheck=!0,le()}}function he(e){var t,o=!0;function n(){R&&0<R.text.length?(0<E.selectedIndex&&ce("del"),e?r():E.on("pressup",r)):ce("del")}function r(){o=!1,t&&t.clear(),E.off("pressup",r)}n(),t=Ao.timeout(300,function e(){(!R||R.text.length<1||0==E.currentIndex)&&(o=!1),o&&(n(),t=t&&Ao.timeout(200,e,null,"ms")),R&&R.text.length<1&&r()},null,"ms"),E.stage&&E.stage.update()}function ge(){for(var e=0;e<n.length;e++)n[e].clickEvent=n[e].on("click",ue)}function pe(){if(1<n.length)for(var e=0;e<n.length;e++)n[e].off("click",n[e].clickEvent)}function fe(){if(!Y&&(R=n[0],I=R&&R.label.lineWidth?R.label.lineWidth:1e4,R)){(Y=new Ao.Rectangle(3,R.height-(R.paddingVertical&&R.background?2*R.paddingVertical:0),t,null,null,null,null,null,null,!1).center(R)).x=0,Y.visible=!1,Y.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var e=0;e<n.length;e++)n[e].widthArray=[0];de()}}function me(){Ao.stopAnimate("knipperTekst"),R&&R.removeChild(Y),R=Y=null}!function(){(F=new Ao.Shape({style:!1})).graphics.f(f).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),F.setBounds(-25.5,-36,51,72),N=new Ao.Container({style:!1});var e=new Ao.Shape({style:!1});e.graphics.f(f).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),e.setTransform(82.6,32),e.addTo(N),(e=new Ao.Shape({style:!1})).graphics.f(f).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),e.setTransform(62.2,32),e.addTo(N),N.setBounds(0,0,125,64),(V=new Ao.Container({style:!1})).setBounds(0,0,147,86);for(var t,o=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],n=0;n<o.length;n++)(t=new Ao.Shape({style:!1})).graphics.f(f).s().p(o[n].p),t.setTransform(o[n].transform[0],o[n].transform[1]),t.addTo(V)}(),ne(J),s&&function(){G=new Ao.Rectangle(1.5*Z+2.5+2.5,Z,p,z,y,b,null,null,null,!1).addTo(E,0).cur();for(var e=0;e<4;e++)new Ao.Rectangle(.4*G.width,4,f,null,null,null,null,null,null,!1).centerReg(G).alp(.2).y-=15*e-22;G.x=8.5*Z+40,G.y=-Z-5,G.na="drag"}(),this.on("mousedown",function(e){S=E.stage,D&&E.removeChild(D);H&&te.indexOf(e.target)<0&&se();zot(e.target.na)||(s&&e.target===G?(E.tickerMouseEvent=S.on("stagemousemove",function(e){E.mouseYAmount=e.stageY}),Ao.Ticker.add(re),E.on("pressup",ie),q=e.stageY-E.localToGlobal(0,0).y):zot(w)||e.target.na!==w?"shift"===e.target.na?oe():"?123"===e.target.toggle?(E.removeChild(_),ne(K.number1)):"ABC"===e.target.toggle?(E.removeChild(_),J=K.def,ne(),$&&oe(!0)):"1/2"===e.target.toggle?(E.removeChild(_),ne(K.number2)):"2/2"===e.target.toggle?(E.removeChild(_),ne(K.number1)):"away"===e.target.na?(E.hide(),E.dispatchEvent("close")):v[3]&&v[3][e.target.na]?function(e){var i,l=v[3][e],a=!1,s=!1;i=Ao.timeout(500,function(){var e,t,o,n=0;if(i.clear(),!a){s=!0,(D=new Ao.Container(1e3,Z,null,null,!1).addTo(E,0)).y=-Z-5;for(var r=0;r<l.length;r++)o=J===K.shift?l[r].toUpperCase():l[r],e=new Ao.Label({lineWidth:10,lineHeight:25,text:o,font:null!=B.font?B.font:null,color:f,align:"center",style:!1}),t=new Ao.Rectangle(Z,Z,p,z,y,b,null,null,null,!1).addTo(D),o=new Ao.Rectangle(Z,Z,"white",null,null,b,null,null,null,!1).alp(.2),t.addChild(o),e.center(t),t.na=l[r],t.x=n,n+=Z+5;E.stage&&E.stage.update()}},null,"ms");var t=E.on("pressup",function(){a=!0,E.off("pressup",t),s||ce(e)})}(e.target.na):"return"===e.target.na?ce("\n"):"backspace"===e.target.na||"back"===e.target.na?he():""===e.target.na?ce(" "):ce(e.target.na):E.dispatchEvent("special"),S.update())}),E.addChar=function(e){!zot(e)&&e.match(/^.$/)&&ce(e)},E.removeChar=function(){he(!0)},E.clearText=function(){he(!(R.text="")),de(),E.selectedIndex=0},E.setText=function(e){R.text=e,de(),E.selectedIndex=e.length},E.setBounds(1e3,400-26*(M-10)),ge(),fe(),Object.defineProperty(this,"selectedLabel",{get:function(){return R},set:function(e){ue({target:e}),E.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ee},set:function(e){ee=e,le()}}),this.show=function(e){return E.addTo(h),zot(e)||ue({target:n[e]}),Y&&(Y.visible=!0),E.toggled=!0,E},this.hide=function(){return E.removeFrom(h),Y&&(Y.visible=!1),S.update(),E.toggled=!1,E},this.toggle=function(e){return!0!==e&&(!1===e||E.parent)?E.hide():E.show(),E},this.showPlace=function(){return ae(),E},this.hidePlace=function(){return se(),E},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--)0<=n.indexOf(e[t])||"Label"!=e[t].type?e.splice(t,1):e[t].widthArray=[0];return pe(),n=n.concat(e),ge(),fe(),Y&&(Y.visible=!0),E},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),pe();for(var t=0;t<e.length;t++){var o=n.indexOf(e[t]);0<=o&&n.splice(o,1)}return ge(),0==n.length?R&&me():R&&-1==n.indexOf(R)&&(me(),fe()),E};var ze=new Ao.Rectangle(this.width,this.height,Ao.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();ze.on("mousedown",function(){}),ze.on("click",function(){}),this.resize=function(){var e;return E.scaleTo(S,100-2*o/S.width*100,50-2*o/S.height*100),E.y=S.height-E.height-o,E.x=S.width/2-E.width/2,R&&H&&(e=R.localToLocal(0,0,E),H.x=e.x,H.y=e.y+R.height+15),E.stage&&E.stage.update(),E},this.resize(),E.selectedLabel&&(E.selectedIndex=E.selectedLabel.text.length),x&&(this.keydownEvent=function(e){var t;E.stage&&(zot(t=E)||(35==e.keyCode&&(t.selectedIndex=t.selectedLabel.text.length),36==e.keyCode&&(t.selectedIndex=0),37==e.keyCode&&(t.selectedIndex=t.selectedIndex-1),39==e.keyCode&&(t.selectedIndex=t.selectedIndex+1),46==e.keyCode&&t.selectedIndex<t.selectedLabel.text.length&&(t.selectedIndex=t.selectedIndex+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),E.stage&&E.stage.update()))},WW.addEventListener("keydown",this.keydownEvent)),!1!==T&&Ao.styleTransforms(this,B),this.clone=function(){var e=new Ao.Keyboard(n,p,f,r,i,l,t,m,o,b,s,c,u,d,h,v,g,w,C,x,k,T,this.group,A);return E.cloneProps(e)},this.dispose=function(e,t,o){ze.removeAllEventListeners(),ze=null,E.keydownEvent&&WW.removeEventListener("keydown",E.keydownEvent);for(var n=0;n<E.labels.length;n++)E.labels[n].removeAllEventListeners();return Y&&Y.dispose(),E.labels=R=null,S&&S.off("pressmousemove",E.tickerMouseEvent),o||E.zimContainer_dispose(!0),!0}},Ao.extend(Ao.Keyboard,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Organizer=function(e,t,n,o,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A){if(I=zob(Ao.Organizer,arguments,"width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",this))return I;z_d("67.3"),this.group=T;var P,B,E,I,S,W,M,O=!1===k?{}:Ao.getStyle("Organizer",this.group,A);zot(e)&&(e=null!=O.width?O.width:t&&t.vertical?t.width:300),zot(n)&&(n=null==O.useAdd||O.useAdd),zot(o)&&(o=null==O.useRemove||O.useRemove),zot(r)&&(r=null==O.usePosition||O.usePosition),zot(i)&&(i=null!=O.autoAdd?O.autoAdd:n),zot(l)&&(l=null!=O.autoRemove?O.autoRemove:o),zot(a)&&(a=null!=O.autoPosition?O.autoPosition:r),zot(s)&&(s=null==O.addForward||O.addForward),zot(c)&&(c=null==O.removeForward||O.removeForward),zot(u)&&(u=null!=O.backgroundColor?O.backgroundColor:"#777"),zot(d)&&(d=null!=O.rollBackgroundColor?O.rollBackgroundColor:"#555"),zot(h)&&(h=null!=O.selectedBackgroundColor?O.selectedBackgroundColor:"#333"),zot(p)&&(p=null!=O.color?O.color:"white"),zot(f)&&(f=null!=O.rollColor?O.rollColor:p),zot(m)&&(m=null!=O.selectedColor?O.selectedColor:p),zot(z)&&(z=null!=O.selectedRollColor?O.selectedRollColor:p),zot(y)&&(y=null!=O.spacing?O.spacing:1),zot(b)&&(b=null!=O.corner?O.corner:0),zot(w)&&(w=null!=O.gradient?O.gradient:.2),zot(C)&&(C=null!=O.gloss?O.gloss:null),zot(x)&&(x=null!=O.backdropColor?O.backdropColor:null),Array.isArray(b)||(b=[b,b,b,b]),(n||r||o)&&(B={width:P=(e+y)/((n?1:0)+(r?4:0)+(o?1:0)),height:P,label:"",shadowColor:-1,gradient:w,corner:b,backgroundColor:u,rollBackgroundColor:d},E=[],(I=new Ao.Shape).graphics.f(p).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),n&&E.push(new Ao.Button({icon:I.sca(.55).rot(-45).reg(1),inherit:B})),r&&((T=new Ao.Shape).graphics.f(p).p("AiJieIETCeIkTCfg"),E.push(new Ao.Button({icon:T.sca(.6).rot(t&&!t.vertical?180:-90).reg(-2),inherit:B})),E.push(new Ao.Button({icon:T.clone().sca(.6).rot(t&&!t.vertical?0:90).reg(-2),inherit:B})),(T=new Ao.Shape).graphics.f(p).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),E.push(new Ao.Button({icon:T.sca(.62).rot(t&&!t.vertical?0:90).reg(0),inherit:B})),E.push(new Ao.Button({icon:T.clone().sca(.62).rot(t&&!t.vertical?180:-90).reg(0),inherit:B}))),o&&E.push(new Ao.Button({icon:I.clone().rot(0).sca(.55),inherit:B})),0==E.length&&(E=[""]),this.zimTabs_constructor(e,P,E,u,d,h,g,p,f,m,z,!1,y,!0,!1,b,null,!0,w,C,null,null,null,null,null,null,null,null,null,null,x),(S=this).list=t,S.type="Organizer",W=!(S.setButtons=function(){var e;r&&(E[0+(e=n?1:0)]&&(E[0+e].icon.rotation=S.list&&!S.list.vertical?180:-90),E[1+e]&&(E[1+e].icon.rotation=S.list&&!S.list.vertical?0:90),E[2+e]&&(E[2+e].icon.rotation=S.list&&!S.list.vertical?0:90),E[3+e]&&(E[3+e].icon.rotation=S.list&&!S.list.vertical?180:-90))}),M=t,S.change(function(e){(!W&&S.list||S.list&&S.list!=M)&&(S.list!=M&&M&&M.noChange(),S.list.change(function(){S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex}),W=!0,M=S.list);e=e.target.selectedIndex;n||e++,r||n&&!(0<e)||(e=5);var t,o=zot(S.list.selectedIndex)||S.list.selectedIndex<0;switch(o&&(S.currentValue=null),S.lastIndex=S.list.selectedIndex,e){case 0:i&&(t=Math.max(0,S.list.selectedIndex),S.add(t)),S.orgType="add";break;case 1:if(o)break;a&&(t=S.list.selectedIndex,S.up(t)),S.orgType="up";break;case 2:if(o)break;a&&(t=S.list.selectedIndex,S.down(t)),S.orgType="down";break;case 3:if(o)break;a&&(t=S.list.selectedIndex,S.toTop(t)),S.orgType="top";break;case 4:if(o)break;a&&(t=S.list.selectedIndex,S.toBottom(t)),S.orgType="bottom";break;case 5:if(o)break;l&&(t=S.list.selectedIndex,S.remove(t)),S.orgType="remove"}}),this.add=function(e,t,o){return zot(e)&&(e=S.lastIndex),zot(t)&&(t=""),e=s?Math.min(S.list.length,Math.max(0,S.list.selectedIndex)+1):Math.max(0,S.list.selectedIndex),S.list.addAt(t,e,o),S.list.selectedIndexPlusPosition=e,S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex,S},this.up=function(e){zot(e)&&(e=S.lastIndex);var t=S.list.items[e];return zot(t)||(S.list.removeAt(1,e),S.list.addAt(t,e-1),S.list.selectedIndexPlusPosition=Math.max(0,e-1),S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex),S},this.down=function(e){zot(e)&&(e=S.lastIndex);var t=S.list.items[e];return zot(t)||(S.list.removeAt(1,e),S.list.addAt(t,e+1),S.list.selectedIndexPlusPosition=Math.min(S.list.length-1,e+1),S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex),S},this.toTop=function(e){zot(e)&&(e=S.lastIndex);var t=S.list.items[e];return zot(t)||(S.list.removeAt(1,e),S.list.addAt(t,0),S.list.first(),S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex),S},this.toBottom=function(e){zot(e)&&(e=S.lastIndex);var t=S.list.items[e];if(!zot(t))return S.list.removeAt(1,e),S.list.addAt(t,S.list.length),S.list.last(),S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex,S},!(this.remove=function(e){if(zot(e)){if(!(0<=S.list.selectedIndex))return S;e=S.list.selectedIndex}var t=e==S.list.selectedIndex;return S.removedItem=S.list.items[e],S.list.removeAt(1,e),t?c||(e=Math.max(0,e-1)):e=S.list.selectedIndex,S.list.selectedIndexPlusPosition=Math.min(S.list.length-1,e),S.orgItem=S.list.selected,S.orgIndex=S.list.selectedIndex,S})!==k&&Ao.styleTransforms(this,O),this.clone=function(){return S.cloneProps(new Ao.Organizer(e,t,n,o,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,S.group,A))},this.dispose=function(e,t,o){return E=null,o||S.zimTabs_dispose(!0),!0})},Ao.extend(Ao.Organizer,Ao.Tabs,["clone","dispose"],"zimTabs",!1),Ao.Connectors=function(e,t,o,l,a,s,n,c,u,d,h,g,p,r,f,m,z,y,b,v,w,i,C,x,k,T,A,P,B,E,I,S){if(W=zob(Ao.Connectors,arguments,"width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, style, group, inherit",this))return W;z_d("67.39"),this.group=I;var W=!1===E?{}:Ao.getStyle("Connectors",this.group,S);zot(e)&&(e=null!=W.width?W.width:null),zot(t)&&(t=null!=W.height?W.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",zot(o)&&(o=null!=W.points?W.points:[[0,0],[100,0],[100,100],[0,100]]),zot(l)&&(l=null!=W.node?W.node:new Ao.Circle(10,Ao.grey,Ao.grey)),l.removeFrom(),l.color!=Ao.clear||l.hitArea||l.expand(0),zot(a)&&(a=null!=W.line?W.line:new Ao.Line({length:10,thickness:3,color:Ao.tin,strokeObj:{caps:"round"}})),zot(u)&&(u=null!=W.num?W.num:10),zot(s)&&(s=null!=W.linear&&W.linear),zot(n)&&(n=null==W.linearWrap||W.linearWrap),zot(v)&&(v=null!=W.nodeRollColor?W.nodeRollColor:l.color.match("rgb")?l.color:l.color.lighten(.2)),zot(w)&&(w=null!=W.nodeRollBorderColor?W.nodeRollBorderColor:l.borderColor),zot(i)&&(i=null!=W.nodeSelectedColor?W.nodeSelectedColor:Ao.white),zot(C)&&(C=null!=W.nodeSelectedBorderColor?W.nodeSelectedBorderColor:l.borderColor),zot(x)&&(x=null!=W.baseColor?W.baseColor:l.color),zot(k)&&(k=null!=W.baseBorderColor?W.baseBorderColor:l.borderColor),zot(T)&&(T=null!=W.baseRollover&&W.baseRollover),zot(m)&&(m=null!=W.min?W.min:l.radius?2*l.radius:Math.min(l.width,l.height)),zot(z)&&(z=null!=W.max?W.max:null),zot(b)&&(b=null!=W.expand?W.expand:Ao.mobile()?10:0),zot(g)&&(g=null!=W.dropType?W.dropType:"any"),zot(p)&&(p=null==W.deleteNode||W.deleteNode),zot(r)&&(r=null==W.dblclick||W.dblclick),zot(f)&&(f=null==W.fullMove||W.fullMove),zot(B)&&(B=null!=W.dblclickTime?W.dblclickTime:.5);var M,O,j,L,_,D,Y,X,R,H,I=Po(B);function F(e,t,r,o){if(e.addChild){g="on",P=!(A=!0),(r=e).connectorMoveEvent||(M.bases||(M.bases=[]),M.bases.push(r),r.connectorMoveEvent=r.on("pressmove",function(){r.positionConnectors(r,!0,!0)}),r.connectorUpEvent=r.on("pressup",function(){r.positionConnectors(r,!0,!0)}),T&&(r.connectorOverEvent=r.on("mouseover",function(){J(r)}),r.connectorOutEvent=r.on("mouseout",function(){$(r)})),r.positionConnectors=function(o,n,r){Ao.loop(o.connectors,function(e){var t=o.parent.localToLocal(o.x-o.baseStart.x+e.nodeStart.x,o.y-o.baseStart.y+e.nodeStart.y,e.parent);e.x=t.x,e.y=t.y,ie(e,n,r)}),o.stage&&o.stage.update()},r.setConnectorColors=function(t,o,e,n){return zot(t)||(r.connectorColor=t),zot(o)||(r.connectorBorderColor=o),zot(e)||(r.connectorRollColor=e),zot(n)||(r.connectorRollBorderColor=n),Ao.loop(r.connectors,function(e){zot(t)||(e.color=t),zot(o)||(e.borderColor=o)}),r},r.setConnectorColors(x,k,v,w));var n=r.getBounds();a.endHead,Array.isArray(t)||(t=[t,t]);var i=[];return 2==t.length&&(t=[t[0],t[1],t[0],t[1]]),a.lineOrientation!=Ao.HORIZONTAL&&"auto"!=a.lineOrientation||Ao.loop([t[0],t[1]],function(e,o){var t;-1!=e&&-2!=e||(t=r.localToLocal(0==o?n.x:n.x+n.width,n.y,M),i.push([t.x,t.y,Ao.HORIZONTAL])),-1!=e&&-3!=e||(t=r.localToLocal(0==o?n.x:n.x+n.width,n.y+n.height,M),i.push([t.x,t.y,Ao.HORIZONTAL])),0<e&&Ao.loop(e,function(e,t){t=r.localToLocal(0==o?n.x:n.x+n.width,n.y+n.height*(e+1)/(t+1),M);i.push([t.x,t.y,Ao.HORIZONTAL])})}),a.lineOrientation!=Ao.VERTICAL&&"auto"!=a.lineOrientation||Ao.loop([t[2],t[3]],function(e,o){var t;-1!=e&&-2!=e||(t=r.localToLocal(n.x,0==o?n.y:n.y+n.height,M),i.push([t.x,t.y,Ao.VERTICAL])),-1!=e&&-3!=e||(t=r.localToLocal(n.x+n.width,0==o?n.y:n.y+n.height,M),i.push([t.x,t.y,Ao.VERTICAL])),0<e&&Ao.loop(e,function(e,t){t=r.localToLocal(n.x+n.width*(e+1)/(t+1),0==o?n.y:n.y+n.height,M);i.push([t.x,t.y,Ao.VERTICAL])})}),r.connectors=[],r.baseStart=new Ao.Point(r.x,r.y),Ao.loop(i,function(e){e=F(e[0],e[1],r,e[2]);ee(r,e)}),setTimeout(function(){r.positionConnectors(r,!0,!0)},50),M}t=l.clone().loc(e,t,_).drag({boundary:y}).expand(b);return t.orientation=o,t.on("mouseover",G),t.on("mouseout",q),t.on("mousedown",U),t.on("pressmove",Q),t.on("pressup",Z),p&&t.hold(V),t.creations=[],t}function N(){Ao.loop(o,function(e){F(e[0],e[1])}),s&&_.loop(function(e,t,o){0==t?(e.before=n?_.getChildAt(o-1):null,e.after=_.getChildAt(t+1)):t==o-1?(e.after=n?_.getChildAt(0):null,e.before=_.getChildAt(t-1)):(e.before=_.getChildAt(t-1),e.after=_.getChildAt(t+1)),c&&0<t&&e.noMouse()})}function V(e){var t=e.target.stage,e=e.target;M.bases||A&&!e.creator.creator||(e.adding?le(e.creator):le(e),t&&t.update())}function G(e){e=e.target;e.selected||(e.color=e.base?e.base.connectorRollColor:v,e.borderColor=e.base?e.base.connectorRollBorderColor:w,M.stage&&M.stage.update())}function q(e){e=e.target;e.selected||(e.color=e.base?e.base.connectorColor:O,e.borderColor=e.base?e.base.connectorBorderColor:j,M.stage&&M.stage.update())}function U(e){var t,o=e.target;s||A&&!o.creator||!r||(0==R&&(H=setTimeout(function(){var t;R=0,Y&&(t=M.stage?M.stage.frame:WW.zdf,_.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY)&&e.selected)return!1})&&re())},B)),R++),o.startX=o.x,o.startY=o.y,!s&&0<Y.length&&Ao.loop(Y,function(e){e.startX=e.x,e.startY=e.y}),o.creations.length>=u||o.selected||o.creator&&!P||(o.adding=!0,(t=F(o.x,o.y).bot()).creations=o.creations,t.creatorLine=o.creatorLine,t.creator=o.creator,t.orientation=o.orientation,t.startX=o.startX,t.startY=o.startY,o.base&&(t.base=o.base,t.baseStart=o.baseStart,t.nodeStart=o.nodeStart,t.connectors=o.connectors,o.base=o.baseStart=o.nodeStart=o.connectors=null,t.base.connectors&&t.base.connectors.splice(t.base.connectors.indexOf(o),1,t),t.color=t.base.connectorColor,t.borderColor=t.base.connectorBorderColor),t.before=o.before,t.after=o.after,t.before&&(t.before.after=t),t.after&&(t.after.before=t),!t.creator||-1!=(e=t.creator.creations.indexOf(o))&&t.creator.creations.splice(e,1,t),Ao.loop(t.creations,function(e){e.creator=t}),o.creator=t,o.creatorLine=a.clone().setPoints(o.x,o.y,o.x,o.y).addTo(L).alp(0),o.creatorLine.lineOrientation=o.orientation,(o.creatorLine.node=o).creatorLine.creatorNode=t,o.creations=[],t.creations.push(o))}function Q(e){var t=e.target;t.creatorLine&&t.creatorLine.alp(1),!s&&0<Y.length&&-1==Y.indexOf(t)&&re(),ie(t,!1,!0),M.bases&&Ao.loop(M.bases,function(e){t.creator&&t.creator.base==e||(!e.connectorsOn&&t.hitTestBounds(e)&&J(e),e.connectorsOn&&!t.hitTestBounds(e)&&$(e))}),M.stage.update()}function Z(e){var t=e.target;M.bases&&Ao.loop(M.bases,function(e){e!=t.base&&e.connectorsOn&&$(e)});var o=!1;if(!s&&1<R&&(clearTimeout(H),n=t.adding?t.creator:t,t.adding&&le(n.creations[n.creations.length-1]),n.selected||oe(n,!(M.stage?M.stage.frame:WW.zdf).ctrlKey),o=!(R=0)),s||M.base||(d&&(t.x=Math.round(t.x/d)*d),h&&(t.y=Math.round(t.y/h)*h)),m&&Ao.dist(t.x,t.y,t.startX,t.startY)<m||z&&Ao.dist(t.x,t.y,t.startX,t.startY)>z)return t.adding?le(t):(t.loc(t.startX,t.startY),o||ie(t)),M.stage.update(),void M.dispatchEvent("noconnection");var e=!1,n=!1;if(s){o=t.creator;if(M.connectionStart=o,M.connectionEnd=t,o.before&&t.hitTestCircle(o.before)&&!c)t.loc(o.before).removeFrom(),o.before.after=null,o.before.before||o.before.noMouse(),o.before=null,o.after||o.noMouse(),n=!0,e=ne();else if(o.after&&t.hitTestCircle(o.after))t.loc(o.after).removeFrom(),o.after.before=null,o.after.after||o.after.noMouse(),c&&o.after.mouse(),o.after=null,o.before||o.noMouse(),c&&o.noMouse(),n=!0,e=ne();else{if(o&&!(0<t.creations.length))return le(t),M.stage.update(),void M.dispatchEvent("noconnection");t.loc(t.startX,t.startY).bot()}}else if("off"==g){if(!_.loop(function(e){if(t!=e)return t.hitTestCircles(e)?(t.adding?le(t):(t.loc(t.startX,t.startY),ie(t)),A&&te(t),!f&&t.creator&&0<u&&t.creator.creations.length>=u&&t.creator.noMouse(),M.dispatchEvent("connection"),M.stage.update(),!1):void 0}))return void K(t)}else if("on"==g||"single"==g){var r,i=0;if(_.loop(function(e){if(t!=e&&t.hitTestCircles(e)&&(r=e,!M.bases||!(t.orientation!=e.orientation||t.creator&&t.creator.base&&t.creator.base==e.base))){if("on"==g)return!1;i++,i+=e.creations.length}})&&("single"!=g||1!=i))return void K(t);if(t.loc(r),t.creator&&t.orientation==Ao.VERTICAL&&Math.round(t.y)==Math.round(t.creator.startY)||t.creator&&t.orientation==Ao.HORIZONTAL&&Math.round(t.x)==Math.round(t.creator.startX))return;r.base&&r.base.connectors&&ee(r.base,t),e=!0}!f&&t.creator&&0<u&&t.creator.creations.length>=u&&t.creator.noMouse(),t.adding=!1,ie(t,!0,!0),Ao.loop(Y,function(e){e.startX=e.x,e.startY=e.y}),t.startX=t.x,t.startY=t.y,A&&te(t),n?M.dispatchEvent("connection"):M.dispatchEvent("noconnection"),e&&M.dispatchEvent("complete"),M.stage.update()}function K(e){var t;e.adding||!P?le(e):(e.loc(e.startX,e.startY),ie(e)),A&&te(e),e.base&&e.base.connectors&&(t=e.base,e=e,t.connectors.splice(t.connectors.indexOf(e),1),e.nodeStart=null,e.base=null),M.stage.update(),M.dispatchEvent("noconnection")}function J(t){Ao.loop(t.connectors,function(e){e.color=t.connectorRollColor,e.borderColor=t.connectorRollBorderColor}),t.connectorsOn=!0,t.stage.update()}function $(t){Ao.loop(t.connectors,function(e){e.color=t.connectorColor,e.borderColor=t.connectorBorderColor}),t.connectorsOn=!1,t.stage.update()}function ee(e,t){e.connectors.push(t),t.nodeStart=t.parent.localToLocal(t.x,t.y,e.parent),t.nodeStart.x-=e.x-e.baseStart.x,t.nodeStart.y-=e.y-e.baseStart.y,t.base=e}function te(e){e.creator&&(e.creator.creator?te(e.creator):e.creator&&e.creator.creations.length>=u?e.creator.noMouse():e.creator.mouse())}function oe(e,t){t&&Ao.loop(e.creations,function(e){oe(e,t)}),e.selected=!0,e.color=e.base?e.base.connectorColor:i,e.borderColor=e.base?e.base.connectorBorderColor:C,Y.push(e),e.top(),X=X||M.stage.on("stagemousedown",function(){var t=M.stage?M.stage.frame:WW.zdf;_.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY))return!1})&&re()})}function ne(){if(_.loop(function(e){if(e.before||e.after)return!1}))return _.loop(function(e){e.noMouse()}),!0}function re(){Ao.loop(Y,function(e){e.selected=!1,e.color=e.base?e.base.connectorColor:O,e.borderColor=e.base?e.base.connectorBorderColor:j}),Y=[],M.stage.off("stagemousedown",X),X=null,M.stage.update()}function ie(t,o,n){var e=0<Y.length?Y:[t];Ao.loop(e,function(e){e!=t&&e.loc(e.startX+t.x-t.startX,e.startY+t.y-t.startY),e.creator&&e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n),Ao.loop(e.creations,function(e){e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n)})})}function le(e){var t;return Ao.loop(e.creations,function(e){le(e)},!0),e.creatorLine&&(e.creatorLine.removeFrom(),-1!=(t=e.creator.creations.indexOf(e))&&e.creator.creations.splice(t,1),e.creator.mouseEnabled||A&&!e.creator.creator||e.creator.mouse()),e.removeFrom(),e.removeAllEventListeners(),e=null,M}function ae(e){e.off("pressmove",e.connectorMoveEvent),e.off("pressup",e.connectorUpEvent),e.connectorOverEvent&&e.off("mouseover",e.connectorOverEvent),e.connectorOutEvent&&e.off("mouseout",e.connectorOutEvent),e.connectors=null,e.baseStart=null,e.positionConnectors=e.setConnectorColors=null,e.connectorColor=e.connectorBorderColor=e.connectorRollColor=e.connectorRollBorderColor=null,M.bases.splice(M.bases.indexOf(e),1),M.stage&&M.stage.update()}B*="s"==I?1e3:1,zot(d)&&(d=null!=W.snapH?W.snapH:null),zot(h)&&(h=null!=W.snapV?W.snapV:null),zot(A)&&(A=null!=W.rootLock&&W.rootLock),zot(P)&&(P=null==W.grandChildren||W.grandChildren),s&&o.length<=1?zon&&zogy("Connector() - linear needs more than one point"):((M=this).node=l,M.line=a,O=l.color,j=l.borderColor,L=M.lines=new Ao.Container(e,t).addTo(M),_=M.nodes=new Ao.Container(e,t).addTo(M),"Blob"!=o.type&&"Squiggle"!=o.type||(D=[],Ao.loop(o.points,function(e){D.push([e[0],e[1]])}),o=D),M.points=o,this.addNode=function(e,t){if(!s)return F(e,t)},N(),M.keyEvent=function(e){p&&46==e.keyCode&&(Ao.loop(Y,function(e){e&&e.parent&&le(e)}),M.stage&&M.stage.update())},WW.addEventListener("keydown",M.keyEvent),Y=[],R=0,this.selectNode=function(e,t){oe(e,t)},this.removeNode=function(e){le(e)},this.removeConnectors=function(){Ao.loop(_,function(e){le(e)},!0),N(),M.stage.update()},this.removeBase=function(e){Ao.loop(e.connectors,function(e){le(e)}),ae(e)},this.addBase=function(e,t){F(e,t)},Object.defineProperty(this,"selectedList",{get:function(){return Y},set:function(){zon&&zogy("Selectors() - selectedList is read only")}}),!(this.dispose=function(e,t,o){return M.nodes.loop(function(e){e.removeFrom(),e.removeAllEventListeners(),e=null},!0),M.lines.loop(function(e){e.removeFrom(),e=null},!0),WW.removeEventListener("keydown",M.keyEvent),M.keyEvent=null,M.bases&&Ao.loop(M.bases,function(e){ae(e)}),o||(M.zimContainer_dispose(!0),M.stage&&M.stage.update()),!0})!==E&&Ao.styleTransforms(this,W),this.clone=function(){return M.cloneProps(new Ao.Collectors(e,t,o,l,a,s,n,c,u,d,h,g,p,r,f,m,z,y,b,v,w,i,C,x,k,T,A,P,B,E,M.group,S))})},Ao.extend(Ao.Connectors,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Marquee=function(e,t,o,i,n,r,l,a,s,c,u,d,h,g,p,f,m){if(w=zob(Ao.Marquee,arguments,"width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",this))return w;z_d("67.4"),this.group=f;var z=!1===p?{}:Ao.getStyle("Marquee",this.group,m),y=this;zot(e)&&(e=null!=z.width?z.width:300),zot(t)&&(t=null!=z.height?z.height:100);var b=Po(i);zot(i)&&(i=null!=z.time?z.time:"s"==b?5:5e3),zot(n)&&(n=null!=z.transition?z.transition:"slide"),zot(u)&&(u=null!=z.borderColor?z.borderColor:"#333"),zot(d)&&(d=null!=z.borderWidth?z.borderWidth:1),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(a)&&(a=null!=z.marginLeft?z.marginLeft:25),zot(s)&&(s=null!=z.marginRight?z.marginRight:25),zot(r)&&(r=null!=z.speed?z.speed:"s"==b?.5:500),Bo(r,b),zot(l)&&(l=null!=z.direction?z.direction:"right"),zot(h)&&(h=null!=z.refresh?z.refresh:"s"==b?1800:18e5),zot(g)&&(g=null==z.mix||z.mix),this.zimContainer_constructor(e+a+s,t,null,null,!1),this.type="Marquee",this.speed=r;var v,w=new Ao.Rectangle(e-1,t-1,Ao.clear).addTo(y).mov(a+.5,.5),C=this.content=new Ao.Container(e,t).loc(a,0,y).setMask(w),x=this.pages=new Ao.Pages(null,n,r,null,C).addTo(C),k=!1;this.add=function(e,t,o,n,r){zot(r)&&(r=!0),e.scaleTo(C,100,100),t&&e.cur().on("click",function(){zgo(t,o)}),x.addPage(e),r&&x.center(),e.marqueeViews=0,e.marquee=y,k||(k=!0,y.selectedIndex=0,y.selected=x.pages[y.selectedIndex].page,y.lastSelected=null,y.selected.marqueeOn&&y.selected.marqueeOn(),y.interval=Ao.interval(i,function(){y.go()})),n||W(),I&&I.top()},this.remove=function(e){var t;y.selected==e?1!=y.pages.pages.length&&((t=y.selectedIndex+1)==y.pages.pages.length&&(t=0),y.pages.go(t,null,null,0),setTimeout(function(){y.pages.removePage(e),e.dispose&&e.dispose(),W()},20)):(y.pages.removePage(e),e.dispose&&e.dispose(),W())},zot(o)||Array.isArray(o)||(o=[o]),o&&0<o.length&&(g&&Ao.shuffle(o),Ao.loop(o,function(e){y.add(e,null,null,!0)})),0<h&&(v=Ao.timeout(h*("s"==b?1e3:1),function(){location.reload()},null,"ms")),y.go=function(o){var e;y.selected.marqueeViews+=1,y.selected.marqueeOff&&y.selected.marqueeOff(),o?(y.selected=o,Ao.loop(x.pages,function(e,t){e.page==o&&(y.selectedIndex=t)}),y.interval.interval=y.selected.marqueeTime||i,y.interval.pause(S.toggled,null,!0)):(e=y.selectedIndex+1,y.selectedIndex=e%x.pages.length,y.selected=x.pages[y.selectedIndex].page,y.interval.time=y.selected.marqueeTime||i),y.dispatchEvent("page"),y.selected.marqueeOn&&y.selected.marqueeOn(),x.go(y.selected,l,n,r)},x.on("pagetransitioned",function(){y.dispatchEvent("pagetransitioned"),y.indicator&&(y.indicator.selectedIndex=y.selectedIndex)});var T=!1,A=y.left=new Ao.Container(a-4,t-4),f=(new Ao.Shape).sca(.6);f.graphics.f(Ao.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");b=(new Ao.Shape).sca(.6).reg(-2,0);b.graphics.f(Ao.light).mt(0,0).p("AiJieIETCeIkTCfg");var P,B,E,I,S=y.button=new Ao.Button({label:"",icon:f,toggleIcon:b,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(A,100).pos(0,0,!1,!0,A);function W(){var e;zot(a)||0==a||(e=4*a/25,A.pos(a-A.width-e,e/2,!1,!0,y),y.indicator&&(y.indicator.dispose(),y.indicator.removeFrom()),P=P||new Ao.Proportion(8,16,A.width+e,A.width/2+e,-1),y.indicator=new Ao.Indicator({width:(x.pages.length<=2?x.pages.length:x.pages.length-1)*(A.width-3),height:P.convert(x.pages.length),num:x.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:c}),y.indicator.fit(0,0,t-S.height,S.width),y.indicator.rot("down"==l?-90:90).center(A).pos(null,A.width-e/2,null,!0),y.indicator.selectedIndex=y.selectedIndex,y.indicator.on("change",function(){y.go(x.pages[y.indicator.selectedIndex].page)}))}S.on("click",function(){y.interval&&y.interval.pause(S.toggled),T=S.toggled,y.stage.update()}),W(),!zot(s)&&0<s&&WW.zdf&&WW.zdf&&(f=4*s/25,b=y.right=new Ao.Container(45,270),(B=y.icon=WW.zdf.makeIcon(Ao.grey,Ao.lighter,Ao.silver).sca(.5).pos(0,0,!0,!0,b).mov(0,0).cur()).on("mouseover",function(){E.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),B.stage.update()}),B.on("mouseout",function(){E.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),B.stage.update()}),B.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")}),E=y.label=new Ao.Label({text:"MARQUEE",color:Ao.dark,backgroundColor:Ao.lighter,shiftVertical:1,paddingVertical:5}).rot(-90).pos(0,13,!0,!1,b).reg(-10).sca(0,1).mov(0),b.fit(0,0,s-f,t-f),b.pos(s-b.width-f,f/2,!0,!0,y)),y.stage&&y.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=T&&(T=e,y.interval.pause(e,t),y.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return T},set:function(){zon&&zogy("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return i},set:function(e){i=e,y.interval.time=i}}),this.load=function(n,e){var t=[];g&&Ao.shuffle(n),Ao.loop(n,function(e){Array.isArray(e)?t.push(e[0]):t.push(e)});var o=y.stage?y.stage.frame:WW.zdf;return y.marqueeLoader=o.loadAssets(t,e),y.loadEvent=y.marqueeLoader.on("assetload",function(e){var t,o=n[e.asset.id],o=Array.isArray(o)?(t=o[0],o[1]):(t=o,"_self");y.add(e.asset,t,o),W()}),y},zot(u)||((I=new Ao.Rectangle(e-1,t-1,Ao.clear,u,d).loc(w,null,y)).mouseEnabled=!1),!1!==p&&Ao.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new Ao.Marquee(e,t,o,i,n,r,l,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return v&&v.clear(),y.interval&&y.interval.clear(),y.loadEvent&&y.marqueeLoader.off("assetload",y.loadEvent),x.dispose(),x=null,o||this.zimContainer_dispose(!0),!0}},Ao.extend(Ao.Marquee,Ao.Container,["clone","dispose"],"zimContainer"),Ao.Loader=function(t,o,n,p,r,i,l,a,s,e,c,u,d,h,g,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O){var j;if(j=zob(Ao.Loader,arguments,"width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",this))return j;z_d("67.5"),this.group=M;O=!1===W?{}:Ao.getStyle("Loader",this.group,O);if(zot(t)&&(t=null!=O.width?O.width:250),zot(o)&&(o=null!=O.height?O.height:70),zot(p)&&(p=null!=O.type?O.type:"image"),p=p.toLowerCase(),zot(r)&&(r=null!=O.backgroundColor?O.backgroundColor:"rgba(0,0,0,.05)"),zot(i)&&(i=null!=O.rollBackgroundColor?O.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(l)&&(l=null!=O.color?O.color:"rgba(0,0,0,.5)"),zot(a)&&(a=null!=O.rollColor?O.rollColor:l),zot(s)&&(s=null!=O.borderColor?O.borderColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=O.borderWidth?O.borderWidth:1),zot(z)&&(z=null==O.dashed||O.dashed),zot(u)&&(u=null!=O.corner?O.corner:0),zot(I)&&(I=null==O.multiple||O.multiple),zot(n)&&(n=null!=O.label?O.label:new Ao.Label({text:"UPLOAD PIC",color:l,rollColor:a,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),void 0===E){if(!WW.zdf)return void(zon&&zogy("zim.Loader - please provide a reference to zim Frame"));E=WW.zdf}this.zimButton_constructor(t,o,n,r,i,null,l,a,null,s,c,e,null,y,b,null,w,C,null,u,z,d,h,f,m,null,null,null,null,null,g,null,null,null,v,x,null,null,null,null,null,null,k,T,null,A,P,null,B,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var L=this,_=E.stage;n=L.label;var D=L.tag=document.createElement("input");(E.tag||document.body).appendChild(D),D.setAttribute("type","file"),D.setAttribute("aria-hidden",!0),I&&D.setAttribute("multiple","multiple"),S&&D.setAttribute("accept",S),D.hidden=!0,D.zimDisplay=D.style.display||"inline-block",D.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){D.click()}),D.addEventListener("change",H);var Y=new createjs.DOMElement(D);_.addChild(Y),Y.alpha=0;var X,R=E.retina&&WW.devicePixelRatio||1;function H(e){var i,l,a,s,c,u,d,h,g=(e.dataTransfer&&e.dataTransfer.files&&0<e.dataTransfer.files.length?e.dataTransfer:e.target).files;"text"==p||"json"==p?(i=[],"json"==p.toLowerCase()&&(a=[])):"other"==p?c=[]:d=[];for(var t,o,n=0;n<g.length;n++)t=g[n],o=void 0,(o=new FileReader).onload=function(e){var t,o,n,r;"text"==p||"json"==p?(t=e.target.result,i.push(t),"json"==p&&(o=JSON.parse(t),a.push(o)),1==i.length&&(l=t,"json"==p&&(s=o)),i.length==g.length&&((n=new createjs.Event("loaded")).texts=i,n.text=l,n.lastText=t,n.total=i.length,"json"==p&&(n.jsons=a,n.json=s,n.lastJSON=o),L.dispatchEvent(n),D.value="")):"other"==p?(o=e.target.result,c.push(o),1==c.length&&(u=o),c.length==g.length&&((n=new createjs.Event("loaded")).others=c,n.other=u,n.lastOther=o,n.total=c.length,L.dispatchEvent(n),D.value="")):((r=new Image).onload=function(){var e,t=new Ao.Bitmap(r);d.push(t),1==d.length&&(h=t),d.length==g.length&&((e=new createjs.Event("loaded")).bitmaps=d,e.bitmap=h,e.lastBitmap=t,e.total=d.length,L.dispatchEvent(e),D.value="")},r.src=e.target.result)},"text"==p||"json"==p?o.readAsText(t):o.readAsDataURL(t)}this.resize=function(e,t){if(!L.stage)return D.setAttribute("aria-hidden",!0),D.hidden=!0,void(D.style.display="none");D.setAttribute("aria-hidden",!1),D.hidden=!1,D.style.display=D.zimDisplay,zot(e)&&(e=!0),L.time1&&clearTimeout(L.time1),t||(L.time1=setTimeout(function(){L.resize(null,!0)},40));var o=L.getConcatenatedMatrix().decompose(),e=L.localToGlobal(0,0);return E.retina?(t=Ao.browserZoom(),E.tag?(Y.x=e.x/R/t,Y.y=e.y/R/t):(Y.x=E.x/_.scaleX+e.x/R/t,Y.y=E.y/_.scaleY+e.y/R/t),Ao.sca(Y,o.scaleX/R/_.scaleX/t,o.scaleY/R/_.scaleY/t)):(Y.x=E.x+e.x*E.scale,Y.y=E.y+e.y*E.scale,Ao.sca(Y,E.scale*o.scaleX,E.scale*o.scaleY)),_.update(),L},this.resize(),L.on("added",function(){D.style.display="block",D.hidden=!1,D.style.display="block",L.resize()}),L.added(function e(){L.resize();L.time2=setTimeout(function(){D.style.display="block",D.hidden=!1,D.style.display="block"},50);L.on("added",e,null,!0)}),L.on("removed",function(){L.time1&&clearTimeout(L.time1),L.time2&&clearTimeout(L.time2),D&&(D.style.display="none",D.hidden=!0,D.style.display="none")}),(new XMLHttpRequest).upload&&(X=function(e){D.removeEventListener("change",H),H(e),setInterval(function(){D.addEventListener("change",H)},100)},D.addEventListener("drop",X)),!(this.save=function(e,t,o,n,r,i,l,a,s,c,u){var d,h,g,p;if(d=zob(L.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type, data, quality"))return d;if(zot(e)&&(e=E.stage),zot(s)&&(s="png"),zot(t)?t="saved_"+String(Ao.makeID("numbers",5))+"."+s:1==(d=t.split(".")).length||-1==(g=(h=["png","jpg","jpeg"]).indexOf(d[d.length-1].toLowerCase()))?t+="."+s:s=h[g],zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=(e.getBounds&&e.getBounds()?e.getBounds():E).width),zot(i)&&(i=(e.getBounds&&e.getBounds()?e.getBounds():E).height),e.cache(o,n,r,i),c){c=e.cacheCanvas.toDataURL("image/"+s,u);return l?a&&e.cache(a.x,a.y,a.width,a.height):e.uncache(),c}return/Edge\/(\d)+/.test(navigator.userAgent)?((p=WW.open()).document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+e.cacheCanvas.toDataURL("image/"+s)+"></body></html>"),p.document.close()):("jpg"==s&&(s="jpeg"),(p=document.createElement("a")).setAttribute("download",t),p.setAttribute("href",e.cacheCanvas.toDataURL("image/"+s,u)),document.body.appendChild(p),p.click(),document.body.removeChild(p)),l?a&&e.cache(a.x,a.y,a.width,a.height):e.uncache(),L})!==W&&Ao.styleTransforms(this,O),this.clone=function(){var e=new Ao.Loader(t,o,zot(n)?null:n.clone(),r,i,l,a,s,c,u,d,h,g,f,m,zot(y)?null:y.clone(),zot(b)?null:b.clone(),v,zot(w)?null:w.clone(),zot(C)?null:C.clone(),x,zot(k)?null:k.clone(),zot(T)?null:T.clone(),zot(A)?null:A.clone(),zot(P)?null:P.clone(),B,E,W,this.group);return L.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return E},set:function(e){e!=E&&(E.off("update",L.updateEvent),E.off("resize",L.resizeEvent),E=e,L.resizeEvent=E.on("resize",L.resize),L.updateEvent=E.on("update",L.resize),L.resize())}}),this.resizeEvent=E.on("resize",L.resize),this.updateEvent=E.on("update",L.resize),this.dispose=function(e,t,o){var n;return L.stage&&(n=L.stage),E.off("update",L.updateEvent),E.off("resize",L.resizeEvent),D.removeEventListener("change",H),X&&D.removeEventListener("drop",X),D&&D.parentNode&&D.parentNode.removeChild(D),D=null,o||(this.zimButton_dispose(),n&&n.update()),!0}},Ao.extend(Ao.Loader,Ao.Button,["clone","dispose"],"zimButton",!1),Ao.TextArea=function(t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,e,k){if(T=zob(Ao.TextArea,arguments,"width, height, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, style, group, inherit",this))return T;z_d("67.6"),this.group=e;var T=!1===x?{}:Ao.getStyle("TextArea",this.group,k);if(zot(t)&&(t=null!=T.width?T.width:250),zot(o)&&(o=null!=T.height?T.height:70),zot(n)&&(n=null!=T.size?T.size:20),zot(r)&&(r=null!=T.padding?T.padding:5),zot(i)&&(i=null!=T.color?T.color:"#666"),zot(l)&&(l=null!=T.backgroundColor?T.backgroundColor:"rgba(256,256,256,.1)"),zot(a)&&(a=null!=T.borderColor?T.borderColor:"rgba(0,0,0,.1)"),zot(s)&&(s=null!=T.borderWidth?T.borderWidth:null),a<0||s<0?a=s=null:null!=a&&null==s&&(s=1),zot(c)&&(c=null!=T.corner?T.corner:0),!zot(d)&&zot(u)&&(u=null!=T.shadowColor?T.shadowColor:"rgba(0,0,0,.3)"),!zot(u)&&zot(d)&&(d=null!=T.shadowBlur?T.shadowBlur:10),zot(z)&&(z=null!=T.password&&T.password),zot(y)&&(y=null!=T.inputType&&T.inputType),zot(b)&&(b=null==T.wrap||T.wrap),zot(v)&&(v=null!=T.maxLength?T.maxLength:null),zot(m)&&(m=null==T.spellCheck||T.spellCheck),zot(f)&&(f=null!=T.readOnly&&T.readOnly),zot(p)&&(p=null!=T.placeholder?T.placeholder:null),this.maxLength=v,zot(C)&&(C=null!=T.expand?T.expand:20),!0===C&&(C=20),void 0===w){if(!WW.zdf)return void(zon&&zogy("zim.TextArea - please provide a reference to zim Frame"));w=WW.zdf}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var A=this,P=w.stage,e=this.background=new Ao.Rectangle(t,o,l,a,s,c,h,null,null,!1).expand(C);-1!=u&&0<d&&(e.shadow=new createjs.Shadow(u,3,3,d)),A.addChild(e);var B=A.tag=y||z?document.createElement("input"):document.createElement("textarea");(w.tag||document.body).appendChild(B),zot(g)||(B.setAttribute("id",g),B.setAttribute("name",g)),z?B.setAttribute("type","password"):y&&B.setAttribute("type",y),B.readOnly=f,B.spellcheck=m,p&&B.setAttribute("placeholder",p),B.zimDisplay=B.style.display||"inline-block",B.style.cssText="background-color:rgba(0,0,0,.01); color:"+i+"; resize:none; z-index:3; width:"+(t-2*r)+"px; height:"+(o-2*r)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:"+(null!=T.font?T.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",A.taInput=function(){!zot(A.maxLength)&&A.text.length>A.maxLength&&(A.text=A.text.substring(0,A.maxLength)),A.dispatchEvent("input")},A.taFocus=function(){A.stage&&(w=A.stage.frame),w.zil&&WW.removeEventListener("keydown",w.zil[0]),A.dispatchEvent("focus")},A.taBlur=function(){A.stage&&(w=A.stage.frame),w.zil&&WW.addEventListener("keydown",w.zil[0]),A.dispatchEvent("blur")},B.addEventListener("change",A.taChange),B.addEventListener("input",A.taInput),B.addEventListener("focus",A.taFocus),B.addEventListener("blur",A.taBlur);var E=new createjs.DOMElement(B);E.alpha=0,this.on("mousedown",function(){setTimeout(function(){B.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?B.focus():B.blur(),A};var I=w.retina&&WW.devicePixelRatio||1;this.resize=function(e,t){zot(e)&&(e=!0),A.time1&&clearTimeout(A.time1),t||(A.time1=setTimeout(function(){A.resize(null,!0)},40));var o=A.getConcatenatedMatrix().decompose(),n=A.localToGlobal(r,r);return w.retina?(t=Ao.browserZoom(),w.tag?(E.x=n.x/I/t,E.y=n.y/I/t):(E.x=w.x/P.scaleX+n.x/I/t,E.y=w.y/P.scaleY+n.y/I/t),Ao.sca(E,o.scaleX/I/P.scaleX/t,o.scaleY/I/P.scaleY/t)):(w.tag?(E.x=n.x*w.scale,E.y=n.y*w.scale):(E.x=w.x+n.x*w.scale,E.y=w.y+n.y*w.scale),Ao.sca(E,w.scale*o.scaleX,w.scale*o.scaleY)),E.alpha=A.alpha,A.parent&&(E.alpha*=A.parent.alpha),e&&A.stage&&P.update(),A},this.resize(),A.added(function e(){P.addChild(E);A.time2=setTimeout(function(){B.style.display=B.zimDisplay},50);A.resize();A.on("added",e,null,!0);A.FOEvent=P.on("stagemousedown",function(){A.focus=!1})}),A.on("removed",function(){A.time1&&clearTimeout(A.time1),A.time2&&clearTimeout(A.time2),P.removeChild(E),A.FOEvent&&P.off("stagemousedown",A.FOEvent),B&&(B.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return B.value},set:function(e){B.value=e}}),Object.defineProperty(this,"text",{get:function(){return B.value},set:function(e){B.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==B},set:function(e){A.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return B.readOnly},set:function(e){B.readOnly=e}}),null!=WW.KEYFOCUS&&(Ao.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Ao.KEYFOCUS==A},set:function(){Ao.KEYFOCUS=A}}),Ao.KEYFOCUS||(A.keyFocus=!0),A.taMousedown=function(){A.keyFocus=!0},B.addEventListener("mousedown",A.taMousedown),b||(B.style.whiteSpace="pre"),!1!==x&&Ao.styleTransforms(this,T),this.clone=function(){var e=new Ao.TextArea(t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,this.group,k);return A.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return w},set:function(e){e!=w&&(w.off("update",A.updateEvent),w.off("resize",A.resizeEvent),w=e,A.resizeEvent=w.on("resize",A.resize),A.updateEvent=w.on("update",A.resize),I=w.retina&&WW.devicePixelRatio||1,P=w.stage,A.resize())}}),this.resizeEvent=w.on("resize",A.resize),this.updateEvent=w.on("update",A.resize),this.dispose=function(e,t,o){var n;return A.stage&&(n=A.stage),w.off("update",A.updateEvent),w.off("resize",A.resizeEvent),n&&A.FOEvent&&n.off("stagemousedown",A.FOEvent),B&&B.parentNode&&B.parentNode.removeChild(B),B.removeEventListener("change",A.taChange),B.removeEventListener("input",A.taInput),B.removeEventListener("focus",A.taFocus),B.removeEventListener("blur",A.taBlur),B.removeEventListener("mousedown",A.taMousedown),B=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!(A.background=null)}},Ao.extend(Ao.TextArea,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Tag=function(t,o,n,r,i,l,a,s,c,u,e,d){var h;if(h=zob(Ao.Tag,arguments,"width, height, id, frame, backgroundColor, padding, paddingHorizontal, paddingVertical, expand, style, group, inherit",this))return h;z_d("67.7"),this.group=e;e=!1===u?{}:Ao.getStyle("Tag",this.group,d);if(zot(t)&&(t=null!=e.width?e.width:250),zot(o)&&(o=null!=e.height?e.height:70),zot(n)&&(n=null!=e.id?e.id:"zimTag_"+Ao.rand(1e4)),void 0===r){if(!WW.zdf)return void(zon&&zogy("zim.Tag - please provide a reference to zim Frame"));r=WW.zdf}zot(i)&&(i=null!=e.backgroundColor?e.backgroundColor:"rgba(0,0,0,0)"),zot(l)&&(l=null!=e.padding?e.padding:10),zot(a)&&(a=null!=e.paddingHorizontal?e.paddingHorizontal:l),zot(s)&&(s=null!=e.paddingVertical?e.paddingVertical:l),zot(c)&&(c=null!=e.expand?e.expand:20),!0===c&&(c=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var g=this,p=r.stage;g.background=new Ao.Rectangle(t+a,o+s,i).center(this).expand(c||0);var f=g.tag=document.createElement("div");(r.tag||document.body).appendChild(f),f.setAttribute("id",n),f.setAttribute("name",n),f.zimDisplay=f.style.display||"inline-block",f.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var m=new createjs.DOMElement(f);m.alpha=0;var z=r.retina&&WW.devicePixelRatio||1;this.resize=function(e,t){zot(e)&&(e=!0),g.time1&&clearTimeout(g.time1),t||(g.time1=setTimeout(function(){g.resize(null,!0)},40));var o=g.getConcatenatedMatrix().decompose(),n=g.localToGlobal(0,0);return r.retina?(t=Ao.browserZoom(),r.tag?(m.x=n.x/z/t,m.y=n.y/z/t):(m.x=r.x/p.scaleX+n.x/z/t,m.y=r.y/p.scaleY+n.y/z/t),Ao.sca(m,o.scaleX/z/p.scaleX/t,o.scaleY/z/p.scaleY/t)):(m.x=r.x+n.x*r.scale,m.y=r.y+n.y*r.scale,Ao.sca(m,r.scale*o.scaleX,r.scale*o.scaleY)),m.alpha=g.alpha,g.parent&&(m.alpha*=g.parent.alpha),e&&g.stage&&p.update(),g},this.resize(),g.added(function e(){p.addChild(m);g.time2=setTimeout(function(){f.style.display=f.zimDisplay},50);g.resize();g.on("added",e,null,!0)}),g.on("removed",function(){g.time1&&clearTimeout(g.time1),g.time2&&clearTimeout(g.time2),p.removeChild(m),f&&(f.style.display="none")}),this.add=function(e){return f.innerHTML+=e,g},Object.defineProperty(this,"innerHTML",{get:function(){return f.innerHTML},set:function(e){f.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return f.style},set:function(e){f.style=e}}),!1!==u&&Ao.styleTransforms(this,e),this.clone=function(){var e=new Ao.Tag(t,o,n,r,i,l,a,s,c,u,this.group,d);return g.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",g.updateEvent),r.off("resize",g.resizeEvent),r=e,g.resizeEvent=r.on("resize",g.resize),g.updateEvent=r.on("update",g.resize),g.resize())}}),this.resizeEvent=r.on("resize",g.resize),this.updateEvent=r.on("update",g.resize),this.dispose=function(e,t,o){var n;return g.stage&&(n=g.stage),r.off("update",g.updateEvent),r.off("resize",g.resizeEvent),f&&f.parentNode&&f.parentNode.removeChild(f),f=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},Ao.extend(Ao.Tag,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.addTo=function(e,t,o,n){var r,i;if(r=zob(Ao.addTo,arguments,"obj, container, index, localToLocal"))return r;if(z_d("47.5"),!zot(e)){if(zot(t)){if(!WW.zdf)return void zogy("zim methods - addTo(): please provide container");t=WW.zdf.stage}return zot(n)&&(n=!0),e.parent||(n=!1),n&&(i=e.parent.localToLocal(e.x,e.y,t)),zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),n&&(e.x=i.x,e.y=i.y),e}zogy("zim methods - addTo(): please provide object")},Ao.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return e.removePhysics&&e.removePhysics(),zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zogy("zim methods - removeFrom(): please provide object")},Ao.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){var r=Po(o);if(zot(o)&&(o="s"==r?.1:100),!e.stage){var i,o=o*("s"==r?1e3:1);n&&(Bo(n),i=n*("s"==r?1e3:1));var l=Date.now(),a=0,s=setInterval(function(){5<a?clearInterval(s):(a++,e.stage&&(t(e.stage,e),clearInterval(s),clearInterval(c)))},10),c=setInterval(function(){0<i&&l-Date.now()>i&&clearInterval(c),e.stage&&(t(e.stage,e),clearInterval(c))},o);return c}t(e.stage,e)}},Ao.centerReg=function(e,t,o,n){if(r=zob(Ao.centerReg,arguments,"obj, container, index, add"))return r;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("centerReg",arguments),e.addTo(t,o);if(z_d("48"),zot(e)||!e.getBounds||!e.getBounds())return zogy("zim methods - centerReg(): please provide object with bounds set"),e;zot(n)&&(n=!0),zot(t)&&e.parent&&n&&(t=e.parent,zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e)),zot(t)||t!=e.parent||(zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e));var r=e.getBounds();return e.regX=r.x+r.width/2,e.regY=r.y+r.height/2,n?Ao.center(e,t,o):e},Ao.center=function(e,t,o,n){if(s=zob(Ao.center,arguments,"obj, container, index, add"))return s;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("center",arguments),e.addTo(t,o);if(Ao.centerCheck||(z_d("48.1"),Ao.centerCheck=!0),zot(e)||!e.getBounds)return zogy("zim.center(): please provide object with bounds"),e;if(zot(t)&&(e.parent?t=e.parent:WW.zdf&&(t=WW.zdf.stage)),zot(t)||!t.getBounds)return zogy("zim.center(): please provide container with bounds"),e;var r=e.getBounds(),i=t.getBounds();zot(n)&&(n=!0);var l=!1;if(zot(i)&&(t.setBounds(0,0),i=t.getBounds(),l=!0),n&&t.addChild&&(zot(o)||"number"==typeof o&&isNaN(o)?e.parent&&e.parent==t||t.addChild(e):t.addChildAt(e,o)),zot(r))return e.x=i.x+i.width/2,e.y=i.y+i.height/2,e;var a=!1,s=!1;0==t.scaleX&&(a=!0,t.scaleX=1e-5),0==t.scaleY&&(s=!0,t.scaleY=1e-5);o=e.localToLocal(e.regX,e.regY,t),r=Ao.boundsToGlobal(e),r=Ao.boundsToGlobal(t,r,!0);return a&&(t.scaleX=0),s&&(t.scaleY=0),e.x=i.x+i.width/2-r.width/2+(o.x-r.x),e.y=i.y+i.height/2-r.height/2+(o.y-r.y),!n&&t.getStage&&t.stage&&e.parent&&(n=t.localToLocal(e.x,e.y,e.parent),e.x=n.x,e.y=n.y),l&&t.setBounds(null),e},Ao.place=function(o,e){if(z_d("49"),!zot(o)){zot(e)&&(e="obj"),Ao.lastPlace=o,Ao.drag({obj:o,currentTarget:!0,dragCursor:"crosshair"}),o.on("mousedown",function(){Ao.lastPlace=o});var t=WW.zdf;return t&&t.on("keydown",function(e){var t;o!=Ao.lastPlace||37<=(t=e.keyCode)&&t<=40&&(e=e.shiftKey?10:1,o.mov(37==t?-1*e:39==t?e:0,38==t?-1*e:40==t?e:0),n(),o.stage&&o.stage.update())}),zogy("place "+e+" - to get new position"),o.on("click",n),o}function n(){zogy(e+".x = "+Math.round(o.x)+"; "+e+".y = "+Math.round(o.y)+";"),zogy(e+".loc("+Math.round(o.x)+", "+Math.round(o.y)+");")}},Ao.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var e=t.stage;if(zot(e))return zogy("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var n=t.parent.localToGlobal(t.x,t.y),r=new Ao.Shape(-25,-25,50,50,null,!1).addTo(e).pos({x:n.x,y:n.y,reg:!0});return r.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),r.compositeOperation="difference",r.expand(0),Ao.drag({obj:r}),zogy("place cursor to get new registration point location"),e.on("stagemouseup",function(){var e=t.globalToLocal(r.x,r.y);zogy(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zogy(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}),t}},Ao.pos=function(h,e,t,o,n,r,i,l,a,s,c){if(g=zob(Ao.pos,arguments,"obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY"))return g;if("AC"==h.type&&WW.zdf)return WW.zdf.ac("pos",arguments),h.addTo(r,i);z_d("41.5"),WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Ao.DIR?"start"==o?o="right":"end"==o&&(o="left"):"start"==o?o="left":"end"==o&&(o="right");var u=!1;"right"==o&&(u=!0);var d=!1;"bottom"==n&&(d=!0);var g=Ao.POSREG;if(null!=WW.POSREG&&(g=WW.POSREG),zot(a)&&(a=g),!zot(h)){zot(a)&&zot(s)&&(s=!1),zot(a)&&zot(c)&&(c=!1),!zot(a)&&zot(s)&&(s=a),!zot(a)&&zot(c)&&(c=a),zot(l)&&(l=!0),zot(r)||r.addChild||(r=null),h.getBounds||h.getBounds()||(s=c=!1),h.zimPos={x:e,y:t,h:o,v:n,i:i},zot(r)&&(h.parent?r=h.parent:WW.zdf&&(r=WW.zdf.stage)),!h.parent&&zot(e)&&(e=0),!h.parent&&zot(t)&&(t=0);g=!1;h.getBounds()||(h.setBounds(0,0),g=!0);var p,a=!1;if(r&&!r.getBounds()&&(r.setBounds(0,0),a=!0),!zot(r)&&r.addChild&&l&&(p=r.getBounds().clone(),m(),l=r.getBounds(),p.width==l.width&&p.height==l.height&&p.x==l.x&&p.y==l.y||(h.removeFrom(),r.setBounds(p.x,p.y,p.width,p.height),a=!0,m())),!s&&!c&&!("center"!=o&&"middle"!=o||"center"!=n&&"middle"!=n))return h.center(r),h.mov(e,t),g&&h.setBounds(null),a&&r.setBounds(null),h;if("center"==o||"middle"==o?(s?h.x=r.width/2:(p=h.y,h.center(),h.y=p),h.mov(e),o=e=null):!0===o&&(u=!0),"center"==n||"middle"==n?(c?h.y=r.height/2:(f=h.x,h.center(),h.x=f),h.mov(0,t),n=t=null):!0===n&&(d=!0),h.parent&&h.parent.getBounds){if(r=h.parent,zot(e)&&1==u&&(e=0),zot(t)&&1==d&&(t=0),zot(e)||(h.x=e),zot(t)||(h.y=t),zot(e)&&zot(t)&&!u&&!d)return g&&h.setBounds(null),a&&r.setBounds(null),h;var o=0,f=0;h.getBounds()&&(n=function(){var e=h.getBounds(),t=e.x,o=e.y,n=e.width,r=e.height,i=h._props.matrix,i=h.getMatrix(i);(t||o)&&i.appendTransform(0,0,1,1,0,0,0,-t,-o);var l=n*i.a,a=n*i.b,s=r*i.c,c=r*i.d,u=i.tx,d=i.ty,n=u,i=d;return(t=l+u)<(e=u)?e=t:n<t&&(n=t),(t=l+s+u)<e?e=t:n<t&&(n=t),(t=s+u)<e?e=t:n<t&&(n=t),(o=a+d)<(r=d)?r=o:i<o&&(i=o),(o=a+c+d)<r?r=o:i<o&&(i=o),(o=c+d)<r?r=o:i<o&&(i=o),{x:e,y:r,width:n-e,height:i-r}}(),zot(e)||(o=(u?new Ao.Point(n.x+n.width,n.y+n.height):new Ao.Point(n.x,n.y)).x-e),zot(t)||(f=(d?new Ao.Point(n.x+n.width,n.y+n.height):new Ao.Point(n.x,n.y)).y-t),n=r.getBounds(),zot(e)||(u?h.x=s?n.width+n.x-e:n.width+n.x-e-o:(h.x=s?e:e-o,h.x+=n.x)),zot(t)||(d?h.y=c?n.height+n.y-t:n.height+n.y-t-f:(h.y=c?t:t-f,h.y+=n.y)))}return g&&h.setBounds(null),a&&r.setBounds(null),h}function m(){zot(i)||"number"==typeof i&&isNaN(i)?r.contains(h)||r.addChild(h):r.addChildAt(h,i)}},Ao.loc=function(e,t,o,n,r,i,l,a){var s;return(s=zob(Ao.loc,arguments,"obj, target, y, container, index, add, localToLocal, x"))?s:"AC"==e.type&&WW.zdf?(WW.zdf.ac("loc",arguments),e.addTo(n,r)):(z_d("41.55"),zot(e)?void 0:("number"==typeof t&&(a=t,t=null),zot(t)||(zot(t.x)||(a=t.x),zot(t.y)||(o=t.y)),zot(a)&&zot(t)&&(a=e.x),zot(o)&&zot(t)&&(o=e.y),zot(i)&&(i=!0),zot(n)&&(e.parent?n=e.parent:WW.zdf&&(n=WW.zdf.stage)),i&&n&&(e.parent&&n==e.parent?zot(r)||n.addChildAt(e,r):zot(r)||isNaN(r)?n.addChild(e):n.addChildAt(e,r)),zot(l)&&(l=!0),t&&t.parent&&e.parent&&l&&(a=(t=t.parent.localToLocal(a,o,e.parent)).x,o=t.y),e.x=a,e.y=o,e))},Ao.mov=function(e,t,o){var n;return(n=zob(Ao.mov,arguments,"obj, x, y"))?n:"AC"==e.type&&WW.zdf?(WW.zdf.ac("mov",arguments),e):(z_d("41.6"),zot(e)?void 0:(zot(t)||(e.x+=t),zot(o)||(e.y+=o),e))},Ao.sca=function(e,t,o){return"AC"==e.type&&WW.zdf?(WW.zdf.ac("sca",arguments),e):(z_d("41.97"),zot(e)||zot(e.scaleX)||(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o),e)},Ao.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t,e.tag&&e.tag.style&&("Loader"!=e.type&&(e.tag.style.opacity=t),e.tag.style.display=e.tag.zimDisplay=0==t?"none":"inline-block")),e},Ao.vis=function(e,t){if(z_d("41.71"),!zot(e))return e.visible=t,e.tag&&e.tag.style&&(e.tag.style.display=e.tag.zimDisplay=t?"inline-block":"none"),e},Ao.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,"Blob"!=e.type&&"Squiggle"!=e.type||e.update(),e},Ao.dye=function(e,t){if(z_d("41.73"),!zot(e))return e.hasOwnProperty("backgroundColor")?e.backgroundColor=t:e.hasOwnProperty("color")&&(e.color=t),e},Ao.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update()):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()})),e},Ao.rot=function(e,t,o,n){var r,i;if(z_d("41.8"),!zot(e))return"AC"==e.type&&WW.zdf?WW.zdf.ac("rot",arguments):zot(t)||(!e.parent||zot(o)&&zot(n)?e.rotation=t:(zot(o)&&(o=e.x),zot(n)&&(n=e.y),r=e.parent.localToLocal(o,n,e),i=new Ao.Point(e.x,e.y),e.reg(r.x,r.y),e.rotation=t,e.x=o,e.y=n,n=e.parent.localToLocal(i.x,i.y,e),e.reg(n.x,n.y),e.x=i.x,e.y=i.y)),e},Ao.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return"AC"==e.type&&WW.zdf?WW.zdf.ac("siz",arguments):(zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o)),e},Ao.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return"AC"==e.type&&WW.zdf?WW.zdf.ac("ske",arguments):(zot(t)||(e.skewX=t),zot(o)||(e.skewY=o)),e},Ao.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){if("AC"==e.type&&WW.zdf)return WW.zdf.ac("reg",arguments),e;var r,i=e.regX,l=e.regY,a=t,s=WW.DIR||Ao.DIR||"ltr";return"default"==t&&(t=null),"string"==typeof t&&((r=e.getBounds())?("start"==t&&(t="ltr"==s?"left":"right"),"end"==t&&(t="ltr"==s?"right":"left"),"left"==t?t=r.x:"right"==t?t=r.x+r.width:"center"!=t&&"middle"!=t||(t=r.x+r.width/2)):t=null),"string"==typeof o?(r=r||e.getBounds())?"top"==o?o=r.y:"bottom"==o?o=r.y+r.height:"center"!=o&&"middle"!=o||(o=r.y+r.height/2):o=null:!zot(o)||"center"!=a&&"middle"!=a||(o=(r=r||e.getBounds())?r.y+r.height/2:null),"default"==o&&(o=null),zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent&&(l=e.localToLocal(i,l,e.parent),e.x-=l.x-e.x,e.y-=l.y-e.y),e}},Ao.top=function(e){return z_d("41.62"),zot(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},Ao.bot=function(e){return z_d("41.63"),zot(e)||!e.parent||e.parent.setChildIndex(e,0),e},Ao.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,e.parent.getChildIndex(e)+t),e},Ao.cur=function(e,t){return z_d("41.1"),zot(e)?zogy("zim methods - cur(): please provide object"):(zot(t)&&(t="pointer"),e.cursor=t),e},Ao.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zogy("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,r)),e)},Ao.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},Ao.nam=function(e,t){if(z_d("41.67"),!zot(e)&&!zot(t))return e.name=t,Ao.zimObjectIDs[t]=e},Ao.movement=function(e,t,o){z_d("47.75");var n=e.stage||WW.zdf.stage;function r(){n=e.stage,e.zimMovementStage=n,e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent),e.zimMovementEvent=n.on("stagemousemove",function(e){t(e)}),e.on("mouseout",function(){e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent)},null,!0)}return Ao.mobile()?(e.zimMovementEvent&&n.off("pressmove",e.zimMovementEvent),e.zimMovementEvent=e.on("pressmove",function(e){t(e)})):(e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMouseoverEvent=e.on("mouseover",r),o&&r()),e},Ao.noMovement=function(e){if(z_d("47.9"),!zot(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},Ao.tap=function(l,a,s,c,e,t,u,d,h,g){var o;if(o=zob(Ao.tap,arguments,"obj, call, distance, time, once, dbl, dblTime, call2, call3, call4"))return o;if(z_d("47.8"),!zot(l)&&!zot(a)&&"function"==typeof a){zot(s)&&(s=t?10:5);var p=Po(c);zot(c)&&(c="s"==p?8:8e3),zot(e)&&(e=!1),zot(t)&&(t=!1),zot(u)&&(u=g?"s"==p?.5:500:"s"==p?1:1e3);var f,m=!(l.cursor="pointer"),z=!1;return t?l.zimDblClickDownEvent=l.on("mousedown",function(e){if(f=!1,m)m=!1;else{if(m=!0,"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY).y<=0)return}var t,o,n=e.stageX/Ao.scaX,r=e.stageY/Ao.scaY,i=Date.now();z=!0,l.zimDoubleTimeout&&clearTimeout(l.zimDoubleTimeout),l.zimDoubleTimeout=setTimeout(function(){m=z=!1,l.zimDblClickUpEvent&&l.off("pressup",l.zimDblClickUpEvent),f&&g&&(Math.abs(n+r-t/Ao.scaX-o/Ao.scaY)<s?l.excludeTap||g(e):d&&d(e))},"s"==p?1e3*u:u),l.zimDblClickUpEvent=l.on("pressup",function(e){if(t=e.stageX,o=e.stageY,f=!0,m)h&&h(e);else if(z){if(Math.abs(n+r-e.stageX/Ao.scaX-e.stageY/Ao.scaY)<s&&Date.now()-i<("s"==p?1e3*c:c)){if(l.excludeTap)return;clearTimeout(l.zimDoubleTimeout),a(e)}else d&&d(e);e.remove()}})}},null,e):l.zimClickDownEvent=l.on("mousedown",function(e){if("List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY).y<=0)return}var t=e.stageX/Ao.scaX,o=e.stageY/Ao.scaY,n=Date.now();l.zimClickUpEvent=l.on("pressup",function(e){if(Math.abs(t+o-e.stageX/Ao.scaX-e.stageY/Ao.scaY)<s&&Date.now()-n<("s"==p?1e3*c:c)){if(l.excludeTap)return;a(e)}else d&&d(e);e.remove()})},null,e),l}},Ao.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&(e.cursor="default"),e.zimClickDownEvent&&e.off("mousedown",e.zimClickDownEvent),e.zimClickUpEvent&&e.off("pressup",e.zimClickUpEvent),e.zimDoubleTimeout&&clearInterval(e.zimDoubleTimeout),e},Ao.hold=function(r,i,l,a,e){if(z_d("47.87"),!zot(r)&&!zot(i)&&"function"==typeof i){zot(l)&&(l=5);var s,c=Po(a);return zot(a)&&(a="s"==c?1.5:1500),zot(e)&&(e=!1),r.cursor="pointer",r.zimClickHoldDownEvent=r.on("mousedown",function(e){if(zot((s=e.target.stage).frame)&&(s.frame=WW.zdf),!zot(s.frame)&&s.frame.mousemoveEvent||(zot(s.frame)&&(s.frame={}),s.frame.mouseX=e.stageX/Ao.scaX,s.frame.mouseY=e.stageY/Ao.scaY,s.frame.mouseholdEvent&&s.off("stagemousemove",s.frame.mouseholdEvent),s.frame.mouseholdEvent=s.on("stagemousemove",function(e){s.frame.mouseX=e.stageX/Ao.scaX,s.frame.mouseY=e.stageY/Ao.scaY})),"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY).y<=0)return}var t=e.stageX/Ao.scaX,o=e.stageY/Ao.scaY;clearInterval(r.zimHoldInterval);var n=0;r.zimHoldInterval=setInterval(function(){if(n<10)Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)>l&&clearInterval(r.zimHoldInterval);else{if(Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)<l){if(r.excludeHold)return;i(e)}clearInterval(r.zimHoldInterval)}n++},a/10*("s"==c?1e3:1)),r.zimClickHoldUpEvent=r.on("pressup",function(){clearInterval(r.zimHoldInterval),s&&s.frame.mouseholdEvent&&s.off("stagemousemove",s.frame.mouseholdEvent)},null,!0)},null,e),r}},Ao.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),e.stage&&e.stage.frame.mouseEvent&&e.stage.off("stagemousemove",e.stage.frame.mouseEvent),clearInterval(e.zimHoldTimeout),e},Ao.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},Ao.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},Ao.drag=function(a,n,i,r,e,t,l,s,c,u,d,h,g,p,f,o,m,z,y,b){if(v=zob(Ao.drag,arguments,"obj, boundary, overCursor, dragCursor, all, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch"))return v;if(z_d("31"),!zot(a)&&a.on){var v=Ao.DRAGALL;if(null!=WW.DRAGALL&&(v=WW.DRAGALL),zot(e)&&zot(m)&&(e=v),zot(e)&&zot(m)?m=!1:zot(e)?zot(m)&&(m=!1):m=e,"Tag"!=a.type&&"TextArea"!=a.type&&"Loader"!=a.type||(m=!0),n&&n.getBounds&&("Container"==a.type||"Tile"==a.type)&&1==a.mouseChildren&&!e){var w=Array.prototype.slice.call(arguments);return w[4]=!0,setTimeout(function(){a.loop(function(e){w[0]=e,Ao.drag.apply(null,w)})},y?0:50),a}a.zimDown&&a.noDrag(),a.cursor=zot(i)?"pointer":i,zot(t)&&(t=!1),zot(l)&&(l=!1),zot(s)&&(s=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(d)&&(d=.3),zot(h)&&(h=!0);var C,x,k,T,A,P,B,E,I,S,W,M,O,j,L;!0!==h&&["horizontal","vertical","auto"].indexOf(h)<0&&(h=!1),zot(g)&&(g=!1),zot(p)&&(p=!0),zot(f)&&(f=!0),zot(n)&&!zot(o)&&(n=o),zot(b)&&(b=!1),a.dragPaused=!1,u||(a.zimDragTicker=function(){}),a._draggable=!0,Ao.setSwipe(a,t),a.zimBoundary=n,a.zimLocalBounds=l;var _,D,Y,X,R,H,F,N=a.downCheck=!1;a.zimAdded=a.on("added",G,null,!0),a.zimRemoved=a.on("removed",function(){a.zimDragTicker&&Ao.Ticker.remove(a.zimDragTicker)},null,!0),a.parent&&G();var V=!(a.pointers={});return a.zimDown=a.on("mousedown",function(e){if(a.stage&&!a.dragPaused&&(!b||!V)){V=!0,F=a.stage,a.zmu||(a.zmu=F.frame.on("mouseupplus",function(e){a.downCheck&&(u||(a.downCheck=!1),U(e,!0))})),a.dragMouseX=Math.round(e.stageX/Ao.scaX)+F.x,a.dragMouseY=Math.round(e.stageY/Ao.scaY)+F.y;var t="id"+Math.abs(e.pointerID+1);if(a.pointers[t]=!0,H=m?e.currentTarget:e.target,!a.zimBoundary||H.getBounds()){if(a.downCheck=!0,a.stage.mouseMoveOutside=!0,Ao.Ticker.has(a.zimDragTicker)||Ao.Ticker.add(a.zimDragTicker,a.stage),p&&a.zimTweens)for(var o in a.zimTweens){var n=a.zimTweens[o];!n.zimObj||null==n.zimObj.x&&null==n.zimObj.y||a.stopAnimate(o)}H.parent&&(s&&(t=H.parent.numChildren-1,"Keyboard"==H.parent.getChildAt(t).type&&t--,H.parent.setChildIndex(H,t),H.ZIMoutlineShape&&H.outline()),R=H.parent==a.stage?new Ao.Point(e.stageX/Ao.scaX,e.stageY/Ao.scaY):H.parent.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY),g&&(H.x=R.x,H.y=R.y),_=R.x-H.x,D=R.y-H.y,a.zimBoundary&&(l?(Y=Ao.boundsToGlobal(H.parent,a.zimBoundary),c&&(X=a.zimBoundary)):(Y=a.zimBoundary,c&&(X=Ao.boundsToGlobal(H.parent,a.zimBoundary,!0)))),a.cursor=zot(r)?"pointer":r,u&&(a.slideStartX=a.x,a.slideStartY=a.y,L=a.zimDragMoving,T=0,A=[R.x],P=[R.y],j=O=-1e4,a.zimDragMoving=!0),"Pen"==a.type&&(a.zimDragCheck=!0,N=!1))}else zogy("zim.drag() - drag object needs bounds set")}},!0),a.zimMove=a.on("pressmove",function(e){var t;b&&!a.pointers["id"+Math.abs(e.pointerID+1)]||a.downCheck&&!a.dragPaused&&(t=(z?e.rawX:e.stageX)/Ao.scaX+F.x,e=(z?e.rawY:e.stageY)/Ao.scaY+F.y,a.dragMouseX=Math.round(t),a.dragMouseY=Math.round(e),q(H,t,e),H.ZIMoutlineShape&&H.outline(),"Pen"==a.type&&!N&&a.drawing?N=!0:"Tag"!=a.type&&"TextArea"!=a.type&&"Loader"!=a.type||a.resize())},!0),a.zimPosition=q,a.zimUp=a.on("pressup",function(e){U(e)},!0),a}function G(){var e,t,o;a.off("added",a.zimAdded),(n=a.zimBoundary)&&n.getBounds&&"Blob"!=n.type&&(a.zimLocalBounds=!1,n="Stage"!=n.type&&"StageGL"!=n.type?n.boundsToGlobal():new Ao.Boundary(0,0,n.width,n.height),c||(e=a.boundsToGlobal(),R=a.localToGlobal(a.regX,a.regY),t=new Ao.Point(R.x-e.x,R.y-e.y),o=a.borderWidth||0,n.x+=t.x+o/2,n.y+=t.y+o/2,n.width-=e.width+o,n.height-=e.height+o),a.zimBoundary=n),D=_=0,a.zimBoundary&&"Blob"!=a.zimBoundary.type&&(l?(Y=Ao.boundsToGlobal(a.parent,a.zimBoundary),c&&(X=a.zimBoundary)):(Y=a.zimBoundary,c&&(X=Ao.boundsToGlobal(a.parent,a.zimBoundary,!0)))),Y&&f&&(R=a.parent.localToGlobal(a.x,a.y),q(a,R.x,R.y)),u&&setTimeout(function(){C=new Ao.Damp(a.x,d),x=new Ao.Damp(a.y,d),a.zimDragImmediate=function(e,t){S=t,B=W=E=M=0,zot(I=e)||C.immediate(e),zot(t)||x.immediate(t)},k=3,T=0,A=[],P=[],B=a.x,E=a.y,I=a.x,S=a.y,W=a.x,M=a.y,j=O=-1e4,a.zimDragMoving=!0,a.zimDragTicker=function(){var e,t,o;zot(a.slideStartX)||(H=H||a,a.downCheck?(t=H.parent?H.parent.globalToLocal(a.dragMouseX,a.dragMouseY):new Ao.Point(0,0),T++,A.push(t.x),P.push(t.y),M=k<=T?(W=A.shift(),P.shift()):(W=A[0],P[0])):a.zimDragMoving&&(e=I+B-W,t=S+E-M,Y&&(e=(o=Q(H,e,t)).x,t=o.y),h?(H.x=C.convert(e),H.y=x.convert(t),Z(H,H.x,H.y,e,t)):(o=Q(H,C.convert(e),x.convert(t)),H.x=o.x,H.y=o.y,Z(H,H.x,H.y,H.x,H.y))))}},50),zot(a.zimMaskDynamic)||a.zimMaskApply()}function q(e,t,o){var n,r;zot(e)&&(e=H||a),e.parent&&((zot(t)||zot(o))&&(n=e.parent.localToGlobal(e.x,e.y),_=D=0,a.zimBoundary&&(l?(Y=Ao.boundsToGlobal(e.parent,a.zimBoundary),c&&(X=e.zimBoundary)):(Y=a.zimBoundary,c&&(X=Ao.boundsToGlobal(e.parent,a.zimBoundary,!0)))),t=n.x,o=n.y,u&&(I=e.x,S=e.y,H=e,C&&C.immediate(I),x&&x.immediate(S))),o=F&&F.type?e.parent.globalToLocal(t,o):e.parent.globalToLocal(t*Ao.scaX,o*Ao.scaY),u&&h?"vertical"==h?(r=Q(e,o.x-_,o.y-D),e.x=r.x,e.y=o.y-D):"horizontal"==h?(r=Q(e,o.x-_,o.y-D),e.x=o.x-_,e.y=r.y):(e.x=o.x-_,e.y=o.y-D):(r=Q(e,o.x-_,o.y-D),e.x=r.x,e.y=r.y),!u||L||e.slideStartX==e.x&&e.slideStartY==e.y||(L=!0))}function U(e,t){if(!b||a.pointers["id"+Math.abs(e.pointerID+1)]){V=!1;var o="id"+Math.abs(e.pointerID+1);if(delete a.pointers[o],a.downCheck&&!a.dragPaused){if(a.cursor=zot(i)?"pointer":i,u)H.dispatchEvent("slidestart"),R=H.parent?(o=z?e.rawX:e.stageX,e=z?e.rawY:e.stageY,H.parent.globalToLocal(o/Ao.scaX,e/Ao.scaY)):new Ao.Point(0,0),a.downCheck=!1,B=R.x,E=R.y,I=H.x,S=H.y,t&&(W=B=0,M=E=0),C.immediate(H.x),x.immediate(H.y);else{a.downCheck=!1;var n,r=0;for(n in a.pointers)r++;0==r&&Ao.Ticker.remove(a.zimDragTicker),"Pen"==a.type&&(a.zimDragCheck=!1,N&&a.drawing&&a.stopCheck())}a.stage&&a.stage.update()}}}function Q(e,t,o){if(!e.parent)return{x:t,y:o};if(Y)if(c){var n=e.getBounds().width,r=e.getBounds().height,i=e.getBounds().x,l=e.getBounds().y;n<X.width?t=X.x+(X.width-n)/2+(e.regX-i):(t-(e.regX-i)>X.x&&(t=X.x+(e.regX-i)),t-(e.regX-i)+n<X.x+X.width&&(t=X.x+X.width+(e.regX-i)-n)),e.height<X.height?o=X.y+(X.height-r)/2+(e.regY-l):(o-(e.regY-l)>X.y&&(o=X.y+(e.regY-l)),o-(e.regY-l)+r<X.y+X.height&&(o=X.y+X.height+(e.regY-l)-r))}else{if("Blob"==Y.type)return Y.shape.hitTestPoint(t,o)?{x:t,y:o}:{x:a.x,y:a.y};R=e.parent.localToGlobal(t,o),t=Math.max(Y.x,Math.min(Y.x+Y.width,R.x)),o=Math.max(Y.y,Math.min(Y.y+Y.height,R.y)),t=(R=e.parent.globalToLocal(t,o)).x,o=R.y}return{x:t,y:o}}function Z(e,t,o,n,r){Math.abs(e.x-O)<.1&&Math.abs(e.y-j)<.1?(a.zimDragMoving=!1,e.x=n,e.y=r,e.slideStartX=null,e.slideStartY=null,L&&(e.dispatchEvent("slidestop"),Ao.Ticker.remove(a.zimDragTicker)),"Pen"==a.type&&(a.zimDragCheck=!1,N&&a.drawing&&a.stopCheck())):(O=t,j=o)}},Ao.noDrag=function(e,t){if(z_d("32"),!zot(e)&&e.on){if(zot(t)&&(t=!0),t&&e.numChildren&&1<e.numChildren)for(var o=0;o<e.numChildren;o++)n(e.getChildAt(o));return n(e),e}function n(e){e.cursor=null,e._draggable=!1,Ao.setSwipe(e,!0),e.off("added",e.zimAdded),e.off("removed",e.zimRemoved),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),e.zmu&&(e.stage?e.stage.frame:WW.zdf).off("mouseupplus",e.zmu),Ao.Ticker&&(e.zimDragSlide&&Ao.Ticker.remove(e.zimDragSlide),e.zimDragTicker&&Ao.Ticker.remove(e.zimDragTicker)),e.zimDragMoving=e.zimAdded=e.zimRemoved=e.zimDown=e.zimMove=e.zimUp=e.zimBoundary=e.zimDragSlide=null,e.slideStartX=e.slideStartY=e.zimDragImmediate=null,e.dragMouseX=e.zimPosition=e.dragMouseY=e.zimDown=e.zimUp=null,e.zimDragTicker=e.zimDragSlide=null}},Ao.dragBoundary=function(e,t){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},Ao.dragRect=Ao.dragBoundary,Ao.mouse=function(e){return z_d("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e},Ao.noMouse=function(e){return z_d("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e},Ao.wire=function(e,t,o,n,r,i,l,a){if(s=zob(Ao.wire,arguments,"source, target, prop, twoWay, setSource, filter, call, input"))return s;if(z_d("33.2"),zot(Ao.Ticker)&&zon)return zogy("wire() - requires ZIM Frame"),e;if(zot(t)&&zon)return zogy("wire() - requires a target"),e;var s=Ao.DEFAULTWIRE;return null!=WW.DEFAULTWIRE&&(s=WW.DEFAULTWIRE),zot(a)&&(a=s&&"currentValue"!=s&&"selectedIndex"!=s||s&&Object.prototype.hasOwnProperty.call(e,s)?s:Object.prototype.hasOwnProperty.call(e,"currentValue")?"currentValue":Object.prototype.hasOwnProperty.call(e,"selectedIndex")?"selectedIndex":o),zot(o)&&(o=a),e.addChild&&(e.zimWire=!0),t.addChild&&(t.zimWired=!0),Ao.Ticker.addWire(e,[t,o,n,r,i,l,a]),e},Ao.noWire=function(e,t,o,n){var r;return(r=zob(Ao.noWire,arguments,"source, target, prop, input"))?r:(z_d("33.25"),zot(Ao.Ticker)&&zon?zogy("noWire() - requires ZIM Frame"):Ao.Ticker.removeWire(e,t,o,n),e)},Ao.wired=function(e,t,o,n,r,i,l,a){var s;return(s=zob(Ao.wired,arguments,"target, source, prop, twoWay, setSource, filter, call, input"))?s:(z_d("33.3"),zot(Ao.Ticker)&&zon?zogy("wired() - requires ZIM Frame"):Ao.wire(t,e,o,n,r,i,l,a),e)},Ao.noWired=function(e,t,o,n){var r;return(r=zob(Ao.noWire,arguments,"target, source, prop, input"))?r:(z_d("33.35"),zot(Ao.Ticker)&&zon?zogy("noWired() - requires ZIM Frame"):Ao.Ticker.removeWire(t,e,o,n),e)},Ao.bind=function(e,t,o,n,r,i){var l;return(l=zob(Ao.bind,arguments,"obj, id, props, extra, filter, bindObj"))?l:(z_d("33.17"),c?zot(t)?zon&&zogy("bind() - needs a unique id"):(i||c).add(t,e,o,n,r):zon&&zogy("bind() - needs a Bind() object created first"),e)},Ao.noBind=function(e,t,o,n,r){var i;return(i=zob(Ao.noBind,arguments,"obj, props, removeConnectionData, call, bindObj"))?i:(z_d("33.18"),c&&(r||c).remove(e,t,o,n),e)},Ao.transform=function(u,t,e,o,n,r,i,l,a,d,s,c,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){var E;if(E=zob(Ao.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame"))return E;if("AC"==u.type&&WW.zdf)return WW.zdf.ac("transform",arguments),u;if(z_d("33.5"),zot(u)||!u.getBounds)return zogy("zim methods - transform(): please provide object with bounds set"),u;if(!u.getBounds())return zogy("zim methods - transform(): please setBounds() on object"),u;if(!u.parent)return zogy("zim methods - transform(): object should be on stage first"),u;zot(t)&&(t=!0),zot(e)&&(e=!0),zot(o)&&(o=!0),0==u.width&&(e=!1),0==u.height&&(o=!1),zot(n)&&(n=!0),zot(r)&&(r=!0);var I=Ao.mobile();zot(i)&&(i=!0),zot(l)&&(l=!0),zot(a)&&(a=!0),zot(d)&&(d=!!I),zot(s)&&(s=!!I),zot(c)&&(c=!0),zot(h)&&(h=!0),zot(g)&&(g=!0),zot(p)&&(p="brown"),zot(f)&&(f=1),zot(k)&&(k=null),zot(T)&&(T=null),k<0||T<0?k=T=null:null!=k&&null==T&&(T=1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(B)&&(B=WW.zdf),zot(z)&&(z=!I),zot(y)&&(y=I?20:10),zot(b)&&(b=16),zot(v)&&(v=10),zot(w)&&(w=5),zot(C)&&(C=!0),zot(x)&&(x=!1),"Tag"!=u.type&&"TextArea"!=u.type&&"Loader"!=u.type||(x=!0),u.mouseChildren=!1;var S=u.getConcatenatedMatrix().decompose(),W=u.stage||B.stage;zot(B.eventRemove)&&(W.enableMouseOver(),B.ctrlKey=!1,B.shiftKey=!1,WW.addEventListener("keydown",function(e){B.altKey=e.altKey,B.ctrlKey=e.ctrlKey}),WW.addEventListener("keyup",function(e){B.altKey=e.altKey,B.ctrlKey=e.ctrlKey}));var M=u.getBounds(),O=new Ao.Shape({style:!1}),j=new Ao.Shape({style:!1}),L=new Ao.Shape({style:!1});j.mouseEnabled=!1,L.controlType="reg";var _,D,Y,X,R,H,F,N,V,G=u.parent,q=O.graphics,U=j.graphics,Q=L.graphics,Z=new Ao.Container({style:!1});Z.type="TransformControls";var K,J,$,ee,te,oe,ne,re,ie=new Ao.Container({style:!1}),le=new Ao.Container({style:!1}),ae=new Ao.Container({style:!1}),se=new Ao.Container({style:!1});function ce(e,t){e==t&&new Ao.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(0,-13.5),new Ao.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(13.5).rot(90),e==t&&new Ao.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(0,13.5).rot(180),new Ao.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(-13.5).rot(-90),e==t&&new Ao.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(0,-13),new Ao.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(13).rot(90),e==t&&new Ao.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(0,13).rot(180),new Ao.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(-13).rot(-90),C&&e.cache(-20,-20,40,40)}function ue(){var e=u;for($=J=1,te=ee=K=0;e.parent;)K+=e.rotation,J*=e.scaleX,$*=e.scaleY,ee+=e.skewX,te+=e.skewY,e=e.parent}zot(u.zimMaskDynamic)||u.zimMaskApply(),z&&(oe=new Ao.Container({style:!1}),ne=new Ao.Container({style:!1}),ce(oe,oe),ce(ne,oe),re={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}),ue();for(var de,he=K,ge=["nw-resize","ne-resize","nw-resize","ne-resize"],pe=[2,3,0,1],fe=0;fe<4;fe++)c?((de=new Ao.Rectangle(y,y,"#e472c4","#333",2,null,null,null,null,!1)).centerReg(ie),C&&de.cache(-1,-1,y+2,y+2)):((de=new Ao.Rectangle(y,y,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1)).centerReg(ie),de.expand(0)),de.rotation=K,F=z?"none":ge[fe],de.drag({overCursor:F,dragCursor:F,onTop:!1}),de.controlType="corner",de.cu=ge[fe];for(fe=0;fe<pe.length;fe++)ie.getChildAt(fe).op=ie.getChildAt(pe[fe]);var me=["n-resize","e-resize","n-resize","e-resize"],pe=[1,1,0,0];for(fe=0;fe<4;fe++){var ze=fe%2==0?u.width/2:y,ye=fe%2==0?y:u.height/2;d?((de=new Ao.Rectangle(y,y,"#AAA","#333",2,null,null,null,null,!1)).centerReg(fe%2==0?ae:le),C&&de.cache(-1,-1,y+2,y+2)):((de=new Ao.Rectangle(ze,ye,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).centerReg(fe%2==0?ae:le),de.expand(0)),de.rotation=K,F=z?"none":me[fe],de.drag({overCursor:F,dragCursor:F,onTop:!1}),de.controlType="side",de.cu=me[fe]}for(fe=0;fe<pe.length;fe++){var be=fe%2==0?ae:le;be.getChildAt(Math.floor(fe/2)).op=be.getChildAt(pe[fe])}var ve=["ne-resize","nw-resize","ne-resize","nw-resize"];for(fe=0;fe<4;fe++)s?((de=new Ao.Circle(y,"#e472c4",null,null,null,null,null,null,!1)).addTo(se),C&&de.cache(-y,-y,2*y,2*y)):((de=new Ao.Circle(y,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).addTo(se),de.expand(0)),F=z?"none":ve[fe],de.drag({overCursor:F,dragCursor:F,onTop:!1}),de.controlType="rotate",de.cu=ve[fe];var we=1.8;function Ce(){var e=y*we*Ao.sign(J),t=y*we*Ao.sign($);se.getChildAt(0).reg(e,t),se.getChildAt(1).reg(-e,t),se.getChildAt(2).reg(-e,-t),se.getChildAt(3).reg(e,-t),W.update()}function xe(){q.c(),U.c(),Q.c(),_=u.localToGlobal(M.x,M.y),D=u.localToGlobal(M.x+M.width,M.y),Y=u.localToGlobal(M.x+M.width,M.y+M.height),X=u.localToGlobal(M.x,M.y+M.height);var e=u.localToGlobal(M.x+M.width/2,M.y),t=u.localToGlobal(M.x+M.width,M.y+M.height/2),o=u.localToGlobal(M.x+M.width/2,M.y+M.height),n=u.localToGlobal(M.x,M.y+M.height/2);R=u.localToGlobal(u.regX,u.regY),H=u.localToGlobal(M.x+M.width/2,M.y+M.height/2),V=[_,D,Y,X],N=[e,t,o,n],g&&(q.s(p),m&&q.sd([10,5],0),q.ss(f).mt(_.x,_.y).lt(D.x,D.y).lt(Y.x,Y.y).lt(X.x,X.y).lt(_.x,_.y).cp()),zot(k)||(U.s(k),A&&U.sd([10,5],0),U.ss(T).mt(_.x,_.y).lt(D.x,D.y).lt(Y.x,Y.y).lt(X.x,X.y).lt(_.x,_.y).cp()),O.setBounds(_.x,_.y,D.x-_.x,X.y-_.y),h&&(Q.s("#eee").ss(f).f("rgba(0,0,0,.1)").dc(0,0,b),Q.s("#222").ss(f).dc(0,0,.3*b)),ue();for(var r=Math.min(50,Math.abs(ee))*Ao.sign(ee),i=Math.min(50,Math.abs(te))*Ao.sign(te),l=K*Ao.sign(J*$)*Ao.sign(u.scaleX*u.scaleY),a=0;a<V.length;a++){var s=V[a];ie.getChildAt(a).loc(s.x,s.y).ske(r,i).rot(l),se.getChildAt(a).loc(s.x,s.y).rot(l);var c=N[a],s=a%2==0?ae:le;s.getChildAt(Math.floor(a/2)).loc(c.x,c.y).ske(r,i).rot(l),d||s.getChildAt(Math.floor(a/2)).sca(a%2==0?J/2:1,a%2==0?1:$/2)}L.x=R.x,L.y=R.y}se.alpha=.5,Ce(),xe();var ke=new Ao.Shape(1e3,1e3,null,null,null,!1);function Te(){ke.x=0,ke.y=0,ke.graphics.c().f("rgba(0,0,0,.01)").mt(_.x,_.y).lt(D.x,D.y).lt(Y.x,Y.y).lt(X.x,X.y).lt(_.x,_.y).cp(),ke.reg(R.x,R.y),ke.x=R.x,ke.y=R.y}Te(),Z.on("dblclick",function(e){B.ctrlKey&&u.transformControls.visible&&(u.scaleX=1,u.scaleY=1,u.rotation=0,xe(),Te(),W.update()),tt(e,!0)});var Ae=Z.on("mousedown",Be),Pe=u.on("mousedown",Be);function Be(e){e=W.getObjectUnderPoint(e.stageX,e.stageY,1);I||e&&(u.contains&&u.contains(e)||!u.contains&&u==e)?u.transformControls.visible||(z?(at=!1,ke.mouseEnabled=!1):B.canvas.style.cursor="move",u.transformControls.show(),u.dispatchEvent("transformshow")):!u.transformControls.visible||e&&Z.contains(e)||(u.transformControls.hide(),u.dispatchEvent("transformhide"))}var Ee,Ie,Se,We,Me,Oe,je,Le,_e,De,Ye,Xe,Re,He=W.on("stagemousedown",function(e){var t=W.getObjectUnderPoint(e.stageX,e.stageY,1),e=t&&t.parent&&t.parent.layer&&t.parent.layer==u;!u.transformControls.visible||t&&(Z.contains(t)||e)||(u.dispatchEvent("transformhide"),u.transformControls.hide())});i||(Z.off("mousedown",Ae),u.off("mousedown",Pe),W.off("stagemousedown",He));var Fe,Ne,Ve,Ge,qe,Ue,Qe=!1,Ze=!1,Ke=u.cursor,Je=new Ao.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);function $e(e){var t,o,n;Ze=!0,a&&it(),Fe&&W.off("stagemousemove",Fe),Ee=e.target.x,Ie=e.target.y,De=u.x,Ye=u.y,Se=u.scaleX,We=u.scaleY,"rotate"==e.target.controlType&&(Qe=!0,Me=u.rotation,t=e.stageX/Ao.scaX,o=e.stageY/Ao.scaY,n=G.localToGlobal(De,Ye),Xe=n.x,Re=n.y,Oe=180*Math.atan2(o-Re,t-Xe)/Math.PI),Le=B.ctrlKey||"rotate"==e.target.controlType?(je=Math.abs(Ee-u.x),Math.abs(Ie-u.y)):(je=Math.abs(Ee-e.target.op.x),Math.abs(Ie-e.target.op.y)),"rotate"!=e.target.controlType&&(_e=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,u.parent)),Je.stage?W.setChildIndex(Je,W.getChildIndex(Z)):Je.addTo(W,W.getChildIndex(Z)+1),Je.x=e.stageX/Ao.scaX,Je.y=e.stageY/Ao.scaY,Je.cursor=z?"none":e.target.cu,z&&(u.getConcatenatedMatrix().decompose(S),S.rotation||(S.rotation=0),ne.rotation=S.rotation*Ao.sign(J*$)*Ao.sign(u.scaleX*u.scaleY)+re[e.target.cu]+he,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),Ge.addTo(W,1).pos({x:e.stageX/Ao.scaX,y:e.stageY/Ao.scaY,reg:!0})),ke.visible=!1,u.cursor="none"}function et(e){var t=1;B.ctrlKey&&"corner"==e.target.controlType?t=Le<je?(e.target.x-De)/(Ee-De):(e.target.y-Ye)/(Ie-Ye):Le<je?Ee-e.target.op.x&&(t=(e.target.x-e.target.op.x)/(Ee-e.target.op.x)):Ie-e.target.op.y&&(t=(e.target.y-e.target.op.y)/(Ie-e.target.op.y)),"corner"==e.target.controlType?(u.scaleX=t*Se,u.scaleY=t*We):(u.scaleX="e-resize"==e.target.cu?t*Se:Se,u.scaleY="n-resize"==e.target.cu?t*We:We),xe(),Je.x=e.stageX/Ao.scaX,Je.y=e.stageY/Ao.scaY,z&&(Ge.x=e.stageX/Ao.scaX,Ge.y=e.stageY/Ao.scaY),B.ctrlKey&&"side"!=e.target.controlType||(t=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,u.parent),u.x-=(t.x-_e.x)*Ao.sign(J)*Ao.sign(u.scaleX),u.y-=(t.y-_e.y)*Ao.sign($)*Ao.sign(u.scaleY)),xe(),u.transformControls.events&&ot(e,e.target.controlType)}function tt(e,t){Ce();var o=e?e.target.controlType:"move";t&&(o="reset"),z&&Ge.removeFrom(W),ot(e,o,!0),W.update()}function ot(e,t,o,n){null==n&&(n=!0);var r=!1;Ve=null,"move"==t?(u.x==st.x&&u.y==st.y||((Ve=new createjs.Event("transformed")).transformType="move"),n&&(r=ke.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))):"corner"==t?(u.scaleX==st.scaleX&&u.scaleY==st.scaleY||((Ve=new createjs.Event("transformed")).transformType="size"),n&&(r=ie.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))):"side"==t?(u.scaleX==st.scaleX&&u.scaleY==st.scaleY||((Ve=new createjs.Event("transformed")).transformType="stretch"),n&&(r=le.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY)||ae.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))):"rotate"==t?(u.rotation!=st.rotation&&((Ve=new createjs.Event("transformed")).transformType="rotate"),n&&(r=se.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))):"reg"==t?u.regX==st.regX&&u.regY==st.regY||((Ve=new createjs.Event("transformed")).transformType="reg"):(Ve=new createjs.Event("transformed")).transformType="reset"==t?"reset":"unknown",n&&!r&&(Je.removeFrom(W),B.canvas.style.cursor="default",u.cursor=Ke),Ve&&(Ve.pressup=o,"Tag"!=u.type&&"TextArea"!=u.type&&"Loader"!=u.type||u.resize(),u.dispatchEvent(Ve))}function nt(e){Ze||(Je.stage?W.setChildIndex(Je,W.getChildIndex(Z)):Je.addTo(W,W.getChildIndex(Z)+1),Ge.addTo(W,1),Je.x=e.stageX/Ao.scaX,Je.y=e.stageY/Ao.scaY,Ge.x=e.stageX/Ao.scaX,Ge.y=e.stageY/Ao.scaY,u.getConcatenatedMatrix().decompose(S),S.rotation||(S.rotation=0),ne.rotation=S.rotation*Ao.sign(J*$)*Ao.sign(u.scaleX*u.scaleY)+re[e.target.cu]+he,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),W.update(),Fe&&W.off("stagemousemove",Fe),Fe=W.on("stagemousemove",function(e){Je.x=e.stageX/Ao.scaX,Je.y=e.stageY/Ao.scaY,W.update()}))}function rt(){W.off("stagemousemove",Fe),Ze||(u.cursor=Ke,Je.removeFrom(W),Ge.removeFrom(W),W.update())}function it(){var e;a&&(e=G.numChildren-1,"Keyboard"==G.getChildAt(e).type&&e--,G.setChildIndex(u,e),lt())}function lt(){if(G==W)Z.removeFrom(),W.addChildAt(Z,W.getChildIndex(u)+1);else{for(var e=G;e.parent&&e.parent!=W;)e=e.parent;u.stage&&(Z.parent==W&&W.removeChild(Z),W.addChildAt(Z,W.getChildIndex(e)+1))}}z&&(Je.mouseEnabled=!1,Je.mouseChildren=!1,Je.addChild(ne),ie.on("mouseover",nt),ie.on("mouseout",rt),le.on("mouseover",nt),le.on("mouseout",rt),ae.on("mouseover",nt),ae.on("mouseout",rt),se.on("mouseover",nt),se.on("mouseout",rt),(Ge=new Ao.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20)).cursor="none"),ie.on("mousedown",$e),ie.on("pressmove",et),ie.on("pressup",tt),le.on("mousedown",$e),le.on("pressmove",et),le.on("pressup",tt),ae.on("mousedown",$e),ae.on("pressmove",et),ae.on("pressup",tt),se.on("mousedown",$e),se.on("pressmove",function(e){var t=180*Math.atan2(e.stageY/Ao.scaY-Re,e.stageX/Ao.scaX-Xe)/Math.PI;B.shiftKey?u.rot(45*Math.round((Me+(t-Oe)*Ao.sign(J)*Ao.sign(u.scaleX))/45)):u.rot(Me+(t-Oe)*Ao.sign(J)*Ao.sign(u.scaleX));xe(),Je.x=e.stageX/Ao.scaX,Je.y=e.stageY/Ao.scaY,z&&(u.getConcatenatedMatrix().decompose(S),S.rotation||(S.rotation=0),ne.rotation=S.rotation*Ao.sign(J*$)*Ao.sign(u.scaleX*u.scaleY)+re[e.target.cu]+he,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),Ge.x=e.stageX/Ao.scaX,Ge.y=e.stageY/Ao.scaY);xe(),u.transformControls.events&&(t=e.target.controlType,ot(e,t,null,!1))}),se.on("pressup",tt),L.drag(),L.on("mousedown",it),L.on("pressup",function(e){if(!B.ctrlKey){for(var t=0;t<V.length;t++)if(Ao.dist(L.x,L.y,V[t].x,V[t].y)<v){L.x=V[t].x,L.y=V[t].y;break}Ao.dist(L.x,L.y,H.x,H.y)<v&&(L.x=H.x,L.y=H.y)}var o=u.rotation;qe=u.globalToLocal(L.x,L.y),Ue=G==W?new Ao.Point(L.x,L.y):G.globalToLocal(L.x,L.y),u.reg(qe.x,qe.y),u.rotation=0,u.x=u.x+Ue.x-u.x,u.y=u.y+Ue.y-u.y,u.rotation=o,xe(),Te(),tt(e),W.update()});var at=!0;F=z?"none":"move",ke.drag({overCursor:F,dragCursor:F,onTop:!1}),ke.controlType="move",z&&(ke.on("mouseover",function(e){if(Ze||!z||!at)return;oe.addTo(Z).pos({x:e.stageX/Ao.scaX,y:e.stageY/Ao.scaY,reg:!0}),W.update(),Ne&&W.off("stagemousemove",Ne);Ne=W.on("stagemousemove",function(e){oe.x=e.stageX/Ao.scaX,oe.y=e.stageY/Ao.scaY,W.update()})}),ke.on("mouseout",function(){if(W.off("stagemousemove",Ne),Ze)return;oe.removeFrom(Z),W.update()})),ke.on("mousedown",it),ke.on("pressmove",function(e){var t;u.transformControls.visible&&(t=G==W?new Ao.Point(ke.x,ke.y):G.globalToLocal(ke.x,ke.y),u.x=t.x,u.y=t.y,xe(),u.transformControls.events&&ot(e,"move"))}),ke.on("pressup",function(e){u.transformControls.visible&&tt(e)});var st,ct=W.on("stagemouseup",function(){Ze=!1,ke.mouseEnabled=!0,at||(Ve=new createjs.Event("transformed"),u.x!=st.x||u.y!=st.y?Ve.transformType="move":Ve.transformType="select",Ve.pressup=!0,u.dispatchEvent(Ve)),at=!0,ke.visible=!0,Qe&&!B.ctrlKey&&1<w&&(u.rotation=Math.round(u.rotation/w)*w,xe()),Te(),ke.mouseEnabled=!0,Qe=!1,W.update()});function ut(){st={x:u.x,y:u.y,rotation:u.rotation,regX:u.regX,regY:u.regY,scaleX:u.scaleX,scaleY:u.scaleY}}ut();var dt,ht=u.on("mousedown",ut);Z.on("mousedown",ut),Z.addChild(O),t&&Z.addChild(ke),n&&Z.addChild(ie),e&&Z.addChild(le),o&&Z.addChild(ae),r&&Z.addChild(se),Z.addChild(L),t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),dt=u.on("pressmove",function(e){xe(),Te(),Ce(),u.transformControls.events&&ot(e,"move")}));var gt=i;return u.transformControls={visible:l,events:x,ghost:!zot(k),ghostEnabled:!zot(k),show:function(){return a&&it(),lt(),u.toggled=!0,u.transformControls.visible=!0,j.parent&&j.removeFrom(),W.update(),u},hide:function(){var e;return u.transformControls.ghost&&(e=W.getChildIndex(Z)),W.removeChild(Z),u.transformControls.ghost&&u.transformControls.ghostEnabled&&W.addChildAt(j,e),u.toggled=!1,u.transformControls.visible=!1,z&&(Fe&&W.off("stagemousemove",Fe),Ne&&W.off("stagemousemove",Ne),Ze=!1,Je.removeFrom(W),Ge.removeFrom(W)),t||(u.cursor=Ke),W.update(),u},remove:function(e){e||u.transformControls.hide(),i=!1,t&&(u.noDrag(),u.off("pressmove",dt))},add:function(e){e||u.transformControls.show(),i=gt,t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),dt=u.on("pressmove",dt))},allowToggleOn:function(){i=gt=!0,Ae=Z.on("mousedown",Ae),Pe=u.on("mousedown",Pe),He=W.on("stagemousedown",He)},allowToggleOff:function(){i=gt=!1,Z.off("mousedown",Ae),u.off("mousedown",Pe),W.off("stagemousedown",He)},disable:function(){Z.mouseChildren=!1,Z.mouseEnabled=!1,t&&(u.noDrag(),u.off("pressmove",dt))},enable:function(){Z.mouseChildren=!0,Z.mouseEnabled=!0,t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),dt=u.on("pressmove",dt))},recordData:function(e){var t={type:u.type,index:G.getChildIndex(u),x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY,rotation:u.rotation,skewX:u.skewX,skewY:u.skewY,regX:u.regX,regY:u.regY,controls:u.transformControls.visible};return e?JSON.stringify(t):t},setData:function(e,t){if(!zot(e)){t&&(e=JSON.parse(e)),delete e.controls;var o,n=e.index;for(o in zot(n)&&(n=0),delete e.index,e)u[o]=e[o];return setTimeout(function(){xe(),Te(),Ce(),G.setChildIndex(u,n),u.transformControls.visible&&"Layer"!=u.type?u.transformControls.show():u.transformControls.hide(),!u.transformControls.ghost||u.transformControls.ghostEnabled||u.transformControls.visible||W.addChild(j)},90),u}},hideGhost:function(){u.transformControls.ghost=!1,j.removeFrom()},showGhost:function(){if(u.transformControls.ghost=!0,u.transformControls.ghostEnabled&&!u.transformControls.visible){for(var e=G;e.parent&&e.parent!=W;)e=e.parent;j.stage?W.setChildIndex(j,W.getChildIndex(e)+1):W.addChildAt(j,W.getChildIndex(e)+1)}},addGhost:function(){0<T?(u.transformControls.ghostEnabled=!0,u.transformControls.showGhost()):zon&&zogy("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){u.transformControls.ghostEnabled=!1,u.transformControls.hideGhost()},resize:function(e){return G=u.parent,xe(),Te(),Ce(),l&&u.transformControls.show(),e&&((e=new createjs.Event("transformed")).pressup=!0,e.transformType="resize",u.dispatchEvent(e)),u},dispose:function(){u.transformControls.hide(),i=!1,t&&(u.noDrag(),u.off("pressmove",dt)),u.transformControls.hideGhost(),ke.removeAllEventListeners(),se.removeAllEventListeners(),L.removeAllEventListeners(),le.removeAllEventListeners(),ae.removeAllEventListeners(),ie.removeAllEventListeners(),Z.removeAllEventListeners(),Pe&&u.off("mousedown",Pe),Ae&&u.off("mousedown",Ae),He&&W.off("stagemousedown",He),Fe&&W.off("stagemousemove",Fe),Ne&&W.off("stagemousemove",Ne),ct&&W.off("stagemouseup",ct),ht&&u.off("mousedown",ht),dt&&u.off("pressmove",dt),Z=Je=Ge=null,u.transformControls=null},controls:Z,scaleControls:ie,stretchXControls:le,stretchYControls:ae,rotateControls:se},u.toggle=function(e){return!0!==e&&(!1===e||u.transformControls.visible)?u.transformControls.hide():u.transformControls.show(),u},u.transformControls.ghost&&(u.transformControls.toggleGhost=function(e){return!0!==e&&(!1===e||u.transformControls.visible)?u.transformControls.hideGhost():u.transformControls.showGhost(),u}),l?u.transformControls.show():!P&&u.transformControls.ghost&&u.transformControls.showGhost(),u},Ao.gesture=function(g,e,t,n,o,p,f,r,i,l,a,m,s,c,u,d){var h,z,y,b,v;if(h=zob(Ao.gesture,arguments,"obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround, circularBounds, rect"))return h;if(z_d("34.5"),!zot(g)&&g.on){zot(e)&&(e=!0),zot(t)&&(t=!0),zot(n)&&(n=!0),zot(i)&&(i=!1),zot(r)&&(r=1),zot(l)&&(l=!1),zot(a)&&(a=5),zot(m)&&(m=!1),zot(s)&&(s=!0),zot(c)&&(c=!1),c&&n&&(c=d=null,zon&&zogy("gesture() - does not support surround when rotate is true")),zot(u)&&(u=!1),zot(o)&&!zot(d)&&(o=d);var w,C,x,k,T,A,P,B,E,I,S,W=Po();return zot(g.zimMaskDynamic)||g.zimMaskApply(),g.zimTouch||(w=new Ao.Damp(g.scaleX,.05),C=new Ao.Damp(g.scaleY,.05),x=g.scaleX/g.scaleY,g.zimTouch={move:e,scale:t,rotate:n,pointers:{},checkBounds:function(e,t){var o,n;return g.zimTouch.boundary&&(o=g.zimTouch.boundary,n=g.parent.localToLocal(e,t,g.parent),t=c?(e=Math.min(o.x,Math.max(o.x+o.width,n.x)),Math.min(o.y,Math.max(o.y+o.height,n.y))):(e=Math.max(o.x,Math.min(o.x+o.width,n.x)),Math.max(o.y,Math.min(o.y+o.height,n.y))),e=(n=g.parent.globalToLocal(e,t)).x,t=n.y),{x:e,y:t}}},o&&(g.zimTouch.boundary=o,i&&(g.zimTouch.boundary=Ao.boundsToGlobal(g.parent,o)),g.zimTouch.boundaryStartX=g.zimTouch.boundary.x,g.zimTouch.boundaryStartY=g.zimTouch.boundary.y,g.zimTouch.boundaryStartW=g.zimTouch.boundary.width,g.zimTouch.boundaryStartH=g.zimTouch.boundary.height,i=g.zimTouch.checkBounds(g.x,g.y),g.x=i.x,g.y=i.y),l&&(b=10,v=5,y=0,z=[],g.zimTouch.slideInterval=Ao.interval(b/("s"==W?1e3:1),function(){z[y++%v]=[g.x,g.y]}),g.zimTouch.slideInterval.pause(),g.animate({x:g.x,y:g.y},10/("s"==W?1e3:1),"quadOut")),g.zimTouch.mousedown=g.on("mousedown",function(e){zot(S)?S=1:S++,s&&(t=g.parent.numChildren-1,"Keyboard"==g.parent.getChildAt(t).type&&t--,g.parent.setChildIndex(g,t),g.ZIMoutlineShape&&g.outline()),m||(I=null,T=g.scaleX,A=g.scaleY,P=g.rotation,B=g.regX,E=g.regY,g.reg(0,0),k=g.getMatrix(),g.regX=B,g.regY=E);var t="id"+Math.abs(e.pointerID+1),e=g.parent.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY);g.zimTouch.pointers[t]={startX:e.x,startY:e.y,x:e.x,y:e.y},(g.zimTouch.move||g.zimTouch.rotate)&&(g.zimTouch.total=0,Ao.loop(g.zimTouch.pointers,function(){g.zimTouch.total++})),l&&1==g.zimTouch.total&&g.zimTouch.slideInterval.pause(!1),M()}),g.zimTouch.pressmove=g.on("pressmove",function(e){var t="id"+Math.abs(e.pointerID+1),o=g.parent.globalToLocal(e.stageX/Ao.scaX,e.stageY/Ao.scaY);g.zimTouch.pointers[t]&&(g.zimTouch.pointers[t].x=o.x,g.zimTouch.pointers[t].y=o.y);var n,r,i,l,a,s,c=0,u=0,d=0,h=0;Ao.loop(g.zimTouch.pointers,function(e,t){c+=t.x-t.startX,u+=t.y-t.startY,d+=t.x,h+=t.y}),0!=g.zimTouch.total&&(n=c/g.zimTouch.total,r=u/g.zimTouch.total,c=g.zimTouch.startX+n,u=g.zimTouch.startY+r,d/=g.zimTouch.total,h/=g.zimTouch.total,i={x:g.x,y:g.y,scaleX:g.scaleX,scaleY:g.scaleY,rotation:g.rotation},g.zimTouch.move&&(a=g.zimTouch.checkBounds(c,u),i.x=a.x,i.y=a.y),2==g.zimTouch.pair.length?(l=g.zimTouch.pair[0],e=g.zimTouch.pair[1],g.zimTouch.scale&&(t=Math.sqrt(Math.pow(e.startX-l.startX,2)+Math.pow(e.startY-l.startY,2)),o=Math.sqrt(Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2)),a=g.zimTouch.startSX+(o/t-1),o=g.zimTouch.startSY+(o/t-1),i.scaleX=a,i.scaleY=o,i.scaleX=w.convert(a),i.scaleY=C.convert(o),t=!zot(p)&&Math.min(a,o)<p,o=!zot(f)&&Math.max(a,o)>f,(t||o)&&(t?1<x?(i.scaleY=p,i.scaleX=p*x):(i.scaleX=p,i.scaleY=p/x):o&&(1<x?(i.scaleX=f,i.scaleY=f/x):(i.scaleY=f,i.scaleX=f*x)),w.immediate(i.scaleX),C.immediate(i.scaleY))),g.zimTouch.rotate&&(s=Math.atan2(l.startY-e.startY,l.startX-e.startX)*(180/Math.PI),s=Math.atan2(l.y-e.y,l.x-e.x)*(180/Math.PI)-s,i.rotation=g.zimTouch.startR+s),m?(g.scaleX=i.scaleX,g.scaleY=i.scaleY,g.rotation=i.rotation,g.zimTouch.move&&(g.x=i.x,g.y=i.y)):(g.reg(0,0),s=g.parent.localToGlobal(d,h),d=s.x,h=s.y,s=zot(I)?g.globalToLocal(d,h):g.globalToLocal(I.x,I.y),k.clone().translate(s.x,s.y).rotate(i.rotation-P).scale(i.scaleX/T,i.scaleY/A).translate(-s.x,-s.y).decompose(g),g.zimTouch.move&&(g.x+=n,g.y+=r),I=g.localToGlobal(s.x,s.y),g.reg(B,E)),g.zimTouch.scale&&g.dispatchEvent("scale"),g.zimTouch.rotate&&g.dispatchEvent("rotate")):(g.x=i.x,g.y=i.y),g.zimTouch.move&&g.dispatchEvent("move"),"Tag"!=g.type&&"TextArea"!=g.type&&"Loader"!=g.type||g.resize(),g.ZIMoutlineShape&&g.outline(),g.getStage&&g.stage&&g.stage.update())}),g.on("mousedown",function(){var e=1;g.stage.on("stagemousedown",function(){e++}),g.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){g.zimTouch&&(g.zimTouch.total=0),g.zimTouch&&(g.zimTouch.pointers={}),S=null},50)})},null,!0),g.zimTouch.pressup=g.on("pressup",function(e){var t,o="id"+Math.abs(e.pointerID+1);delete g.zimTouch.pointers[o],(g.zimTouch.move||g.zimTouch.rotate)&&g.zimTouch.total--,n&&!zot(r)&&0==g.zimTouch.total&&(0<r?g.rotation=Math.round(g.rotation/r)*r:0==r&&(g.rotation=Math.round(g.rotation))),l&&0==g.zimTouch.total&&1==S&&(g.zimTouch.slideInterval.pause(),t=z[(y+1)%z.length],e=z[y%z.length],o=g.x+(t[0]-e[0])*a,t=g.y+(t[1]-e[1])*a,e=g.zimTouch.checkBounds(o,t),t=v*b*a*Math.min((g.x-e.x)/(g.x-o)||1,(g.y-e.y)/(g.y-t)||1),g.animate({x:e.x,y:e.y},t/("s"==W?1e3:1),"quadOut",function(){g.dispatchEvent("slidestop")})),0==g.zimTouch.total&&(S=null),g.getStage&&g.stage&&g.stage.update(),M()}),o&&(O(),g.on("move",O))),g}function M(){g.zimTouch.pair=[],Ao.loop(g.zimTouch.pointers,function(e,t,o){t.startX=t.x,t.startY=t.y,o<=1&&g.zimTouch.pair.push(t)}),g.zimTouch.startX=g.x,g.zimTouch.startY=g.y,g.zimTouch.startSX=g.scaleX,g.zimTouch.startSY=g.scaleY,g.zimTouch.startR=g.rotation}function O(){var e,t=g.localToGlobal(g.regX,g.regY);o=u?(o=g.parent.localToGlobal(g.x-g.width/2,g.y-g.height/2),e=g.parent.localToGlobal(g.x+g.width/2,g.y+g.height/2),{x:o.x,y:o.y,width:e.x-o.x,height:e.y-o.y}):g.boundsToGlobal();var o={x:g.zimTouch.boundaryStartX+t.x-o.x,y:g.zimTouch.boundaryStartY+t.y-o.y,width:g.zimTouch.boundaryStartW-o.width,height:g.zimTouch.boundaryStartH-o.height};g.gestureBoundary(o,!1)}},Ao.noGesture=function(e,t,o,n){var r;return(r=zob(Ao.noGesture,arguments,"obj, move, scale, rotate"))?r:(z_d("34.6"),!zot(e)&&e.on&&e.zimTouch?(zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),e.zimTouch.move=!t,e.zimTouch.scale=!o,e.zimTouch.rotate=!n,e.zimTouch.move||e.zimTouch.scale||e.zimTouch.rotate||(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e):void 0)},Ao.gestureBoundary=function(e,t,o){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.localBounds&&e.parent?e.zimTouch.boundary=Ao.boundsToGlobal(e.parent,t):e.zimTouch.boundary=t,zot(o)&&(o=!0),o&&(e.zimTouch.boundaryStartX=t.x,e.zimTouch.boundaryStartY=t.y,e.zimTouch.boundaryStartW=t.width,e.zimTouch.boundaryStartH=t.height);t=e.zimTouch.checkBounds(e.x,e.y);return e.x=t.x,e.y=t.y,e}},Ao.effect=function(e,t,o,n,r,i){if(z_d("33.16"),zot(t))return e;zot(e.effects)&&(e.effects={}),Array.isArray(t)||(t=[t]);for(var l,a=0,s=0;s<t.length;s++){var c=t[s];c.type||(c instanceof createjs.BlurFilter?c.type="BlurEffect":c instanceof createjs.ColorFilter?c.type="ColorEffect":c instanceof createjs.AlphaMaskFilter?c.type="AlphaEffect":c instanceof createjs.ColorMatrixFilter?c.type="MultiEffect":zot(c.type)&&(c.type="custom"+a++));var u=c.type.replace(/effect/i,"");e.effects[u.toLowerCase()]=c}for(l in e.filters=[],e.effects)e.filters.push(e.effects[l]);return e.cache(o,n,r,i),e},Ao.updateEffects=function(e,t){return z_d("33.163"),e.updateCache&&(t?e.cache():e.updateCache()),e},Ao.noEffect=function(e,t,o){if(z_d("33.165"),zot(o)&&(o=!1),zot(t)){var n;e.effects.multi&&(n=e.effects.multi),e.effects={},n&&(e.effects.multi=n)}else{e.effects||(e.effects={}),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r].replace(/effect/i,"");delete e.effects[i.toLowerCase()]}}for(var l in e.filters=[],e.effects)e.filters.push(e.effects[l]);return o||0<e.filters.length?e.updateCache&&e.updateCache():e.uncache&&e.uncache(),e},Ao.addPhysics=function(e,t,o,n,r,i,l,a,s,c,u,d,h){var g;if(g=zob(Ao.addPhysics,arguments,"obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution"))return g;if(z_d("34.8"),zot(d)){if("undefined"==typeof zimPhysics)return zon&&zogy("ZIM Physics module must be imported"),e;zot(WW.zimDefaultPhysics)&&(WW.zimDefaultPhysics=new Ao.Physics),d=WW.zimDefaultPhysics}e.physics=d;var p,d="rectangle";function f(){WW.zimContactListener=new WW.b2ContactListener,m=new Ao.Dictionary(!0),z=new Ao.Dictionary(!0),WW.zimContactListener.BeginContact=function(e){var t=m.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody());(t=m.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody())},WW.zimContactListener.EndContact=function(e){var t=z.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody());(t=z.at(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody()))&&t(e.m_fixtureB.GetBody())},p.physics.world.SetContactListener(WW.zimContactListener)}return"Circle"==e.type||"Dial"==e.type?d="circle":"Triangle"==e.type&&(d="triangle"),zot(n)&&(n=d),zot(s)&&(s=h),p=e,t=t,o=o,n=n,r=r,i=i,l=l,a=a,s=s,c=c,u=u,z_d("69.97"),zot(o)&&(o=0),"rectangle"==n?p.body=p.physics.makeRectangle(p.width-o,p.height-o,t,r,l,a,s,c,u,i):"circle"==n?p.body=p.physics.makeCircle(p.width/2-o,t,r,l,a,s,c,u,i):"triangle"==n&&(zot(p.a)&&(p.a=p.width,p.b=p.c=Math.sqrt(Math.pow(p.a/2,2)+Math.pow(p.height,2))),p.body=p.physics.makeTriangle(p.a-o,p.b-o,p.c-o,t,r,l,a,s,c,u,i)),p.body.x=p.x,p.body.y=p.y,p.body.rotation=p.rotation,p.physics.addMap(p.body,p),p.impulse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=p.body.GetWorldCenter();return zot(o)&&(o=r.x*p.physics.scale),zot(n)&&(n=r.y*p.physics.scale),p.body.ApplyImpulse(new WW.b2Vec2(e,t),new WW.b2Vec2(o/p.physics.scale,n/p.physics.scale)),p},p.force=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=p.body.GetWorldCenter();return zot(o)&&(o=r.x*p.physics.scale),zot(n)&&(n=r.y*p.physics.scale),p.body.ApplyForce(new WW.b2Vec2(e,t),new WW.b2Vec2(o/p.physics.scale,n/p.physics.scale)),p},p.setLinearVelocity=function(e,t){return p.body.SetLinearVelocity(new WW.b2Vec2(e,t)),p},p.setAngularVelocity=function(e){return p.body.SetAngularVelocity(e),p},p.spin=function(e){return zot(e)&&(e=10),p.body.ApplyTorque(1e3*e),p},p.torque=function(e){return zot(e)&&(e=10),p.body.ApplyTorque(e),p},p.follow=function(e,t,o,n,r,i,l,a,s,c,u,d){var h;return(h=zob(p.follow,arguments,"damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal"))?h:(p.physics.follow(p,e,t,o,n,r,i,l,a,s,c,u,d),p)},p.noFollow=function(){return p.physics.follow(null),p},p.control=function(e,t,o,n,r){var i;return(i=zob(p.control,arguments,"type, speed, speedY, horizontal, vertical"))?i:(p.physics.control(p,e,t,o,n,r),p)},p.noControl=function(){return p.physics.noControl(p),p},p.sleep=function(){return p.body.SetAwake(!1),p},p.wake=function(){return p.body.SetAwake(!0),p},p.contact=function(e){return WW.zimContactListener||f(),m.add(p.body,e),p},p.noContact=function(){return m.remove(p.body),p},p.contactEnd=function(e){return WW.zimContactListener||f(),z.add(p.body,e),p},p.noContactEnd=function(){return z.remove(p.body),p},p.hasOwnProperty("dynamic")||Object.defineProperty(p,"dynamic",{get:function(){return 2==p.body.GetType()},set:function(e){p.body.SetType(1==e?2:0)}}),e},Ao.removePhysics=function(e){return z_d("34.85"),zot(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null),e},Ao.hitTestPoint=function(e,t,o,n){if(Ao.zimhtp||(z_d("35"),Ao.zimhtp=!0),!e.stage||zot(t)||zot(o))return!1;if(!zot(e)&&e.globalToLocal){if(zot(n)&&(n=!0),n){var r=e.getBounds();if(r){n=e.globalToLocal(t,o);if(n.x>r.x+r.width||n.x<r.x)return!1;if(n.y>r.y+r.height||n.y<r.y)return!1}}o={x:t,y:o},o=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(o.x,o.y):e.globalToLocal(o.x*Ao.scaX,o.y*Ao.scaY);return e.hitTest(o.x,o.y)}},Ao.hitTestReg=function(e,t,o){if(Ao.zimhtr||(z_d("36"),Ao.zimhtr=!0),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var n=t.localToGlobal(t.regX,t.regY),t=e.getBounds();if(o&&t){o=e.globalToLocal(n.x,n.y);if(o.x>t.x+t.width||o.x<t.x)return!1;if(o.y>t.y+t.height||o.y<t.y)return!1}return n=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(n.x,n.y):e.globalToLocal(n.x*Ao.scaX,n.y*Ao.scaY),e.hitTest(n.x,n.y)}},Ao.hitTestRect=function(t,e,o,n,r){if(Ao.zimhtr||(z_d("37"),Ao.zimhtr=!0),!t.stage||!e.stage)return!1;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=0),zot(n)&&(n=!0);var i=e.getBounds();if(i){if(n)if(t.getBounds()&&!Ao.hitTestBounds(t,e))return!1;var l,a,s=i.x+i.width/2,n=i.y+i.height/2,c=e.localToGlobal(s,n);if(r){if(!d(c))return!1;for(var u=0;u<=o;u++){if(l=i.width*(u+1)/(o+1),a=i.height*(u+1)/(o+1),!d(c=e.localToGlobal(i.x+l,i.y)))return!1;if(!d(c=e.localToGlobal(i.x+i.width,i.y+a)))return!1;if(!d(c=e.localToGlobal(i.x+i.width-l,i.y+i.height)))return!1;if(!d(c=e.localToGlobal(i.x,i.y+i.height-a)))return!1}return!0}if(d(c))return!0;for(u=0;u<=o;u++){if(l=i.width*(u+1)/(o+1),a=i.height*(u+1)/(o+1),d(c=e.localToGlobal(i.x+l,i.y)))return!0;if(d(c=e.localToGlobal(i.x+i.width,i.y+a)))return!0;if(d(c=e.localToGlobal(i.x+i.width-l,i.y+i.height)))return!0;if(d(c=e.localToGlobal(i.x,i.y+i.height-a)))return!0}}else zon&&zogy("hitTestRect():\n please setBounds() on param b object")}function d(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*Ao.scaX,e.y*Ao.scaY),t.hitTest(e.x,e.y)?1:void 0}},Ao.hitTestCircle=function(t,e,o,n,r){if(Ao.zimhtc||(z_d("38"),Ao.zimhtr=!0),z_d("38"),t.stage&&e.stage&&!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=8),zot(n)&&(n=!0);var i=e.getBounds();if(i){var l=t.getBounds();if(n&&l&&!Ao.hitTestBounds(t,e))return!1;var a,s,c,u=i.x+i.width/2,d=i.y+i.height/2,h=e.localToGlobal(u,d),g=(i.width+i.height)/2/2;if(r){if(!f(h))return!1;for(var p=0;p<o;p++)if(a=p/o*2*Math.PI,s=u+g*Math.cos(a),c=d+g*Math.sin(a),!f(h=e.localToGlobal(s,c)))return!1;return!0}if(f(h))return!0;for(p=0;p<o;p++)if(a=p/o*2*Math.PI,s=u+g*Math.cos(a),c=d+g*Math.sin(a),f(h=e.localToGlobal(s,c)))return!0;return!1}zon&&zogy("hitTestCircle():\n please setBounds() on param b object")}function f(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*Ao.scaX,e.y*Ao.scaY),t.hitTest(e.x,e.y)?1:void 0}},Ao.hitTestCircleRect=function(e,t,o){if(Ao.zimhtcr||(z_d("38.2"),Ao.zimhtcr=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var l=(e.radius||(r.width+r.height)/2)+o;l*=e.getConcatenatedMatrix().decompose().scaleX/n.scaleX;i=t.boundsToGlobal(),r=e.localToGlobal(0,0),o=r.x,n=r.y,t=i.x,e=i.y,r=i.x+i.width,i=i.y+i.height,o=(o<t?t:r<o?r:o)-o,n=(n<e?e:i<n?i:n)-n;return o*o+n*n<=l*l}zon&&zogy("hitTestCircleRect():\n please setBounds() on both objects")}}},Ao.hitTestCircles=function(e,t,o){if(Ao.zimhtcs||(z_d("38.5"),Ao.zimhtcs=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var l=e.localToGlobal(r.x+r.width/2,r.y+r.height/2),a=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=e.getConcatenatedMatrix(),c=t.getConcatenatedMatrix(),e=Math.sqrt(s.a/n.scaleX*s.a/n.scaleX+s.c/n.scaleX*s.c/n.scaleX),t=Math.sqrt(s.b/n.scaleY*s.b/n.scaleY+s.d/n.scaleY*s.d/n.scaleY),s=Math.sqrt(c.a/n.scaleX*c.a/n.scaleX+c.c/n.scaleX*c.c/n.scaleX),n=Math.sqrt(c.b/n.scaleY*c.b/n.scaleY+c.d/n.scaleY*c.d/n.scaleY),a=Math.sqrt(Math.abs(Math.pow(l.x-a.x,2)+Math.pow(l.y-a.y,2)));return r.width*Math.max(e,t)/2+i.width*Math.max(s,n)/2>=a-o}zon&&zogy("hitTestCircles():\n please setBounds() on both objects")}}},Ao.hitTestBounds=function(e,t,o,n){if(Ao.zimhtb||(z_d("39"),Ao.zimhtb=!0),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=!1;n&&n.graphics&&(r=!0);var i=e.getBounds(),l=t.getBounds();if(i&&l){zot(o)&&(o=0);e=Ao.boundsToGlobal(e),t=Ao.boundsToGlobal(t);return r&&((r=n.graphics).c(),r.ss(1).s("blue"),r.r(e.x,e.y,e.width,e.height),r.s("green"),r.r(t.x,t.y,t.width,t.height),n.stage.update()),Ao.rectIntersect(e,t,o)}zon&&zogy("hitTestBounds():\n please setBounds() on both objects")}},Ao.hitTestPath=function(e,t,o,n){if(Ao.zimhtpa||(z_d("37.5"),Ao.zimhtpa=!0),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.hitTest&&("Squiggle"==t.type||"Blob"==t.type)){var r=e.getBounds();zot(o)&&(o=2),zot(n)&&(n=!1);var i,l,a,s=t.interpolate(o,null,!0,null,!0);if(n)for(t.hitPathPoints?t.hitPathPoints.removeAllChildren():t.hitPathPoints=(new Ao.Container).addTo(),t.hitPathPoints.top(),i=0;i<s.length;i++)l=s[i],l=t.localToGlobal(l.x,l.y),new Ao.Circle(3).loc(l.x,l.y,t.hitPathPoints);if(r){n=Ao.boundsAroundPoints(s);if(!Ao.rectIntersect(e.boundsToGlobal(r),t.boundsToGlobal(n)))return}for(i=0;i<s.length;i++)if(l=s[i],l=t.localToGlobal(l.x,l.y),a=l,a=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(a.x,a.y):e.globalToLocal(a.x*Ao.scaX,a.y*Ao.scaY),e.hitTest(a.x,a.y)?1:void 0)return!0;return!1}},Ao.hitTestGrid=function(e,t,o,n,r,i,l,a,s,c,u,d,h){if(Ao.zimhtg||(z_d("41"),Ao.zimhtg=!0),!e.stage)return!1;zot(e)||d||(i=(g=e.globalToLocal(i,l)).x,l=g.y),zot(a)&&(a=0),zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0);var g=(t+=c)/n,t=(o+=u)/r,o=Math.min(n-1,Math.max(0,Math.floor((i-a+c/2)/g))),r=Math.min(r-1,Math.max(0,Math.floor((l-s+u/2)/t)));if("open"!=h){if(g*(o+1)-c<i-a||i-a<g*o)return;if(t*(r+1)-u<l-s||l-s<t*r)return}n=r*n+o;return zot(h)||"index"==h?n:"col"==h?o:"row"==h?r:"array"==h||"open"==h?[n,o,r]:void 0},Ao.animate=function(c,e,t,u,d,h,l,o,n,r,i,a,s,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,K,J){if(c&&(c.props||c.obj)&&($=zob(Ao.animate,arguments,"target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck")))return $;if("AC"==c.type&&WW.zdf)return WW.zdf.ac("animate",arguments),c;if(Ao.animateCheck||(z_d("45"),Ao.animateCheck=!0),c){var $=Ao.ANIMATE;if(null!=WW.ANIMATE&&($=WW.ANIMATE),!$)return c;zot(J)&&(J=!0);var ee,te,oe=Po(null,K,null,null,!zot(J)&&!J);0<i&&(r=!0);var ne=arguments,re=Array.prototype.slice.call(arguments);if(zot(e)&&!zot(N)&&(e=N),zot(N=e))return zon&&zogy("animate() - need props"),c;if("BeadsContainer"==c.type&&zot(T)&&(T=0),"Tone"==c.type&&(U=!1),!1===U?Ao.pauseAnimateOnBlur=!1:(U||zot(U)&&!1!==Ao.pauseAnimateOnBlur)&&(zot(Ao.blurCheck)&&Ao.setBlurDetect(),Ao.pauseAnimateOnBlur=!0),zot(T)||!c.addChild){t=Ao.Pick.choose(t),u=Ao.Pick.choose(u),l=Ao.Pick.choose(l),i=Ao.Pick.choose(i),a=Ao.Pick.choose(a),z=Ao.Pick.choose(z),y=Ao.Pick.choose(y),x=zot(x)?t:Ao.Pick.choose(x),B=Ao.Pick.choose(B),O=Ao.Pick.choose(O),j=Ao.Pick.choose(j);var ie=["loopCount","loopWait","rewind","rewindWait"];for(ee in I)0<=ie.indexOf(ee)&&(I[ee]=Ao.Pick.choose(I[ee]))}$={override:!zot(c)&&!zot(c.zimX)&&!zot(N.x)||!zot(c)&&!zot(c.zimY)&&!zot(N.y)};if(zot(r)||($.loop=r),zot(i)||($.count=i),zot(a)||($.loopWait=a),zot(s)||($.loopCall=s),zot(f)||($.loopWaitParams=f),zot(p)||($.loopWaitCall=p),zot(g)||($.loopParams=g),zot(m)||($.loopPick=m),zot(z)||($.rewind=z),zot(y)||($.rewindWait=y),zot(b)||($.rewindCall=b),zot(v)||($.rewindParams=v),zot(w)||($.rewindWaitCall=w),zot(C)||($.rewindWaitParams=C),zot(e)||($=Ao.merge($,I)),I=$,Ao.loop(N,function(e,t){var o;"string"==typeof e&&(1<(o=e.split(".")).length&&"."!=e.substr(0,1)&&(N["."+e]=t,delete N[e],e="."+e),1<o.length&&"string"==typeof t&&("+"!=(o=t.substr(0,1))&&"-"!=o&&(N[e]="+"+t)))}),c.zimTweenOriginals={},!zot(T)&&c.addChild){for(var le=[],ae=0;ae<c.numChildren;ae++)le.push(c.getChildAt(ae));D=c,c=le}var se=["extra","zoom","speed","layer","fade"],ce={zoom:"Pen"==c.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(c instanceof Array){for(B&&c.reverse(),ae=0;ae<c.length;ae++){var ue,de=c[ae];if(O)for(ee in de.zimObj={},N)ue=0<=se.indexOf(ee)?N[ee]:Ao.Pick.choose(N[ee]),de.zimObj[ee]=de[ee],"string"==typeof ue&&"transform"!=ee&&(ue=(de.zimLastObj&&!zot(de.zimLastObj[ee])?de.zimLastObj:de)[ee]+Number(ue.replace(/\s/g,""))),de.zimLastObj&&(de.zimLastObj[ee]=(z?de.zimTweenOriginals:N)[ee]),de[ee]=ue;else for(ee in de.zimObj={},N)se.indexOf(ee),de.zimObj[ee]=N[ee];var he=0==ae&&0!=T?"s"==oe?.02:20:ae*T;Ao.animate(de,de.zimObj,t,u,ae==c.length-1?d:null,ae==c.length-1?h:null,l,o,n,null,null,null,null,null,null,null,m,null,null,null,null,null,null,x,k,null,A,P,null,E,Ao.copy(I),S,W,M,null,j,L,_,D,Y,X,R,H,F,N,V,he,q,U,Q,Z,K,J)}return D}var ge,pe,fe,me,ze,ye=t,be=x;if(zot(ye)&&(ye="s"==oe?1:1e3),zot(x)&&(x=be=ye),zot(u)&&(u="quadInOut"),zot(l)&&(l=0),zot(y)&&(y=0),zot(I)&&(I={override:!zot(c.zimX)&&!zot(N.x)||!zot(c.zimY)&&!zot(N.y)}),zot(h)&&(h=c),zot(E)&&(E=!0),zot(S)&&(S=!1),zot(W)&&(W=!1),zot(O)&&(O=!1),zot(j)&&(j={}),j.scale&&(j.scaleX=j.scaleY=j.scale,delete j.scale),zot(M)||(I.override=M),zot(X)&&(X=!1),zot(H)&&(H=!!X),zot(Y)&&(Y=!1),zot(R)&&(R=!0),zot(F)&&(F=!0),zot(q)&&(q=1),c.futureRate=q,N instanceof Array)return(te=1,0==N.length)?this:(function(){c&&!c.seriesTweens&&(c.seriesTweens=[],c.seriesCalls=[],c.seriesParams=[]);for(var e,t,o=0;o<N.length;o++)(e=N[o]).target?(e.target.seriesTweens||(e.target.seriesTweens=[]),e.target.seriesCalls||(e.target.seriesCalls=[]),e.target.seriesParams||(e.target.seriesParams=[]),e.target.seriesTweens.push(e.props),e.target.seriesCalls.push(e.call),e.target.seriesParams.push(e.params)):(c.seriesTweens.push(e.props),c.seriesCalls.push(e.call),c.seriesParams.push(e.params));for(c.seriesCalls.push(d),c.seriesParams.push(h),e=N[0],(t=c||e.target).zimSeriesOriginals={},o=N.length-1;0<=o;o--)zot((e=N[o]).props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,Ao.loop(e.obj,function(e){t.zimSeriesOriginals[e]="path"==e?N[e]:eo(t,e)});var n,r,i=new Ao.Dictionary;for(me=new Ao.Dictionary,o=0;o<N.length;o++)if(e=N[o],c=c||e.target,zot(e.target)&&(e.target=c),zot(e.ease)&&(e.ease=u),!zot(e.target)){0==o&&(e.target.zimSeriesArgs=ne),zot(e.props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,e.loop&&(zot(e.loopCount)||e.loopCount<=0)&&(e.loopCount=0,N.splice(o+1,N.length)),zot(e.obj.scale)||(e.obj.scaleX=e.obj.scaleY=e.obj.scale,delete e.obj.scale),e.from&&((s=i.at(e.target))?(e.set?(n=Ao.copy(e.obj),r=Ao.merge(s,e.set),e.obj=ao(e.target,e.obj,r),e.set=Ao.merge(e.set,n)):(e.set=Ao.copy(e.obj),e.obj=ao(e.target,e.obj,s)),e.from=!1):i.add(e.target,ao(e.target,e.obj,e.set)));var l,a={};for(l in e.obj)a[l]=e.set&&e.set[l]||e.target[l];zot(me.at(e.target))&&me.add(e.target,{});var s=Ao.merge(me.at(e.target),a);me.remove(e.target),me.add(e.target,s),e.masterSet=Ao.copy(e.set)}zot(c.zimTweens)&&(c.zimTweens={})}(),no(),oo(),c);if(N&&(N.x&&(c.zimX=!0),N.y&&(c.zimY=!0)),!zot(N.shape)&&N.shape.type==c.type&&("Blob"==c.type||"Squiggle"==c.type)){var ve=c.pointObjects,we=N.shape.pointObjects;if(ve.length!=we.length)zon&&zogy("animate() - shapes must be of same number of points"),delete N.shape;else{delete N.shape;var Ce=zot(N.blobShift)?0:N.blobShift;delete N.blobShift;var xe=!0;for(ae=0;ae<ve.length;ae++)for(var ke,Te,Ae=ve[ae],Pe=we[(2e4*ve.length+ae+Ce)%ve.length],Be=0;Be<4;Be++)1!=Be&&(ke=Ae[Be],(Te=Ao.copy(re))[0]=ke,Te[1]={x:Pe[Be].x,y:Pe[Be].y,rotation:Pe[Be].rotation},xe&&(Te[37]=!0,ke.animateEvent&&ke.off("animation",ke.animateEvent),ke.animateEvent=ke.on("animation",function(){c.update()})),xe=!1,Ao.animate.apply(Ao.animate,Te));if(Ao.isEmpty(N))return c}}if(!zot(c)){c.tweenStates||(c.tweenStates={all:!0});var Ee=!1;if(N.note){if(Array.isArray(N.note))Ao.loop(N.note,function(e,t){"string"==typeof e&&(N.note[t]=Ao.Synth.note(e))});else if(N.note.min)N.note.min=Ao.Synth.note(N.note.min),N.note.max=Ao.Synth.note(N.note.max);else if(N.note.array)Ao.loop(N.note.array,function(e,t){"string"==typeof e&&(N.note.array[t]=Ao.Synth.note(e))});else if("function"==typeof N.note){if(zon)return zogy("animate() - use frequency in ZIM VEE functions not note"),c}else N.note=Ao.Synth.note(N.note);N.frequency=N.note,delete N.note}"Sprite"!=c.type&&Object.prototype.hasOwnProperty.call(c,"paused")||(Object.defineProperty(c,"paused",{get:function(){return c.animatePaused},set:function(e){c.animatePaused=e}}),c.paused=!0,c.animating=!1);var Ie,Se,We,Me,Oe=!(c.endTween=function(o,e){return c.stopAnimate(e),"all"!=o&&"main"!=o&&"none"!=o&&(o="all"),c.seriesTweens?(Ao.loop(c.seriesTweens,function(t,e){Ao.loop(t,function(e){"string"==typeof t[e]&&"transform"!=e&&(t[e]=c[e]+Number(t[e].replace(/\s/g,""))),to(c,e,t[e])}),"all"==o&&c.seriesCalls[e]&&c.seriesCalls[e](c.seriesParams[e])}),"none"==o||(e=c.seriesCalls[c.seriesCalls.length-1])&&e(c.seriesParams[c.seriesParams.length-1]),c.seriesTweens=null,c.seriesCalls=null,c.seriesParams=null):(Ao.loop(c.zimLastObj,function(e){"string"==typeof c.zimLastObj[e]&&"transform"!=e&&(c.zimLastObj[e]=c[e]+Number(c.zimLastObj[e].replace(/\s/g,""))),to(c,e,c.zimLastObj[e])}),"none"!=o&&d&&d(h)),c.stage&&c.stage.update(),c});Ao.loop(N,function(e,t){c.zimTweenOriginals[e]="path"==e?N[e]:eo(c,e),e.match("hue")?(N.hueBatch=t,delete N.hue,Oe=!0):e.match("saturation")?(N.saturationBatch=t,delete N.saturation,Oe=!0):e.match("brightness")?(N.brightnessBatch=t,delete N.brightness,Oe=!0):e.match("contrast")?(N.contrastBatch=t,delete N.contrast,Oe=!0):e.match(/^.effects/)&&(Oe=!0)}),c.resetTween=function(e){zot(e)&&(e=!0),c.pauseAnimate(),c.percent=null,c.startPercent=null;var o=c.zimSeriesOriginals||c.zimTweenOriginals;return Ao.loop(o,function(e){var t;"path"==e?(c.percentComplete=0,c.zimPath=o[e],t=(c.zimStartPercent,c.zimPath.getCurvePoint(c.zimStartPercent/100)),c.loc(t.x,t.y)):to(c,e,o[e])}),c.zimLastObj=null,c.stage&&c.stage.update(),c.stopAnimate(),c.zimPath&&(re[1].path=c.zimPath),zot(c.zimStartRotation)||(c.rotation=c.zimStartRotation),c.zimStartRotation=null,zot(c.zimStartScaleX)||(c.scaleX=c.zimStartScaleX),c.zimStartScaleX=null,zot(c.zimStartScaleY)||(c.scaleY=c.zimStartScaleY),c.zimStartScaleY=null,Ao.animate.apply(null,c.zimSeriesArgs||re),c.pauseAnimate(e),c},c.replayTween=function(){return c.resetTween(!1),c},(N.path||Y)&&(c.requestedPercentComplete?Ie=c.requestedPercentComplete:c.percentComplete&&(Se=c,We="percentComplete",!Object.getOwnPropertyDescriptor(Se,We).get)&&(Ie=c.percentComplete),c.requestedPercentComplete=null,zot(Ie)&&(Ie=0),c.pathRatio=0,c.zimStartRotation=c.rotation,c.percent=null,c.parent&&"BeadsContainer"==c.parent.type||(c.startPercent=null)),S&&(E=!1),zot(c.zimTweens)&&(c.zimTweens={}),S||(c.stage?Me=c.stage:WW.zdf?Me=WW.zdf.stage:S=!0),c.setColorRange&&!zot(N.color)&&(Xe=N.color,delete N.color,N.colorRange=1,c.setColorRange(c.color,Xe),c.colorRange=0);var je,Le,_e,De={};for(ae in N)0<=se.indexOf(ae)||(De[ae]=Ao.copy(N[ae]),N[ae]=Ao.Pick.choose(N[ae]));for(je in zot(N.scale)||(N.scaleX=N.scaleY=Ao.Pick.choose(N.scale),delete N.scale),N){if(!c.zimBusy)break;c.zimBusy[je]&&delete N[je]}if(!Ao.isEmpty(N)){for(ae in"Sprite"!=c.type&&(c.paused=!1,c.animating=!0),(W||I.loop||I.rewind)&&(c.zimMouseEnabledCheck||(c.zimMouseEnabledCheck=!0,c.zimLastMouseEnabled=c.mouseEnabled),c.mouseEnabled=!1,setTimeout(function(){for(var e in c.zimBusy||(c.zimBusy={}),N)c.zimBusy[e]=!0;c.zimMouseEnabledCheck=null,c.mouseEnabled=c.zimLastMouseEnabled},70)),no(),se.shift(),j)j[ae]=Ao.Pick.choose(j[ae]);for(ae in I)"waitedCall"!=ae&&"waitedParams"!=ae&&"loopCall"!=ae&&"rewindCall"!=ae&&"loopWaitCall"!=ae&&"rewindWaitCall"!=ae&&(I[ae]=Ao.Pick.choose(I[ae]));io(),function(){var e;for(ae in j){if("string"==typeof j[ae]&&"transform"!=ae){if("+"==j[ae].substr(0,1))continue;e=(c.zimLastObj&&!zot(c.zimLastObj[ae])?c.zimLastObj:c)[ae],j[ae]=e+Number(j[ae].replace(/\s/g,""))}c.zimLastObj[ae]=(z?c.zimTweenOriginals:N)[ae]}}(),c.seriesTweens&&(c.seriesTweens[0]=N),!void(O&&!Ee&&(N=ao(c,N,j,!0))),c.getBounds&&zot(c.percentCompleteCheck)&&(c.percentCompleteCheck=!0,Object.defineProperty(c,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?lo(e,nt=!0):this.requestedPercentComplete=e}}),Object.defineProperty(c,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?lo(e,!1):this.requestedPercentComplete=e}})),Object.defineProperty(c,"rate",{get:function(){return c.futureRate},set:function(o){c.futureRate=o,Ao.loop(c.zimTweens,function(e,t){t.timeScale=o})},configurable:!0}),!zot(N.path)&&N.path.segmentPoints&&(zot(N.orient)&&(N.orient=!0),N.orient&&zot(N.flip)&&(N.flip=!0),"Pen"==c.type&&(c.infinite=!0),c.zimOnPath=!0,zot(c.pathRatio)&&(c.pathRatio=0),N.orient&&(N.orient=N.path,N.startOrient=N.rotation),Le=N.path,X?(delete N.path,delete N.percent,(zon&&c.startPercent&&0<c.startPercent||c.percent&&100!=c.percent)&&zogy("ZIM.animate() - startPercent and percent currently not supported with drag on path"),(rt=Le.getCurvePoint(c.pathRatio,Ye,Ge))&&(lt=c.parent.globalToLocal(rt.x,rt.y),c.x=lt.x,c.y=lt.y)):(zot(c.startPercent)&&(c.startPercent=Ao.Pick.choose(zot(N.startPercent)?0:N.startPercent)),zot(c.percent)&&(c.percent=Ao.Pick.choose(zot(N.percent)?100:N.percent)),delete N.path,delete N.percent),_e=!Le.lockControls,delete N.path,N.pathRatio=1);var Ye,Xe,Re,He,Fe,Ne,Ve,Ge,qe,Ue,Qe,Ze,Ke,Je,$e,et,tt,ot,nt,rt,it,lt,at,st,ct,ut,dt,ht=!0,gt=!1,pt=!0,ft=!0;zot(N.redirect)||(ft=N.redirect,delete N.redirect),Le&&(_e||(Ge=Ao.copy(Le.segmentPoints),Ye=Ao.copy(Le.segmentRatios)),c.currentPercent=c.startPercent+c.percent*c.pathRatio,Xe=(1e6+c.currentPercent)%100/100,rt=Le.getCurvePoint(Xe,Ye,Ge),c.parent&&rt&&(lt=c.parent.globalToLocal(rt.x,rt.y),c.x=lt.x,c.y=lt.y),X&&(u="linear",c.cursor="pointer",Re=c.percentComplete,Ne=Fe=!(He=!1),Ve=Re,Ge=Ao.copy(Le.segmentPoints),qe=0,Ao.loop(Ge,function(e){qe+=Ao.distanceAlongCurve(e)}),Ue=Math.round(qe/Ge.length/10),Qe=Le.interpolate(Ue,null,!0,null,!0),Ke=Ze=(Re||0)/100*qe,Le.zimAnimateChanged=!1,c.zimAnimatePathChange=Le.on("change",function(){Le.zimAnimateChanged=!0}),c.zimAnimatePathDown=Le.on("mousedown",function(){He=!0,1==c.paused&&(gt=!0)}),c.zimAnimatePathUp=Le.on("pressup",function(){gt=!1}),c.zimAnimateDragDown=c.on("mousedown",function(e){Me=e.target.stage,c.amu||(c.amu=Me.frame.on("mouseupplus",function(){gt=!1})),Me.mouseMoveOutside=!0,pt=!(ht=!1),setTimeout(function(){ht=!0},50),gt=!0,Le.zimAnimateChanged&&(Ge=Ao.copy(Le.segmentPoints),qe=0,Ao.loop(Ge,function(e){qe+=Ao.distanceAlongCurve(e)}),Ue=Math.round(qe/Ge.length/10),Qe=Le.interpolate(Ue,null,!0,null,!0)),Le.zimAnimateChanged=!1,Re=c.percentComplete,$e.immediate(Re);e=Re;z&&(e=ge.position>ge.duration/2?2*(100-Re):2*Re),Ke=Ze=(e||0)/100*qe}),Je=!1,c.zimAnimateDragPress=c.on("pressmove",function(e){Je=!0,function(e){var t=Le.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY),e=Ze;"Blob"==Le.type&&(ot[0]<ot[4]?Ne=!0:ot[0]>ot[4]&&(Ne=!1),e<10&&!Ne?(Ke=Ze=e=qe-5,$e.immediate(Ke/qe*100),ot=[qe-1,qe-2,qe,qe-3,qe-4]):qe-10<e&&Ne&&(Ke=Ze=e=5,$e.immediate(Ke/qe*100),ot=[0,0,0,0,0]));var l=t.x,a=t.y,s=e;Qe.sort(function(e,t){var o=e.x,n=e.y,r=e.r*qe,i=t.x,e=t.y,t=t.r*qe;return Math.sqrt(Math.pow(l-o,2)+Math.pow(a-n,2)+Math.pow(s-r,2))-Math.sqrt(Math.pow(l-i,2)+Math.pow(a-e,2)+Math.pow(s-t,2))}),Ke=Qe[0].r*qe,Re=Ke/qe*100,Re=Ao.constrain(Re,0,99.95),z&&(Re/=2,ge.position>ge.duration/2&&(Re=100-Re))}(e)}),c.animateReturn=function(){z?(Ne=Fe=!1,c.percentComplete<50&&(c.percentComplete=100-c.percentComplete),c.pauseAnimate(!1)):zon&&zogy("animate() - animateReturn() needs rewind set to true")},c.zimAnimateDragUp=c.on("pressup",function(){0==c.paused&&(gt=!1),ht=!1,setTimeout(function(){ht=!0},50),ot[0]<ot[4]?Ne=!0:ot[0]>ot[4]&&(Ne=!1),!c.paused&&z&&ft&&Ne!=Fe&&(c.percentComplete=100-c.percentComplete,Fe=Ne)}),$e=new Ao.Damp(Re,.15),nt=!(ot=[tt=et=0,0,0,0,0]),c.zimDragAnimateTicker=Ao.Ticker.add(function(){var e;X&&(++tt%20&&(ot.push(Ke),ot.shift()),Ze=Ke,He&&(Re=c.percentComplete),gt||pt&&1==c.paused?(He||nt||"Blob"==Le.type&&Math.abs(et-Re)>(z?45:90)?(He=!1,e=Re,$e.immediate(e),nt=!1):e=$e.convert(Re),.1<Math.abs(et-e)?(c.percentCompleteNoAngle=e,et=e):(c.percentCompleteNoAngle=e,Je=pt=!1)):pt=!1)},Me))),N.orient&&(!0===N.orient&&(lt=c.parent.localToGlobal((zot(N.x)?c:N).x,(zot(N.y)?c:N).y),N.orient={x:lt.x,y:lt.y}),it=N.orient,delete N.orient,at=c.rotation,c.rotation=Le.getPointAngle(0)+at,it!=Le&&(Lt=it.parent?it.parent.localToLocal(it.x,it.y,c.parent):c.parent.globalToLocal(it.x,it.y),c.rotation=Ao.angle(c.x,c.y,Lt.x,Lt.y)+at)),N.flip&&(st=N.flip,delete N.flip,ct=c.scaleX),N.flipVertical&&(ut=N.flipVertical,delete N.flipVertical,dt=c.scaleY);var mt=c.x,zt=c.y,yt=0;I.loop&&(zot(I.count)||(yt=I.count,delete I.count,te=1));var bt,vt=0;I.loopWait&&(vt=I.loopWait,a=I.loopWait,delete I.loopWait),I.loopCall&&(bt=I.loopCall,delete I.loopCall);var wt,Ct=c;I.loopParams&&(Ct=I.loopParams,delete I.loopParams),WW.TIMECHECK&&J&&(ye&&Bo(ye,oe),be&&Bo(be,oe),l&&Bo(l,oe),It&&Bo(It,oe),vt&&Bo(vt,oe),a&&Bo(a,oe),I.rewindWait&&Bo(I.rewindWait,oe),V&&Bo(V,oe),G&&Bo(G,oe)),"s"==oe&&(ye&&(ye*=1e3),be&&(be*=1e3),l&&(l*=1e3),It&&(It*=1e3),vt&&(vt*=1e3),a&&(a*=1e3),I.rewindWait&&(I.rewindWait*=1e3),V&&(V*=1e3),G&&(G*=1e3)),I.loopWaitCall&&(wt=I.loopWaitCall,delete I.loopWaitCall);var xt=c;I.loopWaitParams&&(xt=I.loopWaitParams,delete I.loopWaitParams);var kt,Tt,At,Pt,Bt,Et,It,St,Wt,Mt,Ot,jt,Lt=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];-1!=Lt.indexOf(u)&&(u=uo(u)),I.rewind&&(u&&(u instanceof Function?kt=zik(u.reverse()):-1==(kt=u).indexOf("InOut")&&(-1!=kt.indexOf("Out")?kt=kt.replace("Out","In"):-1!=kt.indexOf("In")&&(kt=kt.replace("In","Out")))),k&&(kt=k,-1!=Lt.indexOf(kt)&&(kt=uo(kt)))),Et=u instanceof Function?u:(At="get"+u.charAt(0).toUpperCase()+u.slice(1),Pt=zik(Q),Bt=zik(Z),zot(Pt)&&zot(Bt)||!createjs.Ease[At]?createjs.Ease[u]:(!zot(Bt)&&zot(Pt)&&(Pt=1),!zot(Pt)&&zot(Bt)&&(Bt=.3*1.5),createjs.Ease[At](Pt,Bt))),kt&&(Tt=kt instanceof Function?kt:(At="get"+kt.charAt(0).toUpperCase()+kt.slice(1),Pt=zik(Q),Bt=zik(Z),zot(Pt)&&zot(Bt)||!createjs.Ease[At]?createjs.Ease[kt]:(!zot(Bt)&&zot(Pt)&&(Pt=1),!zot(Pt)&&zot(Bt)&&(Bt=.3*1.5),createjs.Ease[At](Pt,Bt)))),I.rewind?(It=0,delete I.rewind,z=!0,y=I.rewindWait,I.rewindWait&&(It=I.rewindWait,delete I.rewindWait),I.rewindCall&&(St=I.rewindCall,zot(Wt=I.rewindParams)&&(Wt=c),delete I.rewindCall,delete I.rewindParams),I.rewindWaitCall&&(Mt=I.rewindWaitCall,zot(Ot=I.rewindWaitParams)&&(Ot=c),delete I.rewindWaitCall,delete I.rewindWaitParams),0<V||0<G||0<l?0<V||0<G?(c.waiting=!0,(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,{override:I.override}).wait(0<V?V:0,!0).wait(0<G?G:0,!0).call(function(e){e.waiting=!1,G=V=0,po(ge)})).timeScale=c.futureRate):po():(ro(),fo())):0<V||0<G||0<l?0<V||0<G?(c.waiting=!0,(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,{override:I.override}).wait(0<V?V:0,!0).wait(0<G?G:0,!0).call(function(){G=V=0,c.waiting=!1,mo(ge)})).timeScale=c.futureRate):mo():(ro(),zo()),ge.startPaused=H,ge.rewinding=!1,zot(q)||(ge.timeScale=Ao.Pick.choose(q)),!S&&E&&(Ie&&(c.pathRatio=c.percentComplete&&100!=Math.round(c.percentComplete)?c.percentComplete/100:0,c.percentCompleteNoAngle=100!=Math.round(Ie)?Ie:0),jt=_&&!zot(D)&&D.dispatchEvent?Ao.Ticker.add(function(){Oe&&c.updateEffects(),(Le||it||st||ut)&&Dt(),D.dispatchEvent("animation")},Me):_&&c.dispatchEvent?Ao.Ticker.add(function(){Oe&&c.updateEffects(),(Le||it||st||ut)&&Dt(),c.dispatchEvent("animation")},Me):Ao.Ticker.add(function(){Oe&&c.updateEffects(),(Le||it||st||ut)&&Dt()},Me));var _t=[1,1,1],Dt=function(){var e,t,o;!c.parent||ge.passive||ge.startPaused||(X&&z&&(Ve<50&&50<c.percentComplete||50<Ve&&c.percentComplete<50)&&(Fe=c.percentComplete<50),Ve=c.percentComplete,Le&&(_e&&(Ge=Le.segmentPoints,Ye=Le.segmentRatios),(e=X?Le.getCurvePoint(c.pathRatio,Ye,Ge):(c.currentPercent=c.startPercent+c.percent*c.pathRatio,e=(1e6+c.currentPercent)%100/100,1==c.pathRatio&&(e+=0<c.percent?1:0),Le.getCurvePoint(e,Ye,Ge)))&&(t=c.parent.globalToLocal(e.x,e.y),c.x=t.x,c.y=t.y)),t=90==at||270==at||-90==at,st&&ht&&(mt>c.x&&Ao.sign(t?c.scaleY:c.scaleX)==Ao.sign(ct)&&(t?c.scaleY*=-1:c.scaleX*=-1),mt<c.x&&Ao.sign(t?c.scaleY:c.scaleX)!=Ao.sign(ct)&&(t?c.scaleY*=-1:c.scaleX*=-1)),ut&&ht&&(zt>c.y&&Ao.sign(t?c.scaleX:c.scaleY)==Ao.sign(dt)&&(t?c.scaleX*=-1:c.scaleY*=-1),zt<c.y&&Ao.sign(t?c.scaleX:c.scaleY)!=Ao.sign(dt)&&(t?c.scaleX*=-1:c.scaleY*=-1)),it&&0!=(o=Le==it?Ao.angle(mt,zt,c.x,c.y)+at:(o=it.parent?it.parent.localToLocal(it.x,it.y,c.parent):c.parent.globalToLocal(it.x,it.y),Ao.angle(c.x,c.y,o.x,o.y)+at))&&(c.paused&&!Je||(st&&0<mt-c.x&&(o+=180),c.rotation=o==at?c.rotation:o,z&&50<c.percentComplete&&!st&&(c.rotation+=180))),X&&(o=c.x-mt+c.y-zt,2<Math.abs(o)&&(_t.push(Ao.sign(o)),_t.shift(),ge.forward=function(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}(_t))),mt=c.x,zt=c.y)};(Le||it||st||ut)&&(c.handlePath=Dt),zot(c.zimMaskDynamic)||c.zimMaskApply();var Yt,Xt,Rt,Ht,Ft,Nt,Vt,Gt,qt,Ut,Qt,Zt=!1;for(wo(),c.stopAnimate&&c.stopAnimate.real||(c.stopAnimate=function(e,t,o,n,r){if(c.dynamicAnimation=null,!r||!X){if(zot(e)&&(c.tweenStates={}),t)return c.endTween(null,e),c;if(zot(n)&&(n=!0),null==c.pan&&(c.paused=!0,c.animating=!1),"Pen"==c.type&&c.zimOnPath&&(c.stop(),c.zimOnPath=!1),zot(o)&&(o=!0),n&&X&&(Le&&Le.off("change",c.zimAnimatePathChange),c.off("mousedown",c.zimAnimateDragDown),c.off("pressmove",c.zimAnimateDragPress),c.off("pressup",c.zimAnimateDragUp),c.amu&&Me.frame.off("mouseupplus",c.amu),Ao.Ticker.remove(c.zimDragAnimateTicker)),zot(e)){if(!o)return c;for(var i in c.zimBusy=null,createjs.Tween.removeTweens(c),c.zimTweens)xo(i);c.zimTweens=null,c.zimIdSets=null,c.zimTween=null,Ao.idSets&&Ao.idSets[pe||i]&&(delete Ao.idSets[pe||i],Ao.isEmpty(Ao.idSets)&&delete Ao.idSets),Ao.animatedObjects.remove(c)}else{Array.isArray(e)||(e=[e]);var l=To(e);for(i in c.zimTweens)c.zimTweens[i].requestID&&cancelAnimationFrame(c.zimTweens[i].requestID),o&&0<=l.indexOf(i)&&Co(i),!o&&l.indexOf(i)<0&&Co(i)}return c}c.pauseAnimate()},c.stopAnimate.real=!0,c.pauseAnimate=function(e,t,o,n){if("pauseOnBlur"==t?t=null:zot(t)&&(c.tweenStates={all:!1===e}),"Pen"==c.type&&(!1===e?c.zimOnPath&&(c.infinite=!0):c.stop()),Ft&&!n){if(zot(t))for(var r in c.zimTweens)ko(r,e);else c.pause(e,t);return c}if(zot(e)&&(e=!0),gt=!1,c.paused=e,c.animating=!e,zot(o)&&(o=!0),zot(t)&&!o)return c;if(zot(t))for(r in c.zimTweens)ko(r,e);else{Array.isArray(t)||(t=[t]);var i=To(t);for(r in c.zimTweens)o&&0<=i.indexOf(r)&&(ko(r,e),c.tweenStates[r]=!e),!o&&i.indexOf(r)<0&&(ko(r,e),c.tweenStates[r]=!e)}return"Sprite"==c.type&&(c.running||c.stop()),c}),H&&c.pauseAnimate(!0,L,null,!0),N.extra&&(Yt=N.extra,delete N.extra,Array.isArray(Yt)||(Yt=[Yt])),ae=0;ae<se.length;ae++){var Kt=se[ae];N[Kt]&&(zot(Yt)&&(Yt=[]),!0===(Rt=N[Xt=Kt])?Yt.push({outputProp:ce[Xt]}):Array.isArray(Rt)?Yt.push({outputProp:ce[Xt],outputMin:Rt[0],outputMax:Rt[1],inputMin:Rt[2],inputMax:Rt[3]}):Yt.push({outputProp:ce[Xt],outputMax:Rt}),delete N[Kt])}if(Yt)for(c.zimStartScaleX=c.scaleX,c.zimStartScaleY=c.scaleY,ge.extraTickers=[],ae=0;ae<Yt.length;ae++){var Be,Jt=Yt[ae];for(Be in zot(Jt.inputObj)&&(Jt.inputObj=c),zot(Jt.inputProp)&&(Jt.inputProp="y"),zot(Jt.inputMin)&&(Jt.inputMin=0),zot(Jt.inputMax)&&(Jt.inputMax="x"==Jt.inputProp?Me.width:Me.height),zot(Jt.outputObj)&&(Jt.outputObj=c),zot(Jt.outputProp)&&(Jt.outputProp="scale"),zot(Jt.outputMin)&&(Jt.outputMin=0),zot(Jt.outputMax)&&(Jt.outputMax=Jt.outputMin+1),zot(Jt.constrain)&&(Jt.constrain=!0),Jt)N[Be]=Ao.Pick.choose(N[Be]);"percentSpeed"==Jt.outputProp&&(Y=!0),Ht=new Ao.Proportion(Jt.inputMin,Jt.inputMax,Jt.outputMin,Jt.outputMax,Jt.factor,Jt.outputRound);var $t=function(){var n=Jt,r=Ht;return function(){var e,t=n.outputObj,o=n.inputObj[n.inputProp];"x"!=n.inputProp&&"y"!=n.inputProp||n.inputObj.parent&&(o=n.inputObj.parent.localToGlobal(o,o)[n.inputProp]),e=n.constrain?Ao.constrain(r.convert(o),n.outputMin,n.outputMax):r.convert(o),Number.isNaN(e)&&(e=null!=n.outputMin?n.outputMin:0),"scale"==n.outputProp?(t.scaleX=Ao.sign(t.scaleX)*e,t.scaleY=Ao.sign(t.scaleY)*e):"scaleX"==n.outputProp?t.scaleX=Ao.sign(t.scaleX)*e:"scaleY"==n.outputProp?t.scaleY=Ao.sign(t.scaleY)*e:"layer"==n.outputProp?!t.parent||(o=Ao.constrain(Math.round(e),0,t.parent.numChildren-1))!=t.parent.getChildIndex(t)&&t.parent.setChildIndex(t,o):"percentSpeed"==n.outputProp?t[n.outputProp]=100*e:t[n.outputProp]=e}}();$t(),ge.extraTickers.push(Ao.Ticker.add($t,Me))}return Y&&(c.dynamicAnimation=!0),(Y||c.zimAnimateDragDown)&&(Y&&(Ft=!0,c.pauseAnimate(!0,L,null,!0),c.paused=!1,c.animating=!0,ge.currentTime=0,Nt=ge,zot(c.percentSpeed)&&(c.percentSpeed=ge.startPaused?0:100),Vt=1e3/60,ge.currentTime=0,Gt=!G&&!V&&!l&&!yt&&I.loop,R&&I.loop&&!yt&&(R=!1),qt=t+(z?x||t:0)+(y||0)+(a||0),qt*="s"==oe?1e3:1,a=1,I.loop&&yt&&(a=yt),R&&(Ut=qt*a),function e(){var t;ge.requestID=requestAnimationFrame(e),!Y||ge.startPaused&&0==c.percentSpeed||(ge.startPaused=!1,ge!=Nt&&((Nt=ge).currentTime=0,c.pauseAnimate(!0,L,null,!0),c.paused=!1,c.animating=!0,Gt=!G&&!V&&!l&&!yt&&I.loop),Gt&&(ge.currentTime+=1e4*qt,ge.setPosition(ge.currentTime,!0),Gt=!1),t=ge.currentTime+Vt*c.percentSpeed/100,Ut&&0==l&&(t=Ao.constrain(t,0,Ut)),ge.currentTime=t,ge.setPosition(ge.currentTime),(Le||it||st||ut)&&Dt(),Me.update())}()),c.pause=function(e,t){if(zot(e)&&(e=!0),zot(t)&&(t=0),e){if(c.zimAnimateDragDown&&(X=!1,c.cursor="default",Le&&Le.off("change",c.zimAnimatePathChange),c.off("mousedown",c.zimAnimateDragDown),c.off("pressmove",c.zimAnimateDragPress),c.off("pressup",c.zimAnimateDragUp),!Y))return;Qt=c.percentSpeed,0<t?Ao.animate({target:c,props:{percentSpeed:0},override:!1,ticker:!1,time:t,call:function(){c.percentSpeed=0,c.paused=!0,c.animating=!1,Y=!1,c.dispatchEvent("pause")}}):(ge.startPaused=!1,c.percentSpeed=0,c.paused=!0,c.animating=!1,Y=!1,setTimeout(function(){c.dispatchEvent("pause")},10))}else{if(c.zimAnimateDragDown&&(X=!0,c.cursor="pointer",Le&&(c.zimAnimatePathChange=Le.on("change",c.zimAnimatePathChange)),c.zimAnimateDragDown=c.on("mousedown",c.zimAnimateDragDown),c.zimAnimateDragPress=c.on("pressmove",c.zimAnimateDragPress),c.zimAnimateDragUp=c.on("pressup",c.zimAnimateDragUp),!Y&&0!=H))return;gt=!1,ge.currentTime=ge.position,0<t?Ao.animate({target:c,props:{percentSpeed:Qt},override:!1,ticker:!1,time:t,call:function(){c.percentSpeed=Qt,c.paused=!1,c.animating=!0,Y=!0}}):(c.percentSpeed=Qt,c.paused=!1,c.animating=!0,Y=!0)}return c}),c}}}function eo(e,t){if("."!=t.substr(0,1))return"transform"==t&&e.style?e.style.transform:e[t];for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}function to(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function oo(){c.zimLastObj&&Ao.loop(c.zimLastObj,function(e){zot(c.zimTweenOriginals[e])||(c[e]=c.zimTweenOriginals[e],c.zimLastObj[e]=c.zimTweenOriginals[e])});for(var e,t,o,n=l,r=0,i=0;i<N.length;i++)zot((o=N[i]).target)||(zot(o.time)&&(o.time=ye),n+=o.wait||0,e=o.time,t=zot(o.rewindTime)?e:o.rewindTime,o.rewind&&(e=e+t+(o.rewindWait||0)),o.loop&&(e*=o.loopCount,e+=(o.loopCount-1)*(o.loopWait||0)),zot(o.params)&&(o.params=o.target),ze=o.target,n<0&&(r+=n,n=0),o={target:o.target,obj:Ao.copy(o.obj),seriesWait:r,wait:n,waitedCall:o.waitedCall,waitedParams:o.waitedParams,time:o.time,ease:o.ease,from:o.from,rewind:o.rewind,call:o.call,params:o.params,loop:o.loop,loopCount:o.loopCount,loopWait:o.loopWait,loopCall:o.loopCall,loopParams:o.loopParams,loopWaitCall:o.loopWaitCall,loopWaitParams:o.loopWaitParams,loopPick:o.loopPick,rewindWait:o.rewindWait,rewindCall:o.rewindCall,rewindParams:o.rewindParams,rewindWaitCall:o.rewindWaitCall,rewindWaitParams:o.rewindWaitParams,rewindTime:o.rewindTime,rewindEase:o.rewindEase,set:Ao.copy(o.masterSet),events:_,rate:c.futureRate,pauseOnBlur:o.pauseOnBlur,easeAmount:o.easeAmount,easeFrequency:o.easeFrequency,override:!1,id:L},i==N.length-1&&function(e){var t=e.call,o=e.params;I.loop&&(!I.count||te<I.count)?e.call=function(){function e(){for(var e=0;e<me.objects.length;e++)me.objects[e].set&&me.objects[e].set(me.values[e]);I.loopWaitCall&&"function"==typeof I.loopWaitCall&&I.loopWaitCall(I.loopWaitParams),oo()}t&&"function"==typeof t&&t(o),I.loopCall&&"function"==typeof I.loopCall&&I.loopCall(I.loopParams),I.loopWait?(zot(c.zimTweens)&&(c.zimTweens={}),(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,{override:I.override}).wait(I.loopWait,!0).call(e)).timeScale=c.futureRate):e()}:e.call=function(){t&&"function"==typeof t&&t(o),zot(h)&&(h=ze),d&&"function"==typeof d&&d(h),Co(L),c.zimLastObj=null},te++}(o),Ao.animate(o),r+=n+e,n=0)}function no(){zot(L)?L=Ao.makeID(null,10):(L=String(L),fe=L),zot(c.zimIdSets)&&(c.zimIdSets={}),zot(c.zimIdSets[L])?zot(c.zimTweens[L])||(pe=L,L=Ao.makeID(null,10),c.zimIdSets[pe]=[pe],c.zimTweens[pe].zimIdSet=pe,c.zimIdSets[pe].push(L)):(pe=L,L=Ao.makeID(null,10),c.zimIdSets[pe].push(L))}function ro(){io(),O&&!Ee&&(N=ao(c,N,j,!0))}function io(){var e;for(ae in c.zimLastObj||(c.zimLastObj={}),N){if("string"==typeof N[ae]&&"transform"!=ae){if("+"==N[ae].substr(0,1))continue;e=(c.zimLastObj&&!zot(c.zimLastObj[ae])?c.zimLastObj:c)[ae],N[ae]=e+Number(N[ae].replace(/\s/g,""))}c.zimLastObj[ae]=(z?c.zimTweenOriginals:N)[ae]}}function lo(e,t){c.zimTween.startPaused=!1,Y?zot(c.zimTween.currentTime)||(c.zimTween.currentTime=c.zimTween.currentTime-c.zimTween.position+e*c.zimTween.duration/100):c.zimTween.setPosition(Math.round(e*c.zimTween.duration/100)),t&&Le&&!1!==N.orient&&Le.getCurvePoint&&(c.rotation=Le.getCurvePoint(e/100,null,null,!0).angle+(at||0)),nt&&void 0!==Re&&(Re=e),c.handlePath&&c.handlePath()}function ao(e,t,o,n){Ee=!0,Le&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&zot((o=o||{}).pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100);var r={};for(ae in t)o&&!zot(o[ae])?r[ae]=o[ae]:r[ae]=e[ae],n&&(e[ae]=t[ae]);return r}function so(){if((0<vt&&(c.waiting=!1),I.loop)&&(A&&"function"==typeof A&&(o=zot(P)?c:P,A(o)),bt&&"function"==typeof bt&&bt(Ct),m)){var e,t,o=Ao.Pick.choose(c.futureRate);if(zot(c.futureRate)||(ge.timeScale=o),zot(De.scale)||(e=Ao.Pick.choose(De.scale)),!O&&ge.step&&ge.step.prev&&ge.step.prev.props)for(var n in ge.step.prev.props)0<=se.indexOf(n)||("string"==typeof(t=Ao.Pick.choose(De[n]))&&"transform"!=n&&"+"!=t.substr(0,1)&&(t=(c.zimLastObj&&!zot(c.zimLastObj[n])?c.zimLastObj:c)[n]+Number(t.replace(/\s/g,""))),c.zimLastObj[n]=z?c.zimTweenOriginals[n]:t,zot(De[n])||(ge.step.prev.props[n]=t),"scaleX"!=n||zot(e)||(ge.step.prev.props.scaleX=e),"scaleY"!=n||zot(e)||(ge.step.prev.props.scaleY=e))}}function co(){wt&&"function"==typeof wt&&wt(xt)}function uo(e){var t=[.4,.75,.9,.95],o=[.99,-.69,.53,.014],n=[1.18,.69,1,.96];return"ballisticIn"==e?e=zik(Ao.zimEase(t)):"ballisticOut"==e?e=zik(Ao.zimEase(t).reverse()):"ballisticInOut"==e?e=zik(Ao.zimEase(t,null,!0)):"snapIn"==e?e=zik(Ao.zimEase(o)):"snapOut"==e?e=zik(Ao.zimEase(o).reverse()):"snapInOut"==e?e=zik(Ao.zimEase(o,null,!0)):"slowmoIn"==e?e=zik(Ao.zimEase(n)):"slowmoOut"==e?e=zik(Ao.zimEase(n).reverse()):"slowmoInOut"==e&&(e=zik(Ao.zimEase(n,null,!0))),e}function ho(){0<It&&(c.waiting=!1),St&&"function"==typeof St&&St(Wt)}function go(){0<It&&(c.waiting=!0),Mt&&"function"==typeof Mt&&Mt(Ot)}function po(e){ro(),0<l&&(c.waiting=!0),(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,{override:I.override}).wait(l,!0).call(function(){c.waiting=!1,o&&"function"==typeof o&&o(zot(n)?c:n),l=0,fo(ge)})).timeScale=c.futureRate,e&&yo(e,ge)}function fo(e){var t=vo();c.set&&!O&&c.set(j),(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,I).to(N,ye,Et).call(go).wait(It,!0).call(ho).to(t,be,Tt).call(bo).wait(vt,!0).call(so)).timeScale=c.futureRate,e&&yo(e,ge),wo()}function mo(e){ro(),0<l&&(c.waiting=!0),(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,{override:I.override}).wait(l,!0).call(function(){l=0,c.waiting=!1,o&&"function"==typeof o&&o(zot(n)?c:n),zo(ge)})).timeScale=c.futureRate,e&&yo(e,ge)}function zo(e){c.set&&!O&&c.set(j),(ge=c.zimTweens[L]=c.zimTween=createjs.Tween.get(c,I).to(N,ye,Et).call(bo).wait(vt,!0).call(so)).timeScale=c.futureRate,e&&yo(e,ge),wo()}function yo(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function bo(){if(c.seriesTweens&&c.seriesTweens.shift(),c.seriesCalls&&c.seriesCalls.shift(),c.seriesParams&&c.seriesParams.shift(),c.paused&&"Sprite"!=c.type)d&&"function"==typeof d&&d(h);else{if(I.loop){if(!(0<yt))return 0<vt&&(c.waiting=!0),void co();if(te<yt)return 0<vt&&(c.waiting=!0),co(),void te++;z?c.set&&c.set(vo()):c.set&&c.set(N)}var e;F?Co(L):c.pauseAnimate(!0,L),!I.loop&&A&&"function"==typeof A&&(e=zot(P)?c:P,A(e)),d&&"function"==typeof d&&d(h)}}function vo(){var e,t={};for(e in N)if(S&&c.style)zot(j[e])||O?t[e]="transform"==e?c.style[e]:zum(c.style[e]):t[e]=j[e];else if(zot(j[e])||O)if("."==e.substr(0,1)){for(var o=e.split("."),n=c,r=1;r<o.length;r++)n=n[o[r]];t[e]=n}else t[e]=c[e];else t[e]=j[e];return t}function wo(){ge.zimObj=N,ge.zimTicker=jt,ge.zimPaused=Zt,pe&&(ge.zimIdSet=pe),fe&&(zot(Ao.idSets)&&(Ao.idSets={}),zot(Ao.idSets[fe])?Ao.idSets[fe]=[c]:Ao.idSets[fe].indexOf(c)<0&&Ao.idSets[fe].push(c)),Ao.animatedObjects||(Ao.animatedObjects=new Ao.Dictionary(!0)),Ao.animatedObjects.add(c,!0)}function Co(e){var t,o;c.tweenStates&&c.tweenStates[e]&&delete c.tweenStates[e],zot(c.zimTweens)||zot(c.zimTweens[e])||(c.zimX=null,c.zimY=null,function(e){if(c.zimBusy){for(var t in e)delete c.zimBusy[t];Ao.isEmpty(c.zimBusy)&&(c.zimBusy=null)}}(c.zimTweens[e].zimObj),c.zimTweens[e].paused=!0,xo(e),!zot(t=c.zimTweens[e].zimIdSet)&&c.zimIdSets&&((o=c.zimIdSets[t])&&o.splice(o.indexOf(e),1),o&&0==o.length&&(delete c.zimIdSets[t],Ao.isEmpty(c.zimIdSets)&&delete c.zimIdSets)),"Pen"==c.type&&c.zimOnPath&&(c.stop(),c.zimOnPath=!1),delete c.zimTweens[e],c.zimLastObj=null,Ao.isEmpty(c.zimTweens)&&c.stopAnimate(null,null,null,!1,!0),c.zimTweens&&c.zimTweens[e]||c.zimIdSets&&c.zimIdSets[t||e]||Ao.idSets&&Ao.idSets[t||e]&&(Ao.idSets[t||e],0<=(o=Ao.idSets[t||e].indexOf(c))&&Ao.idSets[t||e].splice(o,1),Ao.idSets[t||e].length<=0&&(delete Ao.idSets[t||e],Ao.isEmpty(Ao.idSets)&&delete Ao.idSets)))}function xo(o){!function(){var e=c.zimTweens[o].zimTicker;if(c.zimTweens[o].extraTickers)for(var t=0;t<c.zimTweens[o].extraTickers.length;t++)Ao.Ticker.remove(c.zimTweens[o].extraTickers[t]);c.zimTweens[o].requestID&&cancelAnimationFrame(c.zimTweens[o].requestID),e&&setTimeout(function(){e&&Ao.Ticker.remove(e),e=null},200)}()}function ko(e,t){var o=c.zimTweens[e];(o.paused=t)!=o.zimPaused&&((o.zimPaused=t)?o.zimTicker&&(o.zimAnimateTimeout=setTimeout(function(){Ao.Ticker.remove(o.zimTicker)},200)):(o.startPaused=!1,clearTimeout(o.zimAnimateTimeout),o.zimTicker&&(o.zimTicker=Ao.Ticker.add(o.zimTicker,Me))))}function To(e){for(var t=[],o=0;o<e.length;o++)c.zimIdSets&&!zot(c.zimIdSets[e[o]])?t=t.concat(c.zimIdSets[e[o]]):t.push(e[o]);return t}},Ao.stopAnimate=function(e,t){if(z_d("45.12"),zot(e)){if(Ao.animatedObjects)for(r=Ao.animatedObjects.length-1;0<=r;r--)Ao.animatedObjects.objects[r].stopAnimate(null,t)}else if(Array.isArray(e)||(e=[e]),Ao.idSets)for(var o=0;o<e.length;o++){var n=e[o];if(Ao.idSets[n])for(var r=Ao.idSets[n].length-1;0<=r;r--)Ao.idSets[n][r].stopAnimate(n,t)}},Ao.stopZimAnimate=function(e){z_d("45.1"),Ao.stopAnimate(e)},Ao.pauseAnimate=function(e,t){var o;if(z_d("45.22"),zot(e)&&(e=!0),zot(t)||"pauseOnBlur"==t){if(Ao.animatedObjects)for(o=Ao.animatedObjects.length-1;0<=o;o--)Ao.animatedObjects.objects[o].pauseAnimate(e,t)}else if(Array.isArray(t)||(t=[t]),Ao.idSets)for(var n=0;n<t.length;n++){var r=t[n];if(Ao.idSets[r])for(o=Ao.idSets[r].length-1;0<=o;o--)Ao.idSets[r][o].pauseAnimate(e,r)}},Ao.pauseZimAnimate=function(e,t){z_d("45.2"),Ao.pauseAnimate(e,t)},Ao.wiggle=function(r,i,l,a,s,c,u,e,d,h,g,p,f,t,m,z){if(o=zob(Ao.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur"))return o;if(z_d("45.25"),zot(r)||zot(l)||zot(a))return r;zot(s)&&(s=a);var o=Po(c,null,40);zot(c)&&(c="s"==o?1:1e3),zot(u)&&(u=c),Bo(u,o,40),zot(h)&&(h="quadInOut"),zot(g)&&(g=!1),zot(p)&&(p=Ao.makeID()),zot(d)&&(d="both"),zot(f)&&(f="both"),zot(t)&&(t=!0),zot(m)&&(m=0),Bo(e,o,40),zot(e)||(r.wiggleTimeout=setTimeout(function(){r.stopAnimate(p),r.dispatchEvent("wigglestop")},e*("s"==o?1e3:1)));var y,b=0;function v(){var e=Ao.rand(Ao.Pick.choose(c),Ao.Pick.choose(u),!1),t={},o={};o[i]=Ao.Pick.choose(l),n="negative"==d||0==b&&"negative"==f?-Ao.rand(Ao.Pick.choose(a),Ao.Pick.choose(s),g):"positive"==d||0==b&&"positive"==f?Ao.rand(Ao.Pick.choose(a),Ao.Pick.choose(s),g):0==b?Ao.rand(Ao.Pick.choose(a),Ao.Pick.choose(s),g,!0):Ao.rand(Ao.Pick.choose(a),Ao.Pick.choose(s),g)*Ao.sign(y)*-1,t[i]=Ao.Pick.choose(l)+n,0==b&&(e/=2),y=n,b++;var n=r.futureRate;"negative"==d||"positive"==d?Ao.animate({target:r,obj:t,set:o,ease:h,time:2*e,wait:zik(m),rewind:!0,override:!1,call:v,id:p,ticker:!!r.stage,timeCheck:!1,pauseOnBlur:z}):Ao.animate({target:r,obj:t,ease:h,time:e,wait:zik(m),override:!1,call:v,id:p,ticker:!!r.stage,timeCheck:!1,pauseOnBlur:z}),n&&(r.futureRate=n)}return r.addTo&&!r.stage?r.added(v):v(),r},Ao.loop=function(e,t,o,n,r,i){var l;if(l=zob(Ao.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(Ao.zimLoopCheck||z_d("45.3"),Ao.zimLoopCheck=!0,!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1),e.constructor===Number&&(e=Number(e)),e.constructor===String&&(e=String(e));var a,s,c,u,d="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":"string"==typeof e?"string":e instanceof HTMLCollection?"htmlcollection":"invalid";if("container"!=d||e.addChild)if("number"==d||"string"==d||"array"==d||"nodelist"==d||"htmlcollection"==d){if(0!=(c=g((a="number"==d?e:e.length)-1))){if(o){for(s=r;i<=s;s-=n)if(void 0!==(u="number"==d?t(s,c,r,i,e):t("array"==d||"string"==d?e[s]:e.item(s),s,c,r,i,e)))return u}else for(s=r;s<=i;s+=n)if(void 0!==(u="number"==d?t(s,c,r,i,e):t("array"==d||"string"==d?e[s]:e.item(s),s,c,r,i,e)))return u;return!0}}else if("object"==d){a=0;var h=[];for(s in e)a++,h.push(s);if(0!=(c=g(a-1))){if(o){for(s=r;i<=s;s-=n)if(void 0!==(u=t(h[s],e[h[s]],s,c,r,i,e)))return u}else for(s=r;s<=i;s+=n)if(void 0!==(u=t(h[s],e[h[s]],s,c,r,i,e)))return u;return!0}}else if(0!=(c=g(e.numChildren-1))){if(o){for(s=r;i<=s;s-=n)if(void 0!==(u=t(e.getChildAt(s),s,c,r,i,e)))return u}else for(s=r;s<=i;s+=n)if(void 0!==(u=t(e.getChildAt(s),s,c,r,i,e)))return u;return!0}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},Ao.scaleTo=function(e,t,o,n,r,i,l){if(c=zob(Ao.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly, simple"))return c;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("scaleTo",arguments),e;if(z_d("43"),zot(t)&&(t=WW.zdf&&WW.zdf.stage?WW.zdf.stage:null),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),e;if(zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),e;zot(o)&&(o=-1),zot(n)&&(n=-1),-1==o&&-1==n&&(o=n=100,zot(r)&&(r="fill")),zot(r)&&(r="fit"),"smallest"==r?r="fit":"biggest"==r||"outside"==r||"largest"==r?r="fill":"both"!=r&&"stretch"!=r||(r="full"),zot(i)&&(i=!1),zot(l)&&(l=!1);var a,s,c=t.getBounds().width*o/100*(i?1:t.scaleX),i=t.getBounds().height*n/100*(i?1:t.scaleY);return"Stage"!=t.type&&"StageGL"!=t.type||(c=t.width*o/100,i=t.height*n/100),l?(a=e.getBounds().height,s=e.getBounds().width):(a=(l=Ao.boundsToGlobal(e)).height/e.scaleX,s=l.width/e.scaleY,(isNaN(a)||isNaN(s)||5e3<a)&&(a=e.getBounds().height,s=e.getBounds().width)),-1!=o&&-1!=n||"full"==r?"full"==r?(e.scaleX=-1!=o?c/s:e.scaleX,e.scaleY=-1!=n?i/a:e.scaleY):(r="fill"==r?Math.max(c/s,i/a):Math.min(c/s,i/a),Ao.sca(e,r)):-1==o?Ao.sca(e,i/a):Ao.sca(e,c/s),e},Ao.fit=function(e,t,o,n,r,i){if(p=zob(Ao.fit,arguments,"obj, left, top, width, height, type"))return p;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("fit",arguments),e;if(z_d("46"),!zot(e)&&e.getBounds){if(e.getBounds()){if(zot(t)){if(!e.stage)return void zogy("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!e.stage.getBounds())return void zogy("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=t=0,n=e.stage.getBounds().width,r=e.stage.getBounds().height}!0===i?i="fit":!1===i&&(i="fill"),zot(i)&&(i="fit"),e.scaleX=e.scaleY=1;var l,a,s,c,u,d=n,h=r,g=e.getBounds().width,p=e.getBounds().height;return"full"==i?(e.scaleX=s=d/g,e.scaleY=c=h/p,l=d,a=h):("fit"==i?u=g/p<=d/h?h/p:d/g:"fill"==i&&(u=g/p<=d/h?d/g:h/p),s=c=u),l=g*(e.scaleX=s),a=p*(e.scaleY=c),e.x=(e.regX-e.getBounds().x)*s+t+(d-l)/2,e.y=(e.regY-e.getBounds().y)*c+o+(h-a)/2,{x:e.x,y:e.y,width:l,height:a,scale:u,scaleX:s,scaleY:c,bX:t,bY:o,bWidth:n,bHeight:r}}zogy("zim methods - fit(): please setBounds() on object")}},Ao.boundsCheck=!1,Ao.boundsToGlobal=function(e,t,o,n,r){if(Ao.boundsCheck||(z_d("40"),Ao.boundsCheck=!0),!zot(e)&&e.getBounds){if(zot(o)&&(o=!1),r&&!e.getBounds&&!e.getBounds())return e;var i,l,a,s=e.getBounds();if(s||!zot(t)){t&&(s=t),r=r&&r.type&&"Stage"!=r.type&&"StageGL"!=r.type?(i=e.localToLocal(s.x,s.y,r),l=e.localToLocal(s.x+s.width,s.y,r),a=e.localToLocal(s.x+s.width,s.y+s.height,r),e.localToLocal(s.x,s.y+s.height,r)):o?(i=e.globalToLocal(s.x,s.y),l=e.globalToLocal(s.x+s.width,s.y),a=e.globalToLocal(s.x+s.width,s.y+s.height),e.globalToLocal(s.x,s.y+s.height)):(i=e.localToGlobal(s.x,s.y),l=e.localToGlobal(s.x+s.width,s.y),a=e.localToGlobal(s.x+s.width,s.y+s.height),e.localToGlobal(s.x,s.y+s.height));o=Math.min(i.x,l.x,a.x,r.x),e=Math.min(i.y,l.y,a.y,r.y),s=Math.max(i.x,l.x,a.x,r.x),r=Math.max(i.y,l.y,a.y,r.y);return new createjs.Rectangle(o,e,s-o,r-e)}zogy("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},Ao.resetBounds=function(e,t,o,n,r,i){var l,a,s,c;return(l=zob(Ao.resetBounds,arguments,"obj, a, b, c, d, margin"))?l:(z_d("40.5"),r=zot(n)?(s=t,c=a=0,o):(a=t,s=n,c=o,r),zot(r)&&(r=s),zot(t)?e.setBounds(null):e.setBounds(a,c,s,r),i&&(o=e.getBounds())&&e.setBounds(o.x-i,o.y-i,o.width+2*i,o.height+2*i),e)},Ao.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},Ao.duplicate=function(e,t){z_d("45.6");var o,n=e.clone(t);for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&null==n[o]&&"parent"!=o&&"zimTouch"!=o&&(n[o]=e[o]);return n},Ao.expand=function(e,t,o,n,r){var i,l;if(l=zob(Ao.expand,arguments,"obj, padding, paddingVertical, paddingRight, paddingBottom"))return l;if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zogy("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t),l=zot(n)&&zot(r)?(i=n=t,r=o):(zot(n)&&(n=t),zot(r)&&(r=o),i=t,o);t=e.getBounds(),o=new createjs.Shape;return o.graphics.f("0").r(t.x-i,t.y-l,t.width+i+n,t.height+l+r),e.hitArea=o,e},Ao.setSwipe=function(i,e){if(z_d("34"),!zot(i)&&i.on)return i.zimNoSwipe=!e||null,i instanceof createjs.Container&&function e(t){var o=t.numChildren;var n;for(var r=0;r<o;r++)(n=t.getChildAt(r)).zimNoSwipe=i.zimNoSwipe,n instanceof createjs.Container&&e(n)}(i),i},Ao.setMask=function(o,n,r){if(z_d("50.1"),zot(o)&&zogy("zim methods - setMask(): please provide obj"),zot(n))return e(),o;var i,l=o.stage||(WW.zdf?WW.zdf.stage:null);function e(){o.zimMask&&o.zimMask.parent&&o.zimMask.parent.removeChild(o.zimMask),o.zimMask=null,o.zimMaskTicker&&Ao.Ticker.remove(o.zimMaskTicker),o.mask=null}function t(){if(r&&(!l||!n.stage))return o;var e,t;i&&i.dispose&&i.dispose(),i=null,o.zimMask=n.zimMask=i=n.shape.clone(),Ao.copyMatrix(i,n),n.addChildAt(i,0),i.alpha=0,o.parent&&(e=n.getConcatenatedMatrix().decompose(),t=o.parent.getConcatenatedMatrix().decompose(),i.scaleX=e.scaleX/t.scaleX,i.scaleY=e.scaleY/t.scaleY,i.rotation=(e.rotation||0)-(t.rotation||0),t=n.localToLocal(n.shape.x+n.regX,n.shape.y+n.regY,o.parent),i.x=t.x,i.y=t.y),o.mask=i}return o.zimMaskOriginal&&o.zimMaskOriginal!=n&&e(),zot(r)&&(r=!("Blob"!=n.type&&zot(n.zimDown)&&zot(n.transformControls)&&zot(n.zimTouch)&&zot(n.zimTweens)),n.zimMaskDynamic=r),(o.zimMaskOriginal=n).zimMaskApply=function(){o.zimMaskTicker&&Ao.Ticker.remove(o.zimMaskTicker),o.zimMaskTicker=Ao.Ticker.add(t)},n&&n.shape?(t(),r&&n.zimMaskApply()):(i=n,o.mask=i),o},Ao.outline=function(t,e,o,n){if(h=zob(Ao.outline,arguments,"obj, color, size, boundsOnly"))return h;if("AC"==t.type&&WW.zdf)return WW.zdf.ac("outline",arguments),t;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zogy("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zogy("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zogy("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zogy("zim methods - outline(): object should be on stage first"),t;if(zot(e)&&(e="brown"),zot(o)&&(o=2),o<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var r=t.getBounds(),i=t.ZIMoutlineShape=t.ZIMoutlineShape||new Ao.Shape;i.type="zimOutlineShape";var l=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC||new Ao.Shape;l.type="zimOutlineShape";var a=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var s=t.localToLocal(r.x,r.y,a),c=t.localToLocal(r.x+r.width,r.y,a),u=t.localToLocal(r.x+r.width,r.y+r.height,a),d=t.localToLocal(r.x,r.y+r.height,a),h=t.localToLocal(0,0,a),r=i.graphics.c(),a=l.graphics.c();r.s(e).ss(o).mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).cp(),n||(a.s("white").ss(o+2),a.mt(-11,0).lt(11,0),a.mt(0,-11).lt(0,11),a.s(e).ss(o),a.mt(-10,0).lt(10,0),a.mt(0,-10).lt(0,10),a.cp(),l.x=h.x,l.y=h.y,l.rotation=t.rotation,r.s("white").ss(o+2).dc(t.x,t.y,16),r.s(e).ss(o).dc(t.x,t.y,16)),t.parent.removeChild(i),t.parent.removeChild(l);o=t.parent.getChildIndex(t);return t.parent.addChildAt(l,o+1),t.parent.addChildAt(i,o+1),i.mouseEnabled=!1,l.mouseEnabled=!1,t},Ao.blendmodes=function(t,e,o){z_d("47.05"),zot(e)&&(e=1);var n=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];!1===o&&n.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var r=0,i=Ao.interval(e,function(){var e=n[r%n.length];r++,t.ble(e),zogb(e),t.stage&&t.stage.update()});return t.on("mousedown",function(){i.pause(!i.paused)}),t},Ao.STYLE=null,Ao.ignore="ignore",Ao.getStyle=function(e,t,o){Ao.STYLECHECK||(z_d("50.34"),Ao.STYLECHECK=!0);var n,r,i=["pos","addTo","center","centerReg","mov","drag","transform","gesture","outline","bounds","animate","wiggle","cache"],l=WW.STYLE||Ao.STYLE,a=l;for(r in l&&l.type&&"string"==typeof l.type&&(l.ttype=l.type,delete l.type),l)n=l[r],r.match(/^[(A-Z)]/)?(l.type||(l.type={}),l.type[r]?l.type[r]=Ao.merge(l.type[r],n):l.type[r]=n,delete l[r]):n.constructor!=={}.constructor||"group"==r||"type"==r||Ao.isPick(n)||-1!=i.indexOf(r)||(l.group||(l.group={}),l.group[r]?l.group[r]=Ao.merge(l.group[r],n):l.group[r]=n,delete l[r]);if(a=zot(a)?{}:Ao.copy(a),zot(o))o={};else for(f=0;f<i.length;f++)delete o[i[f]];var s,c,u,d=o,h=a.type;if(h&&delete a.type,!zot(t)&&!zot(a.group)){for(var g=t.split(","),p={},f=0;f<g.length;f++){var m=g[f].trim();zot(a.group[m])||(p=Ao.merge(p,a.group[m]))}delete a.group}for(s in zot(e)||zot(h)||zot(h[e])||(a=Ao.merge(a,h[e])),zot(t)||zot(p)||(a=Ao.merge(a,p)),a)if(d[s])delete a[s];else if("ignore"!=(n=-1!=i.indexOf(s)||a.delayPick?a[s]:Ao.Pick.choose(a[s]))){for(u in n&&n.constructor==={}.constructor&&(n=Ao.copy(n,!0,!1)),a)(c=u.match(/^(.+)gColor$/))&&(a[c[1]+"ackgroundColor"]=a[u],delete a[u]);a[s]=n}else delete a[s];return(a=Ao.merge(a,d)).ttype&&!a.type&&(a.type=a.ttype,delete a.ttype),!1===a.style?{}:a},Ao.styleTransforms=function(t,o){var n,e=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","regX","regY","blendMode"];if(o){for(o.add&&t.addTo(),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg),n=0;n<e.length;n++)null!=o[e[n]]&&(t[e[n]]=Ao.Pick.choose(o[e[n]]));if(o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x||0,o.bounds.y||0,o.bounds.width||100,o.bounds.height||100),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(Ao.Pick.choose(o.loc.x),Ao.Pick.choose(o.loc.y)):t.loc(Ao.Pick.choose(o.loc))),o.pos&&(o.pos.constructor==={}.constructor?t.pos(Ao.Pick.choose(o.pos.x),Ao.Pick.choose(o.pos.y),Ao.Pick.choose(o.pos.right),Ao.Pick.choose(o.pos.bottom),Ao.Pick.choose(o.pos.container),Ao.Pick.choose(o.pos.index),o.pos.add,Ao.Pick.choose(o.pos.reg),Ao.Pick.choose(o.pos.regX),Ao.Pick.choose(o.pos.regY)):("left"!=(r=Ao.Pick.choose(o.pos))&&"top"!=r||t.pos(),"right"==r&&t.pos({right:!0}),"bottom"==r&&t.pos({bottom:!0}),"rightbottom"!=r&&"bottomright"!=r||t.pos({right:!0,bottom:!0}),"center"==r&&t.center())),(o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(Ao.Pick.choose(o.mov.x),Ao.Pick.choose(o.mov.y)):t.mov(Ao.Pick.choose(o.mov))),o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate)for(Array.isArray(o.animate)||(o.animate=[o.animate]),n=0;n<o.animate.length;n++)!function(){var e=o.animate[n];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}();if(o.wiggle)for(Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]),n=0;n<o.wiggle.length;n++)!function(){var e=o.wiggle[n];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}();o.expand&&t.expand(!0===o.expand?null:o.expand),o.cache&&(o.cache.constructor==={}.constructor?o.cache.x?t.cache(Ao.Pick.choose(o.cache.x),Ao.Pick.choose(o.cache.y),Ao.Pick.choose(o.cache.x),Ao.Pick.choose(o.cache.y)):t.cache(Ao.Pick.choose(o.cache.width),Ao.Pick.choose(o.cache.height)):t.cache());var r=WW.STYLE||Ao.STYLE;!r||!0!==r.once&&r.once!=t.type||(WW.STYLE?WW.STYLE={}:Ao.STYLE={})}},Ao.Style={remembered:{},clear:function(){return WW.STYLE&&(WW.STYLE={}),Ao.STYLE&&(Ao.STYLE={}),Ao.Style},clearTypes:function(){return delete(WW.STYLE||Ao.STYLE).types,Ao.Style},clearGroups:function(){return delete(WW.STYLE||Ao.STYLE).groups,Ao.Style},remember:function(e){zot(e)&&(e="default");var t=(t=WW.STYLE||Ao.STYLE)||(zns?Ao.STYLE={}:WW.STYLE={});return Ao.Style.remembered[e]=Ao.copy(t,!0),Ao.Style},clearRemembered:function(e){return zot(e)?Ao.Style.remembered={}:delete Ao.Style.remembered[e],Ao.Style},recall:function(e){return zot(e)&&(e="default"),WW.STYLE?WW.STYLE=Ao.Style.remembered[e]:Ao.STYLE=Ao.Style.remembered[e],Ao.Style},add:function(e){var t=(t=WW.STYLE||Ao.STYLE)||(zns?Ao.STYLE={}:WW.STYLE={});return WW.STYLE?WW.STYLE=Ao.merge(t,e):Ao.STYLE=Ao.merge(t,e),Ao.Style},addType:function(e,t){var o=WW.STYLE||Ao.STYLE;return(o=o||(zns?Ao.STYLE={}:WW.STYLE={})).type||(o.type={}),o.type[e]=t,Ao.Style},addGroup:function(e,t){var o=WW.STYLE||Ao.STYLE;return(o=o||(zns?Ao.STYLE={}:WW.STYLE={})).group||(o.group={}),o.group[e]=t,Ao.Style},remove:function(e){var t=WW.STYLE||Ao.STYLE;return delete(t=t||(zns?Ao.STYLE={}:WW.STYLE={}))[e],Ao.Style},removeType:function(e){var t=WW.STYLE||Ao.STYLE;return(t=t||(zns?Ao.STYLE={}:WW.STYLE={})).type&&delete t.type[e],Ao.Style},removeGroup:function(e){var t=WW.STYLE||Ao.STYLE;return(t=t||(zns?Ao.STYLE={}:WW.STYLE={})).group&&delete t.group[e],Ao.Style}},Ao.PATH=null,Ao.TIME="seconds",Ao.TIMECHECK=!1,Ao.DIR="ltr",Ao.SEEDRAND=null,Ao.SEEDRANDCOUNT=0,Ao.ANIMATE=!0,Ao.OPTIMIZE=!1,Ao.ACTIONEVENT="mousedown",Ao.DEFAULTWIRE="currentValue",Ao.KEYFOCUS=null,Ao.POSREG=!1,Ao.DRAGALL=!1,Ao.MOBILE="default",Ao.Ticker={stages:null,myUpdate:null,alwaysList:new Ao.Dictionary,list:new Ao.Dictionary,wire:new Ao.Dictionary,setFPS:function(e,t){zot(e)&&zot(t)?t=e=60:zot(e)?e=60:zot(t)&&(t=e),Ao.Ticker.framerate=createjs.Ticker.framerate=Ao.mobile()?e:t},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(e,t){z_d("30");var o=Ao.Ticker;return o.has(e,t)?e:(!zot(t)&&t.update||(t=WW.zdf.stage),zot(e)||"function"!=typeof e?void zogy("zim.Ticker.add() - only add functions"):(o.list.at(t)?o.list.at(t).push(e):o.list.add(t,[e]),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.framerate||o.setFPS(),e))},addWire:function(e,t){if(z_d("30"),zot(t[0]))return e;var o=Ao.Ticker;o.wire.add(e,t);var n=t[0][t[1]];return t[4]&&(n=t[4](n,"from")),t[3]&&(e[t[6]]=t[7]=n),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.framerate||o.setFPS(),e},rawID:{},raw:function(o){z_d("30");var n=Ao.makeID("letters",7);return function e(t){o(t),Ao.Ticker.rawID[n]=requestAnimationFrame(e)}(),n},removeRaw:function(e){cancelAnimationFrame(Ao.Ticker.rawID[e]),delete Ao.Ticker.rawID[e]},call:function(e){for(var t,o,n=Ao.Ticker,r=[],i=0;i<n.list.length;i++){t=n.list.objects[i],o=n.list.values[i];for(var l=0;l<o.length;l++)o[l](e);var a=!1;(n.alwaysList.at(t)||0<o.length&&(zot(n.update)&&!Ao.OPTIMIZE&&(zns||!WW.OPTIMIZE)||n.update))&&(a=!0),a&&r.indexOf(t)<0&&r.push(t)}for(i=n.wire.length-1;0<=i;i--){var s,c=n.wire.objects[i],u=n.wire.values[i];u&&((s=c[u[6]])!=u[7]&&(u[4]&&(s=u[4](s,"to",u[7])),u[0][u[1]]=u[7]=s,u[5]&&u[5](s),(t=u[0].stage)&&r.indexOf(t)<0&&r.push(t)),u[2]&&u[0]&&(s=u[0][u[1]],u[7]!=s&&(u[4]&&(s=u[4](s,"from",u[7])),c[u[6]]=u[7]=s,u[5]&&u[5](s),(t=c.stage)&&r.indexOf(t)<0&&r.push(t))))}if(0==n.list.length)for(i=0;i<n.alwaysList.length;i++)t=n.alwaysList.objects[i],r.indexOf(t)<0&&r.push(t);var d=r.length;for(i=0;i<d;i++)r[i].update()},always:function(e){z_d("30");var t=Ao.Ticker;t.framerate||t.setFPS(),!zot(e)&&e.update||(e=WW.zdf.stage),t.alwaysList.add(e,!0),t.ticker||(t.ticker=createjs.Ticker.on("tick",t.call))},alwaysOff:function(e){var t=Ao.Ticker;!zot(e)&&e.update||(e=WW.zdf.stage),t.alwaysList.remove(e)},remove:function(e){var t=Ao.Ticker;if(zot(e)||"function"!=typeof e)zogy("zim.Ticker - only remove functions");else{for(var o=0;o<t.list.length;o++){var n=t.list.values[o].indexOf(e);-1<n&&t.list.values[o].splice(n,1)}0<t.alwaysList.length||0<t.list.length||0<t.wire.length||(createjs.Ticker.off("tick",t.ticker),t.ticker=null)}},removeAll:function(e){for(var t,o=Ao.Ticker,n=0;n<o.list.length;n++)t=o.list.objects[n],!zot(e)&&e!==t||(o.list.values[n]=[]);0<o.alwaysList.length||0<o.list.length||0<o.wire.length||(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},removeWire:function(e,t,o,n){var r=Ao.Ticker;if(zot(e)&&zot(t)&&zot(o)&&zot(n))r.wire.clear();else for(var i=r.wire.length-1;0<=i;i--){var l=r.wire.objects[i],a=r.wire.values[i];a&&(e&&l!=e||t&&a[0]!=t||o&&a[1]!=o||n&&a[6]!=n||(r.wire.objects.splice(i,1),r.wire.values.splice(i,1)))}0<r.alwaysList.length||0<r.list.length||0<r.wire.length||(createjs.Ticker.off("tick",r.ticker),r.ticker=null)},has:function(e,t){return!zot(t)&&t.update||(t=WW.zdf.stage),Ao.Ticker.list&&Ao.Ticker.list.at(t)&&0<=Ao.Ticker.list.at(t).indexOf(e)},dispose:function(e){for(var t,o=Ao.Ticker,n=0,r=o.list.length-1;0<=r;r--)t=o.list.objects[r],zot(e)||e===t?(o.list.remove(e),o.alwaysList.remove(e)):n+=o.list.values[r].length;if(!(0<o.alwaysList.length))return 0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null),!0}},Ao.Ticker.setFPS(),Object.defineProperty(Ao.Ticker,"update",{get:function(){return Ao.Ticker.myUpdate},set:function(e){var t=Ao.Ticker;"boolean"!=typeof e&&(e=null),t.myUpdate=e,!1===t.myUpdate&&(cancelAnimationFrame(t.ticker),t.alwaysList=new Ao.Dictionary)}}),Ao.Pages=function(z,y,e,t,b,o,n,r,i){var l;if(l=zob(Ao.Pages,arguments,"pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",this))return l;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=r;var i=!1===n?{}:Ao.getStyle(this.type,this.group,i),a=Po(e);if(zot(z)&&(z=null!=i.pages?i.pages:[]),this.pages=z,zot(y)&&(y=null!=i.transition?i.transition:"none"),zot(e)&&(e=null!=i.speed?i.speed:"s"==a?.2:200),zot(t)&&(t=null!=i.transitionTable?i.transitionTable:[]),this.transitionTable=t,zot(o)&&(o=null!=i.arrowDisableColor?i.arrowDisableColor:Ao.grey),this.arrowDisableColor=o,zot(b)&&(b=null!=i.holder?i.holder:null),zot(b)&&WW.zdf&&(b=WW.zdf.stage),b.getBounds&&b.getBounds()){this.speed=e,this.active=!0;var v=this;v.transitioning=!1;var w,C,x=b.getBounds().width,k=b.getBounds().height;"none"==y&&t==[]||m();for(var s,c,u,d,T=["left","right","up","down"],h=!0,g=0;g<z.length;g++)(d=z[g]).constructor!={}.constructor&&(d=z[g]={page:z[g]}),d.swipe&&(h=!1);for(g=0;g<z.length;g++)(d=z[g]).constructor!=={}.constructor&&(d=z[g]={page:z[g]}),h&&(c=z[g-1],u=z[g+1],d.swipe=[c?c.page:null,u?u.page:null]),E(d.page,d.swipe);var p,A=this.page=z[0]?z[0].page:null;zot(this.page)||(this.index=0),this.addChild(A),I(A),this.swipe=new Ao.Swipe(b);var P=!1,f=this.swipe.on("swipe",function(e){var t;!v.active||"none"!=(t=e.currentTarget.direction)&&(e="","left"==t?e="right":"right"==t?e="left":"up"==t?e="down":"down"==t&&(e="up"),t=e,e=T.indexOf(t),s=A.zimSwipeArray[e],p=[s,t,null,null,!0],v.page=A,v.nextPage=s,v.direction=t,v.dispatchEvent("swipe"),setTimeout(function(){P||v.go(s,t,null,null,!0)},50))});this.addPage=function(e,t){E(e,t),v.pages.push({page:e}),A?e.parent&&e.parent.removeChild(e):(A=v.page=e,v.addChild(A))},this.removePage=function(o){S(o),v.currentPage==o&&(v.removeChild(o),b.stage&&b.stage.update()),Ao.loop(v.pages,function(e,t){e.page!=o&&e!=o||v.pages.splice(t,1)},!0),o.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);t={page:e,swipe:t};t.page.zimSwipeArray=t.swipe||[]},this.pause=function(){P=!0},this.unpause=function(){P&&v.go(p[0],p[1],p[2],p[3],p[4])};var B=!0;this.go=function(e,t,o,n,r){if("number"==typeof e){var i=v.pages[e];if(zot(i))return;e=i.page}setTimeout(function(){P=!1},200);for(var l=[{x:x},{x:-x},{y:k},{y:-k}],i=[{x:x/2,alpha:0},{x:-x/2,alpha:0},{y:k/2,alpha:0},{y:-k/2,alpha:0}],a=y,s=v.speed,c=0;c<v.transitionTable.length;c++)if(v.transitionTable[c][0]==A&&v.transitionTable[c][1]==e){a=v.transitionTable[c][2],zot(v.transitionTable[c][3])||(s=v.transitionTable[c][3]);break}function u(e){e[0].uncache(),e[1].uncache(),v.transitioning=!1,v.dispatchEvent("pagetransitioned"),v.removeChild(v.lastPage),"fan"==o&&("right"==t||"down"==t?(v.lastPage.rotation=0,v.lastPage.regY=0,v.lastPage.mov(0,-v.lastPage.height)):(v.page.rotation=0,v.page.regY=0,v.page.mov(0,-v.lastPage.height))),v.removeChild(w),v.removeChild(C),I(A),B=!0}function d(e){v.removeChild(v.lastPage),Ao.animate(e.shift(),{alpha:0},v.speed/2,null,u,e)}if(zot(o)&&(o=a),zot(n)&&(n=s),v.speed=n,v.direction=t,""==e||null==e)v.page=A,v.dispatchEvent("nothing");else if("string"==typeof e)v.page=A,v.dispatchEvent(e);else if(e!=A){zot(t)&&(t="right");n=T.indexOf(t);if(B){B=!1,e.x=0,e.y=0,e.alpha=e.zimOriginalAlpha;var h,g;0<=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"].indexOf(o)&&(h=o,g=!0,o="slide");var p,f,m;for(0<=["explodeDark","explodeLight","explodeZIM"].indexOf(o)&&(p=o,g=!0,o="fade"),"Emitter"==o.type&&(o=(g=o).horizontal||o.vertical?"slide":"fade"),v.transitioning=!0,"slide"==o?(e.x=-(0|l[n].x),e.y=-(0|l[n].y),e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),v.addChild(e),v.addChild(A),Ao.animate(A,l[n],v.speed,null,u,[A,e]),Ao.animate(e,[{x:0},{x:0},{y:0},{y:0}][n],v.speed)):"reveal"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),v.addChild(e),v.addChild(A),Ao.animate(A,i[n],v.speed,null,u,[A,e])):"fade"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),Ao.animate(A,{alpha:0},v.speed,null,u,[A,e])):"black"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),w.alpha=0,v.addChild(w),Ao.animate(w,{alpha:1},v.speed/2,null,d,[w,A,e])):"clear"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=0,v.addChild(e),v.addChild(A),Ao.animate(A,{alpha:0},v.speed/2),Ao.animate(e,{alpha:1},v.speed/2,null,u,[A,e],v.speed/2)):"white"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),C.alpha=0,v.addChild(C),Ao.animate(C,{alpha:1},v.speed/2,null,d,[C,A,e])):"fan"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,"right"==t||"down"==t?(v.addChild(e),v.addChild(A),A.regY=A.height,A.mov(0,A.height),Ao.animate(A,{rotation:-90},v.speed,null,u,[A,e])):(v.addChild(A),v.addChild(e),e.regY=A.height,e.mov(0,A.height),e.rotation=-90,Ao.animate(e,{rotation:0},v.speed,null,u,[A,e]))):(v.transitioning=!1,v.addChild(e),v.removeChild(A),B=!0),g&&(l=n<2,h||"slide"==o?(m=h?("lineDark"==h||"lineLight"==h?f=new Ao.Rectangle(l?30:x+5,l?k+5:30,"lineDark"==h?Ao.dark:Ao.white).alp(.2):"lineZIM"==h?f=new Ao.Rectangle(l?50:x+5,l?k+5:50,[Ao.green,Ao.yellow,Ao.orange,Ao.pink,Ao.blue]).alp(.5):"pixelDark"==h||"pixelLight"==h?f=new Ao.Rectangle(40,40,Ao.clear,"pixelDark"==h?Ao.dark:Ao.white,2).alp(.7):"pixelZIM"==h?f=new Ao.Rectangle(40,40,[Ao.green,Ao.yellow,Ao.orange,Ao.pink,Ao.blue]).alp(.7):"bubbleDark"==h||"bubbleLight"==h?f=new Ao.Circle(30,Ao.clear,"bubbleDark"==h?Ao.dark:Ao.white,2).alp(.7):"bubbleZIM"==h&&(f=new Ao.Circle(30,[Ao.green,Ao.yellow,Ao.orange,Ao.pink,Ao.blue]).alp(.7)),f.centerReg({add:!1}),"lineDark"==h||"lineLight"==h||"lineZIM"==h?new Ao.Emitter({obj:f,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):new Ao.Emitter({obj:f,num:6,life:.5,decayTime:.5,width:l?0:x,height:l?k:0,vertical:l,horizontal:!l,startPaused:!0})):g,i=[{x:0,y:k/2},{x:x,y:k/2},{x:x/2,y:0},{x:x/2,y:k}],l=[{x:x,y:k/2},{x:0,y:k/2},{x:x/2,y:k},{x:x/2,y:0}],m.centerReg(b).spurt(null,v.speed),m.x=i[n].x,m.y=i[n].y,Ao.animate(m,l[n],v.speed,null,function(){h&&m.dispose()})):!p&&"fade"!=o||((m=p?("explodeDark"==p||"explodeLight"==p?f=new Ao.Circle(150,"explodeDark"==p?Ao.dark:Ao.white).alp(.5):"explodeZIM"==p&&(f=new Ao.Circle(130,[Ao.green,Ao.yellow,Ao.orange,Ao.pink,Ao.blue]).alp(.7)),new Ao.Emitter({obj:f,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):g).centerReg(b).spurt(null,.35*v.speed),m.on("fizzed",function(){p&&m.dispose()})),b&&"Stage"!=b.type&&"StageGL"!=b.type&&m.particles&&b.shape&&m.particles.setMask(b.shape)),b&&b.shape&&m&&m.particles&&m.particles.setMask(b.shape),S(A),v.lastPage=A,v.page=e,v.index=-1,c=0;c<v.pages.length;c++)v.pages[c].page==v.page&&(v.index=c);"none"==o&&I(e),zot(r)&&(r=!1),v.fromSwipe=r,v.dispatchEvent("page"),A=e,v.setArrows(z.index),b.stage&&b.stage.update()}}},b&&b.shape&&(b.mouseChildren=!0,b.mouseEnabled=!0,v.setMask(b.shape)),this.resize=function(){x=b.getBounds().width,k=b.getBounds().height,"none"==y&&t==[]||m()},this.puff=function(e){for(var t=0;t<z.length;t++)v.addChild(z[t].page);v.addChild(A),0<e&&setTimeout(function(){v.settle()},e*("s"==a?1e3:1))},this.settle=function(){v.removeAllChildren(),v.addChild(A),v.dispatchEvent("puffed")},this.disable=function(){v.active=!1},this.enable=function(){v.active=!0},this.arrows={},!(this.setArrows=function(){var o,e;Ao.isEmpty(v.arrows)||(e=v.pages[v.index])&&e.swipe&&(o=e.swipe,e=[Ao.LEFT,Ao.RIGHT,Ao.DOWN,Ao.UP],Ao.loop(e,function(e,t){o[t]?Ao.loop(v.arrows[e],function(e){return!0===e.setDisabled?(e.activate(!1,v.arrowDisableColor),void(e.setDisabled=null)):void(e.enabled||e.activate(!0,e.arrowBackgroundColor))}):Ao.loop(v.arrows[e],function(e){return!1===e.setDisabled?(e.activate(!0,e.arrowBackgroundColor),void(e.setDisabled=null)):void(e.enabled&&e.activate(!1,v.arrowDisableColor))})}),v.stage&&v.stage.update())})!==n&&Ao.styleTransforms(this,i),this.dispose=function(e,t,o){return v.swipe.off("swipe",f),v.swipe.dispose(),o||this.zimContainer_dispose(!0),!0}}else zogy("zim controls - Pages():\nholder object must have bounds set");function m(){(w=new createjs.Shape).graphics.f("black").r(0,0,x,k+1),(C=new createjs.Shape).graphics.f("white").r(0,0,x,k+1)}function E(e,t){e.zimHTMLList=new Ao.Dictionary,S(e),e.zimSwipeArray=t||[],e.zimOriginalAlpha=e.alpha,e.parent&&e.parent.removeChild(d.page)}function I(e){if(!zot(e))for(g=0;g<e.zimHTMLList.length;g++)e.addChildAt(e.zimHTMLList.values[g].obj,e.zimHTMLList.values[g].depth)}function S(e){var t,o,n;for(e.zimHTMLList.clear(),t=0;t<e.numChildren;t++)"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||(o={obj:n,depth:e.getChildIndex(n)},e.zimHTMLList.add(n,o));for(t=e.numChildren-1;0<=t;t--)"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||e.removeChild(n)}},Ao.extend(Ao.Pages,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Arrow=function(e,t,o,n,r,i,l,a,s,c,u){var d;if(d=zob(Ao.Arrow,arguments,"backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",this))return d;z_d("71.2"),this.group=c;var h,g,p,f,c=!1===s?{}:Ao.getStyle("Arrow",this.group,u);zot(n)&&(n=null!=c.direction?c.direction:"right"),zot(e)&&(e=null!=c.backgroundColor?c.backgroundColor:Ao.blue),this.arrowBackgroundColor=e,zot(t)&&(t=null!=c.rollBackgroundColor?c.rollBackgroundColor:Ao.blue.lighten(.2)),this.arrowRollBackgroundColor=t,zot(r)&&(r=null!=c.type?c.type:"triangle"),zot(i)&&(i=null!=c.newPage?c.newPage:null),zot(l)&&(l=null!=c.trans?c.trans:null),zot(a)&&(a=null!=c.speed?c.speed:null),"triangle"==r?(h=new Ao.Triangle(45,45,45,e,null,null,null,null,-7).rot(90),m=new Ao.Triangle(45,45,45,t,null,null,null,null,-7).rot(90)):"thick"==r?(h=new Ao.Shape,g=h.graphics.f(e).command,f="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",h.p(f).reg(-4),m=new Ao.Shape,p=m.graphics.f(e).command,m.p(f).reg(-4)):"thin"==r?(h=new Ao.Shape,g=h.graphics.f(e).command,f="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",h.p(f).reg(-4),m=new Ao.Shape,p=m.graphics.f(e).command,m.p(f).reg(-4)):"angle"==r&&(h=new Ao.Shape,g=h.graphics.f(e).command,f="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",h.p(f).reg(-3),m=new Ao.Shape,p=m.graphics.f(e).command,m.p(f).reg(-3)),this.zimButton_constructor(50,50,"",Ao.clear,Ao.clear,null,null,null,null,null,null,null,null,null,null,null,h,m),this.type="Arrow";var m,z=this;function y(){var e=o.pages[o.index];if(e&&e.swipe){e=e.swipe;return"left"==n?e[0]:"right"==n?e[1]:"up"==n?e[2]:"down"==n?e[3]:void 0}}this.activate=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=Ao.grey),!1===t||(e?!(z.enabled=!0)!==t&&("triangle"==r?(z.icon.color=z.arrowBackgroundColor,z.rollIcon.color=z.arrowRollBackgroundColor):(g.style=z.arrowBackgroundColor,p.style=z.arrowRollBackgroundColor)):(z.enabled=!1)!==t&&("triangle"==r?(z.icon.color=t,z.rollIcon.color=t):(g.style=t,p.style=t))),z},zot(o)||"Pages"!=o.type||(m=(zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",zot(o.arrows)&&(o.arrows={}),zot(o.arrows[n])&&(o.arrows[n]=[]),o.arrows[n].push(this),y()||this.activate(!1,o.arrowDisableColor),this.expand(),this.on(m,function(){var e;o.transitioning||(e=y())&&o.go(e,n,l,a)}),!1!==s&&Ao.styleTransforms(this,c),this.clone=function(){return z.cloneProps(new Ao.Arrow(e,t,o,n,r,i,l,a,s,this.group,u))})},Ao.extend(Ao.Arrow,Ao.Button,"clone","zimButton",!1),Ao.HotSpots=function(l,o,n){var e;if(e=zob(Ao.HotSpots,arguments,"spots, local, mouseDowns",this))return e;z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",zot(o)&&(o=!0),zot(n)&&(n=!1);var a,r,i=(zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",s=this.hotSpots=[];zot(l)&&(l=[]);for(var t=0;t<l.length;t++)c(l[t]);function c(e){var t=null;if(!Array.isArray(e.rect)){if(!(t=e.rect))return void zogy("zim controls - HotSpots(): HotSpot "+e.page+" "+e.rect+" button does not exist");e.rect=[t.x,t.y,t.width||1,t.height||1]}(r=new Ao.HotSpot(e.page,e.rect[0],e.rect[1],e.rect[2],e.rect[3],e.call,e.callOver,e.callOut,o,e.talk)).zimHSpage=e.page,r.button=t,s.push(r),r.on(i,u),t&&zot(e.callOver)&&zot(e.callOut)&&(r.spot.mouseEnabled=!1,r.spot.mouseChildren=!1,t.zimHScall=e.call,t.zimHSEvent=t.on(i,u,!0),n||(t.zimHSMDEvent=t.on("mousedown",function(e){e.stopImmediatePropagation()})),t.cursor="pointer")}function u(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),WW.event&&(WW.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}this.add=this.addHotSpot=function(e,t,o,n,r,i){a={page:e,rect:t,call:o,callOver:n,callOut:r,talk:i},l.push(a),c(a)},this.show=function(){for(var e=0;e<s.length;e++)(r=s[e]).button||(r.spot.alpha=.2)},this.hide=function(){for(var e=0;e<s.length;e++)(r=s[e]).spot.alpha=0},this.remove=this.removeHotSpots=function(e,t){for(var o=l.length-1;0<=o;o--)a=l[o],r=s[o],t&&!Array.isArray(t)&&(t=[t.x,t.y,t.getBounds().width,t.getBounds().height]),(zot(e)&&zot(t)||zot(t)&&e==a.page||zot(e)&&Ao.arraysEqual(t,a.rect)||e==a.page&&Ao.arraysEqual(t,a.rect))&&(l.splice(o,1),r.button&&(r.button.off(i,r.button.zimHSEvent),r.button.zimHSEvent=null,n||(r.button.off("mousedown",r.button.zimHSMDEvent),r.button.zimHSMDEvent=null)),r.off(i,u),r.dispose(),s.splice(o,1))},this.dispose=function(){for(var e=0;e<s.length;e++)(r=s[e]).button&&(r.button.off(i,r.button.zimHSEvent),r.button.zimHSCall=null,r.button.zimHSEvent=null,n||(r.button.off("mousedown",r.button.zimHSMDEvent),r.button.zimHSMDEvent=null)),r.off(i,u),r.dispose();return!0}},Ao.extend(Ao.HotSpots,Ao.Container,"dispose","zimContainer",!1),Ao.HotSpot=function(e,t,o,n,r,i,l,a,s,c){var u,d,h,g,p,f,m,z,y,b;if(h=zob(Ao.HotSpot,arguments,"obj, x, y, width, height, call, callOver, callOut, local, talk",this))return h;z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(e)&&e.addChild?e instanceof createjs.Container!=0?zot(t)||zot(o)||zot(n)||zot(r)?zogy("zim controls - HotSpot():\nPlease pass in x, y, width, height"):(zot(s)&&(s=!0),u=(zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",d=n,h=r,f=s?(g=new Ao.Point(t,o),p=n,r):(g=e.globalToLocal(t,o),p=(f=e.globalToLocal(t+d,o+h)).x-g.x,f.y-g.y),(m=new Ao.Shape(n,r)).talk=zot(c)?"HotSpot":c,m.alpha=0,m.graphics.f("black").dr(0,0,p,f),m.x=g.x,m.y=g.y,m.cursor="pointer",m.expand(0),this.spot=m,"function"==typeof i&&(z=m.on(u,function(e){i(e)})),"function"==typeof l&&(y=m.on("mouseover",function(e){l(e)})),"function"==typeof a&&(b=m.on("mouseout",function(e){a(e)})),e.addChild(m),this.show=function(){m.alpha=.5,e.stage&&e.stage.update()},this.hide=function(){m.alpha=0,e.stage&&e.stage.update()},this.dispose=function(){return z&&m.off(u,y),y&&m.off("mouseover",y),b&&m.off("mouseout",b),e.removeChild(m),!(m=null)}):zogy("zim controls - HotSpot():\nObjects passed in should be Containers"):zogy("zim controls - HotSpot():\nPlease pass in container object for obj")},Ao.extend(Ao.HotSpot,Ao.Container,"dispose","zimContainer",!1),Ao.Guide=function(n,r,i,t,o,e,l,a){var s;if(s=zob(Ao.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey, style, group, inherit",this))return s;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=l;var c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,a=!1===e?{}:Ao.getStyle(this.type,this.group,a);function A(e,t,o){var n=new Ao.Container({style:!1});return n.shape=new Ao.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,d,h),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function P(e){var t,o;e?(t=n.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY),T=t):t={x:T.x,y:T.y},i?r?(o=Math.round(Math.abs(t.x-x.x)/w*100),z.label.text="x:"+Math.max(0,Math.min(o,100))+"%",z.y=Math.max(p,Math.min(t.y,m))):(o=Math.round(Math.abs(t.y-x.y)/C*100),z.label.text="y:"+Math.max(0,Math.min(o,100))+"%",z.x=Math.max(g,Math.min(t.x,f))):r?(o=Math.round(Math.abs(t.x-x.x)),z.label.text="x:"+Math.max(0,Math.min(o,Math.round(w))),z.y=Math.max(p,Math.min(t.y,m))):(o=Math.round(Math.abs(t.y-x.y)),z.label.text="y:"+Math.max(0,Math.min(o,Math.round(C))),z.x=Math.max(g,Math.min(t.x,f))),y&&y.update()}function B(){var e;v=!0,w=n.getBounds().width,C=n.getBounds().height,k=r?(e="ew-resize",new createjs.Rectangle(0,0,w,0)):(e="ns-resize",new createjs.Rectangle(0,0,0,C)),Ao.noDrag(x),setTimeout(function(){Ao.drag(x,k,e,e,null,null,!0)},500),y.mouseMoveOutside=!0,y.enableMouseOver(10),f=w-2*d/3,m=C-h-h,x.uncache();var t=x.graphics;r?(t.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,C),t.f().s("white").ss(2).mt(0,0).lt(0,C),t.s("#00c5af").sd([20,20]).mt(0,0).lt(0,C).sd(),x.cache(-10,0,20,C)):(t.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(w,0),t.f().s("white").ss(2).mt(0,0).lt(w,0),t.s("#d61fa0").sd([20,20]).mt(0,0).lt(w,0).sd(),x.cache(0,-10,w,20)),r?z.x=w:z.y=C,c.addChild(z)}function E(e){e=e||event,y&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&c.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(c.pixels=!c.pixels))}zot(n)&&(n=WW.zdf?WW.zdf.stage:"stage"),zot(r)&&(r=null==a.vertical||a.vertical),"stage"==n||n.addChild&&n.getBounds&&n.getBounds()?(zot(i)&&(i=null==a.percent||a.percent),zot(t)&&(t=null!=a.hideKey?a.hideKey:"G"),zot(o)&&(o=null!=a.pixelKey?a.pixelKey:"P"),c=this,g=(d=80)/6+d/2,p=2*(h=26),r?((z=A("#00c5af","white","white")).shape.regX=d+d/6,z.shape.regY=h/2,z.label.x=-d/2-d/6):((z=A("#d61fa0","white","white")).shape.regX=d/2,z.shape.regY=h+h/4,z.label.y=3*-h/4),"stage"!=n&&n.addChild(c),b=Ao.added(c,function(){"stage"==n?(y=c.stage,n=y):y=n.stage;n.addChild(c),w=n.getBounds().width,C=n.getBounds().height,r?(z.y=C/2,z.label.text="x:"+(c.percent?"70%":Math.round(70*w/100))):(z.x=w/2,z.label.text="y:"+(c.percent?"70%":Math.round(70*C/100)));x=new Ao.Shape,c.addChild(x),r?x.x=.7*w:x.y=.7*C,v||(n.addChild(c),B());y.off("stagemousemove",u),u=y.on("stagemousemove",P),y.update()}),v=!1,T={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return!i},set:function(e){i=!e,c.resize()}}),WW.addEventListener("keydown",E),this.toggled=!0,this.toggle=function(e){return!0===e?c.visible=c.toggled=!0:!1===e?c.visible=c.toggled=!1:(c.visible=!c.visible,c.toggled=c.visible),y&&(y.off("stagemousemove",u),c.visible&&(u=y.on("stagemousemove",P,c)),y.update()),c},!(this.resize=function(){return!!c&&(y&&(B(),P()),!0)})!==e&&Ao.styleTransforms(this,a),this.dispose=function(){return!!c&&(Ao.noDrag(x),clearInterval(b),c.removeAllChildren(),WW.removeEventListener("keydown",E),c.parent&&c.parent.removeChild(c),!(c=null))}):zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},Ao.extend(Ao.Guide,Ao.Container,"clone","zimContainer",!1),Ao.Grid=function(r,i,l,t,o,n,a,e,s,c,u){var d;if(d=zob(Ao.Grid,arguments,"obj, color, percent, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",this))return d;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=c;var h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,u=!1===s?{}:Ao.getStyle(this.type,this.group,u);function I(e,t,o){var n=new Ao.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,f,m),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function S(e){var t;e?(t=r.globalToLocal(e.rawX/Ao.scaX,e.rawY/Ao.scaY),A=t):t={x:A.x,y:A.y},l?(z.label.text="x:"+Math.max(0,Math.min(Math.round(t.x/P*100),100))+"%",z.x=Math.max(b,Math.min(t.x,w)),y.label.text="y:"+Math.max(0,Math.min(Math.round(t.y/B*100),100))+"%"):(z.label.text="x:"+Math.max(0,Math.min(Math.round(t.x),Math.round(P))),z.x=Math.max(b,Math.min(t.x,w)),y.label.text="y:"+Math.max(0,Math.min(Math.round(t.y),Math.round(B)))),y.y=Math.max(v,Math.min(t.y,C)),x&&x.update()}function W(){T=!0,r&&r.getBounds&&(P=r.getBounds().width,B=r.getBounds().height),x&&(x.mouseMoveOutside=!0,x.enableMouseOver(10)),w=P-2*f/3,C=B-m-m,E=h.grid=new Ao.Container({style:!1}),h.addChild(E);var e=new createjs.Shape;E.addChild(e);var t=e.graphics;t.s(i).ss(1);var o,n=new createjs.Shape;if(E.addChild(n),l){for(o=1;o<21;o++)t.mt(o*P/20,0).lt(o*P/20,B);for(o=1;o<20;o++)t.mt(0,o*B/20).lt(P,o*B/20);for(e.alpha=.3,(t=n.graphics).s(i).ss(1),o=1;o<10;o++)t.mt(o*P/10,0).lt(o*P/10,B);for(o=1;o<10;o++)t.mt(0,o*B/10).lt(P,o*B/10)}else{for(o=0;o<P/g;o++)t.mt(o*g,0).lt(o*g,B);for(o=0;o<B/g;o++)t.mt(0,o*g).lt(P,o*g);for(e.alpha=.3,(t=n.graphics).s(i).ss(1),o=0;o<P/(10*g);o++)t.mt(o*(10*g),0).lt(o*(10*g),B);for(o=0;o<B/(10*g);o++)t.mt(0,o*(10*g)).lt(P,o*(10*g))}t.s("#FFFFFF").ss(8),t.mt(P/2,B/2-40).lt(P/2,B/2+40),t.mt(P/2-40,B/2).lt(P/2+40,B/2),t.s("#000000").ss(4),t.mt(P/2,B/2-40).lt(P/2,B/2+40),t.mt(P/2-40,B/2).lt(P/2+40,B/2),t.s(i).ss(a?3:2),t.dr(0,0,P,B),n.alpha=.5,a&&E.cache(0,0,P,B),h.addChild(z),h.addChild(y),x&&x.update()}function M(e){e=e||event,x&&n&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&h.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(h.removeChild(E),E=null,h.pixels=!h.pixels))}zot(r)&&(r=WW.zdf?WW.zdf.stage:"stage"),zot(i)&&(i=null!=u.color?u.color:"black"),"stage"==r||r.addChild&&r.getBounds&&r.getBounds()?(zot(l)&&(l=null==u.percent||u.percent),zot(t)&&(t=null!=u.hideKey?u.hideKey:"G"),zot(o)&&(o=null!=u.pixelKey?u.pixelKey:"P"),zot(n)&&(n=null==u.allowToggle||u.allowToggle),zot(a)&&(a=null==u.cache||u.cache),zot(e)&&(e=null==u.numbers||u.numbers),g=10,(h=this).mouseChildren=!1,this.mouseEnabled=!1,f=80,m=26,(z=h.numbersX=I("#dddddd",i,"#333333")).shape.regX=f/2,z.shape.regY=-m/4,z.label.y=3*m/4,(y=h.numbersY=I("#dddddd",i,"#333333")).shape.regX=-f/6,y.shape.regY=m/2,y.label.x=f/2+f/6,e||(z.visible=!1,y.visible=!1),b=f/6+f/2,v=2*m,z.x=b,y.y=v,z.label.text="x:0",y.label.text="y:0","stage"!=r&&r.addChild(h),k=Ao.added(h,function(){"stage"==r?(x=h.stage,r=x):x=r.stage;T||(W(),r.addChild(h));x.off("stagemousemove",p),p=x.on("stagemousemove",S),x.update()}),T=!1,A={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return!l},set:function(e){l=!e,h.resize()}}),WW.addEventListener("keydown",M),this.toggled=!0,this.toggle=function(e){return!0===e?h.visible=h.toggled=!0:!1===e?h.visible=h.toggled=!1:(h.visible=!h.visible,h.toggled=h.visible),x.off("stagemousemove",p),h.visible&&(p=x.on("stagemousemove",S,h)),x&&x.update(),h},!(this.resize=function(){return!!h&&(h.removeChild(E),E=null,x&&(W(),S(),setTimeout(function(){h.removeChild(E),E=null,W()},200)),!0)})!==s&&Ao.styleTransforms(this,u),this.dispose=function(){return clearInterval(k),h.removeAllChildren(),WW.removeEventListener("keydown",M),h.parent&&h.parent.removeChild(h),!(h=null)}):zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},Ao.extend(Ao.Grid,Ao.Container,"clone","zimContainer",!1),Ao.Wrapper=function(e,P,w,C,x,B,k,E,I,S,T,W,A,M,O,t,j,L,_,D,Y,o,n,r){var i;if(i=zob(Ao.Wrapper,arguments,"items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",this))return i;z_d("78.5"),this.group=n;r=!1===o?{}:Ao.getStyle("Wrapper",this.group,r);zot(P)&&(P=null!=r.width?r.width:300),zot(O)&&(O=null!=r.height?r.height:null),zot(w)&&(w=null!=r.spacingH?r.spacingH:null),zot(C)&&(C=null!=r.spacingV?r.spacingV:null),zot(x)&&(x=null!=r.wrapperType?r.wrapperType:"spacing"),zot(B)&&(B=null!=r.align?r.align:"left"),zot(k)&&(k=null!=r.valign?r.valign:"top"),zot(E)&&(E=null!=r.alignInner?r.alignInner:"left"),zot(I)&&(I=null!=r.valignInner?r.valignInner:"bottom"),zot(S)&&(S=null!=r.flip&&r.flip),zot(T)&&(T=null!=r.reverse&&r.reverse),zot(W)&&(W=null!=r.bottomFull&&r.bottomFull),zot(A)&&(A=null!=r.colSize?r.colSize:100),zot(M)&&(M=null!=r.rowSize?r.rowSize:null),zot(w)&&(w=0),zot(C)&&(C=0),zot(t)&&(t=null!=r.minSpreadNum?r.minSpreadNum:2),zot(j)&&(j=null!=r.minStretchNum?r.minStretchNum:3),zot(L)&&(L=null!=r.percentVoidH?r.percentVoidH:0),zot(_)&&(_=null!=r.offsetVoidH?r.offsetVoidH:0),zot(D)&&(D=null!=r.percentVoidV?r.percentVoidV:0),zot(Y)&&(Y=null!=r.offsetVoidV?r.offsetVoidV:0);var X,R,H=0,F=0,N=0,V=P;this.items=[],"spread"==x?X=!0:"stretch"==x&&(R=!0),this.zimContainer_constructor(P,200),this.type="Wrapper","middle"==B&&(B="center"),"middle"==k&&(k="center"),"middle"==E&&(E="center"),"middle"==I&&(I="center");var G=this;function q(n,t,o,e,r,i,l,a){var s=Ao.Pick.choose(B),c=Ao.Pick.choose(X),u=Ao.Pick.choose(R),d=Ao.Pick.choose(S),h=Ao.Pick.choose(E),g=Ao.Pick.choose(I);zot(s)&&(s="left"),zot(g)&&(g="top"),zot(h)&&(h="left"),d&&n.reverse();var p,f,m,z,y,b,v,w,C,x,k,T=0,A=!1;r?((W||S)&&n.reverse(),z=V%r,y=V/2+l/100*V,b=0,d=Math.floor(V/r),0!=G.rows&&a&&(A=!0),Ao.loop(n,function(e,t){var o;T=0,b="right"==h?r*t+0+r-e.wrapWidth:"center"==h||"middle"==h?r*t+0+(r-e.wrapWidth)/2:r*t+0,m=e.x,e.pos(b),k=e.x-m,e.centerX+=k,e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),"center"==s||"middle"==s?(o=Math.floor(V/r)-n.length,T+=(z+(o?o*r:0))/2):"right"==s&&(o=Math.floor(V/r)-n.length,T+=z+(o?o*r:0)),e.mov(T),e.centerX+=T}),"center"==s&&A&&(n.length+d)%2!=0&&(T=(y<=V/2?-1:1)*r/2,Ao.loop(n,function(e){e.mov(T),e.centerX+=T}))):c||u?(c?v=n.length?(V-e)/(n.length+1):0:u&&(v=0<n.length-1?(V-e)/(n.length-1):0),n.length<j&&0!=G.rows&&a&&(v=N,A=!0),N=v,C=0,(W||S)&&n.reverse(),Ao.loop(n,function(e,t){T=0,m=e.x,e.pos(v*(t+(c?1:0))+C),k=e.x-m,e.centerX+=k,A||(e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),e.mov(T),e.centerX+=T),C+=e.wrapWidth}),A&&(x=c?v:0,k=T=0,Ao.loop(n,function(e){var t;"right"==s?(m=e.x,e.pos(x,null,Ao.RIGHT),k=e.x-m,x+=e.wrapWidth+v):"center"==s&&(t=(V-(C+(n.length-1)*v))/2-(c?v:0),m=e.x,e.pos(x+t,null,Ao.RIGHT),k=e.x-m,x+=e.wrapWidth+v),e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),e.mov(T),e.centerX+=k+T},!0))):"center"==s?Ao.loop(n,function(e){T=((W||S?0:P)-t.x)/2,(c||u)&&(e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight)),e.mov(T),e.centerX+=T}):(W||S)&&"left"==s?(w=n[n.length-1].marginLeft,Ao.loop(n,function(e){T=-t.x+(w||0),c&&(T+=F),e.mov(T),e.centerX+=T})):W||S||"right"!=s?c&&c&&Ao.loop(n,function(e){T=F*("right"==s?-1:1),e.mov(T),e.centerX+=T}):(w=n[n.length-1].marginRight,Ao.loop(n,function(e){T=P-t.x-(w||0),c&&(T-=F),e.mov(T),e.centerX+=T})),i&&(p=(.5+l/100)*V,f=P*i/100,Ao.loop(n,function(e){r||u||c?"right"==s?e.centerX>V-p&&e.mov(f):"center"==s?Math.round(e.centerX)==Math.round(V/2+l/100*V)?e.mov(f/2):Math.round(e.centerX)>Math.round(V/2+l/100*V)&&e.mov(f):e.centerX>p&&e.mov(f):W||S||"right"!=s?W||S||"center"!=s?(W||S)&&"right"==s?e.centerX>V-p&&e.mov(f):(W||S)&&"center"==s?e.centerX>V/2+l/100*V&&e.mov(f):e.centerX>p&&e.mov(f):e.centerX>P/2+l/100*V?e.mov(f/2):e.mov(-f/2):e.centerX<P-p&&e.mov(-f)})),c&&(F=(H+=v)/(G.rows+1)),"center"==g?Ao.loop(n,function(e){e.mov(0,(o-e.wrapHeight)/2*(W?-1:1))}):W||"bottom"!=g?W&&"top"==g&&Ao.loop(n,function(e){e.mov(0,-(o-e.wrapHeight)+(e.marginTop||0))}):Ao.loop(n,function(e){e.mov(0,o-e.wrapHeight-(e.marginBottom||0))})}this.add=function(e){return this.addAt(e,this.numChildren-1),G},this.addAt=function(e,o){return zot(e)||((zot(o)||o<0)&&(o=0),Array.isArray(e)||(e=[e]),Ao.loop(e,function(e,t){G.addChildAt(e,o+t)}),G.resize()),G},this.remove=function(e){return Array.isArray(e)||(e=[e]),Ao.loop(e,function(e){e&&e.removeFrom&&e.removeFrom()},!0),G.resize(),G},this.convert=function(e,t){var o=[];return e.loop(function(e){o.push(e),t&&e.cache()}),G.add(o),e.removeFrom(),G},this.resize=function(e,t){if(!G.preventResize){zot(e)||(P=e),zot(t)||(O=t),this.items2D=[],this.items=[],N=F=H=0,zot(L)&&(L=0),zot(_)&&(_=0);var i=Ao.Pick.choose(L),l=Ao.Pick.choose(_);V=P*(100-i)/100,this.setBounds(V,200);var a=0,s=0,c=0;G.cols=0,G.rows=0;var u=[],d=[0],h=null,g=0,p=null,f=Ao.Pick.choose(A);"column"!=x&&(f=null);var m,z,y=Ao.Pick.choose(M),b=0;Ao.loop(this,function(e,t){W||S?e.pos(a+(e.marginRight||0),s+(e.marginTop||0),Ao.RIGHT,S?Ao.TOP:Ao.BOTTOM):e.pos(a+(e.marginLeft||0),s+(e.marginTop||0)),b++,p=e.boundsToGlobal();var o,n=G.globalToLocal(p.x,p.y),r=G.globalToLocal(p.x+p.width,p.y+p.height);m=W||S?G.globalToLocal(p.x,p.y):G.globalToLocal(p.x+p.width,p.y+p.height),e.wrapHeight=r.y-n.y,e.wrapWidth=r.x-n.x,i&&(o=G.globalToLocal(p.x+e.wrapWidth/2,p.y+e.wrapHeight/2),e.centerX=o.x,e.centerY=o.y,o=null),z=f?f*b:W||S?V-m.x+(e.marginLeft||0)+w:m.x+(e.marginRight||0)+w,Math.round(z)-w>V&&(q(u,h,c,g,f,i,l,!1),(g=0)==G.cols&&(G.cols=t),a=0,s+=c+(y?0:Ao.Pick.choose(C)),c=0,y=Ao.Pick.choose(M),i=Ao.Pick.choose(L),l=Ao.Pick.choose(_),b=0,G.items2D.push(Ao.copy(u)),G.rows++,d.push(s),u=[],W||S?e.pos(a+(e.marginRight||0),s+(e.marginTop||0),Ao.RIGHT,S?Ao.TOP:Ao.BOTTOM):e.pos(a+(e.marginLeft||0),s+(e.marginTop||0)),i&&(p=e.boundsToGlobal(),o=G.globalToLocal(p.x+e.wrapWidth/2,p.y+e.wrapHeight/2),e.centerX=o.x,e.centerY=o.y,o=null),b++,f?z=0:(z=(e.marginLeft||0)+e.wrapWidth+(e.marginRight||0)+Ao.Pick.choose(w),m.x=W||S?V-((e.marginRight||0)+e.wrapWidth):(e.marginLeft||0)+e.wrapWidth)),u.push(e),g+=e.wrapWidth,a=z,c=y||Math.max(c,e.wrapHeight+(e.marginTop||0)+(e.marginBottom||0)),h=new Ao.Point(m.x,s+c)},(!T||!W)&&(T||W)),0<G.numChildren&&(0==G.cols&&(G.cols=G.numChildren),G.items2D.push(Ao.copy(u)),d.push(s),q(u,h,c,g,f,i,l,!0),G.rows+=1);var o,n=Ao.Pick.choose(k);zot(n),W&&(o=s+c-200,Ao.loop(this,function(e){e.mov(0,o)}),G.items2D.reverse(),Ao.loop(G.items2D,function(e){e.reverse()}));var r,v,e=Ao.Pick.choose(D),t=Ao.Pick.choose(Y);return zot(e)||(zot(t)&&(t=0),r=(n=s+c)*e/100,v=n/2+t/100*n,Ao.loop(d,function(e,t){if(v<=e)return Ao.loop(G.items2D,function(e){Ao.loop(e,function(e){e.mov(0,r)})},null,1,t),"break"})),zot(O)||("bottom"==k?(o=O-(s+c),Ao.loop(this,function(e){e.mov(0,o)})):"center"!=k&&"middle"!=k||(o=(O-(s+c))/2,Ao.loop(this,function(e){e.mov(0,o)}))),G.setBounds(null),(p=G.getBounds())&&G.setBounds(0,p.y,P,p.height),Ao.loop(G.items2D,function(e){Ao.loop(e,function(e){G.items.push(e)})}),this.stage&&this.stage.update(),G}},Object.defineProperty(G,"spacingH",{get:function(){return w},set:function(e){w=e,this.resize()}}),Object.defineProperty(G,"spacingV",{get:function(){return C},set:function(e){C=e,this.resize()}}),Object.defineProperty(G,"wrapperType",{get:function(){return x},set:function(e){X="spread"==e,R="stretch"==e,x=e,this.resize()}}),Object.defineProperty(G,"align",{get:function(){return B},set:function(e){"middle"==(B=e)&&(B="center"),this.resize()}}),Object.defineProperty(G,"valign",{get:function(){return k},set:function(e){"middle"==(k=e)&&(k="center"),this.resize()}}),Object.defineProperty(G,"alignInner",{get:function(){return E},set:function(e){"middle"==(E=e)&&(E="center"),this.resize()}}),Object.defineProperty(G,"valignInner",{get:function(){return I},set:function(e){"middle"==(I=e)&&(I="center"),this.resize()}}),Object.defineProperty(G,"colSize",{get:function(){return A},set:function(e){A=e,"column"==x&&this.resize()}}),Object.defineProperty(G,"rowSize",{get:function(){return M},set:function(e){M=e,this.resize()}}),Object.defineProperty(G,"flip",{get:function(){return S},set:function(e){S=e,this.resize()}}),Object.defineProperty(G,"reverse",{get:function(){return T},set:function(e){T=e,this.resize()}}),Object.defineProperty(G,"bottomFull",{get:function(){return W},set:function(e){W=e,this.resize()}}),Object.defineProperty(G,"percentVoidH",{get:function(){return L},set:function(e){L=e,this.resize()}}),Object.defineProperty(G,"offsetVoidH",{get:function(){return _},set:function(e){_=e,this.resize()}}),Object.defineProperty(G,"percentVoidV",{get:function(){return D},set:function(e){D=e,this.resize()}}),Object.defineProperty(G,"offsetVoidV",{get:function(){return Y},set:function(e){Y=e,this.resize()}}),zot(e)||G.add(e),!1!==o&&Ao.styleTransforms(this,r),this.clone=function(){return G.cloneProps(new Ao.Wrapper(e,P,w,C,x,B,k,E,I,S,T,W,A,M,O,t,j,L,_,D,Y,this.style,this.group))}},Ao.extend(Ao.Wrapper,Ao.Container,"clone","zimContainer",!1),Ao.Tile=function(n,a,s,e,t,r,c,u,o,i,d,h,g,p,f,l,m,z,y,b,v,w,C,x){var k;if(k=zob(Ao.Tile,arguments,"obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, style, group, inherit",this))return k;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=C;var T,x=!1===w?{}:Ao.getStyle(this.type,this.group,x);zot(n)&&(n=null!=x.obj?x.obj:new Ao.Circle),zot(a)&&(a=null!=x.cols?x.cols:1121),zot(s)&&(s=null!=x.rows?x.rows:1121),1121==a&&1121==s?a=s=T=3:1121==a?a=1:1121==s&&(s=1),zot(r)&&(r=null!=x.unique&&x.unique),zot(c)&&(c=null!=x.width?x.width:null),zot(u)&&(u=null!=x.height?x.height:null),zot(d)&&(d=null!=x.colSize?x.colSize:null),zot(h)&&(h=null!=x.rowSize?x.rowSize:null),zot(c)||(d=null),zot(u)||(h=null),zot(e)&&(e=null!=x.spacingH?x.spacingH:T?3:null),zot(t)&&(t=null!=x.spacingV?x.spacingV:T?3:null),!zot(e)&&zot(d)||(e=0),!zot(t)&&zot(h)||(t=0),zot(o)&&(o=null!=x.squeezeH&&x.squeezeH),zot(i)&&(i=null!=x.squeezeV&&x.squeezeV),zot(g)&&(g=null!=x.align?x.align:"left"),zot(p)&&(p=null!=x.valign?x.valign:"top"),zot(f)&&(f=null!=x.count?x.count:r&&Array.isArray(n)?n.length:null),0===f&&(f=null,zon&&zogy("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(l)&&(l=null!=x.mirrorH&&x.mirrorH),zot(m)&&(m=null!=x.mirrorV&&x.mirrorV),zot(z)&&(z=null==x.snapToPixel||x.snapToPixel),z&&(n&&n.stage?n.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&WW.zdf&&(WW.zdf.stage.snapToPixelEnabled=!0)),zot(y)&&(y=null!=x.clone?x.clone:!r&&null),null==y&&(y="function"!=typeof n||"series"==n.type),zot(b)&&(b=null==x.events||x.events);var A=this;A.cols=a=Math.round(a),A.rows=s=Math.round(s),A.spacingH=e,A.spacingV=t,A.squeezeH=o,A.squeezeV=i;var P,B="function"==typeof g,E="function"==typeof p;A.align=B?"left":g,A.valign=E?"top":p,A.mirrorH=l,A.mirrorV=m;var I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q,U=0,Q=!(A.items=[]);e:for(var Z=0;Z<s;Z++)for(var K=0;K<a;K++){if(U++,!zot(f)&&f<U)break e;"string"==typeof(P=r?n[U-1]:Ao.Pick.choose(n))&&(P=WW.asset(P).centerReg({add:!1}).clone()),zot(P)&&(P=new Ao.Container(0,0,0,0)),y&&(0==Z&&0==K||(P=P.clone(v))),b&&P.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,A.dispatchEvent(t)}),A.items.push(P),"AC"==P.type&&(Q=!0),P.tileNum=U-1,P.tileCol=K,P.tileRow=Z}function J(){A.removeAllChildren(),I=[],S=[],W=[],M=[],O=[],D=_=L=j=0,Y=[],X=[],R=[],F=[],H=[],A.items&&A.items.length||(A.items=[]),f=A.items.length;for(var e,t,o,n,r,i=0,l=0,a=0;a<f;a++)l=Math.floor(a/A.cols),t=a%A.cols,zot(I[l])&&(I[l]=[]),zot(A.items[a])&&(A.items[a]=new Ao.Container(0,0,0,0)),I[l][t]=A.items[a];A.rows=Math.max(1,I.length),A.cols=Math.max(1,zot(I[0])?0:I[0].length);e:for(l=0;l<A.rows;l++)for(Y.push([]),X.push([]),F.push([]),h&&zot(u)&&(o=Ao.Pick.choose(h)),a=0;a<A.cols;a++){if(i++,!zot(f)&&f<i)break e;(e=I[l][a]).snapToPixel=z,A.addChild(e),Y[l].push(e.scaleX),X[l].push(e.scaleY),0==l&&d&&zot(c)&&(n=Ao.Pick.choose(d)),0==l&&H.push(Ao.Pick.choose(g)),d&&zot(c)||(n=Math.abs(e.width)),h&&zot(u)||(o=Math.abs(e.height)),F[l][a]=[n,o],zot(M[a])&&(M[a]=0),zot(O[l])&&(O[l]=0),n>M[a]&&(M[a]=n),o>O[l]&&(O[l]=o),zot(S[l])&&(S[l]=0),zot(W[a])&&(W[a]=0),S[l]+=n,W[a]+=o,S[l]>j&&(j=S[l]),W[a]>L&&(L=W[a]),zot(R[a])&&(R[a]=0),R[a]++}if(!1===A.squeezeH)for(a=0;a<M.length;a++)r=M[a],_+=r;if(!1===A.squeezeV)for(a=0;a<O.length;a++)r=O[a],D+=r}function $(e,t){var o,n;e<=0&&(e=null),t<=0&&(t=null),N=zot(e)||"full"!=A.squeezeH?zot(e)?0<_?_+(A.cols-1)*A.spacingH:j+(A.cols-1)*A.spacingH:Math.max(j+(A.cols-1)*A.spacingH,e):e,V=zot(t)||"full"!=A.squeezeV?zot(t)?0<D?D+(A.rows-1)*A.spacingV:L+(A.rows-1)*A.spacingV:Math.max(L+(A.rows-1)*A.spacingV,t):t,A.setBounds(0,0,N,V),G=[],q=[];var r,i,l,a=[];for(Z=0;Z<I.length;Z++)for(o=I[Z],K=n=0;K<o.length;K++){P=o[K],0==Z&&(G[K]=0,zot(t)||("full"==A.squeezeV?q[K]=1<R[K]?(t-W[K])/(R[K]-1):0:A.squeezeV?q[K]=1<R[K]?Math.max(A.spacingV,(t-W[K])/(R[K]-1)):0:q[K]=1<R[K]?Math.max(A.spacingV,(V-W[K])/(R[K]-1)):0),A.squeezeV?"center"==A.valign||"middle"==A.valign?a[K]=(V-(W[K]+(R[K]-1)*(zot(t)?A.spacingV:q[K])))/2:"bottom"==A.valign?a[K]=V-(W[K]+(R[K]-1)*(zot(t)?A.spacingV:q[K])):a[K]=0:a[K]=0),0==K&&(zot(e)||(i="full"==A.squeezeH?1<o.length?(e-S[Z])/(o.length-1):0:A.squeezeH?1<o.length?Math.max(A.spacingH,(e-S[Z])/(o.length-1)):0:1<o.length?Math.max(A.spacingH,(N-S[Z])/(o.length-1)):0),r=A.squeezeH?"center"==A.align||"middle"==A.align?(N-(S[Z]+(o.length-1)*(zot(e)?A.spacingH:i)))/2:"right"==A.align?N-(S[Z]+(o.length-1)*(zot(e)?A.spacingH:i)):0:0,l=Ao.Pick.choose(p)),g=H[K];var s=F[Z][K][0],c=F[Z][K][1];A.mirrorH&&K%2==1&&(P.scaleX=-Y[Z][K]),P.pos(n,null),!A.squeezeH&&B?!zot(e)||"center"!=g&&"middle"!=g?zot(e)&&"right"==g&&(P.x+=M[K]-P.width):P.x+=(M[K]-P.width)/2:A.squeezeH?!zot(e)||"center"!=A.align&&"middle"!=A.align?zot(e)&&"right"==A.align&&(P.x+=s-P.width):P.x+=(s-P.width)/2:!zot(e)||"center"!=A.align&&"middle"!=A.align?zot(e)&&"right"==A.align&&(P.x+=M[K]-P.width):P.x+=(M[K]-P.width)/2,A.mirrorV&&Z%2==1&&(P.scaleY=-X[Z][K]),P.pos(null,G[K]),!A.squeezeV&&E?!zot(t)||"center"!=l&&"middle"!=l?zot(t)&&"bottom"==l&&(P.y+=O[Z]-P.height):P.y+=(O[Z]-P.height)/2:A.squeezeV?!zot(t)||"center"!=A.valign&&"middle"!=A.valign?zot(t)&&"bottom"==A.valign&&(P.y+=c-P.height):P.y+=(c-P.height)/2:!zot(t)||"center"!=A.valign&&"middle"!=A.valign?zot(t)&&"bottom"==A.valign&&(P.y+=O[Z]-P.height):P.y+=(O[Z]-P.height)/2,!0!==A.squeezeH&&zot(e)?n+=M[K]+(zot(e)?A.spacingH:i):n+=s+(zot(e)?A.spacingH:i),P.x+=r,P.y+=a[K],!0!==A.squeezeV&&zot(t)?G[K]+=O[Z]+(zot(t)?A.spacingV:q[K]):G[K]+=c+(zot(t)?A.spacingV:q[K])}}function ee(e){for(var t,o=[],n=0;n<e.length;n++)n%A.cols==0&&(t=[],o.push(t)),t.push(e[n]);return o}function te(e){for(var t=[],o=0;o<A.cols;o++)t.push([]);for(o=0;o<e.length;o++)t[o%A.cols][Math.floor(o/A.cols)]=e[o];return t}Q&&zon&&zogy("ZIM Tile - assets must have dimensions for Tile"),J(),$(c,u),this.itemUnderPoint=function(o,n,r){if(zot(r)&&(r=!0),!zot(o)&&!zot(n)){var e=A.globalToLocal(o,n);o=e.x,n=e.y;var i=0,t=Ao.loop(M,function(e,t){return i+=e+A.spacingH,!((!r||"vertical"==r)&&o>i-A.spacingH&&o<i)&&(o<i-A.spacingH/2?t:void 0)});if(!1!==t&&(!0===t&&(t=a-1),!(o<0||N<o||n<0||V<n))){var l=0,e=Ao.loop(O,function(e,t){var o=zot(u)?A.spacingV:q[K];return!((!r||"horizontal"==r)&&l-o<n&&n<l)&&(n<(l+=e+o)-o/2?t:void 0)});if(!1!==e)return!0===e&&(e=s-1),A.items2D[e][t]}}},this.remake=function(e){return zot(e)||(A.items=e),J(),$(c,u),A},this.resize=function(e,t){return zot(e)&&(e=c),zot(t)&&(t=u),$(c=e,u=t),A},Object.defineProperty(this,"items2D",{get:function(){return ee(A.items)},set:function(){zon&&zogy("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return te(A.items)},set:function(){zon&&zogy("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var n=[];return Ao.loop(A.items,function(e){var t=e.getBounds(),o=e.x-e.regX+t.x+t.width/2,t=e.y-e.regY+t.y+t.height/2,t=A.hitTestGrid(A.width,A.height,A.cols,A.rows,o,t,null,null,A.spacingH,A.spacingV,!0,"open");null!=t&&(n[t[0]]=e)}),n},set:function(){zon&&zogy("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return ee(A.current)},set:function(){zon&&zogy("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return te(A.current)},set:function(){zon&&zogy("Tile() - current2DCols is read only")}}),!1!==w&&Ao.styleTransforms(this,x),this.clone=function(e){if(e)for(var t=[],o=0;o<A.items.length;o++)t.push(A.items[o].clone(!0));return A.cloneProps(new Ao.Tile(e?Ao.series(t):n.clone?n.clone():n,A.cols,A.rows,A.spacingH,A.spacingV,r,c,u,A.squeezeH,A.squeezeV,d,h,g,p,A.items.length,A.mirrorH,A.mirrorV,z,!e&&y,b,e,this.style,this.group))}},Ao.extend(Ao.Tile,Ao.Container,"clone","zimContainer",!1),Ao.Beads=function(i,n,e,l,r,a,s,c,u,d,h,g,t,o,p){var f;if(f=zob(Ao.Beads,arguments,"path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",this))return f;z_d("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=t;t=!1===o?{}:Ao.getStyle(this.type,this.group,p);zot(c)&&(c=null!=t.onTop&&t.onTop),zot(u)&&(u=null!=t.showControls&&t.showControls),zot(d)&&(d=null==t.visible||t.visible),zot(h)&&(h=null==t.interactive||t.interactive),zot(i)&&(i=null!=t.path?t.path:new Ao.Blob({color:null,borderWidth:3,borderColor:Ao.blue})),i.visible=d,i.interactive=h,i.toggle(u),i.onTop=c,zot(n)&&(n=null!=t.obj?t.obj:new Ao.Circle(10)),zot(e)&&(e=null!=t.count?t.count:10),zot(l)&&(l=null!=t.angle?t.angle:null),zot(r)&&(r=null!=t.startPercent?t.startPercent:0),zot(a)&&(a=null!=t.endPercent?t.endPercent:100),zot(s)&&(s=null!=t.percents?t.percents:null);p=a<r?100+a:a;if(zot(s)){var m="Squiggle"==i.type?(p-r)/(e-1):(p-r)/(e-(r!=p%100?1:0));s=[];for(var z=r-m,y=0;y<e;y++)s.push(z+m),100<(z+=m)&&(z-=100)}zot(g)&&(g=null==t.clone||t.clone);var b,v=this;for(v.count=e,v.percents=s,v.items=[],y=0;y<e;y++)b=Ao.Pick.choose(n),g&&0!=y&&(b=b.clone()),b.beadNum=y,b.startPercent=s[y],v.items.push(b);v.path=i.addTo(v),v.beads=(new Ao.Container).addTo(v,c?0:null),v.beads.type="BeadsContainer",this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<v.count;o++){var n,r=i.getCurvePoint(Math.max(0,Math.min(.9999,s[o]/100)),e,t,!0);r&&((n=v.beads.globalToLocal(r.x,r.y))&&v.items[o].loc(n,null,v.beads).rot(zot(l)?180<r.angle?r.angle-360+i.rotation:r.angle+i.rotation:l))}return this},v.resize(),h&&(i.on("pressmove",v.resize),i.on("update",v.resize)),!1!==o&&Ao.styleTransforms(this,t),this.dispose=function(e){return e||this.zimContainer_dispose(!0),v.items=[],!0},this.clone=function(e){if(e)for(var t=[],o=0;o<v.items.length;o++)t.push(v.items[o].clone(!0));return v.cloneProps(new Ao.Beads(i.clone(),e?Ao.series(t):n.clone?n.clone():n,v.count,l,r,a,s,c,u,d,h,g,this.style,this.group))}},Ao.extend(Ao.Beads,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Layout=function(x,k,T,e,A,P,t,B,o,n,r,i){var l;if(l=zob(Ao.Layout,arguments,"holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",this))return l;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=r;i=!1===n?{}:Ao.getStyle(this.type,this.group,i);if(zot(x)&&(x=null!=i.holder?i.holder:null),zot(B)&&(B=null!=i.scalingObject?i.scalingObject:null),!zot(x)&&x.getBounds)if((B=zot(B)?x:B).getBounds&&B.getBounds()){var E,I=B.getBounds();x.setBounds(0,0,I.width,I.height),zot(T)&&(T=null!=i.lastMargin?i.lastMargin:0),zot(e)&&(e=null!=i.lastMarginMin?i.lastMarginMin:0),zot(P)&&(P=null==i.vertical||i.vertical),zot(A)&&(A=null!=i.backgroundColor?i.backgroundColor:""),zot(o)&&(o=null!=i.hideKey?i.hideKey:"B"),zot(t)&&(t=null!=i.showRegions?i.showRegions:null),t&&(E=new Ao.Shape);var S,W=this.backing=new Ao.Shape,M=this;if(this.active=!0,zot(k)&&(k=null!=i.regions?Ao.copy(i.regions):null),!zot(k)){Ao.loop(k,function(e,t){e instanceof createjs.DisplayObject&&(k[t]={object:e})}),this.regions=k;var O=0,j="minWidth",L="width",_="height",D="marginLeft",Y="marginMinLeft",X="maxHeight";P&&(j="minHeight",L="height",_="width",D="marginTop",Y="marginMinTop",X="maxWidth");for(var R,H=[],F=0,a=0;a<k.length;a++){if(!(S=k[a]).object||!S.object.getBounds())return void zogy("Layout(): each region object must have an object with setBounds() set");S[j]||(S[j]=0),S[L]||(S[L]=0),S.backgroundColor||(S.backgroundColor=""),S.given=0,S.maxGiven=0,"auto"==S[D]?(H[a]=!0,F++,S[Y]?S[D]=S[Y]:delete S[D]):S[D]&&S[Y]&&S[D]<S[Y]&&(S[D]=S[Y]),zot(S[D])&&(S[D]=1e-4),S[X]||(S[X]=100),P?(S.align||(S.align="middle"),S.valign||(0==a?S.valign="top":a==k.length-1?S.valign="bottom":S.valign="middle",1==k.length&&(S.valign="middle"))):(S.valign||(S.valign="top"),S.align||(0==a?S.align="left":a==k.length-1?S.align="right":S.align="middle",1==k.length&&(S.align="middle"))),S[L]&&(S[j]=0),O+=S[L]+S[D]}"auto"==T?(H[k.length]=!0,T=e||0):T&&e&&T<e&&(T=e),100<(O+=T)?zogy("Layout(): cannot fit regions into 100% bounds"):(R=100-O,N(),this.resize=function(){if(M.active){for(I=B.getBounds(),x.setBounds(0,0,I.width,I.height),W.graphics.clear(),""!=A&&(V(W,A),W.graphics.r(0,0,I.width,I.height)),s=0;s<k.length;s++)(S=k[s]).maxGiven=0,S.marginGiven=0;for(var e,t,o,n,r,i=!0,l=R;i;){for(e=!(i=!1),s=0;s<k.length;s++)0<(S=k[s]).given&&0==S.maxGiven&&(t=S.object.getBounds()[L],o=S.object.getBounds()[_],n=S.given*I[L]/100,(r=S[X]*I[_]/100)<o/t*n&&"Window"!=S.object.type?(S.maxGiven=t/o*r*100/I[L],l-=S.maxGiven):e=!1);if(e)break;for(var a=0,s=0;s<k.length;s++)0==(S=k[s])[L]&&0==S.maxGiven&&(a+=S.object.getBounds()[L]);for(s=0;s<k.length;s++)0==(S=k[s])[L]&&0==S.maxGiven&&(S.given=S.object.getBounds()[L]/a*l)}var c=!0;if(0<(S=k[0]).maxGiven?S.maxGiven<S[j]&&(S[L]=S[j],c=!1):0<S.given&&S.given<S[j]&&(S[L]=S[j],c=!1),0<(S=k[k.length-1]).maxGiven?S.maxGiven<S[j]&&(S[L]=S[j],c=!1):0<S.given&&S.given<S[j]&&(S[L]=S[j],c=!1),!c){for(s=O=0;s<k.length;s++)S=k[s],O+=S[L]+S[D];return 100<(O+=T)?void zogy("zim display - Layout(): cannot fit regions into 100% bounds"):(R=100-O,N(),void M.resize())}var u=!0,d=0,h=0;for(s=0;s<k.length;s++)d+=(S=k[s])[D],0<S[L]?h+=S[L]:0<S.maxGiven?h+=S.maxGiven:0<S.given&&(h+=S.given),0==S[L]&&(u=!1);if(u||e){var g=100-h-(d+=T);if(d-=T+k[0][D],0!=g&&0!=d)for(s=0;s<k.length;s++)0!=s&&((S=k[s]).marginGiven=S[D]/d*(d+g))}if(0<F){var p=0,f=0;for(s=0;s<k.length;s++)0<(S=k[s]).marginGiven?f+=S.marginGiven:f+=S[D],S.marginGiven=0,p+=.05<S[D]?S[D]:0;var m=(f-p)/F;for(s=0;s<H.length;s++)H[s]&&k[s]&&((S=k[s]).marginGiven=(S[Y]||0)+m)}var z,y,b,v,w,C=0;for(E&&E.graphics&&(w=E.graphics).c(),s=0;s<k.length;s++)0<(S=k[s]).marginGiven?C+=S.marginGiven*I[L]/100:C+=S[D]*I[L]/100,t=(t=0<S[L]?S[L]:0<S.maxGiven?S.maxGiven:0<S.given?S.given:0)*I[L]/100,o=S[X]*I[_]/100,z=(I[_]-o)/2,y=P?("Wrapper"==S.object.type&&S.object.resize(o),"Window"==S.object.type&&S.object.resize(o,t),"Region"==S.object.type&&S.object.setBounds(o,t),Ao.fit(S.object,z,C,o,t)):("Wrapper"==S.object.type&&S.object.resize(t),"Window"==S.object.type&&S.object.resize(t,o),"Region"==S.object.type&&S.object.setBounds(t,o),Ao.fit(S.object,C,z,t,o)),"top"==S.valign?S.object.y=y.bY:"bottom"==S.valign&&(S.object.y=y.bY+y.bHeight-y.height),"left"==S.align?S.object.x=y.bX:"right"==S.align&&(S.object.x=y.bX+y.bWidth-y.width),E&&E.graphics&&(w.s("white").ss(2).r(y.bX,y.bY,y.bWidth,y.bHeight),w.s("#ff8203").sd([20,20]).r(y.bX,y.bY,y.bWidth,y.bHeight).sd()),(v=b=0)!=C&&C+t!=I[L]||(P?v=1:b=1),o==I[_]&&(P?b=1:v=1),""!=S.backgroundColor&&(V(W,S.backgroundColor),W.graphics.r(y.bX,y.bY,y.bWidth+b,y.bHeight+v)),C+=t,S.object.ZIMoutlineShape&&S.object.outline()}},this.resize(),E&&x.addChild(E),x.addChildAt(W,0),WW.addEventListener("keydown",s),this.disable=function(){M.active=!1,WW.removeEventListener("keydown",s),E&&(E.alpha=0)},this.enable=function(){M.active=!0,WW.addEventListener("keydown",s),M.resize(),E&&(E.alpha=1)},this.removeShape=function(){E&&(E.graphics.clear(),E.dispose(),E=null,E=!1),WW.removeEventListener("keydown",s)},this.toggled=!0,this.toggle=function(e){return E.visible=!0===e||!1!==e&&!E.visible,M.toggled=E.visible,M},!(this.addShape=function(e){M.removeShape(),E=e,WW.addEventListener("keydown",s),x.addChild(E),M.resize()})!==n&&Ao.styleTransforms(this,i),this.dispose=function(){return M.resize=null,M.backing&&M.backing.dispose(),M.backing=null,M.removeShape(),!0})}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");function N(){for(var e=0,t=0;t<k.length;t++)((S=k[t]).given=0)==S[L]&&(e+=S.object.getBounds()[L]);for(t=0;t<k.length;t++)0==(S=k[t])[L]&&(S.given=S.object.getBounds()[L]/e*R)}function V(e,t){"GradientColor"==t.type?e.graphics.lf(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"RadialColor"==t.type?e.graphics.rf(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type?e.graphics.bf(t.image,t.repetition,t.matrix):e.graphics.f(S.backgroundColor)}function s(e){e=e||event,E&&String.fromCharCode(e.keyCode)==o.toUpperCase()&&(M.toggle(),E.stage&&E.stage.update())}},Ao.extend(Ao.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.Accessibility=function(u,e,o,t,n,h,g,r,i,l,a,s,c,d,p){var f;if(f=zob(Ao.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return f;z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(u)&&(u="application"),zot(t)&&(t=!1),zot(n)&&(n=2),zot(h)&&(h=WW.zdf),zot(g)&&(g=!Ao.mobile()),zot(r)&&(r=!1);var m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N=Po(i);function V(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,t=t.y+t.height/2;(e.stageX/Ao.scaX<o-5||e.stageX/Ao.scaX>o+5||e.stageY/Ao.scaY<t-5||e.stageY/Ao.scaY>t+5?U:q)()}function G(){W&&(W.innerHTML="")}function q(){var e,t;B=!0,J(),W&&W.setAttribute("aria-hidden",!1),Ao.ACTIONEVENT="click",zns||(WW.ACTIONEVENT="click"),h.stage.removeChild(k),A&&(y.alwaysHighlight=!1),h.stage.update();for(var o=0;o<b.length;o++)(t=(e=b[o]).obj.zimTabTag).disabled=!1,e.title=e.title.replace(/\s\(use arrow keys\)/,""),t.setAttribute("aria-label",e.title),t.addEventListener("focus",Q)}function U(){B=!1;for(var e=0;e<b.length;e++)b[e].obj.zimTabTag.disabled=!1;J(),r&&function(){for(var e=0;e<w.length;e++){var t=w[e];t.zimObject&&("Loader"==t.zimObject.type||"TextArea"==t.zimObject.type||"Tag"==t.zimObject.type)||(w[e].style.left="-2000px")}}()}function Q(e){var t=e.currentTarget,e=t.zimObject;v=e.zimTabIndex,e.focus=!0;e=new createjs.Event("change");e.title=t.getAttribute("aria-label"),y.dispatchEvent(e)}function Z(e){B=!1,e.target.focusTab.focus()}function K(){(zot(B)||B?q:U)()}function J(){P=!0,I.removeEventListener("focus",K),S.removeEventListener("focus",K),M.removeEventListener("focus",Z),O.removeEventListener("focus",Z),M.parentNode&&(M.parentNode.removeChild(M),O.parentNode.removeChild(O)),j.removeEventListener("focus",Z),L.removeEventListener("focus",Z),j.parentNode&&(j.parentNode.removeChild(j),L.parentNode.removeChild(L));for(var e=0;e<E.length;e++)E[e][0].off("mousedown",E[e][1])}function $(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}y.tabIndex=e.currentTarget.zimTabIndex,y.activatedObject=t}function ee(e){return e.talk||("TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":""))}function te(e){var t=e.obj;e.title=e.title.replace(/\.$/,""),"RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type?e.title=e.title+(t.tabIndex==t.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==t.type?e.title=e.title+(t.checked?" - currently checked":" - currently not checked"):"Stepper"==t.type?e.title=e.title+" - currently displaying "+t.currentValue:"Slider"==t.type||"Dial"==t.type?e.title=e.title+" - currently at "+Ao.decimals(t.currentValue,y.decimals):"ColorPicker"==t.type?e.title=e.title+" - currently at "+t.selectedColor:"TextArea"==t.type?e.title=e.title+(""!=t.tag.value?"":" - placeholder: "+t.tag.placeholder):"Indicator"==t.type?e.title=e.title+" - currently "+(0<=t.selectedIndex?"at "+(t.selectedIndex+1)+" of "+t.num:"not indicating"):"TextInput"==t.type&&(e.title=e.title+(""!=t.htmlTag.value?"":" - placeholder: "+t.htmlTag.placeholder)),e.title+="."}function oe(e,t,o,n,r){var i,l;if(n&&(i=n.obj),n&&("TextArea"==i.type||"Loader"==i.type))return(l=i.tag).setAttribute("aria-label",t),i&&l.setAttribute("aria-hidden",!i.stage),"before"==r?o.parentNode.insertBefore(l,o):o.parentNode.insertBefore(l,o.nextSibling),"TextArea"==i.type?l.style.zIndex=3:l.style.zIndex=-5,l.zimObject=i,n.obj.zimTabTag=l,w.push(l),l;if(n&&"TextInput"==i.type)return(l=i.htmlTag).setAttribute("aria-label",t),i&&l.setAttribute("aria-hidden",!i.stage),"before"==r?o.parentNode.insertBefore(l,o):o.parentNode.insertBefore(l,o.nextSibling),l.style.zIndex=-5,l.zimObject=i,n.obj.zimTabTag=l,w.push(l),l;if(!n||"Dial"!=i.type&&"Slider"!=i.type&&"Stepper"!=i.type&&"ColorPicker"!=i.type)l=document.createElement("div"),i&&(l.zimObject=i),l.innerHTML="tag",l.setAttribute("role",g?"application":"button"),"android"==A&&l.addEventListener("click",function(){i.dispatchEvent("click")});else{var a,s,c=[];if("Dial"==i.type||"Slider"==i.type)for(var u=i.step<=0?(i.max-i.min)/20:i.step,d=i.min;d<i.max;d+=u)c.push(i.min+d);else"Stepper"==i.type?c=i.stepperArray:"ColorPicker"==i.type&&(c=i.colors);for((l=document.createElement("select")).disabled=!0,l.zimObject=i,l.addEventListener("change",function(e){!B&&"android"==!A||(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,h.stage.update())}),l.size=1,d=0;d<c.length;d++)a=c[d],(s=document.createElement("option")).setAttribute("aria-label",a),s.innerHTML=a,l.add(s),a==i.zimTabParent.currentValue&&s.setAttribute("selected","selected");l.setAttribute("role","button")}return l.setAttribute("id",e),l.setAttribute("tabindex",0),l.setAttribute("aria-label",t),i&&l.setAttribute("aria-hidden",!i.stage),"before"==r?o.parentNode.insertBefore(l,o):o.parentNode.insertBefore(l,o.nextSibling),l.style.position="absolute",n?(o=(i=n.obj).boundsToGlobal(),h.retina?(l.style.left=h.x+o.x*h.scale/z+"px",l.style.top=h.y+o.y*h.scale/z+"px",l.style.width=o.width*h.scale/z+"px",l.style.height=o.height*h.scale/z+"px"):(l.style.left=h.x+o.x*h.scale+"px",l.style.top=h.y+o.y*h.scale+"px",l.style.width=o.width*h.scale+"px",l.style.height=o.height*h.scale+"px"),n.obj.zimTabTag=l):(l.style.left="-1000px",l.style.top=h.y+"px"),l.style.overflow="hidden",l.style.zIndex=-5,l.style.fontSize="20px",l.style.color="rgba(0,0,0,.01)",w.push(l),l}function ne(e){e.ctrlKey?re(e.shiftKey?-1:1):(e.shiftKey?y.tab(-1):y.tab(1),e.preventDefault())}function re(e){D=!1,zid(T+(1==e?"SuffixTab":"PrefixTab")).focus(),h.stage.removeChild(d),h.stage.update(),y.tabIndex=-1}zot(i)&&(i="s"==N?.7:700),zot(l)&&(l="brown"),zot(a)&&(a=3),zot(s)&&(s=5),zot(c)&&(c=.8),zot(p)&&(p=.8),zot(d)?(m=new Ao.Shape({style:!1})).mouseEnabled=!1:d.mouseEnabled&&(d.mouseEnabled=!1),void 0===h&&(h=WW.zdf),zot(h)?zon&&zogy("Accessibility - needs a Frame"):(z=h.retina&&WW.devicePixelRatio||1,(y=this).cycle=t,y.decimals=n,y.alwaysHighlight=r,y.AHTime=i,y.AHColor=l,y.AHBorderWidth=a,y.AHBorderPadding=s,y.AHAlpha=c,y.AHObjectScale=p,v=b=-1,w=[],C=[],x={RadioButtons:"option",Tabs:"tab",Pad:"key"},T=h.canvas.id,A=Ao.mobile(),P=!1,B=null,E=[],Object.defineProperty(this,"tabOrder",{get:function(){return b},set:function(e){var t,o;for(I&&I.removeEventListener("focus",G),S&&S.removeEventListener("focus",G),i=0;i<w.length;i++)w[i].parentElement&&(w[i].outerHTML="");for(w=[],i=0;i<C.length;i++)(t=b[i])&&C[i][0].off("mousedown",C[i][1]);C=[],b=[];var n=[];_=h.shim?document.body:h.canvas,H=!1;for(var r=0,i=0;i<e.length;i++){if("HotSpots"==(t=e[i]).type&&(e.splice.apply(e,[i,1].concat(t.hotSpots)),t=t.hotSpots[0]),"HotSpot"==t.type&&(t=t.spot),t.constructor=={}.constructor){if(!(o=t.obj)||!o.getStage)continue;t.title||(t.title=ee(o))}else t={obj:o=t,title:ee(t)};if("RadioButtons"==o.type||"Tabs"==o.type||"Pad"==o.type){var l=[];r--;for(var a=0;a<o.buttons.length;a++){r++;var s=o.buttons[a],c={obj:s,title:t.title+" - "+x[o.type]+": "+("a"==s.text||"A"==s.text?"eh":s.text)};l.push(c),s.zimTabParent=o,s.zimTabParent.zimAccessibility=y,s.zimTabIndex=i+r,s.tabIndex=a,s.zimAccessibility=y,te(c),_=oe(T+"Tab"+(i+r),c.title,_,c),C.push([s,s.on("mousedown",$)]),P||E.push([s,s.on("mousedown",V)])}n=n.concat(l)}else o.zimTabIndex=i+r,o.zimTabParent=o,te(t),o.zimAccessibility=y,C.push([o,o.on("mousedown",$)]),P||E.push([o,o.on("mousedown",V)]),n.push(t),_=oe(T+"Tab"+(i+r),t.title,_,t)}(I=y.startAppTag=oe(T+"PrefixTab",u+" start",h.shim?document.body:h.canvas,null,"before")).addEventListener("focus",G),P||(I.addEventListener("focus",K),(M=oe(T+"noAriaTab","",I,null,"before")).setAttribute("aria-hidden",!0),M.focusTab=I,M.addEventListener("focus",Z),(j=oe(T+"noAriaTab","",I)).setAttribute("aria-hidden",!0),j.focusTab=I,j.addEventListener("focus",Z)),_=oe(T+"BufferTab","",_),A&&_.setAttribute("aria-hidden",!0),_=S=y.endAppTag=oe(T+"SuffixTab",u+" end",_),S.addEventListener("focus",G),P||(S.addEventListener("focus",K),_=O=oe(T+"noAriaTab","",S),O.setAttribute("aria-hidden",!0),O.focusTab=S,O.addEventListener("focus",Z),(L=oe(T+"noAriaTab","",S,null,"before")).setAttribute("aria-hidden",!0),L.focusTab=S,L.addEventListener("focus",Z)),b=n}}),Object.defineProperty(this,"tabIndex",{get:function(){return v},set:function(e){var t,o,n,r,i;function l(){if(v&&-1<v)b&&b[v]&&(b[v].obj.focus=!1);else for(var e=0;e<b.length;e++)b[e].obj.focus=!1}function a(){l(),D=!1,y.AHObject&&h.stage.removeChild(y.AHObject),y.alwaysHighlightShape&&h.stage.removeChild(y.alwaysHighlightShape),h.stage.update(),v=-1}F&&(e<0||e>=b.length?a():(e!=v&&l(),(t=b[e].obj).stage?(v=e,t.focus=!0,Y=!(D=!0),y.changeTitle(t),t.zimTabTag.focus(),setTimeout(function(){t.zimTabTag.focus();var e=new createjs.Event("change");e.title=t.zimTabTag.getAttribute("aria-label"),y.dispatchEvent(e)},150),!y.alwaysHighlight||B&&A||(y.AHObject?(k=y.AHObject,r=Ao.boundsToGlobal(t),y.AHObject.alp(y.AHAlpha).addTo(h.stage,null,!1),y.AHObject.fit(r.x,r.y,r.width,r.height),y.AHObject.sca(y.AHObject.scaleX*y.AHObjectScale),0<y.AHTime&&(R=setTimeout(function(){h.stage.removeChild(y.AHObject),h.stage.update()},y.AHTime*("s"==N?1e3:1)))):(k=m,i=t.getBounds(),o=t.localToGlobal(i.x-5,i.y-5),n=t.localToGlobal(i.x+i.width+5,i.y-5),e=t.localToGlobal(i.x+i.width+5,i.y+i.height+5),r=t.localToGlobal(i.x-5,i.y+i.height+5),(i=m.graphics).clear(),i.s(y.AHColor).ss(y.AHBorderWidth).mt(o.x-y.AHBorderPadding,o.y-y.AHBorderPadding).lt(n.x+y.AHBorderPadding,n.y-y.AHBorderPadding).lt(e.x+y.AHBorderPadding,e.y+y.AHBorderPadding).lt(r.x-y.AHBorderPadding,r.y+y.AHBorderPadding).lt(o.x-y.AHBorderPadding,o.y-y.AHBorderPadding).cp(),m.alpha=y.AHAlpha,0<y.AHTime&&(R=setTimeout(function(){h.stage.removeChild(m),h.stage.update()},y.AHTime*("s"==N?1e3:1)))),h.stage.addChild(k),h.stage.update())):a()))}}),Object.defineProperty(this,"aria",{get:function(){return B},set:function(e){(B=e)&&q()}}),"android"==A&&(Ao.ACTIONEVENT="click",zns||(WW.ACTIONEVENT="click")),zot(e)?setTimeout(function(){var t;-1==b&&(b=[],t=[],Ao.loop(h.stage,function(e){e.type&&t.push(e)}),y.tabOrder=t,zot(o)||(y.tabIndex=o))},50):(b=[],y.tabOrder=e,zot(o)||(y.tabIndex=o)),Y=!(D=!1),X=h.on("keydown",function(e){var t,o;9==e.keyCode&&(!function(){for(var e=!1,t=0;t<w.length;t++)if(document.activeElement==w[t]){e=!0;break}return!(document.activeElement!=h.canvas&&!e)}()&&(D=!1,-1!=y.tabIndex&&(y.tabIndex=-1)),D?ne(e):(t=e,h.shiftKey||zid(T+"PrefixTab")!=document.activeElement&&h.canvas!=document.activeElement?!h.shiftKey||zid(T+"SuffixTab")!=document.activeElement&&zid(T+"BufferTab")!=document.activeElement||(0<b.length&&(b[0].obj.focus=!0),D=Y=!0,ne(t)):(0<b.length&&(b[b.length-1].obj.focus=!0),D=Y=!0,ne(t)))),D&&0<b.length&&0<=y.tabIndex&&13==e.keyCode&&(t=(o=b[y.tabIndex]).obj,o&&t.stage&&(e=new createjs.Event("mousedown"),o=new createjs.Event("click"),e.fromEnter=o.fromEnter=!0,"Pane"==t.type?(t.backdrop.dispatchEvent(e),t.backdrop.dispatchEvent(o)):(t.dispatchEvent(e),t.dispatchEvent(o))))}),this.tab=function(e){if(clearTimeout(R),k&&h.stage.removeChild(k),zot(e)&&(e=1),0!=b.length){for(var t=0;t<b.length;t++)if((i=b[t].obj).focus){i.focus=!1;for(var o=t+e,n=(o+1e4*b.length)%b.length,r=b[n],i=r.obj,l=0,a=!1;!i.stage||!(!i.zimTabParent&&(zot(i.enabled)||i.enabled)||i.zimTabParent&&(zot(i.zimTabParent.enabled)||i.zimTabParent.enabled));)if(l++,n=((o+=e)+100*b.length)%b.length,i=b[n].obj,l==b.length){a=!0;break}if(a||!y.cycle&&o!=n&&!Y)return void re(e);Y=!1,y.tabIndex=n;break}}else re(e)},H=!(this.changeTitle=function(e,t,o){var n,r;"number"!=typeof e&&(e=e.zimTabIndex),zot(e)||(o&&zot(t)?y.tabIndex=e:(r=(n=b[e]).obj,zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,te(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(y.tabIndex=e)))}),this.talk=function(e){H||((W=oe(T+"TalkTab","",S)).setAttribute("role","alert"),H=!0),W.removeAttribute("role"),W.setAttribute("aria-label",e),W.setAttribute("role","alert");var t=new createjs.Event("change");t.title=e,y.dispatchEvent(t)},this.resize=function(e){if(zot(e))for(var t=0;t<b.length;t++)o(b[t].obj);else"number"!=typeof e&&(e=e.zimTabIndex),e<0||(!(e=b[e].obj).stage&&k&&e==y.currentObject&&(h.stage.removeChild(k),h.stage.update()),o(e));function o(e){var t,o;"TextArea"!=e.type&&"Loader"!=e.type?(t=e.boundsToGlobal(),o=e.zimTabTag,h.retina?(o.style.left=h.x+t.x*h.scale/z+"px",o.style.top=h.y+t.y*h.scale/z+"px",o.style.width=t.width*h.scale/z+"px",o.style.height=t.height*h.scale/z+"px"):(o.style.left=h.x+t.x*h.scale/z/z+"px",o.style.top=h.y+t.y*h.scale/z/z+"px",o.style.width=t.width*h.scale/z/z+"px",o.style.height=t.height*h.scale/z/z+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage):e.resize()}},Object.defineProperty(this,"currentObject",{get:function(){return b[v]&&b[v].obj?b[v].obj:null},set:function(e){for(var t=0;t<b.length;t++)if(b[t].obj==e){y.tabIndex=t;break}}}),F=!0,Object.defineProperty(this,"enabled",{get:function(){return F},set:function(e){F=e}}),this.dispose=function(){m&&m.graphics.clear(),y.tabOrder=[];for(var e=0;e<w.length;e++)w[e].parentElement&&(w[e].outerHTML="");I&&(I.removeEventListener("focus",G),I.removeEventListener("focus",K),I.parentNode&&(I.outerHTML="")),M&&(M.removeEventListener("focus",Z),M.parentNode&&(M.outerHTML="")),j&&(j.removeEventListener("focus",Z),j.parentNode&&(j.outerHTML="")),_&&_.parentNode&&(_.outerHTML=""),S&&(S.removeEventListener("focus",G),S.removeEventListener("focus",K),S.parentNode&&(S.outerHTML="")),O&&(O.removeEventListener("focus",Z),O.parentNode&&(O.outerHTML="")),L&&(L.removeEventListener("focus",Z),L.parentNode&&(L.outerHTML="")),y.removeAllEventListeners(),h.off("keydown",X)})},Ao.extend(Ao.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.Manager=function(e){z_d("75");var o,n,r=this;this.type=e,this.items=[],this.add=function(e){return Array.isArray(e)?r.items=r.items.concat(e):r.items.push(e),r},this.remove=function(e){if(r){if(e)for(Array.isArray(e)||(e=[e]),o=e.length-1;0<=o;o--){n=e[o];var t=r.items.indexOf(n);-1!=t&&r.items.splice(t,1)}else r.items=[];return r}},this.resize=function(e){if(r){if(e)for(Array.isArray(e)||(e=[e]),o=e.length-1;0<=o;o--)(n=e[o]).resize||-1==r.items.indexOf(n)?n.resize():r.items.splice(r.items.indexOf(n),1);else for(o=r.items.length-1;0<=o;o--)r.items[o].resize?r.items[o].resize():r.items.splice(o,1);return r}},this.toggle=function(e,t){if(r){if(t)for(Array.isArray(t)||(t=[t]),o=t.length-1;0<=o;o--)(n=t[o]).resize||-1==r.items.indexOf(n)?n.toggle(e):r.items.splice(r.items.indexOf(n),1);else for(var o=r.items.length-1;0<=o;o--)r.items[o].resize?r.items[o].toggle(e):r.items.splice(o,1);return r}},this.dispose=function(e){if(r){if(r.resize=null,e)for(Array.isArray(e)||(e=[e]),o=e.length-1;0<=o;o--)n=e[o],-1!=r.items.indexOf(n)&&r.items.splice(r.items.indexOf(n)),n.dispose&&n.dispose();else{for(o=r.items.length-1;0<=o;o--)r.items[o].resize?r.items[o].dispose():r.items.splice(o,1);r.items=null}return!0}}},Ao.ResizeManager=function(){z_d("75.5"),Ao.Manager.call(this,"ResizeManager")},Ao.ResizeManager.prototype=new Ao.Manager,Ao.ResizeManager.prototype.constructor=Ao.ResizeManager,Ao.TransformManager=function(e,n){z_d("75.7");var a=this;function t(e){!localStorage||e&&!e.pressup||a.savePersist(e)}this.type="TransformManager",this.persistID=n,this.items=[],this.add=function(e){for(var t,o,n=[],n=Array.isArray(e)?e:[e],r=!1,i=0;i<n.length;i++)(o=n[i]).transformControls&&(o.originalVisible=o.transformControls.visible),o.toggle&&o.toggle(!1),0==a.items.length&&0==i&&(r=!0),"Blob"==o.type||"Squiggle"==o.type?(a.persistID||r&&(r=!1,o.controlsVisible=!0,a.currentObject=o),o.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)}),o.on("controlsshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}),o.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)})):(t=o.transformControls,a.persistID||r&&"Layer"!=o.type&&(r=!1,o.originalVisible&&(t.show(),a.currentObject=o)),o.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,a.dispatchEvent(t)}),o.on("transformshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}));a.items=a.items.concat(e),a.persist&&!zot(a.persistID)&&a.persist(a.persistID)},this.remove=function(e){if(zot(e))a.items=[];else{Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){o=e[t],a.currentObject==o&&(a.currentObject=null),o.transformedEvent&&(o.off("transformed",o.transformedEvent),o.transformedEvent=null),"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible=!1:o.transformControls.remove();var o=a.items.indexOf(o);-1!=o&&a.items.splice(o,1)}n&&a.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}a.currentObject=e}},this.hide=function(e){zot(e)||(a.currentObject==e&&(a.currentObject=null),"Blob"==e.type||"Squiggle"==e.type?e.controlsVisible&&(e.controlsVisible=!1):(e=e.transformControls)&&!e.visible&&e.hide())},this.hideAll=function(e){for(var t,o=0;o<a.items.length;o++)(t=a.items[o])&&(t.transformControls||t.update)?a.items[o]!=e&&("Blob"==t.type||"Squiggle"==t.type?t.controlsVisible&&(t.controlsVisible=!1):(t=a.items[o].transformControls).visible&&t.hide()):a.items.splice(o);a.currentObject=null},this.resize=function(){if(a){for(var e,t=0;t<a.items.length;t++)(e=a.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():a.items.splice(t);n&&a.savePersist()}},zot(e)||a.add(e);var o="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){var n,r;if(zot(e)&&zon)zogy(o);else{a.persistID=e;var i=0;if(localStorage&&localStorage[e]){var l=a.persistData=JSON.parse(localStorage[e]);if(l.length==a.items.length)for(r=0;r<a.items.length;r++)l[r].controls&&(a.currentObject=a.items[r]),!l[r]||"Blob"!=l[r].type&&"Squiggle"!=l[r].type?l[r]&&(zot(a.items[r].transformControls)?function(){var t=n=a.items[r],o=l[r];Ao.interval(50,function(e){t.transformControls&&(t.transformControls.setData(o),t.dispatchEvent("persistset"),++i==l.length&&(setTimeout(function(){t==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear()))},20,null,null,"ms")}():(a.items[r].transformControls.setData(l[r]),function(){var t=n=a.items[r];Ao.interval(50,function(e){t.dispatchEvent("persistset"),++i==l.length&&(setTimeout(function(){t==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear())},20,null,null,"ms")}())):(a.items[r].points.length!=l[r].points.length&&(a.items[r].points=l[r].points),a.items[r].setData(l[r]),a.items[r]==a.currentObject&&a.currentObject.toggle(!0),++i==l.length&&setTimeout(function(){a.dispatchEvent("persistcomplete")},100))}for(r=0;r<a.items.length;r++)(n=a.items[r]).transformedEvent||("Blob"==n.type||"Squiggle"==n.type?(n.transformedEvent=n.on("change",function(e){e.pressup=!0,t(e)}),n.transformedEvent=n.on("update",function(e){e.pressup=!0,t(e)}),n.transformedEvent=n.on("controlsshow",function(e){e.pressup=!0,t(e)}),n.transformedEvent=n.on("controlshide",function(e){e.pressup=!0,t(e)})):(n.transformedEvent=n.on("transformed",t),n.transformedEvent=n.on("transformshow",t),n.transformedEvent=n.on("transformhide",t)))}},this.savePersist=function(){for(var e=[],t=0;t<a.items.length;t++){var o=a.items[t];"Blob"==o.type||"Squiggle"==o.type?o.recordData&&e.push(o.recordData()):o.transformControls&&o.transformControls.recordData&&e.push(o.transformControls.recordData())}a.persistData=e,localStorage[a.persistID]=JSON.stringify(e)},this.clearPersist=function(e){zot(e)&&zon?zogy(o):(a.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<a.items.length;e++){var t=a.items[e];t.transformedEvent&&("Blob"==t.type||"Squiggle"==t.type?t.off("change",t.transformedEvent):t.off("transformed",t.transformedEvent),t.transformedEvent=null)}a.persistData=null},zot(n)||a.persist(n),this.dispose=function(e,t){if(zot(e)&&(e=!0),a.removeAllEventListeners(),a.persistID&&e&&a.stopPersist(),t)for(var o=0;o<a.items.length;o++){var n=a.items[o];("Blob"==n.type||"Squiggle"==n.type?n:n.transformControls).dispose()}}},Ao.extend(Ao.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.GuideManager=function(){z_d("77"),Ao.Manager.call(this,"GuideManager")},Ao.GuideManager.prototype=new Ao.Manager,Ao.GuideManager.prototype.constructor=Ao.GuideManager,Ao.GridManager=function(){z_d("79"),Ao.Manager.call(this,"GridManager")},Ao.GridManager.prototype=new Ao.Manager,Ao.GridManager.prototype.constructor=Ao.GridManager,Ao.LayoutManager=function(){z_d("81"),Ao.Manager.call(this,"LayoutManager")},Ao.LayoutManager.prototype=new Ao.Manager,Ao.LayoutManager.prototype.constructor=Ao.LayoutManager,Ao.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return 0<=this.selections.indexOf(e)},this.add=function(e,t,o,n){if(!zot(e)&&(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),!(0<=this.selections.indexOf(e)))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?0<=r&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(){return this.clear(),!(this.selections=null)}},Ao.SelectionManager=function(o,e,t){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(o)&&(o=[]),zot(t)&&(t=!0),Array.isArray(o)||(o=[o]),this.sets=o,this.multipleKey=e,this.multipleSets=t,this.multiple=!1;for(var n=this,r=0;r<o.length;r++)o[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var e=0;e<o.length;e++)o[e].clear()},this.setCurrent=function(e){this.currentSet=e;for(var t=0;t<o.length;t++)o[t]!=e&&(this.multipleSets||o[t].clear())};t=new createjs.Event("keydown");this.eventRemove=t.remove,this.keydownEvent=function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")},WW.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)},WW.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),WW.removeEventListener("keydown",this.keydownEvent),WW.removeEventListener("keyup",this.keyupEvent)}},Ao.extend(Ao.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.Bind=function(e,t,g,o,p,n,f,r){var i;if(i=zob(Ao.Bind,arguments,"connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",this))return i;z_d("81.8"),this.type="Bind";var m=this;function z(r,e,t){var o,i=[];if(zot(e)&&zot(t)){if("from"==r&&m.bindType!=Ao.LOCALSTORAGE)return Ao.loop(m.bindings,function(e){e.filter&&i.push(e.filter)}),[i,"full"];o=m.ids}else zot(e)||Array.isArray(e)||(e=[e]),zot(t)||Array.isArray(t)||(t=[t]),e&&(o=[],Ao.loop(e,function(e){"string"==typeof e?o.indexOf(e)<0&&o.push(e):(e=m.objIDs.at(e))&&Ao.loop(e,function(e){o.indexOf(e)<0&&o.push(e)})}));var n,l,a={};return o?(l=t,Ao.loop(o,function(o){var n,e=m.bindings[o];e&&(e.filter&&i.push(e.filter),n=e.obj,Ao.loop(l||e.props,function(e){var t=m.toIDs[e];t&&0<=t.indexOf(o)&&("from"==r?(a[o]||(a[o]=[]),a[o].push(e)):(a[o]||(a[o]={}),"number"==typeof(t=n[e])&&m.smartDecimals&&(t=1<t?Ao.decimals(t,1):Ao.decimals(t,2)),a[o][e]=Ao.copy(t)))}))})):t&&(n=[],Ao.loop(t,function(o){Ao.loop(m.toIDs[o],function(e){var t=m.bindings[e];n.indexOf(e)<0&&(t.filter&&i.push(t.filter),n.push(e));t=t.obj;"from"==r?(a[e]||(a[e]=[]),a[e].push(o)):(a[e]||(a[e]={}),"number"==typeof(t=t[o])&&m.smartDecimals&&(t=1<t?Ao.decimals(t,1):Ao.decimals(t,2)),a[e][o]=Ao.copy(t))})})),[i,a]}zot(e)&&localStorage&&zot(c)&&(zot(t)||t==Ao.LOCALSTORAGE)?(e="zimBind",t=Ao.LOCALSTORAGE):e&&e.match(/\/|\./)?(zot(t)&&(t=Ao.GET),e.match(/\?/)?e+="&":e+="?"):e&&zot(t)&&(t=Ao.LOCALSTORAGE),zot(n)&&(n=!0),t!=Ao.LOCALSTORAGE||localStorage||(zon&&zogy("Bind() - no localStorage"),m.error="error - no localStorage"),this.connection=e,this.bindType=t,this.master=g,this.masterFilter=o,this.smartDecimals=n,zot(f)&&(f=!1),c&&!r||(c=this),Object.defineProperty(m,"default",{get:function(){return m==c},set:function(e){e||c!=m?e&&(c=m):c=null}}),this.bindType==Ao.POST&&(m.ajax=new Ao.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new Ao.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(o,e,t,n,r){if(zot(t)||zot(e)||zot(o))return m;if(m.bindings[o]){if(m.bindings[o].obj!=e)return zon&&zogy("Bind() - id can be used with only one object"),m}else{m.ids.indexOf(o)<=0&&m.ids.push(o),m.bindings[o]={obj:e,props:[]},zot(r)||"function"!=typeof r||(m.bindings[o].filter=r);var i=m.objIDs.at(e);i?i.indexOf(o)<0&&i.push(o):m.objIDs.add(e,[o])}Array.isArray(t)||t.constructor=={}.constructor||(t=[t]);var l=m.bindings[o].props;function a(e,t,o){zot(e[t])?e[t]=[o]:e[t].indexOf(o)<0&&e[t].push(o)}return Array.isArray(t)?Ao.loop(t,function(e){a(m.toIDs,e,o),a(m.fromIDs,e,o),l.indexOf(e)<0&&l.push(e)}):Ao.loop(t,function(e,t){t!=Ao.BOTH&&t!=Ao.TO||a(m.toIDs,e,o),t!=Ao.BOTH&&t!=Ao.FROM||a(m.fromIDs,e,o),l.indexOf(e)<0&&l.push(e)}),f&&b("Bind Report: ADD ["+o+"]",(t?" "+t:"")+(n?" "+n:"")),m.bindType==Ao.LOCALSTORAGE?(m.from(null,o,t,n),m.data&&!Ao.isEmpty(m.data)||m.to(o,t)):(y("bind",null,[r],m.data,n),m.applyData()),m},this.updatefilter=function(e,t){e=m.bindings[e];return e&&(zot(t)?e.filter&&delete e.filter:"function"==typeof t&&(e.filter=t)),m},this.remove=function(e,t,o,n,r,i){var l,a;zot(e)||Array.isArray(e)||(e=[e]),zot(e)||(l=[],a=[],Ao.loop(e,function(e){("string"==typeof e?l:a).push(e)})),zot(t)||Array.isArray(t)||(t=[t]),zot(r)&&(r=!0),0==(e=l.concat(a)).length&&(e=null);var s=z("from",e,t),e=y("remove",n,s[0],s=s[1],o);if("stop"!=e){n=Ao.copy(s);return zot(t)||0==t.length?(0<l.length&&Ao.loop(l,function(e){d(e,!0)}),0<a.length&&Ao.loop(a,function(e){0<(l=m.objIDs.at(e)).length&&Ao.loop(l,function(e){d(e,!1)}),m.objIDs.remove(e)})):(l=[],Ao.loop(s,function(o,e){var n=m.bindings[o].props;Ao.loop(e,function(e){var t=n.indexOf(e);0<=t&&n.splice(t,1),u(e,o)}),0==n.length&&l.push(o)}),0<l.length&&m.remove(l)),r&&(r="type="+m.bindType+"&",m.bindType==Ao.LOCALSTORAGE?(m.to(),c("success")):m.bindType==Ao.GET?(e=JSON.stringify(n),p&&(e=Ao.couple(e)),Ao.async(m.connection+r+"remove="+e,c,"callbackRemove")):m.bindType==Ao.POST?m.ajax.post(m.connection+r,n,c,"remove"):(m.bindType,Ao.SOCKET)),m}function c(e){i&&"function"==typeof i&&(p&&(e=Ao.couple(e)),i(e)),f&&b("Bind Report: REMOVE"+(o?" ["+o+"]":""),e)}function u(e,t){var o,n=m.fromIDs[e];n&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete m.fromIDs[e]),(n=m.toIDs[e])&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete m.toIDs[e])}function d(t,e){var o=m.bindings[t].obj,n=m.bindings[t].props,r=m.objIDs.at(o),i=r.indexOf(t);0<=i&&r.splice(i,1),e&&0==r.length&&a.push(o),0<=(i=m.ids.indexOf(t))&&m.ids.splice(i,1),Ao.loop(n,function(e){u(e,t)}),delete m.bindings[t]}},this.stopProcess=!1,this.stop=function(){m.stopped=!0};var a=function(){var e=this;e.stop=function(){e.stopped=!0}};function y(t,e,o,n,r){var i=new a,l=null!=n&&!Ao.isEmpty(n)&&m.data;return s(i,r)?["stop",n]:(m.masterFilter&&"function"==typeof m.masterFilter&&(n=m.data=m.masterFilter(n,t,r,i)),"stop"==Ao.loop(o,function(e){if("function"==typeof e){if(s(i,r))return"stop";n=m.data=e(n,t,r,i)}})||s(i,r)?["stop",n]:(e&&"function"==typeof e&&(n=m.data=e(n,t,r,i)),s(i,r)?["stop",n]:(l&&!m.data&&zon&&zogy("Bind()"+(t?" ["+t+"]":"")+(r?" ["+r+"]":"")+" - warning, a filter may not have returned data"),["go",n])))}function s(e,t){return(m.stopped||e.stopped)&&(b("STOP"+(t?" ["+t+"]":""),e.stopped?"process stopped":"bind stopped"),e.stopped?e.stop=null:m.stopped=!1,1)}function b(e,t){(m==c?zogl:zogd)(e,t)}return this.to=function(e,t,o,n,r,i,l,a){if(u=zob(m.to,arguments,"targets, props, extra, filter, smartDecimals, call, lock, unique"))return u;var s=z("to",e,t),c=y("to",n,s[0],s=s[1],o);if(s=c[1],"stop"!=c[0]){if(m.bindType==Ao.LOCALSTORAGE)localStorage[m.connection]=JSON.stringify(s),h(s);else{var u,d="type="+m.bindType+"&";if(!s||Ao.isEmpty(s))return m;m.bindType==Ao.GET?(u=s,Ao.isJSON(u)||(u=JSON.stringify(u)),p&&(u=Ao.couple(u)),f&&b("Bind Report: TO [bindings]",u),u=Ao.urlEncode(u),e=zot(m.master)?"":"&master="+Ao.urlEncode(g),t=zot(l)?"":"&lock="+Ao.urlEncode(l),n=zot(a)?"":"&unique="+Ao.urlEncode(a),c=zot(o)?"":"&extra="+Ao.urlEncode(o),c=m.connection+d+"command=to&data="+u+e+t+n+c,f&&b("Bind Report: TO [url]",c),Ao.async(c,h,"callbackTo")):m.bindType==Ao.POST&&(m.ajax.master=g,m.ajax.couple=p,m.ajax.lock=l,m.ajax.unique=a,f&&b("Bind Report: TO [bindings]",s),m.ajax.post(m.connection+d,s,"to",o,h))}return m}function h(e){p&&(e=Ao.decouple(e)),i&&"function"==typeof i&&i(e),f&&b("Bind Report: TO"+(o?" ["+o+"]":" -"),e)}},this.toLock=function(e,t,o,n,r,i){var l;if(l=zob(m.toLock,arguments,"targets, props, extra, filter, smartDecimals, call"))return l;if("localstorage"==m.bindType.toLowerCase())return m.to(e,t,o,n,r,i),m;var a=Ao.makeID();m.from(function(){m.to(e,t,o,n,r,i,a)},e,t,o,n,a)},this.toUnique=function(e,t,o,n,r,i){var l;if(l=zob(m.toUnique,arguments,"targets, props, extra, filter, smartDecimals, call"))return l;m.to(e,t,o,n,r,i,null,!0)},this.toggleReport=function(e){return f=zot(e)?!f:e,m},f&&b("Bind Report: CREATE ["+t.toUpperCase()+"]",e+(g?" "+g:"")),this.report=function(){var e="Bind {DATA} Report:",t=Ao.copy(m.data);(m==c?zogl:zogd)(e,t),e="Bind {BINDINGS} Report:",t=Ao.copy(m.bindings),(m==c?zogl:zogd)(e,t)},this.from=function(o,e,t,n,r,i){if(c=zob(m.from,arguments,"call, targets, props, extra, filter, lock"))return c;var l=(a=z("from",e,t))[0],a=a[1],s=y("fromTo",r,l,a,n);if(a=s[1],"stop"!=s[0]){var c,u="type="+m.bindType+"&";return m.bindType==Ao.LOCALSTORAGE?(localStorage[m.connection]&&null!=localStorage[m.connection]||(localStorage[m.connection]="{}"),m.data=JSON.parse(localStorage[m.connection]),d(m.data)):m.bindType==Ao.GET?(c=a,Ao.isJSON(c)||(c=JSON.stringify(c)),p&&(c=Ao.couple(c)),f&&b("Bind Report: FROM [bindings]",c),c=Ao.urlEncode(c),e=zot(m.master)?"":"&master="+Ao.urlEncode(g),t=zot(i)?"":"&lock="+Ao.urlEncode(i),s=zot(n)?"":"&extra="+Ao.urlEncode(n),s=m.connection+u+"data="+c+"&command=from"+e+t+s,f&&b("Bind Report: FROM [url]",s),Ao.async(s,d,"callbackFrom")):m.bindType==Ao.POST&&(m.ajax.master=g,m.ajax.couple=p,m.ajax.lock=i,f&&b("Bind Report: FROM [bindings]",a),m.ajax.post(m.connection+u,a,"from",n,d)),m}function d(e){var t;m.data=e,p&&(m.data=Ao.decouple(m.data)),zot(i)||(t=JSON.stringify(m.data)),"stop"!=y("from",r,l,m.data,n)[0]&&(e=!1,!zot(i)&&t==JSON.stringify(m.data)||(e=!0,m.applyData()),f&&b("Bind Report: FROM"+(n?" ["+n+"]":" -"),e?m.data:"data not applied in toLock()"),o&&"function"==typeof o&&o(m.data))}},this.applyData=function(){return Ao.loop(m.data,function(e,t){var o;m.bindings[e]&&(o=m.bindings[e].obj,Ao.loop(t,function(e,t){o[e]=t}))}),m},this.clear=function(){return m.bindType==Ao.LOCALSTORAGE&&(localStorage[m.connection]=null),m},this.removeAllBindings=function(e,t){var o;function n(e){t&&"function"==typeof t&&t(e),f&&b("Bind Report: REMOVEALL",e)}return zot(e)&&(e=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new Ao.Dictionary(!0),this.toIDs={},this.fromIDs={},e&&(o="type="+m.bindType+"&",m.bindType==Ao.LOCALSTORAGE?(m.clear(),n("success")):m.bindType==Ao.GET?(e=zot(m.master)?"":"&master="+encodeURI(g),Ao.async(m.connection+o+"command=removeAll"+e,n,"callbackRemoveAll")):m.bindType==Ao.POST&&(m.ajax.master=g,m.ajax.post(m.connection+o,{},"removeAll",null,n,"removeAll"))),m},m},Ao.Swipe=function(t,e,o,n,r){var i,l,a,s,c,u,d,h,g,p,f,m;if(i=zob(Ao.Swipe,arguments,"obj, distance, duration, isometric, overrideNoSwipe",this))return i;z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(t)&&t.on?(zot(e)&&(e=30),l=Po(o),zot(o)&&(o="s"==l?.08:80),this.distance=e,this.duration=o,this.active=!0,g=this,m=t.on("mousedown",function(o){function e(){var e,t=new createjs.Event("swipe");t.obj=g.obj,t.stageX=o.stageX/Ao.scaX,t.stageY=o.stageY/Ao.scaY,t.rawX=o.rawX/Ao.scaX,t.rawY=o.rawY/Ao.scaY,t.swipeX=t.swipeY=0,g.direction="none",n?(Math.abs(u-a)>g.distance||Math.abs(d-s)>g.distance)&&(270<=(e=(360+(e=180*Math.atan2(d-s,u-a)/Math.PI))%360)&&e<360?(t.swipeY=-1,g.direction="up"):0<=e&&e<90?(t.swipeX=1,g.direction="right"):90<=e&&e<180?(t.swipeY=1,g.direction="down"):180<=e&&e<270&&(t.swipeX=-1,g.direction="left")):Math.abs(u-a)>Math.abs(d-s)?(u-a>g.distance&&(t.swipeX=1,g.direction="right"),a-u>g.distance&&(t.swipeX=-1,g.direction="left")):(d-s>g.distance&&(t.swipeY=1,g.direction="down"),s-d>g.distance&&(t.swipeY=-1,g.direction="up")),g.dispatchEvent(t)}!g.active||!r&&o.target.zimNoSwipe||(g.obj=o.target,u=a=o.stageX/Ao.scaX,d=s=o.stageY/Ao.scaY,c=!0,g.dispatchEvent("swipedown"),clearTimeout(h),h=setTimeout(function(){c&&(e(),c=!1)},g.duration*("s"==l?1e3:1)),p=t.on("pressmove",function(e){u=e.stageX/Ao.scaX,d=e.stageY/Ao.scaY}),f=t.on("pressup",function(){c&&(e(),c=!1,clearTimeout(h))}))}),this.disable=function(){g.active=!1},this.enable=function(){g.active=!0},this.dispose=function(){m&&t.off("mousedown",m),p&&t.off("pressmove",p),f&&t.off("pressup",f)}):zogy("zim controls - Swipe():\nPlease pass in object")},Ao.extend(Ao.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.Swiper=function(e,t,o,n,r,i,l,a,s,c,u,d,h){var g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S;if(g=zob(Ao.Swiper,arguments,"swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",this))return g;function W(){v=!1,f.off("stagemousemove",p.moveEvent),f.off("stagemouseup",p.upEvent),p.dispatchEvent("swipeup")}function M(){v=!1,p.dispatchEvent("swipeup")}function O(e){b=e.target.stage,k=(f.parent||f).localToGlobal(f.x,f.y),v=!0,"radial"==r?(A=e.stageX/Ao.scaX,P=e.stageY/Ao.scaY,C=Math.atan2(P-k.y,A-k.x)*Ao.DEG):m="horizontal"==r?e.stageX/Ao.scaX:e.stageY/Ao.scaY,z=p.target[p.property],p.dispatchEvent("swipedown")}function j(e){if(v){if("radial"==r){p.diff=Ao.dist(A,P,e.stageX/Ao.scaX,e.stageY/Ao.scaY),x=Math.atan2(e.stageY/Ao.scaY-k.y,e.stageX/Ao.scaX-k.x)*Ao.DEG;var t=Ao.sign(C-x);if(180<Math.abs(x-C))return void(v=!1);p.diff=p.diff*t;t=Math.max(10,Ao.dist(k.x,k.y,e.stageX/Ao.scaX,e.stageY/Ao.scaY));p.diff*=(T-t)/T}else p.diff=m-("horizontal"==r?e.stageX/Ao.scaX:e.stageY/Ao.scaY);h&&(Math.abs(p.diff)<Math.abs(h.diff)?(p.override=!0,h.override=!1):(p.override=!1,h.override=!0)),p.override||(0<Math.abs(p.diff)&&(p.swiperMoving=!0),y=z-p.diff*p.sensitivity*c,zot(i)||zot(l)||!u?(zot(i)||(y=Math.max(y,i)),zot(l)||(y=Math.min(y,l))):(y=((t=y)+1e4*(l-i)-i)%(l-i)+i,Math.abs(t-y)>.8*Math.abs(l-i)&&(p.immediate(y),m="horizontal"==r?e.stageX/Ao.scaX:e.stageY/Ao.scaY,z=p.target[p.property])),p.desiredValue=y,p.dispatchEvent("swipemove"))}}function L(){f.off("mousedown",p.downEvent),f.off("pressmove",p.moveEvent),f.off("pressup",p.upEvent),w.off("mouseupplus",p.upEvent2)}function _(){f.canvas?(f.off("stagemousedown",p.downEvent),f.off("stagemousemove",p.moveEvent),f.off("stagemouseup",p.upEvent),w.off("mouseupplus",p.upEvent2)):L(),Ao.Ticker.remove(p.swiperTicker)}z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(e)&&e.getStage&&e.stage?zot(t)||(zot(n)&&(n=1),zot(r)&&(r="horizontal"),zot(a)&&(a=.1),zot(s)&&(s=!1),zot(c)&&(c=1),zot(u)&&(u=!1),g=Po(d),zot(d)&&(d="s"==g?.2:200),f=e,y=(p=this).desiredValue=t[o],this.target=t,this.property=o,this.sensitivity=n,v=!1,w=WW.zdf||e.stage?e.stage.frame:{},f.canvas?(b=f,p.downEvent=f.on("stagemousedown",function(e){v=!0,O(e),p.moveEvent=f.on("stagemousemove",j),p.upEvent=f.on("stagemouseup",W),p.upEvent2=w.on("mouseupplus",W)})):(b=f.stage,L(),p.downEvent=f.on("mousedown",O),p.moveEvent=f.on("pressmove",j),p.upEvent=f.on("pressup",M),p.upEvent2=w.on("mouseupplus",M)),T=Math.sqrt(Math.pow(f.width,2)+Math.pow(f.height,2)),B=new Ao.Damp(p.target[p.property],a),I=E=y,p.swiperTicker=Ao.Ticker.add(function(){y==E?y!=I&&(p.pauseTimeout&&p.pauseTimeout.clear(),I=y,p.pauseTimeout=Ao.timeout(d,function(){v&&p.dispatchEvent("swipepause"),p.pauseTimeout=null})):(I=null,E=y,p.pauseTimeout&&p.pauseTimeout.clear()),p.swiperMoving&&(p.target[p.property]=s?Math.round(B.convert(y)):B.convert(y),!v&&Math.abs(p.target[p.property]-y)<(zot(l)||zot(i)?.5:Math.abs(l-i)/1e3)&&(p.swiperMoving=!1,p.target[p.property]=y,p.immediate(p.target[p.property]),p.dispatchEvent("swipestop")))},b),this.immediate=function(e){B.immediate(e),p.target[p.property]=s?Math.round(e):e,p.desiredValue=y=e},S=!0,Object.defineProperty(p,"enabled",{get:function(){return S},set:function(e){S!=e&&(e?(f.canvas?p.downEvent=f.on("stagemousedown",p.downEvent):(p.downEvent=f.on("mousedown",p.downEvent),p.moveEvent=f.on("pressmove",p.moveEvent),p.upEvent=f.on("pressup",p.upEvent),p.upEvent2=w.on("mouseupplus",p.upEvent2)),p.immediate(p.target[p.property]),p.swiperTicker=Ao.Ticker.add(p.swiperTicker,b)):_(),S=Boolean(e))}}),Object.defineProperty(p,"desiredValue",{get:function(){return y},set:function(e){y=e}}),Object.defineProperty(p,"damp",{get:function(){return a},set:function(e){a=e,B.damp=a}}),this.dispose=function(){_(),B=null,p.swiperTicker=null}):zogy("zim.Swiper() - please provide container on stage")},Ao.extend(Ao.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.MotionController=function(r,i,e,l,t,n,a,s,c,o,u,d,h,g,p,f,m,z,y,b,v,w,C){if(T=zob(Ao.MotionController,arguments,"target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBounds, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",this))return T;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var x,k=this,T="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(f)){if(!WW.zdf)return void zogy(T);x=f=WW.zdf.stage}else if(zot(f.stage)){if(!WW.zdf)return void zogy(T);x=WW.zdf.stage}else x=f.stage;var A=x.frame;zot(o)||(C=o),zot(r)&&(r=new Ao.Container(1,1,null,null,!1));var P,B="Accelerator"==r.type;zot(e)&&(e=7),zot(i)||"DPad"!=i.type||(P=i,i="manual",zot(l)&&(l=P.axis),"all"==l&&(l="both"),P.on("change",function(){k.convert(r.x+P.dirX*e,r.y+P.dirY*e)})),(zot(i)||"mousemove"!=i&&"pressmove"!=i&&"pressdrag"!=i&&"keydown"!=i&&"gamebutton"!=i&&"gamestick"!=i&&"swipe"!=i&&"follow"!=i&&"manual"!=i)&&(i="mousedown"),zot(l)&&(l=B?"horizontal":"both"),"keydown"==i&&zot(n)&&(n=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==i&&zot(n)&&(n=d?[14,15,Ao.GamePad.RT,Ao.GamePad.LT]:[14,15,12,13]),"gamestick"==i&&zot(n)&&(n=d?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==i&&zot(n)&&(n=[0,0,1,1]),zot(a)&&(a=!0),"horizontal"!=l&&"vertical"!=l||(a=!1),zot(s)&&(s="keydown"==i||"gamebutton"==i?1:"pressmove"==i?.2:.1),zot(d)&&(d=!1),zot(h)&&(h=.4*e),zot(g)&&(g=4),zot(p)&&(p=.2),zot(z)&&(z=!1),x.mouseMoveOutside=z,zot(y)&&(y=[]),Array.isArray(y)||(y=[y]),"Pen"!=r.type||r.move?y.push(r):y.push(r,r.paper),t&&t.getBounds&&(y?-1==y.indexOf(t)&&y.push(t):y=[t]),(r.motionController=this).mousedownIncludes=y,zot(w)&&(w=.3),k.dampKeyup=w,this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=h,this.axis=l,this.target=r,this.moveThreshold=g,this.stickThreshold=p,this.boundary=t,r.zimMCStartAngle=r.rotation;var E,I,S,W=k.speed,M=k.speed,O=0;k.rotation=r.zimMCStartAngle,B?(S=!(I=f.getBounds())||"vertical"==l&&!I.height||"vertical"!=l&&!I.width?1e3:"vertical"==l?I.height:I.width,zot(b)&&(b=0),zot(v)&&(v=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(v-b)/2),k.x=S/2,k.y=S/2,E=new Ao.Proportion(0,S,b,v)):(k.x=this.target.x,k.y=this.target.y);var j,L,_,D,Y,X,R,H,F,N,V,G,q=k.scaleX=r.scaleX,U=k.scaleY=r.scaleY,Q=!1,Z=!1;if("keydown"==i||"gamebutton"==i){for(X=0;X<4;X++)Array.isArray(n[X])||(n[X]=[n[X]]);var K,J,$,ee,te=[0,0,0,0],oe=[],ne=["X","X","Y","Y"],re=[-1,1,-1,1],ie={dirX:0,dirY:0};"keydown"==i?K=A.on("keydown",se):J=(H=k.gamepad=new Ao.GamePad).on("buttondown",se),zot(u)&&("keydown"==i?$=A.on("keyup",ce):ee=H.on("buttonup",ce)),F={rotation:0,speedX:k.speed,speedY:k.speed};var le=Ao.Ticker.add(function(){var e,t,o;d?de(ie):(t=k.speed,o=k.speed,"both"==k.axis&&0!=ie.dirX&&0!=ie.dirY&&(t=(e=pe(ie.dirX,ie.dirY)).speedX,o=e.speedY),"horizontal"!=k.axis&&"both"!=k.axis||(k.x+=t*ie.dirX),"vertical"!=k.axis&&"both"!=k.axis||(k.y+=o*ie.dirY),he())},x)}else if("mousedown"==i||"mousemove"==i)j=x.on("stage"+i,function(e){if(x=e.target.stage,"mousedown"==i){if(Array.isArray(k.mousedownIncludes)||(k.mousedownIncludes=[k.mousedownIncludes]),k.mousedownIncludes.indexOf(f)<0)for(X=0;X<f.numChildren;X++){var t=f.getChildAt(X);if(-1==k.mousedownIncludes.indexOf(t)&&t.mouseEnabled&&t.hitTestPoint&&t.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))return}k.dispatchEvent("mousedown")}var o=f.globalToLocal(z?e.rawX/Ao.scaX:e.stageX/Ao.scaX,z?e.rawY/Ao.scaY:e.stageY/Ao.scaY);k.x=o.x,k.y=o.y,he()});else if("pressmove"==i||"pressdrag"==i||"follow"==i)"Pen"==r.type&&(r.write=!1),j=x.on("stagemousedown",function(e){if(("Pen"!=r.type&&"pressmove"!=i||!k.boundary||"Blob"!=!k.boundary.type||!((n={x:e.stageX/Ao.scaX,y:e.stageY/Ao.scaY}).x<k.boundary.x||n.x>k.boundary.x+k.boundary.width||n.y<k.boundary.y||n.y>k.boundary.y+k.boundary.height))&&(!k.boundary||"Blob"!=k.boundary.type||"pressmove"!=i&&"pressdrag"!=i||(n={x:e.stageX/Ao.scaX,y:e.stageY/Ao.scaY},k.boundary.shape.hitTestPoint(n.x,n.y)))&&("pressdrag"!=i||r.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))){Z=!1,Array.isArray(k.mousedownIncludes)||(k.mousedownIncludes=[k.mousedownIncludes]);var t=!1;for(k.mouseDownIncludes&&(Y=x.getObjectUnderPoint(e.stageX,e.stageY,1)),X=0;X<k.mousedownIncludes.length;X++)Y&&k.mousedownIncludes[X].hitTestPoint&&k.mousedownIncludes[X].hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY)&&k.mousedownIncludes[X].contains(Y)&&(t=!0);if(!t)for(X=0;X<f.numChildren;X++){var o=f.getChildAt(X);if(-1==k.mousedownIncludes.indexOf(o)&&o.mouseEnabled&&o.hitTestPoint&&o.hitTestPoint(e.stageX/Ao.scaX,e.stageY/Ao.scaY))return}var n=f.globalToLocal(z?e.rawX/Ao.scaX:e.stageX/Ao.scaX,z?e.rawY/Ao.scaY:e.stageY/Ao.scaY);"follow"!=i&&"pressdrag"!=i&&k.immediate("both"==l||"horizontal"==l?n.x:null,"both"==l||"vertical"==l?n.y:null),he(),k.dispatchEvent("mousedown"),Q=!0,k.moveX=z?e.rawX/Ao.scaX:e.stageX/Ao.scaX,k.moveY=z?e.rawY/Ao.scaY:e.stageY/Ao.scaY,L=x.on("stagemousemove",function(e){k.moveX=z?e.rawX/Ao.scaX:e.stageX/Ao.scaX,k.moveY=z?e.rawY/Ao.scaY:e.stageY/Ao.scaY,"follow"!=i&&ue()}),D&&Ao.Ticker.remove(D),"follow"==i&&(D=Ao.Ticker.add(ue)),"Pen"==r.type&&(r.write=!0,r.paper.noMouse(),r.zimDragCheck=!0)}}),_=x.on("stagemouseup",function(){"Pen"==r.type&&(r.write=!1,r.paper.mouse(),r.zimDragCheck=!1,Z&&r.stopCheck()),D&&Ao.Ticker.remove(D),x.off("stagemousemove",L),Q=!1});else if("gamestick"==i){for(H=this.gamepad=new Ao.GamePad,X=0;X<4;X++)Array.isArray(n[X])||(n[X]=[n[X]]);F={rotation:r.zimMCStartAngle,speedX:k.speed,speedY:k.speed};var ae=H.on("data",function(e){for(ie={dirX:0,dirY:0},X=0;X<n[0].length;X++)if(R=e.axes[n[0][X]],Math.abs(R)>k.stickThreshold){ie.dirX=R;break}for(X=0;X<n[2].length;X++)if(R=e.axes[n[2][X]],Math.abs(R)>k.stickThreshold){ie.dirY=R;break}d?de(ie):(k.x+=k.speed*ie.dirX,k.y+=k.speed*ie.dirY,he())})}else"swipe"==i&&(N=new Ao.Swiper(x,k,"x",.8),V=new Ao.Swiper(x,k,"y",.8,!1),G=N.on("swipemove",function(){he()}));function se(e){var t,o="keydown"==i?e.keyCode:e.buttonCode;for(X=0;X<4;X++)if(-1<n[X].indexOf(o))return a||"both"!=k.axis||(ie.dirX=ie.dirY=0),ie["dir"+ne[X]]=re[X],te[X]=1,0==(t=oe.indexOf(X))?void 0:(0<t&&oe.splice(t,1),void oe.unshift(X))}function ce(e){var t,o="keydown"==i?e.keyCode:e.buttonCode;for(X=0;X<4;X++)if(-1<n[X].indexOf(o))return(te[X]=0)<=(t=oe.indexOf(X))&&oe.splice(t,1),void("both"!=k.axis||a?ie["dir"+ne[X]]=-te[2*Math.floor(X/2)]+te[2*Math.floor(X/2)+1]:0<oe.length?(ie["dir"+ne[X]]=0,t=oe[0],ie["dir"+ne[t]]=re[t]):ie.dirX=ie.dirY=0)}function ue(){var e=f.globalToLocal(k.moveX,k.moveY);k.x=e.x,k.y=e.y,he(),"Pen"==r.type&&!Z&&r.drawing&&(Z=!0)}function de(e){F.rotation+=e.dirX*k.turnSpeed,k.rotation=F.rotation,F.speedX=Math.sin(F.rotation*Math.PI/180)*k.speed*-e.dirY,F.speedY=-Math.cos(F.rotation*Math.PI/180)*k.speed*-e.dirY,k.x+=F.speedX,k.y+=F.speedY}function he(){var e,t=pe(k.x-(B?k.target.percentSpeed:k.target.x),k.y-(B?k.target.percentSpeed:k.target.y));W=t.speedX,M=t.speedY,C&&(zot(t.angle)||(k.rotation=t.angle+r.zimMCStartAngle),zot(k.rotation)?k.rotation=k.target.rotation:(k.rotation+=O,e=ge(k.rotation),t=k.target.rotation=ge(k.target.rotation),180<Math.abs(e-t)&&(e<t?t-=360:e-=360),k.dampR.immediate(t),k.target.rotation=t,k.rotation=e))}function ge(e){return(e%360+360)%360}function pe(e,t){var o,n=k.speed,r=k.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<i&&(n=Math.abs(e)/i*k.speed,r=Math.abs(t)/i*k.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}var fe=this.x,me=this.y,ze=this.x,ye=this.y,be=this.x=B?S/2:this.target.x,ve=this.y=B?S/2:this.target.y;this.dampX=new Ao.Damp(be,s),this.dampY=new Ao.Damp(ve,s),this.dampR=new Ao.Damp(this.target.rotation,s);var we,Ce=0,xe=0,ke=Ao.Ticker.add(function(){var e,t,o,n;"manual"==i&&he(),k.boundary&&"Blob"!=k.boundary.type&&(k.x=Ao.constrain(k.x,k.boundary.x,k.boundary.x+k.boundary.width),k.y=Ao.constrain(k.y,k.boundary.y,k.boundary.y+k.boundary.height)),"horizontal"!=k.axis&&"both"!=k.axis||(k.dirX=Ao.sign(k.x-be),Math.abs(k.x-be)<W?be=k.x:be+=k.dirX*W,ie&&0==ie.dirX&&(e=k.boundary?k.boundary.width/2:x.width/2,t=k.x-(k.x-e)*(B?k.dampKeyup:0),be=t,k.x=be),B&&I&&I.width?k.target.percentSpeed=E.convert(k.dampX.convert(be)):k.target.x=k.dampX.convert(be)),"vertical"!=k.axis&&"both"!=k.axis||(k.dirY=Ao.sign(k.y-ve),Math.abs(k.y-ve)<M?ve=k.y:ve+=Ao.sign(k.y-ve)*M,ie&&0==ie.dirY&&(e=k.boundary?k.boundary.height/2:x.height/2,o=k.y-(k.y-e)*(B?k.dampKeyup:0),ve=o,k.y=ve),B&&I&&I.height?k.target.percentSpeed=E.convert(k.dampY.convert(ve)):k.target.y=k.dampY.convert(ve)),k.boundary&&"Blob"==k.boundary.type&&(k.boundary.shape.hitTestPoint(k.target.x,k.target.y)?(fe=k.target.x,me=k.target.y):(k.target.x=k.x=fe,k.target.y=k.y=me,k.immediate(fe,me))),"pressmove"==i&&Q&&k.dispatchEvent("pressing"),1==s?(k.movingX=0!=Math.round(ze-k.x),k.movingY=0!=Math.round(ye-k.y),ze=k.x,ye=k.y):(k.movingX=Math.abs(be-(B?k.target.percentSpeed:k.target.x))>k.moveThreshold,k.movingY=Math.abs(ve-(B?k.target.percentSpeed:k.target.y))>k.moveThreshold),!k.moving||k.movingX||k.movingY?k.moving||!k.movingX&&!k.movingY||k.dispatchEvent("startmoving"):k.dispatchEvent("stopmoving"),k.moving=k.movingX||k.movingY,k.moving&&k.dispatchEvent("moving"),k.dirX==Ce&&k.dirY==xe||(o=new createjs.Event("change"),k.dirX!=Ce?(n=["left",null,"right"],o.dir=n[k.dirX+1],Ce=k.dirX,r.zimMCStartAngle||"horizontal"!=c&&"both"!=c||(k.scaleX=r.scaleX=k.dirX?Math.abs(r.scaleX)*k.dirX:r.scaleX,O=0!=q&&-1==Math.round(k.scaleX/q)?180:0)):(n=["up",null,"down"],o.dir=n[k.dirY+1],xe=k.dirY,r.zimMCStartAngle||"vertical"!=c&&"both"!=c||(k.scaleY=r.scaleY=k.dirY?Math.abs(r.scaleY)*k.dirY:r.scaleY,O=0!=U&&-1==Math.round(k.scaleY/U)?180:0)),k.dispatchEvent(o)),C&&!zot(k.rotation)&&(k.target.rotation=k.dampR.convert(k.rotation))},x);this.immediate=function(e,t,o){return!zot(e)&&k.dampX&&(k.dampX.immediate(e),k.x=B?k.target.percentSpeed=be=e:k.target.x=be=e,N&&N.immediate(e)),!zot(t)&&k.dampY&&(k.dampY.immediate(t),k.y=B?k.target.percentSpeed=ve=t:k.target.y=ve=t,V&&V.immediate(t)),!zot(o)&&k.dampR&&(k.dampR.immediate(o),k.rotation=k.target.rotation=o),fe=k.x,me=k.y,k},this.convert=function(e,t){zot(e)||(k.x=e),zot(t)||(k.y=t),he()},Object.defineProperty(k,"pausingSpeed",{get:function(){return k.speed},set:function(e){k.speed=e}}),this.paused=!1,this.pause=function(e,t,o){return zot(e)&&(e=!0),zot(t)&&(t=0),zot(o)&&(o=!1),e?(we=k.speed,0<t?(Ao.animate({target:k,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){k.speed=0,k.paused=!0,k.enabled=!1,k.immediate(k.target.x,k.target.y),k.dispatchEvent("pause")}}),o&&(Q=!1,L&&x.off("stagemousemove",L),D&&Ao.Ticker.remove(D),"Pen"==r.type&&(r.write=!1,r.zimDragCheck=!1),_&&x.off("stagemouseup",_),Z&&r.stopCheck(),"keydown"==i?$&&A.off("keyup",$):ee&&H.off("buttonup",ee))):(k.speed=0,k.paused=!0,k.enabled=!1,k.immediate(k.target.x,k.target.y),setTimeout(function(){k.dispatchEvent("pause")},10))):(k.enabled=!0,0<t?Ao.animate({target:k,obj:{pausingSpeed:we},ticker:!1,time:t,call:function(){k.speed=we,k.paused=!1}}):(k.speed=we,k.paused=!1)),k};var Te=!0;function Ae(){"keydown"==i?(A.off("keydown",K),A.off("keyup",$),Ao.Ticker.remove(le)):"gamebutton"==i?(H.off("buttondown",J),H.off("buttonup",ee),Ao.Ticker.remove(le)):"gamestick"==i?H.off("data",ae):"swipe"==i?(N.enabled=!1,V.enabled=!1,N.off("swipemove",G)):"mousedown"==i||"mousemove"==i?x.off("stage"+i,j):"pressmove"==i&&(x.off("stagemousedown",j),x.off("stagemousemove",L),x.off("stagemouseup",_)),Ao.Ticker.remove(ke)}Object.defineProperty(k,"enabled",{get:function(){return Te},set:function(e){Te!=e&&(e?("keydown"==i?(K=A.on("keydown",K),$=$&&A.on("keyup",$),le=Ao.Ticker.add(le,x)):"gamebutton"==i?(J=H.on("buttondown",J),ee=ee&&H.on("buttonup",ee),le=Ao.Ticker.add(le,x)):"gamestick"==i?ae=H.on("data",ae):"swipe"==i?(N.enabled=!0,V.enabled=!0,G=G&&N.on("swipemove",G)):"mousedown"==i||"mousemove"==i?j=x.on("stage"+i,j):"pressmove"==i&&(j=x.on("stagemousedown",j),L=L&&x.on("stagemousemove",L),_=_&&x.on("stagemouseup",_)),ke=Ao.Ticker.add(ke,x),k.paused=!1):(Ae(),k.paused=!0),Te=Boolean(e))}}),this.dispose=function(){Ae(),H&&H.dispose(),N&&N.dispose(),V&&N.dispose()}},Ao.extend(Ao.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),Ao.GamePad=function(){if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zogy("zim.GamePad() - no browswer support"));var r;WW.addEventListener("gamepadconnected",e),this.currentIndex=0;var i=this;function e(e){var t;i.connected=!0,t="gamepadconnected",e=e,(t=new createjs.Event(t)).index=e.gamepad.index,t.id=e.gamepad.id,t.buttons=e.gamepad.buttons,t.axes=e.gamepad.axes,i.dispatchEvent(t);var o=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var n=0;n<o.buttons.length;n++)i.lastData[n]=o.buttons[n].pressed;!function e(){if(r=requestAnimationFrame(e),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var t,o=i.buttons=[],n=0;n<i.data.buttons.length;n++)o[n]=i.data.buttons[n].pressed,o[n]!=i.lastData[n]&&(i.lastData[n]=o[n],(t=o[n]?new createjs.Event("buttondown"):new createjs.Event("buttonup")).buttonCode=n,t.button=l[n],i.dispatchEvent(t));(t=new createjs.Event("data")).axes=i.axes=i.data.axes,t.buttons=i.buttons,i.dispatchEvent(t)}}()}var t=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||e(),clearInterval(t))},500);function o(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(r),i.connected=!1,i.dispatchEvent("gamepaddisconnected"))}WW.addEventListener("gamepaddisconnected",o),this.dispose=function(){WW.removeEventListener("gamepadconnected",e),WW.removeEventListener("gamepaddisconnected",o),cancelAnimationFrame(r),clearInterval(t),i.connected=!1}};var l=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(z_i=0;z_i<l.length;z_i++)Ao.GamePad[l[z_i]]=z_i;var m,z,e=["LSX","LSY","RSX","RSY"];for(z_i=0;z_i<e.length;z_i++)Ao.GamePad[e[z_i]]=z_i;for(Ao.extend(Ao.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),Ao.Portal=function(t,o){var e,n,r,i,l;if(e=zob(Ao.Portal,arguments,"obj, lands",this))return e;function a(){o.setChildIndex(i,0),i=l,l=o.getChildAt(o.numChildren-2),o.setChildIndex(l,o.numChildren-1),i.setMask(null),l.setMask(t),t.stage.update()}z_d("69.96"),!zot(t)&&t.stage&&(this.type="Portal",n=this,(r=o&&o.numChildren&&0<o.numChildren)&&(i=o.getChildAt(o.numChildren-1),l=o.getChildAt(o.numChildren-2),o.setChildIndex(l,o.numChildren-1),l.setMask(t)),t.on(Ao.mobile()?"mousedown":"mouseover",function(){n._enabled&&(r&&a(),n.dispatchEvent("enter"))}),t.on(Ao.mobile()?"pressup":"mouseout",function(){n._enabled&&n.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?l.setMask(t):zogy("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return i},set:function(e){if(o.contains(e))for(;e!=i;)a()}}),Object.defineProperty(this,"nextLand",{get:function(){return l},set:function(){zon&&zogy("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(n,"enabled",{get:function(){return n._enabled},set:function(e){n._enabled=e}}))},Ao.extend(Ao.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),WW.zimContactListener=null,Ao.BlurEffect=function(t,o,n,r,e,i){var l;if(l=zob(Ao.BlurEffect,arguments,"blurX, blurY, quality, style, group, inherit",this))return l;z_d("69.972"),this.group=e;e=!1===r?{}:Ao.getStyle("BlurEffect",e,i);zot(t)&&(t=null!=e.blurX?e.blurX:10),zot(o)&&(o=null!=e.blurY?e.blurY:10),zot(n)&&(n=null!=e.quality?e.quality:1);var a=function(){return arguments}(t,o,n);t=zik(t),o=zik(o),n=zik(n),this.createjsBlurFilter_constructor(t,o,n),this.type="BlurEffect",this.clone=function(e){return new Ao.BlurEffect(e||!Ao.isPick(a[0])?t:a[0],e||!Ao.isPick(a[1])?o:a[1],e||!Ao.isPick(a[2])?n:a[2],r,this.group,i)}},Ao.extend(Ao.BlurEffect,createjs.BlurFilter,"clone","createjsBlurFilter",!1),Ao.GlowEffect=function(t,o,n,r,i,l,a,s,e,c,u,d){var h;if(h=zob(Ao.GlowEffect,arguments,"color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",this))return h;z_d("69.9725"),this.group=u;u=!1===c?{}:Ao.getStyle("GlowEffect",u,d);zot(t)&&(t=null!=u.color?u.color:"white"),zot(o)&&(o=null!=u.alpha?u.alpha:1),zot(n)&&(n=null!=u.blurX?u.blurX:30),zot(r)&&(r=null!=u.blurY?u.blurY:30),zot(i)&&(i=null!=u.strength?u.strength:1),zot(l)&&(l=null!=u.quality?u.quality:1),zot(a)&&(a=null!=u.inner&&u.inner),zot(s)&&(s=null!=u.knockout&&u.knockout),zot(e)&&(e=null!=u.hideObject&&u.hideObject);var g=function(){return arguments}(t,o,n,r,i,l,a,s,e);n=zik(n),r=zik(r),l=zik(l),t=zik(t),this.alpha=zik(o),this.strength=zik(i),this.inner=zik(a),this.knockout=zik(s),this.hideObject=zik(e),this.createjsBlurFilter_constructor(n,r,l),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(e,t,o,n,r,i,l,a){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;void 0===l&&(l=t),void 0===a&&(a=o);var s=(i=i||e).getImageData(l,a,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d",{willReadFrequently:!0}),e=u.getImageData(0,0,n,r),d=e.data,h=this.inner,g=this._red,p=this._green,f=this._blue,m=0,z=d.length;m<z;m+=4){var y=m+3,b=s[y];h?255!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=255-b):0!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=b)}u.putImageData(e,0,0);var v=this.strength;if(0<v){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<v&&(v=255);for(var w=1;w<v;w++)u.drawImage(c,0,0)}n=this.alpha;return n<0?n=0:1<n&&(n=1),r=this.knockout?h?"source-in":"source-out":this.hideObject?h?"source-in":"copy":h?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,i.globalCompositeOperation=r,i.drawImage(c,l,a),i.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(e){e=Ao.convertColor(e,"hexNumber"),this._red=e>>16&255,this._green=e>>8&255,this._blue=255&e}}),this.color=t,this.clone=function(e){return new Ao.GlowFilter(e||!Ao.isPick(g[0])?t:g[0],e||!Ao.isPick(g[1])?o:g[1],e||!Ao.isPick(g[2])?n:g[2],e||!Ao.isPick(g[3])?r:g[3],e||!Ao.isPick(g[4])?l:g[4],e||!Ao.isPick(g[5])?i:g[5],e||!Ao.isPick(g[6])?a:g[6],e||!Ao.isPick(g[7])?s:g[7],e||!Ao.isPick(g[8])?s:g[8],c,this.group,d)}},Ao.extend(Ao.GlowEffect,createjs.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),Ao.ShadowEffect=function(t,o,n,r,i,l,a,s,c,u,d,h,e,g){var p;if(p=zob(Ao.ShadowEffect,arguments,"distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",this))return p;z_d("69.973"),this.group=e;e=!1===h?{}:Ao.getStyle("ShadowEffect",e,g);zot(t)&&(t=null!=e.distance?e.distance:10),zot(o)&&(o=null!=e.angle?e.angle:45),zot(n)&&(n=null!=e.color?e.color:Ao.black),zot(r)&&(r=null!=e.alpha?e.alpha:.4),zot(i)&&(i=null!=e.blurX?e.blurX:15),zot(l)&&(l=null!=e.blurY?e.blurY:15),zot(a)&&(a=null!=e.strength?e.strength:1),zot(s)&&(s=null!=e.quality?e.quality:1),zot(c)&&(c=null!=e.inner&&e.inner),zot(u)&&(u=null!=e.knockout&&e.knockout),zot(d)&&(d=null!=e.hideObject&&e.hideObject);var f=function(){return arguments}(t,o,n,r,i,l,a,s,c,u,d);i=zik(i),l=zik(l),s=zik(s),n=zik(n),t=zik(t),o=zik(o);var m=this;function z(e,t){t*=Ao.RAD;m._offsetX=Math.cos(t)*e,m._offsetY=Math.sin(t)*e}this.alpha=zik(r),this.strength=zik(a),this.inner=zik(c),this.knockout=zik(u),this.hideObject=zik(d),this.createjsBlurFilter_constructor(i,l,s),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return o},set:function(e){o=e=(e%360+360)%360,z(t,e)}}),this.angle=o,Object.defineProperty(this,"distance",{get:function(){return t},set:function(e){z(t=e,o)}}),this.distance=t,Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(e){e=Ao.convertColor(e,"hexNumber"),this._red=e>>16&255,this._green=e>>8&255,this._blue=255&e}}),this.color=n,this.applyFilter=function(e,t,o,n,r,i,l,a){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;void 0===l&&(l=t),void 0===a&&(a=o);var s=(i=i||e).getImageData(l,a,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d",{willReadFrequently:!0}),e=u.getImageData(0,0,n,r),d=e.data,h=this.inner,g=this._red,p=this._green,f=this._blue,m=0,z=d.length;m<z;m+=4){var y=m+3,b=s[y];h?255!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=255-b):0!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=b)}u.putImageData(e,0,0);var v=this.strength;if(0<v){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<v&&(v=255);for(var w=1;w<v;w++)u.drawImage(c,0,0)}n=this.alpha;return n<0?n=0:1<n&&(n=1),r=this.knockout?h?"source-in":"source-out":this.hideObject?h?"source-in":"copy":h?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,i.globalCompositeOperation=r,i.drawImage(c,l+this._offsetX,a+this._offsetY),i.restore(),!0},this.getBounds=function(e){var t=this.createjsBlurFilter_getBounds(e),o=this._offsetX,e=this._offsetY;return 0!==o&&(o<0?(t.x+=o,t.width+=-o):t.width+=o),0!==e&&(e<0?(t.y+=e,t.height+=-e):t.height+=e),t},this.clone=function(e){return new Ao.ShadowFilter(e||!Ao.isPick(f[0])?t:f[0],e||!Ao.isPick(f[1])?o:f[1],e||!Ao.isPick(f[2])?n:f[2],e||!Ao.isPick(f[3])?r:f[3],e||!Ao.isPick(f[4])?i:f[4],e||!Ao.isPick(f[5])?l:f[5],e||!Ao.isPick(f[6])?s:f[6],e||!Ao.isPick(f[7])?a:f[7],e||!Ao.isPick(f[8])?c:f[8],e||!Ao.isPick(f[9])?u:f[9],e||!Ao.isPick(f[10])?d:f[10],h,this.group,g)}},Ao.extend(Ao.ShadowEffect,createjs.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),Ao.ColorEffect=function(t,o,n,r,i,l,a,s,c,e,u){var d;if(d=zob(Ao.ColorEffect,arguments,"redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",this))return d;z_d("69.9735"),this.group=e;e=!1===c?{}:Ao.getStyle("ColorEffect",e,u);zot(t)&&(t=null!=e.redMultiplier?e.redMultiplier:1),zot(o)&&(o=null!=e.greenMultiplier?e.greenMultiplier:1),zot(n)&&(n=null!=e.blueMultiplier?e.blueMultiplier:1),zot(r)&&(r=null!=e.alphaMultiplier?e.alphaMultiplier:1),zot(i)&&(i=null!=e.redOffset?e.redOffset:0),zot(l)&&(l=null!=e.greenOffset?e.greenOffset:0),zot(a)&&(a=null!=e.blueOffset?e.blueOffset:0),zot(s)&&(s=null!=e.alphaOffset?e.alphaOffset:0);var h=function(){return arguments}(t,o,n,r,i,l,a,s);t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),l=zik(l),a=zik(a),s=zik(s),this.createjsColorFilter_constructor(t,o,n,r,i,l,a,s),this.type="ColorEffect",this.clone=function(e){return new Ao.ColorEffect(t,o,n,r,i,l,a,s,e||!Ao.isPick(h[0])?t:h[0],e||!Ao.isPick(h[1])?o:h[1],e||!Ao.isPick(h[2])?n:h[2],e||!Ao.isPick(h[2])?r:h[3],e||!Ao.isPick(h[2])?i:h[4],e||!Ao.isPick(h[2])?l:h[5],e||!Ao.isPick(h[2])?a:h[6],e||!Ao.isPick(h[2])?s:h[7],c,this.group,u)}},Ao.extend(Ao.ColorEffect,createjs.ColorFilter,"clone","createjsColorFilter",!1),Ao.MultiEffect=function(r,i,l,a,t,e,o){var n;if(n=zob(Ao.MultiEffect,arguments,"hue, saturation, brightness, contrast, style, group, inherit",this))return n;z_d("69.974"),this.group=e;e=!1===t?{}:Ao.getStyle("MultiEffect",e,o);zot(r)&&(r=null!=e.hue?e.hue:0),zot(i)&&(i=null!=e.saturation?e.saturation:0),zot(l)&&(l=null!=e.brightness?e.brightness:0),zot(a)&&(a=null!=e.contrast?e.contrast:0);var s=function(){return arguments}(r,i,l,a);r=zik(r),this.createjsColorMatrixFilter_constructor((new createjs.ColorMatrix).adjustColor(l,a,i,r)),this.type="MultiEffect",this.adjustColor=function(e,t,o,n){zot(r)||(r=zik(e)),zot(i)||(i=zik(t)),zot(l)||(l=zik(o)),zot(a)||(a=zik(n)),this.matrix.reset().adjustColor(e,t,o,n)},Object.defineProperty(this,"brightness",{get:function(){return l},set:function(e){l=zik(e),this.matrix.reset().adjustColor(l,a,i,r)}}),Object.defineProperty(this,"contrast",{get:function(){return a},set:function(e){a=zik(e),this.matrix.reset().adjustColor(l,a,i,r)}}),Object.defineProperty(this,"saturation",{get:function(){return i},set:function(e){i=zik(e),this.matrix.reset().adjustColor(l,a,i,r)}}),Object.defineProperty(this,"hue",{get:function(){return r},set:function(e){r=zik(e),this.matrix=(new createjs.ColorMatrix).adjustColor(l,a,i,r),this.applyFilter()}}),this.clone=function(e){return new Ao.MultiEffect(e||!Ao.isPick(s[0])?r:s[0],e||!Ao.isPick(s[0])?i:s[0],e||!Ao.isPick(s[0])?l:s[0],e||!Ao.isPick(s[0])?a:s[0],t,this.group,o)}},Ao.extend(Ao.MultiEffect,createjs.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),Ao.AlphaEffect=function(t,o,e,n){var r;if(r=zob(Ao.AlphaEffect,arguments,"mask, style, group, inherit",this))return r;z_d("69.9745"),this.group=e;e=!1===o?{}:Ao.getStyle("AlphaEffect",e,n);zot(t)&&(t=null!=e.mask?e.mask:null);var i=function(){return arguments}(t);"Bitmap"==(t=zik(t)).type?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(e){return new Ao.AlphaEffect(e||!Ao.isPick(i[0])?t:i[0],o,this.group,n)}},Ao.extend(Ao.AlphaEffect,createjs.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),Ao.Pixel=function(r,t,o,n,i,l,a,s,c,u,d,e,h){var g;if(g=zob(Ao.Pixel,arguments,"obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",this))return g;z_d("69.9747"),this.group=e;e=!1===d?{}:Ao.getStyle("Pixel",e,h);zot(r)&&(r=null!=e.obj?e.obj:null),zot(t)&&(t=null!=e.amount?e.amount:.5),zot(o)&&(o=null!=e.amountY?e.amountY:null);var p=!1;null==o&&(p=!0,o=t),zot(n)&&(n=null!=e.blur?e.blur:0),zot(i)&&(i=null!=e.dynamic&&e.dynamic),zot(l)&&(l=null!=e.blendmode?e.blendmode:null),zot(a)&&(a=null!=e.boundary?e.boundary:new Ao.Boundary(r.getBounds())),zot(s)&&(s=null!=e.expand?e.expand:0),zot(c)&&(c=null!=e.amountFactor?e.amountFactor:.6),zot(u)&&(u=null!=e.blurFactor?e.blurFactor:.6);var f=function(){return arguments}(r,t,o,n,l,c,u);r=zik(r),t=zik(t),o=zik(o),n=zik(n),l=zik(l),c=zik(c),u=zik(u),s&&(!Array.isArray(s)||1==s.length?a.contract(-s):2==s.length?a.contract(-s[0],-s[1]):a.contract(-s[0],-s[1],-s[2],-s[3]));var m=Ao.constrain(10*c,0,10),z=Ao.constrain(10*u,0,10),y=this,b=Math.pow(Math.E,-t*m),v=Math.pow(Math.E,-o*m),w=Math.pow(Math.E,-n*z);zot(r)&&(r=new Ao.Tile(new Ao.Circle(20,[Ao.green,Ao.blue,Ao.yellow,Ao.pink,Ao.purple]),5,5,5,5));var C=document.createElement("canvas"),x=C.getContext("2d"),k=document.createElement("canvas"),T=k.getContext("2d"),A=w;this.update=function(){r.cacheCanvas&&w==A?r.updateCache(l):(r.cache(a.x,a.y,a.width,a.height,w),A=w);var e=r.width,t=r.height,o=r.width*b,n=r.height*v;C.width=e,C.height=t,k.width=e,k.height=t,T.msImageSmoothingEnabled=!1,T.mozImageSmoothingEnabled=!1,T.webkitImageSmoothingEnabled=!1,T.imageSmoothingEnabled=!1,x.drawImage(r.cacheCanvas,0,0,o,n),T.drawImage(C,0,0,o,n,-s*r.scale,-s*r.scale,k.width+2*s*r.scaleX,k.height+2*s*r.scaleY)},this.update(),this.zimBitmap_constructor(k),i&&(this.dynamicTicker=Ao.Ticker.add(function(){y.update()})),Object.defineProperty(this,"amount",{get:function(){return t},set:function(e){t=e,b=Math.pow(Math.E,-t*m),p&&(v=Math.pow(Math.E,-t*m),o=t),y.update()}}),Object.defineProperty(this,"amountX",{get:function(){return t},set:function(e){t=e,p=!1,b=Math.pow(Math.E,-t*m),y.update()}}),Object.defineProperty(this,"amountY",{get:function(){return o},set:function(e){o=e,p=!1,v=Math.pow(Math.E,-o*m),y.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return c},set:function(e){c=e,m=Ao.constrain(10*c,0,10),b=Math.pow(Math.E,-t*m),v=Math.pow(Math.E,-o*m),y.update()}}),Object.defineProperty(this,"blur",{get:function(){return n},set:function(e){n=e,w=Math.pow(Math.E,-n*z),y.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return u},set:function(e){u=e,z=Ao.constrain(10*u,0,10),w=Math.pow(Math.E,-n*z),y.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return i},set:function(e){i!=e&&((i=e)?y.dynamicTicker?y.dynamicTicker=Ao.Ticker.add(y.dynamicTicker):y.dynamicTicker=Ao.Ticker.add(y.update):y.dynamicTicker&&Ao.Ticker.remove(y.dynamicTicker))}}),!(this.dispose=function(){y.dynamicTicker&&Ao.Ticker.remove(y.dynamicTicker),this.zimBitmap_dispose()})!==d&&Ao.styleTransforms(this,e),this.clone=function(e){return y.cloneProps(new Ao.Pixel(e||!Ao.isPick(f[0])?r:f[0],e||!Ao.isPick(f[1])?t:f[1],e||!Ao.isPick(f[2])?o:f[2],e||!Ao.isPick(f[3])?n:f[3],i,e||!Ao.isPick(f[4])?l:f[4],a,s,e||!Ao.isPick(f[5])?c:f[5],e||!Ao.isPick(f[6])?u:f[6],d,this.group,h))}},Ao.extend(Ao.Pixel,Ao.Bitmap,["clone","dispose"],"zimBitmap",!1),Ao.Parallax=function(e,t,l,o,n,r,a){var i;if(i=zob(Ao.Parallax,arguments,"layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",this))return i;if(z_d("68"),this.type="Parallax",zot(o))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)o=e[0].obj.stage;else{if(!WW.zdf)return;o=WW.zdf.stage}l=!!zot(l),zot(n)&&(n=!1),zot(r)&&(r=!1);var s=o.getBounds().width,c=o.getBounds().height;o.mouseMoveOutside=r;var u=this;u.stageEvent=o.on("stagemousemove",function(e){u.mouseX=e.rawX/Ao.scaX,u.mouseY=e.rawY/Ao.scaY});var d=zot(t)?.1:t;this.addLayer=function(e){if(!(zot(e.obj)||zot(e.prop)||zot(e.propChange))){var t={obj:e.obj,prop:e.prop};t[t.prop]=e.propChange,zot(e.input)&&(e.input="mouseX"),t.input=e.input,t.split=zot(e.split)?!("mouseX"!=e.input||!l):e.split;var o=zot(e.inMin)?0:e.inMin,n=zot(e.inMax)?"mouseX"==e.input||"scrollX"==e.input?s:c:e.inMax,r=zot(e.factor)?1:e.factor,i=!zot(e.integer)&&e.integer;return t["p_"+t.prop]=new Ao.ProportionDamp(o,n,0,t[t.prop],d,r,i,a),"scale"==t.prop?t["s_"+t.prop]=t.obj.scaleX:"frame"==t.prop?t["s_"+t.prop]=t.obj.currentFrame:t["s_"+t.prop]=t.obj[t.prop],zot(e.immediate)||t["p_"+t.prop].immediate(e.immediate),g.push(t),u}},this.removeLayer=function(e){if(!zot(e)){var t=g[e];return t["p_"+t.prop].dispose(),g.splice(e,1),u}},this.immediate=function(e){for(var t,o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].immediate(e[o]);return u},this.dispose=function(){return o.off("stagemousemove",u.stageEvent),g=null,l&&Ao.Ticker.remove(h),!0},e=zot(e)?[]:e;for(var h,g=[],p=0;p<e.length;p++)this.addLayer(e[p]);l&&(h=Ao.Ticker.add(function(){u.step()},o),n&&Ao.Ticker.remove(h)),this.step=function(e){for(var t,o,n=0;n<g.length;n++)t=g[n],zot(e)?"mouseX"==t.input?o=u.mouseX:"mouseY"==t.input?o=u.mouseY:"scrollX"==t.input?o=Ao.scrollX():"scrollY"==t.input&&(o=Ao.scrollY()):o=e,"scale"==t.prop?t.obj.scaleX=t.obj.scaleY=t["s_"+t.prop]+t["p_"+t.prop].convert(o):"frame"==t.prop?t.obj.gotoAndStop(t["s_"+t.prop]+t["p_"+t.prop].convert(o)):(t.obj[t.prop]=t["s_"+t.prop]+t["p_"+t.prop].convert(o),t.split&&(t.obj[t.prop]-=t[t.prop]/2));return u},u.paused=n,u.pause=function(e){return zot(e)&&(e=!0),u.paused!=e&&(u.paused=e,h&&(e?Ao.Ticker.remove(h):h=Ao.Ticker.add(h))),u},Object.defineProperty(u,"damp",{get:function(){return d},set:function(e){var t;d=e;for(var o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].damp=d}})},Ao.Flipper=function(o,n,e,l,a,t,s,r,i,c,u,d,h,g){if(p=zob(Ao.Flipper,arguments,"front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",this))return p;z_d("68.5"),this.group=h;var p=!1===d?{}:Ao.getStyle("Flipper",this.group,g);zot(o)&&(o=null!=p.front?p.front:WW.zdf.makeIcon().sca(2)),zot(n)&&(n=null!=p.back?p.back:new Ao.Page(o.width,o.height,Ao.dark)),this.front=o,this.back=n,t&&(f=o,o=n,n=f);var h=Math.max(o.width,n.width),f=Math.max(o.height,n.height);this.zimContainer_constructor(h,f),this.type="Flipper",zot(l)&&(l=null!=p.time?p.time:.2),zot(a)&&(a=null!=p.vertical&&p.vertical),zot(e)&&(e=null!=p.interactive&&p.interactive),zot(t)&&(t=null!=p.flipped&&p.flipped),zot(s)&&(s=null!=p.easeRoot?p.easeRoot:"quad"),zot(r)&&(r=null==p.frontPress||p.frontPress),zot(i)&&(i=null==p.backPress||p.backPress),zot(c)&&(c=null!=p.reverse&&p.reverse),zot(u)&&(u=null!=p.continuous&&p.continuous);var m=t;this.flipped=t;var z,y=this;function b(e,t,o,n){if(zot(o)&&(o=1),o*=c?-1:1,u&&(o=c?m?1:-1:m?-1:1),zot(n)&&(n=l),y.flipped=!y.flipped,y.dispatchEvent("flip"),0==n)return y.removeAllChildren(),t.scale=t.oScale,t.skewX=t.skewY=0,t.centerReg(y),void y.dispatchEvent("flipped");var r,i;a?(r={skewX:-90*o,scaleY:e.oScale/2},i={skewX:0,scaleY:t.oScale},t.ske(90*o,0).sca(t.oScale,t.oScale/2)):(r={skewY:-90*o,scaleX:e.oScale/2},i={skewY:0,scaleX:t.oScale},t.ske(0,90*o).sca(t.oScale/2,t.oScale)),e.animate({props:r,time:l,ease:s+"In",call:function(){e.removeFrom(),t.centerReg(y).animate({props:i,time:l,ease:s+"Out",call:function(){y.dispatchEvent("flipped")}})}})}o.centerReg(this),(r&&!t||i&&t)&&((z=e&&o.backing?o.backing:o).on("mousedown",function(){b(o,n)}),z.cur()),(i&&!t||r&&t)&&((z=e&&n.backing?n.backing:n).on("mousedown",function(){b(n,o,-1)}),z.cur()),o.oScale=o.scale,n.oScale=n.scale,o.flipper=y,(o.other=n).flipper=y,n.other=o,e||(o.mouseChildren=n.mouseChildren=!1),!(this.flip=function(e,t){e!=y.flipped&&(y.flipped?b(m?o:n,m?n:o,-1,t):b(m?n:o,m?o:n,1,t))})!==d&&Ao.styleTransforms(this,p),this.clone=function(){return y.cloneProps(new Ao.Flipper(o.clone(),n.clone(),e,l,a,t,s,r,i,c,u,d,this.group,g))}},Ao.extend(Ao.Flipper,Ao.Container,"clone","zimContainer"),Ao.Book=function(m,z,y,n,b,v,w,C){var e;if(e=zob(Ao.Book,arguments,"width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",this))return e;z_d("68.7"),zot(m)&&(m=WW.zdf?WW.zdf.stage.width:1024),zot(z)&&(z=WW.zdf?WW.zdf.stage.height:768),this.zimContainer_constructor(m,z),this.type="Book",zot(y)&&(y=[]),zot(n)&&(n=0),zot(b)&&(b=!0),zot(w)&&(w=Ao.darker),zot(C)&&(C=!0);var x,k,T=Po(),A=this;0!=y.length&&(A.backing=new Ao.Rectangle(m-2,z-2,w),Ao.loop(y,function(e,t){"string"==typeof e&&(y[t]=Ao.asset(e)),y[t].zimBookIndex=t}),A.added(function(e){k=(x=e).frame;var l,a,s,c,u,d,t,r=new Ao.Shape;function i(e){A._currentPage=e,A.removeAllChildren(),A.backing.loc(1,1,A),A.setMask(A.backing),r.addTo(A),r.c().f(Ao.black).dr(0,0,0,0),A.moving=!1,y[e-1]?l=y[e-1].reg(0,0).rot(0).loc(0,0,A):0<e&&t.reg(0,0).rot(0).loc(0,0,A).setMask(null),a=(y[e-2]||new Ao.Rectangle(m/2,z,w)).reg(m/2,z).loc(0,z,A).rot(-90),s=(y[e-3]?y[e-3].rot(0):new Ao.Rectangle(m/2,z,w)).loc(0,0,A).setMask(r),y[e]&&(c=y[e].rot(0).reg(0,0).pos(0,0,Ao.RIGHT,Ao.TOP,A),y[e+1]?u=y[e+1].reg(0,z).loc(m,z,A).rot(90):(u=new Ao.Rectangle(m/2,z,w).reg(0,z).loc(m,z,A).rot(90),t=u),d=(y[e+2]?y[e+2].rot(0):new Ao.Rectangle(m/2,z,w)).pos(0,0,Ao.RIGHT,Ao.TOP,A).setMask(r)),x.update()}A._currentPage=n,i(n),Object.defineProperty(A,"directPage",{get:function(){return A._currentPage},set:function(e){i(e=n%2==1?2*Math.ceil(e/2)-1:2*Math.ceil(e/2))}});var h=!1;function o(){A.stageEvent=x.on("stagemousedown",function(){var t,o,e,n;A.moving||((e=A.globalToLocal(k.mouseX,k.mouseY)).x<0||e.x>m||e.y<0||e.y>z||0<v&&Ao.dist(e,new Ao.Point(0,z))>v&&Ao.dist(e,new Ao.Point(m,z))>v||("right"==(n=e.x>m/2?"right":"left")&&A._currentPage>=y.length-1||"left"==n&&A._currentPage<=1||(A.moving=!0,"right"==n?(c.addTo(A),u.addTo(A),d.addTo(A),A.pageNext=d.zimBookIndex):(l.addTo(A),a.addTo(A),s.addTo(A),A.rolledUp&&f(0,0,"right"),A.pageNext=a.zimBookIndex),A.direction=n,A.dispatchEvent("rollpress"),A.moveEvent=x.on("stagemousemove",function(){g&&(g.clear(),g=null);var e=A.globalToLocal(k.mouseX,k.mouseY);t="right"==n?m-e.x:e.x,o=z-e.y+t,A.currentW=t=Ao.constrain(t,0,m/2),A.currentH=o=Ao.constrain(o,0,z),f(t,o,n)}),A.upEvent=x.on("stagemouseup",function(){x.off("stagemousemove",A.moveEvent),h||p(0,0,n)},null,!0))))})}{var g;A.currentW=0,A.currentH=0,A.moving=!1,o(),!(A.rollUp=function(e,t,o,n,r){var i;A.moving||"right"==o&&A._currentPage>=y.length-1||"left"==o&&A._currentPage<=1||("right"==o?(c.addTo(A),u.addTo(A),d.addTo(A)):(A.rolledUp&&f(0,0,"right"),l.addTo(A),a.addTo(A),s.addTo(A)),A.moving=!0,zot(n)&&(n="s"==T?.5:5e-4),zot(r)&&(r=null),A.animate({props:{currentW:e,currentH:t},time:n,ease:r,call:function(){Ao.Ticker.remove(i),A.moving=!1,f(e,t,o)}}),i=Ao.Ticker.add(function(){f(A.currentW,A.currentH,o)}))})!==b&&((A.rolledUp=!0)===b&&(b="s"==T?1:.001),g=Ao.timeout(b,function(){A.rollUp(60,130,"right",.5),A.dispatchEvent("rollup")}))}function p(e,t,o,n){A.moving=!0,A.rolledUp=!1,zot(n)&&(n="s"==T?.7:7e-4),A.animate({props:{currentW:0,currentH:0},time:n,call:function(){Ao.Ticker.remove(r),f(0,0,o),A.moving=!1,A.dispatchEvent("rolldown")}});var r=Ao.Ticker.add(function(){f(A.currentW,A.currentH,o)})}function f(e,t,o){var n;"right"==o?(r.c().mt(m,z).lt(m-e,z).lt(m,z-t).cp(),n=Math.atan2(e,t),u.loc(m-(e+e*Math.cos(2*n)),z-e*Math.sin(2*n)).rot(2*n*Ao.DEG),!h&&m/2<=e&&z<=t&&function(){h=!0,A.moving=!0,A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),A.currentW=0,A.currentH=0,A.lastPage=Ao.constrain(A._currentPage),A.direction="right",A.pageNext=d.zimBookIndex,A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:m/2},time:.3,timeUnit:"s",call:function(){Ao.Ticker.remove(e),u.reg(0,0),d.setMask(null),i(A._currentPage+2),A.moving=!1,h=!1,A.currentW=0,A.currentH=0,A.dispatchEvent("page")}});var e=Ao.Ticker.add(function(){r.c().mt(m,z).lt(m/2,z).lt(m-A.currentW,0).lt(m,0).cp()});u.reg(m/2,z).loc(m/2,z,A).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}()):(r.c().mt(0,z).lt(e,z).lt(0,z-t).cp(),n=Math.atan2(e,t),a.loc(e+e*Math.cos(2*n),z-e*Math.sin(2*n)).rot(2*-n*Ao.DEG),!h&&m/2<=e&&z<=t&&function(){h=!0,A.moving=!0,A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),A.currentW=0,A.currentH=0,A.lastPage=Ao.constrain(A._currentPage),A.direction="left",A.pageNext=a.zimBookIndex,A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:m/2},time:.3,timeUnit:"s",call:function(){Ao.Ticker.remove(e),a.reg(0,0),s.setMask(null),i(A._currentPage-2),A.moving=!1,h=!1,A.currentW=0,A.currentH=0,A.dispatchEvent("page")}});var e=Ao.Ticker.add(function(){r.c().mt(0,z).lt(m/2,z).lt(A.currentW,0).lt(0,0).cp()});a.reg(0,z).loc(m/2,z,A).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}()),x.update()}A.rollDown=function(e,t,o,n){A.moving||"right"==o&&A._currentPage>=y.length-1||"left"==o&&A._currentPage<=1||p(0,0,o,n)},C&&(!0===C&&(C=.2),A.keydown=k.on("keydown",function(e){39==e.keyCode?A.nextPage(C):37==e.keyCode&&A.prevPage(C)}));A.changeFrame=function(e){return A.stageEvent&&x.off("stagemousedown",A.stageEvent),A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),x=(k=e).stage,o(),A}}),A.nextPage=function(e){if(zot(A.rollUp))return setTimeout(function(){A.nextPage(e)},10),A;A.moving||A.rollUp(m/2+.1,z+.1,"right",e,"quadIn")},A.prevPage=function(e){if(zot(A.rollUp))return setTimeout(function(){A.prevPage(e)},10),A;A.moving||A.rollUp(m/2+.1,z+.1,"left",e,"quadIn")},A.gotoPage=function(o,n){if(zot(A.rollUp))return setTimeout(function(){A.gotoPage(o,n)},10),A;o=Ao.constrain(o,0,A.pages.length-1),zot(n)&&(n="s"==T?.3:300);var r=n+("s"==T?.35:350);A.pageInterval=Ao.interval(r,function(e){var t=!1;A._currentPage<o?A.nextPage(n):A._currentPage>o?A.prevPage(n):t=!0,A.dispatchEvent("pageturn"),e.count==e.total-1&&(t?A.dispatchEvent("pagedone"):Ao.timeout(r,function(){A.dispatchEvent("pagedone")}))},Math.floor(Math.abs(o-A._currentPage)/2+1),!0)},Object.defineProperty(A,"page",{get:function(){return A._currentPage},set:function(e){A.gotoPage(e,"s"==T?.1:100)}}),Object.defineProperty(A,"pages",{get:function(){return y},set:function(){zon&&zogy("Book() - pages is read only")}}),this.dispose=function(e,t,o){return A.stageEvent&&x.off("stagemousedown",A.stageEvent),A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),A.keydown&&k.off("keydown",A.keydown),A.removeFrom(),o||this.zimContainer_dispose(!0),!0})},Ao.extend(Ao.Book,Ao.Container,["clone","dispose"],"zimContainer"),Ao.Scrambler=function(a,r,i,e,t,o,n,s,c,u,d,l,h,g){var p;if(p=zob(Ao.Scrambler,arguments,"tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",this))return p;z_d("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=h;h=!1===l?{}:Ao.getStyle(this.type,this.group,g);zot(a)&&(a=null!=h.tile?h.tile:a),zot(r)&&(r=null!=h.keys?h.keys:null),zot(i)&&(i=null!=h.keyProperty?h.keyProperty:null),zot(e)&&(e=null==h.scramble||h.scramble),zot(t)&&(t=null!=h.time?h.time:0),zot(o)&&(o=null!=h.wait?h.wait:0),zot(n)&&(n=null!=h.num?h.num:1),zot(s)&&(s=null!=h.shadowColor?h.shadowColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=h.shadowBlur?h.shadowBlur:5),zot(u)&&(u=null!=h.swap&&h.swap),zot(d)&&(d=null!=h.swapLock&&h.swapLock),d&&(u=!0),zot(a)&&(a=new Ao.Tile(new Ao.Rectangle(100,100,Ao.series(Ao.silver,Ao.tin,Ao.grey,Ao.dark,Ao.darker)),5,1,5)),a.addTo(this);var f=this;f.complete=!0;var m=Po(t);Po(o);var z,y,b,v=(a.width+a.spacingH)/a.cols,w=(a.height+a.spacingV)/a.rows,C=WW.zdf,x=Ao.makeID(null,10),k=!1;function T(e){var n=e.target;n.stopAnimate();var e=n.boundsToGlobal(),r=a.hitTestGrid(a.width,a.height,a.cols,a.rows,e.x+e.width/2,e.y+e.height/2,null,null,a.spacingH,a.spacingV,null,"open");zot(r)||Ao.loop(a,function(e){var t,o;e!=n&&!1!==e.paused&&(t=e.boundsToGlobal(),zot(t=a.hitTestGrid(a.width,a.height,a.cols,a.rows,t.x+t.width/2,t.y+t.height/2,null,null,a.spacingH,a.spacingV,null,"open"))||(r[2]==t[2]&&(e.x>=n.x&&e.x<=n.x+v/2||e.x<=n.x&&e.x>=n.x-v/2)&&(o=e.x,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{x:z},time:.2,id:x,timeUnit:"seconds",call:function(){e.mouseEnabled=!0,u&&!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete"))}}),z=o),r[1]==t[1]&&(e.y>=n.y&&e.y<=n.y+w/2||e.y<=n.y&&e.y>=n.y-w/2)&&(o=e.y,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{y:y},time:.201,override:!1,id:x,timeUnit:"seconds",call:function(){e.mouseEnabled=!0,u&&!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete"))}}),y=o)))},!0)}a.pointers={},a.on("mousedown",function(e){if(!k){var t;k=!0,t=e.target,a.loop(function(e){e!=t&&e.noMouse()}),f.myDownCheck=!0,b=e.target;var o="id"+Math.abs(e.pointerID+1);if(a.pointers[o]=!0,d){var i=a.current;if(f.testItem(e.target,i.indexOf(e.target)))return e.target.noMouse(),e.target.noDrag(),e.target.locked=!0,void(f.myDownCheck=!1)}z=e.target.x,y=e.target.y,-1!=s&&0<c&&(o=new createjs.Shadow(s,3,3,c),e.target.backing?e.target.backing.shadow=o:e.target.shadow=o),f.upEvent&&a.off("pressup",f.upEvent),C&&(f.scrmu||(f.scrmu=C.on("mouseupplus",function(e){f.myDownCheck&&(f.myDownCheck=!1,n(e={target:b,pointerID:e.pointerID},!0),f.upEvent&&a.off("pressup",f.upEvent))}))),f.upEvent=a.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);a.pointers[t]&&(f.myDownCheck=!1,n(e))}),u||(f.moveEvent&&a.off("pressmove",f.moveEvent),f.moveEvent=a.on("pressmove",function(e){T(e)}))}function n(e,t){var o,n,r="id"+Math.abs(e.pointerID+1);a.pointers[r]&&(delete a.pointers[r],n=!0,a.loop(function(e){e.locked||e.mouse()}),k=!1,f.upEvent&&a.off("pressup",f.upEvent),d&&(o=e.target.boundsToGlobal(),n=!zot(r=a.hitTestGrid(a.width,a.height,a.cols,a.rows,o.x+o.width/2,o.y+o.height/2,null,null,a.spacingH,a.spacingV,null,"open"))&&(o=i[r[0]],e.target!=o&&!f.testItem(o,r[0]))),u&&n&&T(e),e.target.mouseEnabled=!1,t?(e.target.x=z,e.target.y=y,l()):e.target.animate({props:{x:z,y:y},time:.1,id:x,timeUnit:"seconds",pauseOnBlur:!1,call:l}))}function l(){!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete")),-1!=s&&0<c&&(e.target.backing?e.target.backing.shadow=null:e.target.shadow=null),e.target.mouseEnabled=!0}}),this.test=function(){var e=a.current;return Ao.loop(e,function(e,t){return!zot(e)&&(!!f.testItem(e,t)&&void 0)})},this.testItem=function(e,t){if(!zot(e)){if(zot(t)&&(t=a.current.indexOf(e)),r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(a.items[t]!=e)return!1;return!0}},this.starts=[];var A=[];Ao.loop(a.rows*a.cols,function(e){A.push(e)});var P=A.slice();function B(){f.upEvent&&a.off("pressup",f.upEvent),f.moveEvent&&a.off("pressmove",f.moveEvent),a.noDrag(),0<o+t&&f.noMouse()}function E(r,i,l){Ao.stopAnimate(x),Ao.loop(a.items,function(e,t,o){var n=f.starts[r[t]];i?e.animate({props:{x:n.x,y:n.y},time:i,ease:l?"quadInOut":"quadOut",wait:l,timeUnit:"seconds",id:x}):(e.loc(n),f.stage?e.drag({boundary:a,singleTouch:!0}):t==o-1&&f.added(function(){a.drag({boundary:a,singleTouch:!0})}))})}a.loop(function(e){e.mouseChildren=!1,f.starts.push({x:e.x,y:e.y})}),this.inactive=!1,this.scramble=function(o,e,n){function t(){for(var e=!0,t=0;e&&t<50;)t++,Ao.shuffle(A),e=Ao.loop(A,function(e,t){e=a.getChildAt(e);if(r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(a.items[t]!=e)return!1});E(A,o/n),Ao.timeout(o,function(){f.dispatchEvent("scrambled")})}return zot(e)&&(e=0),zot(o)&&(o=0),!zot(n)&&0!=o||(n=1),B(),Ao.timeout(e,function(){0<o?Ao.interval(o/n,t,n,!0):t()}),setTimeout(function(){f.complete=!1,a.loop(function(e){e.mouse(),e.locked=!1}),f.mouse(),a.drag({boundary:a,singleTouch:!0}),k=!1},"s"==m?1e3*(e+o):e+o),f},e?f.scramble(t,o,n):f.added(function(){a.drag({boundary:a,singleTouch:!0})}),this.solve=function(e,t,o){zot(o)&&(o=!0),zot(t)&&(t=0),zot(e)&&(e=0),t+e==0&&o&&f.noMouse(),setTimeout(function(){A=P.slice(),B(),E(A,e,0)},"s"==m?1e3*t:t),o||setTimeout(function(){f.mouse(),a.drag({boundary:a,singleTouch:!0})},"s"==m?1e3*(t+e):t+e)},this._enabled=!0,Object.defineProperty(f,"enabled",{get:function(){return f._enabled},set:function(e){rt(f,e),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!f.stage||f.stage.update()}}),Object.defineProperty(f,"order",{get:function(){var t=[];return Ao.loop(a.current,function(e){return!!e&&void t.push(e.tileNum)})&&t.length==A.length?A=t:A},set:function(e){var t=[];Ao.loop(e,function(e){t.push(a.items[e])}),a.remake(t),a.stage&&a.stage.update()}}),!(this.dispose=function(e,t,o){return f.scrmu&&C.off("mouseupplus",f.scrmu),a.removeAllEventListeners(),o||(f.zimContainer_dispose(!0),f.stage&&f.stage.update()),!0})!==l&&Ao.styleTransforms(this,h),this.clone=function(){return f.cloneProps(new Ao.Scrambler(a.clone(),r,i,e,t,o,n,s,c,u,d,l,f.group,g))}},Ao.extend(Ao.Scrambler,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Scroller=function(e,t,o,n,r,i,l,a,s,c){var u;if(u=zob(Ao.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",this))return u;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=s;var d,h,g,p,f,m,z,y,b,v,c=!1===a?{}:Ao.getStyle(this.type,this.group,c);zot(e)&&(e=null!=c.backing?c.backing:null),zot(e)||!zot(d=this.backing1=e)&&d.getBounds&&(h=this.backing2=e.clone(!0),zot(n)&&(n=null==c.horizontal||c.horizontal),zot(r)&&(r=null!=c.gapFix?c.gapFix:0),zot(l)&&(l=null!=c.container?c.container:null),zot(i)&&(i=null!=c.stage?c.stage:null),g=this,zot(t)&&(t=null!=c.speed?c.speed:1),this.speed=t,p=this.baseSpeed=this.speed,zot(o)&&(o=null!=c.direction?c.direction:1),this.direction=o,o=n?d.scaleX:d.scaleY,"AC"!=d.type?d.getBounds()?i||d.stage?d.parent?(d.parent.addChildAt(h,d.parent.getChildIndex(d)),i=i||d.stage,zot(l)&&(l=i),l.getBounds()?(f=d.getBounds().width*o-r,m=d.getBounds().height*o-r,n?h.x=f:h.y=m,b=!1,v=Ao.Ticker.add(function(){z||(z=l.getBounds().width,y=l.getBounds().height);if(0==g.speed||0==g.direction)return;n?(d.x-=g.speed*g.direction,d.x<h.x?h.x=d.x+f:h.x=d.x-f,0<g.direction*g.speed?h.x<0&&d.x<h.x?d.x=h.x+f:d.x<0&&h.x<d.x&&(h.x=d.x+f):h.x>z&&h.x>d.x?h.x=d.x-f:d.x>z&&d.x>h.x&&(d.x=h.x-f)):(d.y-=g.speed*g.direction,d.y<h.y?h.y=d.y+m:h.y=d.y-m,0<g.direction*g.speed?h.y<0&&d.y<h.y?d.y=h.y+m:d.y<0&&h.y<d.y&&(h.y=d.y+m):h.y>y&&h.y>d.y?h.y=d.y-m:d.y>y&&d.y>h.y&&(d.y=h.y-m))},i),this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(p=g.speed,0<t?(b=!0,Ao.animate({target:g,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){g.speed=0,g.paused=!0,b=!1,g.dispatchEvent("pause")}})):(b=!1,g.speed=0,g.paused=!0,setTimeout(function(){g.dispatchEvent("pause")},10))):(b=!1,0<t?Ao.animate({target:g,obj:{pausingSpeed:p},ticker:!1,time:t,call:function(){g.speed=p,g.paused=!1,b=!1}}):(g.speed=p,g.paused=!1)),g},Object.defineProperty(g,"percentSpeed",{get:function(){return 0==g.baseSpeed?NaN:g.speed/g.baseSpeed*100},set:function(e){b||g.paused||(g.speed=g.baseSpeed*e/100)}}),Object.defineProperty(g,"pausingSpeed",{get:function(){return 0==g.baseSpeed?NaN:g.speed/g.baseSpeed*100},set:function(e){g.speed=g.baseSpeed*e/100}}),Object.defineProperty(g,"percentComplete",{get:function(){return n?d.x<0&&d.x>h.x?-d.x/d.width*100:(-h.x/h.width*100+1e9)%100:d.y<0&&d.y>h.y?-d.y/d.height*100:(-h.y/h.height*100+1e9)%100},set:function(e){e=(e+1e9)%100,n?(d.x=-e*d.width/100,h.x=d.x+f):(d.y=-e*d.height/100,h.y=d.y+m)}}),!1!==a&&Ao.styleTransforms(this,c),this.dispose=function(){return Ao.Ticker.remove(v),!0}):zogy("zim display - Scroller(): please setBounds() on container or stage if no container")):zogy("ZIM Scroller(): please add object to container or stage before adding to Scroller"):zogy("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start"):zogy("ZIM Scroller(): please setBounds() on backing objects"):zogy("ZIM Scroller(): please provide Pic() with dimensions for backing objects"))},Ao.extend(Ao.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),Ao.Dynamo=function(n,e,t,o,r,i,l,a,s,c,u,d){var h;if(h=zob(Ao.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",this))return h;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=u;var g,p,f,m,z,y,b,v,w,C,x,d=!1===c?{}:Ao.getStyle(this.type,this.group,d);zot(n)&&(n=null!=d.sprite?d.sprite:null),zot(n)||0!=(g=this.frames=n.parseFrames(t,o,r,!0)).length&&(this.totalFrames=g.length,p=0,zot(e)&&(e=null!=d.speed?d.speed:30),zot(l)&&(l=null==d.reversible||d.reversible),f=this.baseSpeed=this.speed=e,zot(i)&&(i=null!=d.update&&d.update),zot(a)&&(a=null!=d.flip?d.flip:null),zot(a)&&0==l&&(a=!0),m=this,b=Date.now(),x=!1,m.scaleX=n.scaleX,m.scaleY=n.scaleY,function e(){var t,o;z=requestAnimationFrame(e),y=g[p].s,0!=m.speed&&0!=y&&(w=1e3/Math.abs(m.speed)*y,v=Date.now(),w<v-b&&(b=v,o=!1,(t=m.frame+(0<m.speed||!l?1:-1))>=g.length&&(o=!0,t=0),t<0&&(o=!0,t=g.length-1),m.frame=t,a&&(m.speed<0?n.scaleX=-m.scaleX:n.scaleX=m.scaleX),s&&(m.speed<0?n.scaleY=-m.scaleY:n.scaleY=m.scaleY),o&&m.dispatchEvent("loop"),m.dispatchEvent("change"),i&&n.stage&&n.stage.update(),zot(C)||C!=m.frame||(x=!1,m.speed=0,m.paused=!0,m.dispatchEvent("pause"))))}(),this.paused=!1,this.pause=function(e,t,o){if(zot(e)&&(e=!0),e!=m.paused)return zot(t)&&(t=0),e?(f=m.speed,void 0===o?0<t?(x=!0,Ao.animate({target:m,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){x=!1,m.speed=0,m.paused=!0,m.dispatchEvent("pause")}})):(x=!1,m.speed=0,m.paused=!0,setTimeout(function(){m.dispatchEvent("pause")},10)):(x=!0,C=o)):(C=null,0<t?(x=!0,Ao.animate({target:m,obj:{pausingSpeed:f},ticker:!1,time:t,call:function(){x=!1,m.speed=f,m.paused=!1}})):(x=!1,m.speed=f,m.paused=!1)),m},Object.defineProperty(m,"frame",{get:function(){return p},set:function(e){p=Math.round(e)%g.length;e=g[p];zot(e)||(n.frame=e.f)}}),Object.defineProperty(m,"percentSpeed",{get:function(){return 0==m.baseSpeed?NaN:x||m.paused?f/m.baseSpeed*100:m.speed/m.baseSpeed*100},set:function(e){x||m.paused?f=m.baseSpeed*e/100:m.speed=m.baseSpeed*e/100}}),Object.defineProperty(m,"pausingSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(e){m.speed=m.baseSpeed*e/100}}),!1!==c&&Ao.styleTransforms(this,d),this.dispose=function(){cancelAnimationFrame(z)})},Ao.extend(Ao.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),Ao.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var a=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){for(var t=Array.isArray(e)?e:[e],o=0;o<t.length;o++)a.items.indexOf(t[o])<0&&a.items.push(t[o]);return a},e&&this.add(e),this.remove=function(e){for(var t,o=Array.isArray(e)?e:[e],n=0;n<o.length;n++)0<=(t=a.items.indexOf(o[n]))&&a.items.splice(t,1);return a},this.pause=function(t,e,o){if(zot(t)&&(t=!0),t!=a.paused){var n=[];if(t){zot(o)||(e=null);for(var r=!1,i=0;i<a.items.length;i++)(zot(e)||!zot(o)||a.items[i].totalFrames)&&(!a.items[i].totalFrames||zot(e)&&zot(o))||(a.items[i].pause(!0,e,o),r=!0,n[i]=1,a.items[i].on("pause",function(){a.paused||(l(),a.paused=!0,a.dispatchEvent("pause"))},null,!0));r||(l(),a.paused=!0,setTimeout(function(){a.dispatchEvent("pause")},10))}else a.paused=!1,l()}function l(){for(var e=0;e<a.items.length;e++)1!=n[e]&&a.items[e].pause(t)}},Object.defineProperty(a,"percentSpeed",{get:function(){return a._percentSpeed},set:function(e){a._percentSpeed=e;for(var t=0;t<a.items.length;t++)a.items[t].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<a.items.length;e++)a.items[e].dispose();return!(a.items=null)}},Ao.extend(Ao.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),Ao.Emitter=function(d,h,g,t,e,o,n,r,i,l,a,s,p,f,c,u,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M){var O;if(O=zob(Ao.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",this))return O;z_d("69.9"),this.type="Emitter",this.group=W;W=!1===S?{}:Ao.getStyle(this.type,this.group,M);zot(d)&&(d=null!=W.obj?W.obj:[new Ao.Circle(20,"#e472c4"),new Ao.Circle(20,"#acd241"),new Ao.Circle(20,"#50c4b7")]),zot(h)&&(h=null!=W.width?W.width:300),zot(g)&&(g=null!=W.height?W.height:300);var j=Po(t);zot(t)&&(t=null!=W.interval?W.interval:"s"==j?.02:20),"number"==typeof t&&(t=Math.max("s"==j?.01:10,t)),zot(e)&&(e=null!=W.num?W.num:1),zot(a)&&(a=null!=W.trace&&a.size),zot(s)&&(s=null!=W.traceFadeTime?W.traceFadeTime:i),zot(p)&&(p=null!=W.traceShiftX?W.traceShiftX:0),zot(f)&&(f=null!=W.traceShiftY?W.traceShiftY:0),Bo(o,j),zot(o)&&(o=null!=W.life?W.life:"s"==j?1:1e3),zot(n)&&(n=null==W.fade||W.fade),zot(r)&&(r=null!=W.shrink?W.shrink:!a),Bo(i,j),zot(i)&&(i=null!=W.decayTime?W.decayTime:"s"==j?1:1e3),zot(c)&&(c=null!=W.angle?W.angle:{min:0,max:360}),zot(u)&&(u=null!=W.force?W.force:5),zot(m)&&(m=null!=W.gravity?W.gravity:9.8),zot(z)&&(z=null!=W.wind?W.wind:0),zot(y)&&(y=null!=W.layers?W.layers:"top"),zot(h)&&(h=null!=W.width?W.width:100),zot(g)&&(g=null!=W.height?W.height:100),zot(w)&&(w=null!=W.horizontal&&W.horizontal),zot(C)&&(C=null!=W.vertical&&W.vertical),zot(x)&&(x=null!=W.sink?W.sink:null),!zot(x)&&zot(k)&&(k=null!=W.sinkForce?W.sinkForce:10),zot(A)&&(A=null!=W.events&&W.events),zot(P)&&(P=null!=W.startPaused&&W.startPaused),zot(B)&&(B=null==W.pool||W.pool),zot(E)&&(E=null!=W.poolMin?W.poolMin:0),zot(I)&&(I=null!=W.particles?W.particles:new Ao.Container),zot(b)&&(b=null!=W.animation?W.animation:null),I.type="Particles",this.zimContainer_constructor(h,g,null,null,!1),this.type="Emitter";var L=this;this.regX=h/2,this.regY=g/2,L.obj=d,L.particles=I,L.interval=t,L.num=e,L.life=o,L.fade=n,L.shrink=r,L.decayTime=i,L.decayStart=l,L.trace=a,L.traceFadeTime=s,L.traceShiftX=p,L.traceShiftY=f,L.angle=c,L.emitterForce=u,L.gravity=m,L.wind=z,L.layers=y,L.animation=b,L.random=v,L.horizontal=w,L.vertical=C,L.sink=x,L.sinkForce=k,L.events=A,L.startEmitterPaused=L.emitterPaused=P,L.pool=B,L.poolMin=E,L.particlesEmitted=0;var _,D,Y=[],X=0,R=0;function H(e){if(L.events&&F("fizzed",e),(e.trace?e.getChildAt(0):e).endSpurt&&(F("spurtfizzed",e),L.spurting=!1),L.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,Y&&Y.push(e)),void(e.visible=!1);L.removeChild(e),L.trace&&e.uncache(),e=null}function F(e,t){zot(t)||((e=new createjs.Event(e)).particle=t.trace?t.getChildAt(0):t,L.dispatchEvent(e))}function N(e){L.pauseEmitter(),L.spurtCount=L.spurtNum=null,zot(e)||(F("spurted",e),e.endSpurt=!0)}Ao.added(L,function(e){L.emitterPaused=null,L.on("added",function(){L.particles.addTo(L.parent)}),D=e,zot(T)&&(T=!D.isWebGL&&Ao.mobile());T&&(D.snapToPixelEnabled=!0);{var a;D&&(e=L.parent.getChildIndex(L),L.parent.addChildAt(I,e),w||C||L.centerReg(null,null,!1),L.zimInterval=Ao.interval(L.interval,function(){var s,c,u=Ao.isPick(L.life)?Ao.Pick.getMinMax(L.life).max:L.life;function e(e,t){return e-t}zot(u)&&(u="s"==j?1:1e3),L.startEmitterPaused?L.pauseEmitter():(d=Array.isArray(L.obj)?L.obj:[L.obj]).length<=0||(s=Array.isArray(L.interval)?(L.interval.sort(e),L.interval[0]):L.interval.constructor=={}.constructor?L.interval.min:L.interval,c=Array.isArray(L.num)?(L.num.sort(e),L.num[L.num.length-1]):L.num.constructor=={}.constructor?L.num.max:L.num,Ao.loop(Ao.Pick.choose(L.num),function(){var o,n;0<L.decayTime&&(e={},L.shrink&&(e.scale=0),L.fade&&(e.alpha=0)),L.pool&&0<Y.length&&R>=Math.max(L.poolMin,(u/s+5)*c)?((o=Y[X++%Y.length]).visible=!0,(n=o.trace?o.getChildAt(0):o).emitShape&&(t=n.template,n.graphics.c().s(t.s?Ao.Pick.choose(t.s):null).ss(t.ss?Ao.Pick.choose(t.ss):null).sd(t.sd?Ao.Pick.choose(t.sd):null,t.offset?Ao.Pick.choose(t.offset):null)),o.trace&&o.updateCache(),"top"==L.layers?n.emitShape?o.addTo(I,null,!1):o.centerReg(I):n.emitShape?o.addTo(I,"bottom"==L.layers?0:Ao.rand(I.numChildren),!1):o.centerReg(I,"bottom"==L.layers?0:Ao.rand(I.numChildren)),o.scaleX=1,o.scaleY=1,n.scaleX=n.originalScaleX,n.scaleY=n.originalScaleY,n.rotation=n.originalRotation,n.color=n.originalColor,n.endSpurt=!1):(R++,L.trace&&((o=new Ao.Container(h,g,null,null,!1)).trace=!0),"shape"==(r=Ao.Pick.choose(Ao.shuffle(d)[0])).type?(t=r,(n=new Ao.Shape(1,1,null,null,null,!1)).emitShape=!0,n.template=t,n.graphics.s(t.s?Ao.Pick.choose(t.s):null).ss(t.ss?Ao.Pick.choose(t.ss):null).sd(t.sd?Ao.Pick.choose(t.sd):null,t.offset?Ao.Pick.choose(t.offset):null),L.trace?n.addTo(o,null,!1):"top"==L.layers?n.addTo(I,null,!1):n.addTo(I,"bottom"==L.layers?0:Ao.rand(I.numChildren),null,!1)):((n=r.clone()).centerReg||zimify(n),L.trace?n.centerReg(o).pos({x:-1e3,y:-1e3,reg:!0}):"top"==L.layers?n.centerReg(I):n.centerReg(I,"bottom"==L.layers?0:Ao.rand(I.numChildren))),L.trace&&("top"==L.layers?o.addTo(I,null,!1):o.addTo(I,"bottom"==L.layers?0:Ao.rand(I.numChildren),!1),o.cache(p,f,h,g)),L.trace||(o=n),(o.particle=n).originalAlpha=n.alpha,n.originalScaleX=n.scaleX,n.originalScaleY=n.scaleY,n.originalRotation=n.rotation,n.originalColor=n.color),L.currentParticle=n,L.particlesEmitted++,o.particleNormal=!0,o.particleDecaying=!1,o.particleFizzing=!1;var e=Ao.Pick.choose(L.angle),t=Ao.Pick.choose(L.emitterForce),r=t*Math.cos(e*Math.PI/180),e=t*Math.sin(e*Math.PI/180);n.info={position:{x:L.x,y:L.y},velocity:{x:r,y:e}},L.horizontal&&(n.info.position={x:L.x-L.regX+Ao.rand(0,h),y:L.y-L.regY+(L.vertical?g/2:0)}),L.vertical&&(n.info.position={x:L.x-L.regX+(L.horizontal?h/2:0),y:L.y-L.regY+Ao.rand(0,g)}),n.emitShape?n.graphics.mt(n.info.position.x,n.info.position.y):(n.x=n.info.position.x,n.y=n.info.position.y),n.alpha=n.originalAlpha,L.random&&Ao.loop(L.random,function(e,t){t=Ao.Pick.choose(t);"scale"==e?n.sca(t):("x"==e?n.info.position.x=L.horizontal||L.vertical?t:t+h/2:"y"==e&&(n.info.position.y=L.horizontal||L.vertical?t:t+g/2),"x"!=e&&"y"!=e||!n.emitShape||n.graphics.mt(n.info.position.x,n.info.position.y),n[e]=t,n.emitShape&&(n.x=0,n.y=0))}),T&&!n.emitShape&&n.cache(n.getBounds().x-10,n.getBounds().y-10,n.getBounds().width+20,n.getBounds().height+20);var i,l,a,e=!n.emitShape&&L.shrink;0<L.decayTime&&(L.fade||e||L.trace&&0<L.traceFadeTime)?(i=zik(L.life),L.trace&&0<L.traceFadeTime&&o.animate({obj:{alpha:0},time:L.traceFadeTime,wait:i-L.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:H,override:!1,id:"decay"}),(L.fade||e)&&(a={},L.fade&&(a.alpha=0),e&&(a.scaleX=0,a.scaleY=0),n.animate({obj:a,time:L.decayTime,wait:zot(L.decayStart)?i-L.decayTime:L.decayStart,waitedCall:function(e){e.parent!=L&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(e){var t;L.events&&F("decayed",e),e.endSpurt&&F("spurtdecayed",e),L.trace&&0<L.traceFadeTime||(zot(L.decayStart)||L.decayStart+L.decayTime>L.life?e.parent&&H(e.parent.trace?e.parent:e):(t=o,Ao.timeout(i-(L.decayStart+L.decayTime),function(){H(t)})))},override:!1,id:"decay"}))):0<L.life&&((l=o).timeOut=Ao.timeout(L.life,function(){H(l)})),L.events&&F("emitted",o),a=n,zot(L.spurtCount)&&zot(L.spurtNum)||(L.spurtCount++,L.spurtCount>=L.spurtNum&&N(a)),L.animation&&(a=Ao.Pick.choose(L.animation),Array.isArray(a)?Ao.loop(a,function(e){zot(e.override)&&(e.override=!1),n.animate(Ao.copy(e))}):(zot(a.override)&&(a.override=!1),n.animate(Ao.copy(a))))}))},null,!0,!0),a=0,_=L.emitterTicker=Ao.Ticker.add(function(){Ao.loop(I,function(e){var t;e.trace&&(e=(t=e).getChildAt(0));var o,n,r=e.info,i=0,l=0;zot(L.sink)||(o=L.particles.localToGlobal(r.position.x,r.position.y),n=L.sink.parent&&L.sink.parent.localToGlobal?L.sink.parent.localToGlobal(L.sink.x,L.sink.y):new createjs.Point(Ao.Pick.choose(L.sink.x),Ao.Pick.choose(L.sink.y)),n=Ao.angle(o.x,o.y,n.x,n.y),i=L.sinkForce*Math.cos(n*Math.PI/180),l=L.sinkForce*Math.sin(n*Math.PI/180));i=L.wind+i,l=L.gravity+l;r.velocity.x+=i*a,r.velocity.y+=l*a,r.position.x+=r.velocity.x*a*100,r.position.y+=r.velocity.y*a*100,e.emitShape?e.graphics.lt(r.position.x,r.position.y):(e.x=r.position.x,e.y=r.position.y),L.trace&&t&&t.updateCache(e.emitShape?null:"source-over")})},D),a=1/Ao.Ticker.framerate)}}),L.particles.noMouse(),Object.defineProperty(L,"interval",{get:function(){return t},set:function(e){t=e,L.zimInterval&&(L.zimInterval.time=t)}}),this.removeFrom=function(){L.parent&&L.parent.removeChild(L),L.particles.removeFrom()},this.spurting=!1,this.spurt=function(e,t,o){var n;return(n=zob(L.spurt,arguments,"num, time, restart"))?n:(zot(t)||(Ao.timeout(Ao.Pick.choose(t),function(){N(L.currentParticle)},!0),L.spurting=!0),zot(e)||(L.spurtNum=Ao.Pick.choose(e),L.spurtCount=0,L.spurting=!0),L.pauseEmitter(!1,o,null,!0),L)},this.clearPool=function(){Ao.loop(L.particles,function(e){e.pooled="end",e.visible||L.removeChild(e)},!0),X=R=0,Y=[]},L.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(e,t,o,n){if(L.startEmitterPaused=null,zot(e)&&(e=!0),zot(t)&&(t=!1),zot(o)&&(o=!1),e){if(L.emitterPaused)return L;o&&(_&&Ao.Ticker.remove(_),Ao.loop(L.particles,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),L.zimInterval.pause(),L.emitterPaused=!0}else{if(!L.emitterPaused)return L;t&&(Ao.loop(L.particles,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),L.removeAllChildren()),D&&_&&!Ao.Ticker.has(D,_)&&(Ao.Ticker.add(_,D),Ao.loop(L.particles,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),L.zimInterval&&L.zimInterval.pause(!1,n),L.emitterPaused=!1}return L},!(this.resize=function(e,t){zot(e)||(h=e),zot(t)||(g=t),L.setBounds(0,0,h,g),w||C||L.centerReg(),L.clearPool()})!==S&&Ao.styleTransforms(this,W),this.clone=function(e){e=Array.isArray(L.obj)||L.obj.constructor=={}.constructor?Ao.copy(L.obj):L.obj.clone?L.obj.clone(e):L.obj;return L.cloneProps(new Ao.Emitter(e,h,g,L.interval,L.num,L.life,L.fade,L.shrink,L.decayTime,L.decayStart,L.trace,L.traceFadeTime,L.traceShiftX,L.traceShiftY,L.angle,L.emitterForce,L.gravity,L.wind,L.layers,L.animation,Ao.copy(L.random),L.horizontal,L.vertical,L.sink,L.sinkForce,T,L.events,P,L.pool,L.poolMin,S,L.group,M))},this.dispose=function(){return L.zimInterval&&L.zimInterval.clear(),_&&Ao.Ticker.remove(_),Ao.loop(Y,function(e){e&&e.dispose()}),I&&I.dispose&&I.dispose(),L.currentParticle&&L.currentParticle.dispose&&L.currentParticle.dispose(),d&&Array.isArray(d)?Ao.loop(d,function(e){e.dispose&&e.dispose()}):d&&d.dispose&&d.dispose(),!(I=L.currentParticle=L.particles=d=L.obj=Y=L.poolList=null)}},Ao.extend(Ao.Emitter,Ao.Container,"clone","zimContainer",!1),Ao.Generator=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w){if(C=zob(Ao.Generator,arguments,"color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",this))return C;z_d("69.92"),this.group=v;var C=!1===b?{}:Ao.getStyle("Generator",this.group,w);zot(f)&&(f=null!=C.frame?C.frame:WW.zdf);var x=f.stage;zot(e)&&(e=null!=C.color?C.color:null),zot(t)&&(t=null!=C.strokeColor?C.strokeColor:Ao.white),zot(o)&&(o=null!=C.strokeWidth?C.strokeWidth:1),zot(l)&&(l=null!=C.maxCount?C.maxCount:1e3),zot(a)&&(a=null!=C.boundary?C.boundary:new Ao.Boundary(0,0,x.width,x.height)),zot(s)&&(s=null!=C.drawCount?C.drawCount:1),zot(c)&&(c=null==C.drawPause||C.drawPause),zot(u)&&(u=null==C.drawSpacebarPause||C.drawSpacebarPause),zot(d)&&(d=null!=C.startX?C.startX:x.width/2),zot(h)&&(h=null!=C.startY?C.startY:x.height/2),zot(g)&&(g=null!=C.cache&&C.cache);var v=this.drawing=new Ao.Container(a.x,a.y,a.width,a.height).addTo(x),k=this.shape=new Ao.Shape(a.width,a.height).addTo(v);this.drawCount=s,zot(c)&&(c=!0),g&&k.cache(a.x,a.y,a.width,a.height),this.zimContainer_constructor(a.x,a.y,a.width,a.height),this.type="Generator";var T,A=this;A.draw=null,z&&(A.drawCount=10,!zot(r)&&zot(n)&&(n=r),r=null,T=new Ao.Loader,A.outputNum=0,A.outputName=!0===z?"gen_":z.match(/_$/)?z:z+"_"),this.color=e,this.strokeColor=t,this.strokeWidth=o;var P=d,B=h;this.fill=function(e){return A.color=e,A.currentColor=zik(A.color),k.f(A.currentColor),this},this.stroke=function(e,t){return zot(e)||(A.strokeColor=e,A.currentStrokeColor=zik(A.strokeColor),k.s(A.currentStrokeColor)),zot(t)||(A.strokeWidth=t,A.currentStrokeWidth=zik(A.strokeWidth),k.ss(A.currentStrokeWidth)),this},this.noStroke=function(){return A.strokeColor=A.currentStrokeColor=null,A.strokeWidth=A.currentStrokeWidth=null,k.s(),k.ss(1),this},k.matrix=k.getMatrix(),this.translate=function(e,t){zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t);var o=k.matrix.transformPoint(e,t);return P=o.x,B=o.y,k.mt(P,B),k.matrix.translate(e,t),this},this.rotate=function(e){return zot(e)&&(e=0),e=zik(e),k.matrix.rotate(e),this},this.scale=function(e,t){return zot(e)&&(e=1),zot(t)&&(t=e),e=zik(e),t=zik(t),k.matrix.scale(e,t),this},this.skew=function(e,t){return zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t),k.matrix.skew(e,t),this},p&&(A.linePoints=[]),this.line=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),("zero"==p||"nonzero"==p&&e&&t)&&A.linePoints.push([e,t]),A.translate(e,t);t=k.matrix.transformPoint(o,n);return P=t.x,B=t.y,k.lt(P,B),p&&A.linePoints.push([P,B]),k.matrix.translate(o,n),this},this.arc=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),e=zik(e),t=zik(t),o=zik(o),o=Math.abs(o),zot(n)&&(n=0),zot(r)&&(r=180),n=zik(n),r=zik(r),zot(i)&&(i=!1),i=zik(i),A.translate(e,t);var l=k.matrix.transformPoint(0,0);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,t=k.decomp.rotation||0,e*=o;return k.mt(l.x+e*Math.cos((n+t)*Math.PI/180),l.y+e*Math.sin((n+t)*Math.PI/180)),k.a(l.x,l.y,e,(n+t)*Math.PI/180,(r+t)*Math.PI/180,i),this},this.curve=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=100),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),A.translate(e,t);t=k.matrix.transformPoint(o,n),o=k.matrix.transformPoint(r,i),n=o.x,o=o.y;return k.qt(t.x,t.y,n,o),k.matrix.translate(r,i),this},this.bezier=function(e,t,o,n,r,i,l,a){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=-50),zot(i)&&(i=-50),zot(l)&&(l=100),zot(a)&&(a=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),l=zik(l),a=zik(a),A.translate(e,t);o=k.matrix.transformPoint(o,n),n=k.matrix.transformPoint(r,i),r=k.matrix.transformPoint(l,a),i=r.x,r=r.y;return k.bt(o.x,o.y,n.x,n.y,i,r),k.matrix.translate(l,a),this},this.rectangle=function(e,t,o,n,r,i,l,a){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=o),e=zik(e),t=zik(t),o=zik(o),n=zik(n),!(r||i||l||a)){A.translate(e,t);var s=k.matrix.transformPoint(0,0),c=k.matrix.transformPoint(o,0),u=k.matrix.transformPoint(o,n),d=k.matrix.transformPoint(0,n);return k.mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).lt(c.x,c.y),k.mt(s.x,s.y),this}zot(r)&&(r=0),zot(i)&&(i=r),zot(l)&&(l=r),zot(a)&&(a=r),r=zik(r),i=zik(i),l=zik(l),a=zik(a);var h=(o<n?o:n)/2,g=0,p=0,f=0,m=0;r<0&&(r*=g=-1),(h=Math.abs(h))<r&&(r=h),i<0&&(i*=p=-1),h<i&&(i=h),l<0&&(l*=f=-1),h<l&&(l=h),a<0&&(a*=m=-1),h<a&&(a=h),A.translate(e,t),k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);var z=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,u=o<0?-1:1,d=n<0?-1:1,c=k.matrix.transformPoint(o-i*u,0),s=k.matrix.transformPoint(o+i*p*u,-i*p*d),h=k.matrix.transformPoint(o,i*d),e=k.matrix.transformPoint(o,n-l*d),t=k.matrix.transformPoint(o+l*f*u,n+l*f*d),p=k.matrix.transformPoint(o-l*u,n),f=k.matrix.transformPoint(a*u,n),o=k.matrix.transformPoint(-a*m*u,n+a*m*d),m=k.matrix.transformPoint(0,n-a*d),n=k.matrix.transformPoint(0,r*d),d=k.matrix.transformPoint(-r*g*u,-r*g*d),u=k.matrix.transformPoint(r*u,0);return k.mt(c.x,c.y).at(s.x,s.y,h.x,h.y,i*z).lt(e.x,e.y).at(t.x,t.y,p.x,p.y,l*z).lt(f.x,f.y).at(o.x,o.y,m.x,m.y,a*z).lt(n.x,n.y).at(d.x,d.y,u.x,u.y,r*z).cp(),this},this.circle=function(e,t,o,n,r){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=100),zot(r)&&(r=!0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),o=Math.abs(o),A.translate(e,t);var i=k.matrix.transformPoint(0,0);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,t=k.decomp.rotation||0,e*=o;return A.circleHeight=2*e,"number"==typeof n&&0<=n&&n<100?(n=360*n/100/2,k.mt(i.x+e*Math.cos((-n-90+t)*Math.PI/180),i.y+e*Math.sin((-n-90+t)*Math.PI/180)),k.a(i.x,i.y,e,(-n-90+t)*Math.PI/180,(n-90+t)*Math.PI/180,!1),r&&k.cp(),A.circleHeight=e-Math.cos(n*Math.PI/180)*e):(k.mt(i.x+e,i.y),k.a(i.x,i.y,e,0,2*Math.PI)),this},this.elipse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=50),e=zik(e),t=zik(t),o=zik(o),n=zik(n),A.translate(e,t);var r=k.matrix.transformPoint(-o/2,-n/2);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=k.decomp.scaleX,t=k.decomp.scaleY;return k.de(r.x,r.y,o*e,n*t),this},this.poly=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=5),zot(r)&&(r=0),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),o=Math.abs(o),A.translate(e,t);i=k.matrix.transformPoint(0,0);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,t=k.decomp.rotation||0,e*=o;return k.dp(i.x,i.y,e,n,r,t),this},this.closePath=this.close=this.cp=function(){return k.cp(),this},this._noise=new Ao.Noise(m),this.noise=function(){return 1==arguments.length?(this._noise.simplex1D.apply(null,arguments)+1)/2:2==arguments.length?(this._noise.simplex2D.apply(null,arguments)+1)/2:3==arguments.length?(this._noise.simplex3D.apply(null,arguments)+1)/2:4==arguments.length?(this._noise.simplex4D.apply(null,arguments)+1)/2:void 0},this.stack=[],this.colorStrokeStack=[],this.push=function(){return A.stack.push(k.matrix.clone()),A.colorStrokeStack.push([A.color,A.strokeColor,A.strokeWidth,A.currentColor,A.currentStrokeColor,A.currentStrokeWidth]),this},this.pop=function(){k.matrix=A.stack.pop()||k.matrix;var e=A.colorStrokeStack.pop()||[A.color,A.strokeColor,A.strokeWidth,A.currentColor,A.currentStrokeColor,A.currentStrokeWidth];return A.color=e[0],A.strokeColor=e[1],A.strokeWidth=e[2],A.currentColor=e[3],A.currentStrokeColor=e[4],A.currentStrokeWidth=e[5],k.f(A.currentColor).s(A.currentStrokeColor).ss(A.currentStrokeWidth),k.mt(k.matrix.x,k.matrix.y),this},this.blit=function(){return k.updateCache("source-over"),k.c(),this},this.step=function(){return A.draw&&W(),this},zot(A.color)||this.fill(A.color),!zot(A.strokeColor)&&A.strokeWidth?this.stroke(A.strokeColor,A.strokeWidth):A.noStroke(),this.translate(P,B),"function"==typeof i&&(this.setup=i,Ao.timeout(.01,function(){i(0,A.count,A),g&&k.updateCache(),x.update()}));var E=0;function I(){T.save({content:x,filename:A.outputName+Ao.decimals(A.outputNum,null,null,6),type:y}),A.outputNum++}function S(e){A.stampNum++;e=Ao.loop(A.maxCount,function(e,t){if(A.paused)return A.pausedCount=e,!1;if(A.changeCount)return A.changeCount=!1;t=r(E=e+1,t,A,A.stampNum);return A.currentColor=zik(A.color),k.f(A.currentColor),A.currentStrokeColor=zik(A.strokeColor),k.s(A.currentStrokeColor),A.currentStrokeWidth=zik(A.strokeWidth),k.ss(A.currentStrokeWidth),z&&(x.update(),I()),t||void 0},null,null,e);g&&k.updateCache(),e&&A.dispatchEvent("complete"),x.update()}function W(){A.iterator++,A.iterator%Math.ceil(A.drawCount)==0&&(A.count++,A.draw(A.count,A.maxCount,A),g&&A.blit(),A.currentColor=zik(A.color),k.f(A.currentColor),A.currentStrokeColor=zik(A.strokeColor),k.s(A.currentStrokeColor),A.currentStrokeWidth=zik(A.strokeWidth),k.ss(A.currentStrokeWidth),A.dispatchEvent("drawing"),x.update(),z&&I()),A.maxCount&&A.count>=A.maxCount&&(A.dispatchEvent("complete"),Ao.Ticker.remove(A.ticker))}this.maxCount=l,this.resetup=function(e){return zot(e)&&(e=!0),E=0,e&&A.shape.c(),zot(A.color)||this.fill(A.color),!zot(A.strokeColor)&&A.strokeWidth?this.stroke(A.strokeColor,A.strokeWidth):A.noStroke(),this.reset(),this.setup&&(i(0,A.count,A),g&&k.updateCache(),x.update()),this},this.stampNum=0,"function"==typeof r&&(this.stamp=r,Ao.timeout(.015,function(){S(0)})),this.restamp=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=!0),E=0,e&&A.shape.c(),t&&A.resetup(e),S(0),this},this.reset=function(){return this.fill(e),!zot(t)&&o?this.stroke(t,o):this.noStroke(),k.matrix.identity(),this.translate(d,h),this},this.clear=function(){return this.shape.c(),this},z&&(x.update(),I()),A.iterator=0,"function"==typeof n&&(this.draw=n,i?setTimeout(function(){A.ticker=Ao.Ticker.add(W)},100):this.ticker=Ao.Ticker.add(W),A.generatorPaused=!1,c&&(A.pauseEvent=x.on("stagemousedown",function(){A.count>=A.maxCount||A.pauseTimeout||(Ao.Ticker.has(A.ticker)?(Ao.Ticker.remove(A.ticker),A.generatorPaused=!0,A.dispatchEvent("generatorpaused")):(A.ticker=Ao.Ticker.add(A.ticker),A.generatorPaused=!1,A.dispatchEvent("generatorunpaused")))})),u&&(A.pauseSpacebarEvent=f.on("keydown",function(e){A.count>=A.maxCount||A.pauseTimeout||20==e.keyCode&&(Ao.Ticker.has(A.ticker)?(Ao.Ticker.remove(A.ticker),A.generatorPaused=!0,A.dispatchEvent("generatorpaused")):(A.ticker=Ao.Ticker.add(A.ticker),A.generatorPaused=!1,A.dispatchEvent("generatorunpaused")))}))),this.redraw=function(e,t){return zot(e)&&(e=!0),A.reset(),zot(t)&&(t=!0),A.ticker&&Ao.Ticker.remove(A.ticker),A.iterator=0,A.count=0,e&&A.shape.c(),t?(A.resetup(e),setTimeout(function(){A.ticker&&(A.ticker=Ao.Ticker.add(A.ticker))},100)):A.ticker&&(A.ticker=Ao.Ticker.add(A.ticker)),this},this.paused=!1,this.pause=function(e,t){if(zot(e)&&(e=!0),!(A.count>=A.maxCount)){if(e==this.paused)return this;this.paused=e,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?A.ticker&&Ao.Ticker.remove(A.ticker):A.ticker?A.ticker=Ao.Ticker.add(A.ticker):S(A.pausedCount,A.maxCount),setTimeout(function(){x.update()},20),t&&(this.pauseTimeout=Ao.timeout(t,function(){A.pause(!A.paused),A.pauseTimeout=null})),A.dispatchEvent(A.paused?"paused":"unpaused")}},this.outOfBounds=function(e,t){zot(e)&&(e=0),zot(t)&&(t=e);var o=A.shape.stage;if(o)return A.currentX>o.width-e||A.currentX<0+e||A.currentY>o.height-t||A.currentY<0+t},this.stop=function(){A.pause(),A.pauseEvent&&x.off("stagemousedown",A.pauseEvent),A.pauseSpaceEvent&&f.off("keydown",A.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return E},set:function(e){E=e,A.stamp&&(A.changeCount=!0,setTimeout(function(){S(E,A.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return P},set:function(){zon&&zogy("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return B},set:function(){zon&&zogy("Generator() - currentY is read only")}}),this.clone=function(){return A.cloneProps(new Ao.Generator(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,b,A.group,w))},!(A.dispose=function(e,t,o){return A.pause(),A.ticker&&Ao.Ticker.remove(A.ticker),A.pauseEvent&&x.off("stagemousedown",A.pauseEvent),A.pauseSpacebarEvent&&f.off("keydown",A.pauseSpacebarEvent),A._noise&&(A._noise=null),A.shape&&A.shape.dispose(),A.drawing&&A.drawing.dispose(),A.shape=A.drawing=null,o||A.zimContainer_dispose(),!0})!==b&&Ao.styleTransforms(this,C)},Ao.extend(Ao.Generator,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.Pen=function(p,f,m,t,z,y,b,v,w,n,r,e,i,l,o,a,s,c,u,d,h,g,C,x,k,T,A){if(P=zob(Ao.Pen,arguments,"size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, style, group, inherit",this))return P;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=T;var P=!1===k?{}:Ao.getStyle(this.type,this.group,A);zot(m)&&(m=null!=P.penType?P.penType:"line");var B={size:2,color:"#333",spread:{min:5,max:20},borderColor:"#111",borderWidth:0},E={line:{size:2},kitetail:{size:{min:5,max:20},color:Ao.series(Ao.pink,Ao.blue,Ao.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:"#acd241",size:3,spread:{min:10,max:30}},hair:{color:["#e472c4","#50c4b7"],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:["#333","#111","#555"]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(E[m])&&(m="line"),zot(p)&&(p=(null!=P.size?P:zot(E[m].size)?B:E[m]).size),zot(f)&&(f=(null!=P.color?P:zot(E[m].color)?B:E[m]).color),zot(t)&&(t=null!=P.damp?P.damp:.1),!1===t&&(t=1),zot(z)&&(z=(null!=P.spread?P:zot(E[m].spread)?B:E[m]).spread),zot(y)&&(y=(null!=P.borderColor?P:zot(E[m].borderColor)?B:E[m]).borderColor),zot(b)&&(b=(null!=P.borderWidth?P:zot(E[m].borderWidth)?B:E[m]).borderWidth),zot(v)&&(v=null!=P.end?P.end:"butt"),zot(i)&&(i=null!=P.cropScale?P.cropScale:1),zot(r)&&(r=null==P.cache||P.cache),zot(l)&&(l=null!=P.undo?P.undo:0),zot(o)&&(o=null==P.undoKeys||P.undoKeys),zot(a)&&(a=null==P.move||P.move),zot(c)&&(c=null==P.deleteable||P.deleteable),zot(u)&&(u=null==P.doubleClickDelete||P.doubleClickDelete),zot(s)&&(s=null==P.onTop||P.onTop),zot(d)&&(d=null!=P.immediateStop?P.immediateStop:"both"),zot(h)&&(h=null!=P.lineAlpha?P.lineAlpha:1),zot(g)&&(g=null!=P.lineBlendMode?P.lineBlendMode:"normal"),zot(w)&&(w=null!=P.paper?P.paper:new Ao.Container),zot(n)&&(n=null!=P.nib?P.nib.clone():null),zot(C)&&(C=null!=P.frame?P.frame:WW.zdf),zot(x)&&(x=null!=P.dashed?P.dashed:null),!0===x&&(x=[3,100]);var I=this;this.dampX=new Ao.Damp(null,t),this.dampY=new Ao.Damp(null,t);var S=!0;this.drawing=!1,this.immediateStop=d,this.undoLevels=l,this.undoKeys=o,this.move=a,this.draggable=!0,this.lineAlpha=h,this.lineBlendMode=g;var W,M,O,j,L,_=I.shape=new Ao.Shape,D=C.stage.width,Y=C.stage.height;I.paperNum=0,I.sizeScale=1,I.spreadScale=1,I.sizeFactor=1,I.spreadFactor=1,I.stop=function(){},this.added(function(e){function t(e){I.drawing&&(I.nib.x=e.stageX/Ao.scaX,I.nib.y=e.stageY/Ao.scaY)}L=e,I.paper=w,D=I.stage.width,Y=I.stage.height,zot(n)||(I.zimDown?I.nib=n.addTo(I):(I.nib=n.addTo(I.parent,I.parent.getChildIndex(I)),I.nib.x=I.x,I.nib.y=I.y,I.nib.mouseEnabled=!1,I.stageDown=L.on("stagemousedown",function(e){L=e.target.stage,I.nibEvent=L.on("stagemousemove",t)}),I.stageUp=L.on("stagemouseup",function(){L.off("stagemousemove",I.nibEvent)}))),I.zimDragCheck=!1,I.stop=function(){I.stopCheck(!0)},I.infinite=!1,I.stopCheck=function(e){if(e)I.drawing=!1,I.infinite=!1;else{if(I.infinite)return;if(I.zimDragCheck)return;if(!I.immediateStop&&I.drawing)return}I.immediate(I.x,I.y),setTimeout(function(){var e,t;I.drawing||(r?(_.cache(-(D*i-D)/2,-(Y*i-Y)/2,D*i,Y*i),e=w.bitmap=new Ao.Bitmap(_.cacheCanvas).reg((D*i-D)/2,(Y*i-Y)/2).addTo(w),_.graphics.clear(),_.uncache(),_.top()):e=_,0<I.undoLevels&&(t={paper:w,line:e},l.push(t),l.length>I.undoLevels&&l.shift(),I.dispatchEvent("recordUndo")),r||(_=(new Ao.Shape).clone().addTo(w)),I.lastSegment=e,(I.lastSelected=e).alpha=I.lineAlpha,e.blendMode=I.lineBlendMode,e.paper=w,I.dispatchEvent("stop"),I.dispatchEvent("change"))},I.immediateStop||e?0:50)};var g=0;I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.lastMidX=I.drawX=I.x,I.lastY=I.lastMidY=I.drawY=I.y,I.ticker=Ao.Ticker.add(function(){if(I.parent){var e=I.dampX.convert(S?I.x:I.finishX),t=I.dampY.convert(S?I.y:I.finishY),o=I.parent.localToLocal(e,t,_),n=Ao.Pick.choose(p)*I.sizeScale*I.sizeFactor,r=Ao.Pick.choose(z)*I.spreadScale*I.spreadFactor;if(Math.abs(I.lastX-e)+Math.abs(I.lastY-t)<1)return I.drawing&&(I.drawing=!1,I.zimDown?(I.x=I.lastX=I.lastMidX=S?I.x:I.finishX,I.y=I.lastY=I.lastMidY=S?I.y:I.finishY,I.dampX.immediate(I.x),I.dampY.immediate(I.y)):(I.x=I.finishX=I.lastX=I.lastMidX=e,I.y=I.finishY=I.lastY=I.lastMidY=t),I.stopCheck()),I.lastX=I.lastMidX=e,I.lastY=I.lastMidY=t,void(w&&(c=w.localToLocal(0,0,I.parent),I.lastMidX-=c.x,I.lastMidY-=c.y));I.drawing||(X=[],w.getChildIndex(_)!=w.numChildren-1&&_.top()),I.drawing=!0,I.dispatchEvent("drawing");var i,l,a,s=I.parent.localToLocal(I.lastX,I.lastY,_),c=(w||I.parent).localToLocal(I.lastMidX,I.lastMidY,_);if("splatter"==m)for(var u=0;u<=3;u++){var d=Ao.rand(360)*Math.PI/180,h=r,d={x:e+h*Math.cos(d),y:t+h*Math.sin(d)},d=I.parent.localToLocal(d.x,d.y,_);_.graphics.mt(d.x,d.y).f(Ao.Pick.choose(f)).dc(d.x,d.y,n/2)}else"grass"==m||"hair"==m||"city"==m?("grass"!=m&&"hair"!=m||(i=I.lastX+(e-I.lastX)/2,l=I.lastY+(t-I.lastY)/2,a=I.parent.localToLocal(i,l,_),_.graphics.s(Ao.Pick.choose(f)).ss(n,v).mt(a.x,a.y).lt(a.x+Ao.rand(-r/4,r/4),"hair"==m?a.y+r:a.y-r)),("grass"==m||"hair"==m||"city"==m&&g%3==0)&&_.graphics.s(Ao.Pick.choose(f)).ss(n,v).mt(o.x,o.y).lt(o.x+("city"==m?0:Ao.rand(-r/4,r/4)),"hair"==m?a.y+r:o.y-r),g++):("kitetail"==m&&_.graphics.s(Ao.Pick.choose(f)).ss(n,v),l="barbwire"==m?(_.graphics.s(Ao.Pick.choose(f)).ss(n,v),i=I.lastX+(e-I.lastX)/2+Ao.rand(-r,r),I.lastY+(t-I.lastY)/2+Ao.rand(-r,r)):(i=I.lastX+(e-I.lastX)/2,I.lastY+(t-I.lastY)/2),a=I.parent.localToLocal(i,l,_),"line"!=m&&_.graphics.qt(s.x,s.y,a.x,a.y));0<b&&"line"!=m&&(i=I.lastX+(e-I.lastX)/2,l=I.lastY+(t-I.lastY)/2,a=I.parent.localToLocal(i,l,_),_.graphics.s(Ao.Pick.choose(y)).ss(Ao.Pick.choose(b)).mt(c.x,c.y).qt(s.x,s.y,a.x,a.y),"splatter"==m&&_.graphics.es()),"splatter"==m?_.graphics.f(Ao.Pick.choose(f)):"kitetail"!=m&&_.graphics.s(Ao.Pick.choose(f)).ss(n,v),"grass"!=m&&"hair"!=m&&"city"!=m&&"splatter"!=m&&_.graphics.mt(c.x,c.y).qt(s.x,s.y,a.x,a.y),x&&_.graphics.sd(x),I.lastX=e,I.lastY=t,a&&(I.lastMidX=a.x,I.lastMidY=a.y),I.drawX=I.lastMidX||0,I.drawY=I.lastMidY||0}})}),I.mouseChildren=!1,l=[];var X=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:I.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),l.push(r),I.dispatchEvent("recordUndo"),l.length>I.undoLevels&&l.shift()};var R,H,F={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};function N(e,t){for(var o,n=l.length-1;0<=n;n--)if(l[n][e]==t&&l[n][e+"Transform"]){o=l[n][e+"Transform"];break}o=o||Ao.copy(F),t.x=o.x,t.y=o.y,t.alpha=o.a,t.rotation=o.r,t.regX=o.rX,t.regY=o.rY,t.scaleX=o.sX,t.scaleY=o.sY,t.skewX=o.skX,t.skewY=o.skY,t.visible=o.v,"line"==e&&r&&(t.regX=(D*i-D)/2,t.regY=(Y*i-Y)/2)}this.undo=function(){var e=l.pop();if(e){if(X.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(_)}else e.line&&e.lineTransform?(zot(e.startLayer)||(_.top(),e.paper.setChildIndex(e.line,O)),N("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&N("paper",e.paper);I.lastPaper=I.paper,e.paper!=I.paper&&(I.paper=e.paper,I.dispatchEvent("paperChange")),I.dispatchEvent("change"),I.dispatchEvent("undo"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!I.stage||I.stage.update()}},this.redo=function(){var e,t,o=X.pop();o&&(l.push(o),o.clear?(o.paper.removeAllChildren(),o.paper.addChild(_)):o.line&&o.lineTransform?(zot(o.endLayer)||(_.top(),o.paper.setChildIndex(o.line,j)),t=o.lineTransform,e=o.line):o.line?o.line.addTo(o.paper):o.paperTransform&&(t=o.paperTransform,e=o.paper),e&&(e.x=t.x,e.y=t.y,e.alpha=t.a,e.rotation=t.r,e.regX=t.rX,e.regY=t.rY,e.scaleX=t.sX,e.scaleY=t.sY,e.skewX=t.skX,e.skewY=t.skY,e.visible=t.v),I.lastPaper=I.paper,o.paper!=I.paper&&(I.paper=o.paper,I.dispatchEvent("paperChange")),I.dispatchEvent("change"),I.dispatchEvent("redo"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!I.stage||I.stage.update())},I.ctrlKey=!1,I.shiftKey=!1,I.ctrlKeyCheck=!1,I.zimkeydownEvent=function(e){I.ctrlKey=e.ctrlKey,I.shiftKey=e.shiftKey,17==e.keyCode&&a&&!I.ctrlKeyCheck&&(I.ctrlKeyCheck=!0,w.noDrag(),w.drag({onTop:s,all:!0})),I.undoLevels<=0||I.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?I.redo():e.ctrlKey&&90==e.keyCode&&I.undo(),C&&C.ctrlKey&&I.write&&(I.lastWrite=I.write,I.write=!1))},WW.addEventListener("keydown",I.zimkeydownEvent),I.zimkeyupEvent=function(e){17==e.keyCode&&a&&I.ctrlKeyCheck&&(I.ctrlKeyCheck=!1,w.noDrag(),w.drag({onTop:s})),e.ctrlKey||(I.ctrlKey=!1),e.shiftKey||(I.shiftKey=!1),C&&!C.ctrlKey&&0==I.write&&(I.write=I.lastWrite)},WW.addEventListener("keyup",I.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return w},set:function(e){"Container"==e.type&&(w=e,_.addTo(w,0,!1),w.shape=_,I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.lastMidX=I.finishX=I.x,I.lastY=I.lastMidY=I.finishY=I.y,"barbwire"==m&&_.graphics.s(Ao.Pick.choose(f)).ss(Ao.Pick.choose(p)*I.sizeScale*I.sizeFactor,v),_.graphics.mt(I.x,I.y),w.parent||w.addTo(I.parent,I.parent.getChildIndex(I)),zot(w.paperNum)&&(w.paperNum=++I.paperNum,c&&w.on("mousedown",function(e){I.lastSelected=e.target,I.nibEvent&&I.stage.off("stagemousemove",I.nibEvent);var t=e.target.paper;t&&(t!=I.paper&&(I.paper=t,I.dispatchEvent("paperChange")),I.shiftKey&&(I.ctrlKey?I.clear():(e.target.visible=!1,0<I.undoLevels&&I.saveState(e.target),I.dispatchEvent("change"))))}),u&&w.on("dblclick",function(e){e.target.visible=!1,0<I.undoLevels&&I.saveState(e.target)}),a&&(w.on("mousedown",function(e){L=e.target.stage,I.draggingCheck=!0,I.shiftKey&&c||(W=e.stageX/Ao.scaX,M=e.stageY/Ao.scaY,_.top(),O=w.getChildIndex(e.target))}),w.drag({onTop:s}),w.on("pressup",function(e){c&&I.shiftKey||0!=e.target.visible&&(I.undoLevels<=0||(Math.abs(e.stageX/Ao.scaX-W)<1&&Math.abs(e.stageY/Ao.scaY-M)<1?s&&(_.top(),j=w.getChildIndex(e.target),O!=j&&I.saveState(e.target,O,j)):(I.ctrlKey?(I.saveState(w),I.dispatchEvent("paperChange")):(_.top(),j=w.getChildIndex(e.target),I.saveState(e.target,O,j)),I.dispatchEvent("change"),_.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return S},set:function(e){S&&!1===e&&(I.finishX=I.x,I.finishY=I.y),!S&&e&&(_.graphics.es(),_.graphics.ef(),I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.lastMidX=I.x,I.lastY=I.lastMidY=I.y),S=e}}),Object.defineProperty(this,"size",{get:function(){return p},set:function(e){_.graphics.es(),_.graphics.ef(),p=e,"splatter"!=m&&_.graphics.ss(Ao.Pick.choose(p)*I.sizeScale*I.sizeFactor,v)}}),Object.defineProperty(this,"color",{get:function(){return f},set:function(e){f=e,_.graphics.es(),_.graphics.ef(),"splatter"!=m&&_.graphics.s(Ao.Pick.choose(f))}}),Object.defineProperty(this,"penType",{get:function(){return m},set:function(e){m=e,_.graphics.ef().es(),"splatter"!=m?_.graphics.s(Ao.Pick.choose(f)):_.graphics.s(Ao.Pick.choose(f)).ss(Ao.Pick.choose(p)*I.sizeScale*I.sizeFactor,v)}}),Object.defineProperty(this,"end",{get:function(){return v},set:function(e){v=e}}),Object.defineProperty(this,"damp",{get:function(){return t},set:function(e){t=e,I.dampX.damp=t,I.dampY.damp=t}}),Object.defineProperty(this,"spread",{get:function(){return z},set:function(e){z=e}}),this.setColorRange=function(e,t){return H=zot(t)?(R=I.color,e):(R=zot(e)?I.color:e,t),I};var V=0;Object.defineProperty(I,"colorRange",{get:function(){return V},set:function(e){V=e,zot(R)||zot(H)||(I.color=Ao.colorRange(R,H,e))}}),Object.defineProperty(this,"borderColor",{get:function(){return y},set:function(e){y=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return b},set:function(e){b=e}}),I.setPen=function(e){I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.lastMidX=I.finishX=I.x,I.lastY=I.lastMidY=I.finishY=I.y,zot(e)&&(e=m),zot(E[e])&&(e="line"),I.penType=m=e;var t,o=Ao.merge(B,E[e]);for(t in o)I[t]!=o[t]&&(I[t]=o[t]);return I},I.immediate=function(e,t){return zot(e)||(I.x=e,I.dampX.immediate(I.x),I.lastX=I.lastMidX=I.finishX=I.x),zot(t)||(I.y=t,I.dampY.immediate(I.y),I.lastY=I.lastMidY=I.finishY=I.y),I},I.clear=function(){for(var e=[],t=0;t<w.numChildren-1;t++)e.push(w.getChildAt(t));return l.push({paper:w,clear:e}),l.length>I.undoLevels&&l.shift(),I.dispatchEvent("recordUndo"),w.removeAllChildren(),_.graphics.clear(),w.addChild(_),I.dispatchEvent("change"),I.stage&&I.stage.update(),I},this.deleteSegment=function(e){e.visible=!1,0<I.undoLevels&&I.saveState(e)},this.clone=function(){return this.cloneChildren(this.cloneProps(new Ao.Pen(p,f,m,t,z,y,b,v,w,n,r,e,i,l,o,a,s,c,u,d,h,g,C,x,k,T,A)))},!(I.dispose=function(e,t,o){return zot(e)&&(e=!0),WW.removeEventListener("keydown",I.zimkeydownEvent),WW.removeEventListener("keyup",I.zimkeyupEvent),L&&I.nibEvent&&L.off("stagemousemove",I.nibEvent),L&&I.stageDown&&L.off("stagemousedown",I.stageDown),L&&I.stageUp&&L.off("stagemouseup",I.stageUp),L&&I.upEvent&&L.off("stagemouseup",I.upEvent),Ao.Ticker.remove(I.ticker),I.removeAllEventListeners(),n&&n.removeFrom(),e&&(I.shape&&I.shape.dispose(),I.paper&&I.paper.dispose(),r&&(I.bitmap&&I.bitmap.dispose(),I.bitmap=null),I.zimContainer_dispose(o),w=_=I.shape=null),!0})!==k&&Ao.styleTransforms(this,P)},Ao.extend(Ao.Pen,Ao.Container,["dispose","clone"],"zimContainer",!1),Ao.SoundWave=function(e,p,f,t,o,n,m,r,i,l,a,z){var s;if(s=zob(Ao.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",this))return s;z_d("69.95"),this.type="SoundWave",zot(e)&&(e=120),zot(p)&&(p="mic"),zot(f)&&(f=.1171875),zot(t)&&(t=.85),zot(o)&&(o="mic"==p?-80:(p.oscillator,-100)),zot(n)&&(n="mic"==p?-40:(p.oscillator,-10)),zot(m)&&(m=function(e,t){return e*(+t/Math.pow(Ao.SoundWave.bufferLength,.95)+.5)}),zot(r)&&(r="mic"==p?0:(p.oscillator,30)),zot(i)&&(i="mic"==p?1:p.oscillator?5:10),zot(l)&&(l=0),zot(a)&&(a=5),Ao.SoundWave.bufferLength=1024;var y,b=e,v=this;v.baseline=r,v.magnify=i,v.reduce=l,v.input=p,v.adjust=a,y="Tone"==p.type||"SynthSound"==p.type?p.audioContext:new(WW.AudioContext||WW.webkitAudioContext);var w,C,x=v.analyser=y.createAnalyser();function c(e){var t,s,c,u,d,h,g;C&&C.disconnect(x),C=e,zot(z)||0!==z&&1!==z?(e.connect(x),"mic"!=p&&x.connect(y.destination)):(t=new ChannelSplitterNode(y,{numberOfOutputs:2}),e.connect(t),t.connect(x,z),t=new ChannelMergerNode(y,{numberOfInputs:2}),x.connect(t,0,z),"mic"!=p&&t.connect(y.destination)),x.fftSize=2*Ao.SoundWave.bufferLength,(w=Math.floor(f*Ao.SoundWave.bufferLength/b))<1?zogy("ZIM SoundWave: include param is too small or num param is too big"):(t=x.frequencyBinCount,s=new Uint8Array(t),c=300,d=u=0,h=Math.round(60*v.adjust*.8),g=new Ao.Damp(c,.01),v.calculate=function(e){x.getByteFrequencyData(s);var t=s.map(m);if(1==w&&!e)return t;var o=[],n=0;for(a=0;a<=f*Ao.SoundWave.bufferLength;a++)n+=t[a],0!=a&&a%w==0&&(o.push(Math.max(0,(n/w-v.baseline)*v.magnify-v.reduce)),n=0);var r=o.length;if("mic"!=p&&(o[0]*=.75,o[1]*=.85,o[2]*=.9,o[r-2]*=.8,o[r-1]*=.75),o[r-1]*=1.3,o[r-2]*=1.2,o[r-3]*=1.1,e){var i=[];++h>=60*v.adjust&&(c=u/h,h=d=u=0);for(var l=g.convert(c),a=0;a<r;a++)o[a]>d&&(d=o[a]),i[a]=Math.min(1,0!=l?o[a]/l:0);return u+=d,i}return o},setTimeout(function(){v.dispatchEvent("ready")},50))}x.minDecibels=o,x.maxDecibels=n,x.smoothingTimeConstant=t,Object.defineProperty(this,"smoothing",{get:function(){return x.smoothingTimeConstant},set:function(e){x.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return b},set:function(e){b=e,(w=Math.floor(f*Ao.SoundWave.bufferLength/b))<1&&zogy("ZIM SoundWave: num is too big")}}),this.setInput=function(e){"mic"==(v.input=e)?(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){c(v.source=y.createMediaStreamSource(e))}).catch(function(e){zogy("ZIM SoundWave: Error occured: "+e)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){c(v.source=y.createMediaStreamSource(e))},function(e){zogy("ZIM SoundWave: Error occured: "+e)}):zogy("ZIM SoundWave: Sorry, mic not supported")):"Tone"==e.type?c(e.compressor):"SynthSound"==e.type?c(e.gain):e.type&&"sound"==e.type?zogy("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input"):c((e=e.playbackResource||e,y.createMediaElementSource(e)))},this.setInput(p),this.dispose=function(e){return e&&y&&y.close(),x&&x.disconnect(),!0}},Ao.extend(Ao.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.Synth=function(e,Y){z_d("69.955"),this.type="Synth",zot(e)&&(e=.3),zot(Y)&&(Y=220),this.volume=e,this.frequency=Y;var K,J=this;this.play=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L,_,D,Y,X,R,H,F,N,V,G,q){var U=Array.prototype.slice.call(arguments);if(K||!WW.AudioContext&&!WW.webkitAudioContext||((K=new(WW.AudioContext||WW.webkitAudioContext)).z=K.createBufferSource,K.createBufferSource=function(e){return null==e&&(e=K.z()),e.start=e.start||function(e){K.noteOn(e)},e}),K){for(e=null!=e?zik(e):.3,t=null!=t?zik(t):.05,o=null!=o?zik(o):220,n=null!=n?zik(n):0,r=null!=r?zik(r):0,i=null!=i?zik(i):.1,l=null!=l?zik(l):0,a=null!=a?zik(a):1,s=null!=s?zik(s):0,c=null!=c?zik(c):0,u=null!=u?zik(u):0,d=null!=d?zik(d):0,h=null!=h?zik(h):0,g=null!=g?zik(g):0,p=null!=p?zik(p):0,f=null!=f?zik(f):0,m=null!=m?zik(m):0,b=null!=b?zik(b):0,z=null!=z?zik(z):1,y=null!=y?zik(y):0,A=null!=A?zik(A):44100,null==P&&(P=99+n*A),null==B&&(B=r*A),null==E&&(E=i*A),null==I&&(I=y*A),null==S&&(S=m*A),null==W&&(W=2*Math.PI),null==M&&(M=function(e){return 0<e?1:-1}),null==O&&(O=P+I+B+E+S),null==j&&(j=s*=500*W/Math.pow(A,2)),null==L&&(L=o*=(1+2*t*Math.random()-t)*W/A),null==_&&(_=M(p)*W/4),null==D&&(D=0),null==Y&&(Y=0),null==X&&(X=0),null==R&&(R=0),null==H&&(H=0),null==F&&(F=0),null==N&&(N=1),null==V&&(V=[]),null==G&&(G=K.createBufferSource()),null==q&&(q=K.createBuffer(1,O,A)),G.connect(K.destination);X<Math.floor(O);V[X++]=F)++H>100*f&&(H=0,F=D*o*Math.sin(Y*p*W/A-_),F=l?1<l?2<l?3<l?Math.sin(Math.pow(F%W,3)):Math.max(Math.min(Math.tan(F),1),-1):1-(2*F/W%2+2)%2:1-4*Math.abs(Math.round(F/W)-F/W):Math.sin(F),F=(h?1-b+b*Math.sin(W*X/h):1)*M(F)*Math.pow(Math.abs(F),a)*e*J.volume*(X<P?X/P:X<P+I?1-(X-P)/I*(1-z):X<P+I+B?z:X<O-S?(O-X-S)/E*z:0),F=S?F/2+(X<S?0:(X<O-S?1:(X-O)/S)*V[X-S|0]/2):F),D+=1-g+1e9*(Math.sin(X)+1)%2*g,Y+=1-g+1e9*(Math.pow(Math.sin(X),2)+1)%2*g,o+=s+=500*c*W/Math.pow(A,3),N&&++N>d*A&&(o+=u*W/A,L+=u*W/A,N=0),h&&++R>h*A&&(o=L,s=j,R=1,N=N||1);q.getChannelData(0).set(V),G.buffer=q;var Q,Z=new createjs.EventDispatcher;return Z.type="SynthSound",Z.audioContext=K,Z.gain=K.createGain(),G.connect(Z.gain),Z.gain.connect(K.destination),G.start(),Z.duration=V.length/A,Z.playing=!0,Z.stop=function(){clearTimeout(Z.completeID),clearInterval(Z.repeatID),Z.gain.gain.setTargetAtTime(0,K.currentTime,.1),Z.playing=!1,setTimeout(function(){K.close()},100)},Z.repeat=Z.loop=function(e,t){return!(Q=0)===e&&(e=null),zot(t)&&(t=0),clearTimeout(Z.completeID),Z.repeatID=Ao.interval(function(){return Z.duration+zik(t)},function(){Q++,e&&e<=Q?(Z.dispatchEvent("complete"),Z.repeatID.clear(),Z.playing=!1):(Z.dispatchEvent("loop"),J.play.apply(J,U))}),Z},Z.play=function(){return J.play.apply(J,U),Z.playing=!0,Z},Z.completeID=setTimeout(function(){Z.dispatchEvent("complete")},1e3*(V.length/A+.1)),Z}},this.Tone=function(o,t,n,e,r,i,l,a,s,c,u,d,h,g,p,f,m,z,y){if(w=zob(J.Tone,arguments,"volume, note, shape, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",this))return w;this.type="Tone";var b,v=this;zot(o)&&(o=J.volume),zot(t)&&(t=J.frequency),zot(n)&&(n=Ao.SINE),zot(r)&&(r=.02),zot(i)&&(i=.05),zot(z)&&(z=0),WW.AudioContext||WW.webkitAudioContext?b=this.audioContext=new(WW.AudioContext||WW.webkitAudioContext):zon&&zogy("Synth tone() needs AudioContext"),o=zik(o),t=zik(t),n=zik(n),e=zik(e),r=zik(r),i=zik(i),l=zik(l),a=zik(a),s=zik(s),c=zik(c),u=zik(u),d=zik(d),h=zik(h),g=zik(g),p=zik(p),f=zik(f),m=zik(m),z=zik(z);var w=Po(e);(J.duration=e)&&(e*="s"==w?1:.001),z&&(Po(z),z*="s"==w?1:.001),J.attack=r,J.release=i,J.rampDuration=.02,J.hush=.1;var C=this.note=this.oscillator=b.createOscillator();C.frequency.value=Ao.Synth.note(t),Ao.Synth.setShape(C,n);var x=this.filter=b.createBiquadFilter();x.type="bandpass",x.frequency.value=C.frequency.value,x.Q.value=0;var k=this.gain=C.gain=b.createGain();k.type="gain",k.gain.setValueAtTime(0,b.currentTime);var T,A,i=this.compressor=b.createDynamicsCompressor();i.threshold.setValueAtTime(-50,b.currentTime),i.knee.setValueAtTime(40,b.currentTime),i.ratio.setValueAtTime(12,b.currentTime),i.attack.setValueAtTime(0,b.currentTime),i.release.setValueAtTime(.25,b.currentTime),C.connect(x),x.connect(k),k.connect(i),i.connect(b.destination),zot(T=z)&&(T=b.currentTime),zot(A)&&(A=J.attack),C.start(T),T=WW.zdf&&(new Date).getTime()-WW.zdf.startTime<200?.1:J.attack,k.gain.setValueAtTime(0,b.currentTime+.1),k.gain.linearRampToValueAtTime(o*J.hush,b.currentTime+.1+T),this.stop=function(e){zot(e)&&(e=J.release),k&&O(k.gain,0,!0,e),W&&O(W.gain,0,!0,e),I&&O(I.gain,0,!0,e),setTimeout(function(){v.dispatchEvent("complete")},1e3*(.6+e+J.rampDuration)),setTimeout(function(){b&&!b.iamClosed&&(b.iamClosed=!0,b.close())},1e3*(e+1)),setTimeout(function(){P&&v.removeWah()},1e3*(e+1))},e&&this.stop(z+e-.1);var P,B,E,I,S,W,M=this.notes=[C];function O(e,t,o,n){zot(t)&&(t=0),zot(n)&&(n=J.rampDuration),o?(e.cancelScheduledValues(b.currentTime),e.linearRampToValueAtTime(e.value,b.currentTime+.02),e.linearRampToValueAtTime(t,b.currentTime+.05+n)):(e.cancelScheduledValues(b.currentTime),e.setTargetAtTime(t,b.currentTime,n))}function j(){zot(l)&&(l=1e3),zot(a)&&(a=1),zot(s)&&(s="sine"),zot(c)&&(c=5),u=zot(u)?v.oscillator.frequency.value:Ao.Synth.note(u),zot(B)&&(B=200),v.filter.Q.value=c,(P=v.wah=J.oscillator(a,l/2,s,u+l/2+B)).ticker=Ao.Ticker.add(function(){v.filter.frequency.value=v.wah.amplitude})}function L(){zot(h)&&(h=5),zot(g)&&(g="sine"),zot(d)&&(d=10),E=v.vibrato=b.createOscillator(),(I=v.vibratoGain=b.createGain()).gain.value=0,E.frequency.value=h,Ao.Synth.setShape(E,g),E.connect(I),I.connect(C.frequency),E.start(0),I.gain.setValueAtTime(0,b.currentTime+.1),I.gain.linearRampToValueAtTime(d,b.currentTime+.1+J.attack)}function _(){zot(f)&&(f=5),zot(m)&&(m="sine"),S=v.tremelo=b.createOscillator(),(W=v.tremeloGain=b.createGain()).gain.value=0,S.frequency.value=f,Ao.Synth.setShape(S,m),S.connect(W),W.connect(k.gain),S.start(0);var e=WW.zdf&&(new Date).getTime()-WW.zdf.startTime<200?.1:J.attack;W.gain.setValueAtTime(0,b.currentTime+.1),W.gain.linearRampToValueAtTime(o*J.hush,b.currentTime+.1+e)}this.addNote=function(e,t,o,n,r,i){zot(n)&&(n=!0),zot(r)&&(r=!1),zot(e)&&(e=.1),zot(i)&&(i=0);var l={type:"Note"};l._volume=e,l._note=Ao.Synth.note(t),M.push(l);t=l.oscillator=b.createOscillator();t.frequency.value=l._note,t.type=Ao.Synth.setShape(t,o);o=l.gain=b.createGain();return O(o.gain,l._volume,!0),o.connect(n?x:k),t.connect(o),I&&r&&I.connect(t.frequency),t.start(b.currentTime+i),Object.defineProperty(l,"volume",{get:function(){return l._volume},set:function(e){zot(e)||(l._volume=zik(e),O(l.gain.gain,l._volume,!0))}}),Object.defineProperty(l,"note",{get:function(){return l._note},set:function(e){zot(e)||(l._note=zik(e),O(l.oscillator.frequency,Ao.Synth.note(l._note)))}}),l},this.removeNote=function(e){var t=M.indexOf(e);return 0<=t&&M.splice(t,1),e.oscillator.disconnect(),e=null,this},this.ramp=function(e,t){O(k.gain,e*J.hush,!0,t)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),Ao.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),Ao.wiggle.apply(null,arguments),this},Ao.addWires(this),!l&&!a&&zot(s)&&zot(c)||j(),v.removeWah=function(){Ao.Ticker.remove(P.ticker),P.dispose(),P=v.wah=null,v.filter.Q.value=0},!d&&!h&&zot(g)||L(),v.removeVibrato=function(){O(I.gain,0,!0),setTimeout(function(){I.disconnect(),E.disconnect(),E.stop(),E=null},1e3*(J.rampDuration+1))},!p&&!f&&zot(m)||_(),v.removeTremelo=function(){O(W.gain,0,!0),setTimeout(function(){W.disconnect(),S.disconnect(),S.stop(),S=null},1e3*(J.rampDuration+1))},Object.defineProperty(this,"volume",{get:function(){return o},set:function(e){var t;zot(e)||(S?(t=k.gain.value?W.gain.value/k.gain.value:o?p/o:0,o=zik(e),o=Ao.constrain(o,.001),O(W.gain,o*t*J.hush,!0)):o=zik(e),O(k.gain,o*J.hush,!1,J.rampDuration))}}),this.paused=!1;var D=o;this.pause=function(e){zot(e)&&(e=!0),e?(D=v.volume,v.volume=0):v.volume=D},y&&(zot(Ao.blurCheck)&&Ao.setBlurDetect(),Ao.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return Y},set:function(e){zot(e)||(Y=zik(e),O(C.frequency,e))}}),Object.defineProperty(this,"note",{get:function(){return t},set:function(e){zot(e)||(t=zik(e),C.frequency.value=Ao.Synth.note(t))}}),Object.defineProperty(this,"shape",{get:function(){return n},set:function(e){n=zik(e),Ao.Synth.setShape(C,n)}}),Object.defineProperty(this,"currentTime",{get:function(){return b.currentTime},set:function(){zon&&zogy("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return l},set:function(e){zot(e)||(l=zik(e),l=Ao.constrain(l,J.wahAmountMin,J.wahAmountMax),zot(P)?j():P.gain=l/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return a},set:function(e){zot(e)||(a=zik(e),a=Ao.constrain(a,J.wahRateMin,J.wahRateMax),zot(P)?j():P.frequency=a)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return c},set:function(e){c=zik(e),c=Ao.constrain(c,J.wahThroatMin,J.wahThroatMax),zot(P)?j():x.Q.value=c}}),Object.defineProperty(this,"wahNote",{get:function(){return u},set:function(e){zot(e)||(u=zik(e),zot(P)?j():P.offset=u+l/2+B)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return B},set:function(e){zot(e)||(B=zik(e),zot(P)?j():P.offset=u+l/2+B)}}),Object.defineProperty(this,"wahShape",{get:function(){return s},set:function(e){s=zik(e),zot(P)?j():P.shape=s}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return p},set:function(e){zot(e)||(p=zik(e),zot(S)?_():W.gain.setValueAtTime(p,b.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return f},set:function(e){zot(e)||(f=zik(e),zot(P)?_():S.frequency.value=f)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return m},set:function(e){m=zik(e),zot(S)?_():Ao.Synth.setShape(S,m)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return d},set:function(e){zot(e)||(d=zik(e),zot(E)?L():I.gain.setValueAtTime(d,b.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return h},set:function(e){zot(e)||(h=zik(e),zot(E)?L():E.frequency.value=h)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return g},set:function(e){g=zik(e),zot(E)?L():Ao.Synth.setShape(E,g)}})},Ao.extend(this.Tone,createjs.EventDispatcher),this.tone=function(e,t,o,n,r,i,l,a,s,c,u,d,h,g,p,f,m,z){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(J.Tone,arguments))},this.Oscillator=function(e,t,o,n){var r;if(r=zob(J.Oscillator,arguments,"frequency, gain, shape, offset",this))return r;this.type="Oscillator",zot(e)&&(e=1),zot(t)&&(t=10),zot(o)&&(o="sine"),zot(n)&&(n=0),this.frequency=zik(e),this.gain=zik(t),this.shape=zik(o),"saw"==this.shape&&(this.shape="sawtooth"),this.offset=zik(n),this.paused=!1;var i=this,l=0,a=Ao.Ticker.framerate;this.ticker=Ao.Ticker.add(function(){var e;i.paused||(e=0,"sine"==i.shape?e=Math.sin(i.frequency*(2*Math.PI*(l/a))):"square"==i.shape?e=(e=Math.sin(i.frequency*(2*Math.PI*(l/a))))<=0?0:1:"triangle"==i.shape?e=2/Math.PI*Math.asin(Math.sin(i.frequency*Math.PI*2*l/a)):"sawtooth"==i.shape||"saw"==i.shape?e=-2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*l/a)):"zap"==i.shape&&(e=2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*l/a))),i.amplitude=e*i.gain+i.offset,l++)}),this.pause=function(e){i.paused=e},this.dispose=function(){Ao.Ticker.remove(this.ticker)}},this.oscillator=function(e,t,o,n){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(J.Oscillator,arguments))}},Ao.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],Ao.Synth.major=["C","D","E","F","G","A","B","C4"],Ao.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],Ao.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],Ao.Synth.setShape=function(e,t){if(!zot(e)){var o;if(zot(t)&&(t="sine"),"saw"==t&&(t="sawtooth"),"number"==typeof t)t=(t=Ao.Synth.shapes[t])||"sine";else if(t.real&&t.imag)o=e.context.createPeriodicWave(new Float32Array(t.real),new Float32Array(t.imag));else if(t.constructor==PeriodicWave)o=t;else if("string"==typeof t)if(Ao.Synth.shapes.indexOf(t)<0&&(t="sine"),"noise"==t){for(var n=new Float32Array(4096),r=new Float32Array(4096),i=1;i<4096;i+=2)r[i]=Ao.shuffle([0,.5,1])[0];o=e.context.createPeriodicWave(n,r)}else"tan"==t&&(t="sawtooth");else t="sine";o?(e.setPeriodicWave(o),t="custom"):e.type=t}},Ao.Synth.getNote=function(e,t){return zot(t)&&(t=0),e*Math.pow(2,t/12)},Ao.Synth.note=function(e){if("string"!=typeof e)return"number"!=typeof e&&(e=220),e;var t=e.substr(0,1).toUpperCase(),o=!0===(o=Ao.loop(e,function(e){if(!isNaN(e))return Number(e)}))||isNaN(o)?3:o,n=Ao.Synth.notes.indexOf(t);n<0&&(n=9);t=e.match(/b/g),e=e.match(/#/g),t=t?t.length:0,t=12*(o-3)+n+(e=e?e.length:0)-t;return Ao.Synth.getNote(Ao.Synth.getNote(220,-9),t)},Ao.Synth.wave=function(e,t){if(WW.AudioContext||WW.webkitAudioContext){var o=new(WW.AudioContext||WW.webkitAudioContext);if(e.real)t=e.imag,e=e.real;else if(zot(t)&&zon)return void zogy("Synth.wave() - pass in asset('wave.json') or real and imag properties");return e.constructor!==Float32Array&&(e=new Float32Array(e)),t.constructor!==Float32Array&&(t=new Float32Array(t)),o.createPeriodicWave(e,t)}},Ao.Synth.drawWave=function(e,t,o,n,r,i,l,a,s){if(c=zob(Ao.Synth.drawWave,arguments,"shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingVertical"))return c;e=zik(e),zot(o)&&(o=2),zot(t)&&(t=Ao.darker),zot(a)&&(a=8),zot(s)&&(s=a);var c=a,a=s,s=new Ao.Container(45,45);s.mouseChildren=!1,zot(n)||(s.backing=new Ao.Rectangle(45,45,n,r,i,l).addTo(s)),s.shape=new Ao.Shape(45,45).addTo(s).s(t).ss(o);o=45-2*c;return"square"==e?s.shape.mt(c,22.5).lt(c,a+3).lt(22.5,a+3).lt(22.5,45-a-3).lt(45-c,45-a-3).lt(45-c,22.5):"triangle"==e?s.shape.mt(c,22.5).lt(c+o/4,a+3).lt(c+3*o/4,45-a-3).lt(45-c,22.5):"sawtooth"==e||"saw"==e?s.shape.mt(c,22.5).lt(22.5,a+2).lt(22.5,45-a-2).lt(45-c,22.5):"zap"==e?s.shape.mt(c,22.5).lt(22.5,45-a-2).lt(22.5,a+2).lt(45-c,22.5):s.shape.mt(c,22.5).bt(22.5,-15,22.5,60,45-c,22.5),s.type=e,s},Ao.VR=function(o,n,r,i,l,e,a,t,s,c,u,d){var h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W,M,O,j,L;if(I=zob(Ao.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return I;function _(){z.addTo(f,null,!1).setMask(f.getChildAt(0)).pos({y:(d.height-z.height)/2,reg:!0}),y.addTo(m,null,!1).setMask(m.getChildAt(0)).pos({y:(d.height-z.height)/2,reg:!0})}function D(e,o,n,r){((e.vrMatch=o).vrMatch=e).cacheCanvas&&o.cache(),e.dep&&!zot(e.depth)&&(v.push(e),w.push(o),zot(n)||n.push(e),zot(r)||r.push(o),o.dep(e.depth)),Ao.loop(e,function(e,t){D(e,o.getChildAt(t),n,r)})}function Y(e,t){Ao.loop(e,function(e){e.vrChannel=t,e.vrStartX=e.x,0!=n&&0!=r&&(e.vrAngle=n,e.vrDistance=r),0!=i&&0!=r&&(e.vrParallax=i/100,(e.vrParallaxDistance=0)!=n&&(e.vrParallaxDamp=new Ao.Damp(0,a))),e.dep(e.depth)})}function X(e){h.currentAngle=e;var t,e=-h.currentAngle*r/n;h.contentLeft.x=e,h.contentRight.x=e,Math.round(h.currentAngle)<=-n/2&&!x?((t=new createjs.Event("boundaryout")).boundary="left",x=!0,h.dispatchEvent(t)):Math.round(h.currentAngle)>=n/2&&!k?((t=new createjs.Event("boundaryout")).boundary="right",k=!0,h.dispatchEvent(t)):Math.round(h.currentAngle)>-n/2&&Math.round(h.currentAngle)<n/2&&(t=new createjs.Event("boundaryin"),x?(t.boundary="left",h.dispatchEvent(t),x=!1):k&&(t.boundary="right",h.dispatchEvent(t),k=!1))}function R(e){var t=e.parent.localToLocal(e.vrStartX,0,d),t=e.vrParallaxDamp.convert("left"==e.vrChannel?h.contentLeft.x+t.x-g/4:h.contentRight.x+t.x-g/2-g/4);e.depth<=0&&!s&&(t=0),e.vrParallaxDistance=Math.max(-r/n*l/2,Math.min(r/n*l/2,t)),e.dep(e.depth)}function H(e,t){e.vrParallaxDistance=e.depth<=0&&!s?0:t,e.dep(e.depth)}function F(t){0!=n&&0!=r?(Ao.loop(v,R),Ao.loop(w,R)):(Ao.loop(v,function(e){H(e,t)}),Ao.loop(w,function(e){H(e,t)}))}function N(){var e=L.convert(M.currentValue);z.regX=z.startRegX+e,y.regX=y.startRegX-e}z_d("69.98"),this.type="VR",WW.zdf?(A=WW.zdf,!zot(d)&&d.getBounds&&d.getBounds().width||(d=A.stage),zot(n)&&(n=0),zot(r)&&(r=100),zot(e)&&(e=.5),zot(i)&&(i=0),zot(l)&&(l=60),zot(a)&&(a=.1),zot(t)&&(t=0),zot(s)&&(s=!1),zot(c)&&(c=!0),zot(u)&&(u=!0),this.angle=n,this.currentAngle=t,Ao.mobile()&&(u=!1),h=this,g=d.width,p=d.height,h.zimContainer_constructor(),f=h.left=new Ao.Container(g/2,p,null,null,!1),I=new Ao.Rectangle(g/2,p,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1),f.addChild(I),m=h.right=f.clone(),h.addChild(f,m),m.x=g/2,z=h.contentLeft=h.content=o,y=h.contentRight=o.clone(),0!=t?b=setTimeout(_,100):_(),v=[],w=[],D(z,y),Y(v,"left"),Y(w,"right"),0!=n&&0!=r&&((C=new Ao.Damp(180+t,e)).immediate(180+t),k=x=!1,A.on("deviceorientation",function(e){X(C.convert((180<e.rotation.z?-180:180)+e.rotation.z+t)-180)}),Ao.Ticker.always()),0!=i&&0!=r&&((T=new Ao.ProportionDamp(180-l/2,180+l/2,-l/2,l/2,a)).immediate(180),A.on("deviceorientation",function(e){var t=0;0==n&&0!=i&&0!=r&&(t=T.convert((180<e.rotation.z?-180:180)+e.rotation.z)),F(t)}),Ao.Ticker.always()),!u||0==r||0==n&&0==i||h.added(function(){var e={swipeAngle:0};h.swiper=new Ao.Swiper({swipeOn:h,target:e,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),Ao.Ticker.add(function(){0!=n&&0!=r&&X(e.swipeAngle),0!=i&&0!=r&&F(T.convert(e.swipeAngle+180))})}),A=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,P=A,B=!1,z.startRegX=z.regX,y.startRegX=y.regX,I=(E=this.adjuster=new Ao.Container(800,300,null,null,!1)).backing=new Ao.Rectangle(E.width,E.height,Ao.lighter,null,null,null,null,null,null,!1).center(E).alp(1).sha("rgba(0,0,0,.2)",0,0,30),E.strip=new Ao.Rectangle(E.width,E.height/3,Ao.white,null,null,null,null,null,null,!1).center(E).alp(1),E.label=new Ao.Label({text:"slide to adjust center of left and right",size:28,color:Ao.dark,align:"center",valign:"center"}).center(E).pos({y:50,reg:!0}),u=E.close=new Ao.Rectangle(50,50,Ao.light,null,null,null,null,null,null,!1).addTo(E).mov(E.width-70,26),(I=new Ao.Shape(-40,-40,80,80,null,!1)).graphics.f(Ao.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),I.center(u).sca(.3),u.cursor="pointer",u.on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){h.hideAdjuster(),M.currentValue=(M.max-M.min)/2+P,h.dispatchEvent("closed")}),(S=new Ao.Circle(30,Ao.dark,null,null,null,null,null,null,!1).center(E).pos({x:E.width/4,reg:!0})).shape.alpha=.2,new Ao.Circle(12,Ao.dark,null,null,null,null,null,!1).center(S),(W=new Ao.Circle(30,Ao.dark,null,null,null,null,null,!1).center(E).pos({x:E.width/4*3,reg:!0})).shape.alpha=.2,new Ao.Circle(12,Ao.dark,null,null,null,null,null,null,!1).center(W),(M=E.slider=new Ao.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(E).pos({y:E.height-40,reg:!0})).currentValue=(M.max-M.min)/2+A,O=new Ao.Proportion(M.min,M.max,S.x-E.width/4,S.x+E.width/4,-1),j=new Ao.Proportion(M.min,M.max,W.x-E.width/4,W.x+E.width/4),M.on("change",function(){S.x=O.convert(M.currentValue),W.x=j.convert(M.currentValue)}),new Ao.Label("closer",24,null,Ao.silver).centerReg(E).pos({x:M.x-220,y:M.y,reg:!0}),new Ao.Label("farther",24,null,Ao.silver).centerReg(E).pos({x:M.x+220,y:M.y,reg:!0}),(h.ok=new Ao.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:Ao.blue,rollBackgroundColor:Ao.green,shadowColor:-1,style:!1}).centerReg(E).sca(.8).pos({x:E.width-58,y:M.y,reg:!0})).on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=M.currentValue-(M.max-M.min)/2),N(),h.hideAdjuster(),h.dispatchEvent("saved"),h.dispatchEvent("closed")}),(h.zero=new Ao.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:Ao.yellow,rollBackgroundColor:Ao.green,shadowColor:-1,style:!1}).centerReg(E).sca(.8).pos({x:58,y:M.y,reg:!0})).on((zns?"mousedown"==Ao.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){M.currentValue=(M.max-M.min)/2,S.x=O.convert(M.currentValue),W.x=j.convert(M.currentValue)}),L=new Ao.Proportion(0,30,-d.width/4,d.width/4),N(),this.showAdjuster=function(){if(B)return h;B=!0,S.x=O.convert(M.currentValue),W.x=j.convert(M.currentValue),P=M.currentValue-(M.max-M.min)/2,E.scaleTo(d,100,100).center(this),d.stage.update()},this.hideAdjuster=function(){if(!B)return h;B=!1,E.removeFrom(this),d.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zogy("ZIM VR() - please only register objects already inside content container"),e;var t=e.clone().addTo(e.parent.vrMatch),o=[],n=[];return D(e,t,o,n),Y(o,"left"),Y(n,"right"),e},0!=n&&0!=r&&c&&(h.boundaryRight=new Ao.Container({style:!1}),new Ao.Circle(24,Ao.light,null,null,null,null,null,null,!1).addTo(h.boundaryRight).dep(-2),new Ao.Triangle(16,16,16,Ao.yellow,Ao.grey,null,null,null,-3,null,null,!1).rot(-90).center(h.boundaryRight).dep(-6),h.boundaryRight.center(o).mov(r/2+24),h.boundaryLeft=new Ao.Container({style:!1}),new Ao.Circle(24,Ao.light,null,null,null,null,null,null,!1).addTo(h.boundaryLeft).dep(-2),new Ao.Triangle(16,16,16,Ao.yellow,Ao.grey,null,null,null,-3,null,null,!1).rot(90).center(h.boundaryLeft).dep(-6),h.boundaryLeft.center(o).mov(-r/2-24),h.register(h.boundaryRight),h.register(h.boundaryLeft)),this.remove=function(){return Ao.loop(arguments,function(e,t){o.contains(t)&&(!function t(e){var o=v.indexOf(e);0<=v.indexOf(e)&&(v.splice(o,1),w.splice(o,1)),Ao.loop(e,function(e){t(e)})}(t),t.parent.removeChild(t),t.vrMatch.parent.removeChild(t.vrMatch))}),h},this.resize=function(){g=d.width,p=d.height,f.getChildAt(0).widthOnly=m.getChildAt(0).widthOnly=g/2,f.getChildAt(0).heightOnly=m.getChildAt(0).heightOnly=p,m.x=g/2,f.setBounds(0,0,g/2,p),m.setBounds(0,0,g/2,p),0!=t?(clearTimeout(b),b=setTimeout(_,100)):_(),E.scaleTo(d,100,100).center(this,null,!1)}):zon&&zogy("VR() - please use ZIM Frame")},Ao.extend(Ao.VR,Ao.Container,"clone","zimContainer",!1),Ao.scaX=1,Ao.scaY=1,Ao.Frame=function(h,g,o,r,n,t,i,l,a,s,e,c,p,f,m,z,u,d,y,b,v,w,C,x,k,T,A,P,B,E,I,S,W){var M;if(M=zob(Ao.Frame,arguments,"scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",this))return M;z_d("83"),zon&&zogg("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame",this.startTime=(new Date).getTime();var O,j,K,L,_,J,D,Y,X,R,H,F,N,V,G,q,U,Q,Z,$,ee,te,oe,ne,re,ie,le,ae,se=this;function ce(e){se.leftMouseDown=void 0===e.buttons?1===e.which:1===e.buttons,L&&!se.leftMouseDown&&se.dispatchEvent("mouseupplus"),L=se.leftMouseDown}function ue(){se.scale=E.stage.scaleX;var e=X.getBoundingClientRect();se.x=e.x+Ao.scrollX(),se.y=e.y+Ao.scrollY(),Ao.scaX=createjs.stageTransformable?1:E.stage.scaleX,Ao.scaY=createjs.stageTransformable?1:E.stage.scaleY}function de(){if(E){var e=J.getBounds();return D=e.width,Y=e.height,void se.dispatchEvent("resize")}oe=Date.now()+d*("s"==j?1e3:1),te?ee||(ee=!0,$=Ao.Ticker.update,Ao.tickerFrame||(Ao.Ticker.update=!1,Ao.tickerFrame=se),ze(),be(),clearInterval(se.frameTime),se.frameTime=setInterval(function(){return Date.now()>oe?(clearInterval(se.frameTime),ee=!1,void(se==Ao.tickerFrame&&(Ao.Ticker.update=$))):(ze(),void be())},50)):(ze(),be(),clearInterval(se.frameTime),se.frameTime=setInterval(function(){Date.now()>oe?clearInterval(se.frameTime):(ze(),be())},d*("s"==j?1e3:1)<50?d*("s"==j?1e3:1)+5:50))}function he(){if(!Z){if(Z=!0,-1==_.indexOf(h)){if(zot(zid(G=h)))return void zogy("Frame - scaling: HTML tag with id="+h+" must exist");q=se.tag=zid(G),se.scaling=h=zot(g)||zot(o)?"tag":"inline",0==z.indexOf("myCanvas")&&(z=G+"Canvas"),"canvas"==q.tagName.toLowerCase()&&(ne=!0,z=G)}else se.scaling=h;var e;se.canvasID=z,zot(g)&&(g=500),zot(o)&&(o=500),D=g,Y=o,zot(n)||(se.outerColor=n),pe(),me(),O?(p&&setTimeout(function(){WW.scrollTo(0,0)},50),setTimeout(t,100),d*("s"==j?1e3:1)!=100&&setTimeout(t,d*("s"==j?1e3:1))):(U=!0,ge()),zot(i)?(Q=!0,ge()):zot(e=i.constructor!={}.constructor||i.audioSprite||i.id||i.data||i.src?se.loadAssets({assets:i,path:l,progress:a,queueOnly:!0}):se.loadAssets(Ao.merge(i,{progress:a,queueOnly:!0})))||!e.on?(zon&&zogy("Frame() - load failed"),Q=!0,ge()):e.on("complete",function(){Q=!0,ge()})}function t(){ze(),U=!0,ge(),be(),J&&J.update()}}function ge(){var e;U&&Q&&!V&&(1<=J.width&&1<=J.height?(!zot(a)&&a.show&&a.hide(),WW.S||(WW.S=J),WW.W||(WW.W=J.width),WW.H||(WW.H=J.height),t&&"function"==typeof t&&t(se,J,J.width,J.height),s&&"function"==typeof s&&(e=0,se.updateID=Ao.Ticker.add(function(){s(++e,se,J,J.width,J.height)}),se.pauseTicker=function(e){zot(e)&&(e=!0),e?Ao.Ticker.remove(se.updateID):Ao.Ticker.add(se.updateID)}),se.dispatchEvent("ready"),V=!0,be(),J.update()):setTimeout(function(){ze(),ge()},50))}function pe(){var e;ne?e=se.canvas=se.tag:(e=se.canvas=document.createElement("canvas")).setAttribute("id",z),e.setAttribute("tabindex",0);var t=Ao.windowWidth(),o=Ao.windowHeight(),n=WW.devicePixelRatio||1;"full"==h||"tag"==h?A?(se.scale=n,e.setAttribute("width",t*se.scale),e.setAttribute("height",o*se.scale),"full"==h&&(e.style.width=t+"px",e.style.height=o+"px")):(e.setAttribute("width",t),e.setAttribute("height",o)):(e.setAttribute("width",D),e.setAttribute("height",Y));o=zid(z+"Alternative");o&&e.appendChild(o),ne||("tag"==h||"inline"==h?q:document.body).appendChild(e),zot(r)||(e.style.backgroundColor=r),"full"==h||"fit"==h||"fill"==h?(e.style.position="absolute",x||(document.body.style.overflow="hidden")):"static"==getComputedStyle(e.parentElement).position&&(e.parentElement.style.position="relative")}function fe(){B&&(se.mouseX=0,se.mouseY=0,se.mousedownEvent=J.on("stagemousedown",function(e){se.mouseX=e.stageX/Ao.scaX,se.mouseY=e.stageY/Ao.scaY}),se.mousemoveEvent=J.on("stagemousemove",function(e){se.mouseX=e.stageX/Ao.scaX,se.mouseY=e.stageY/Ao.scaY})),WW.removeEventListener("mousedown",ce,!0),WW.removeEventListener("mousemove",ce,!0),WW.removeEventListener("mouseup",ce),WW.addEventListener("mousedown",ce,!0),WW.addEventListener("mousemove",ce,!0),WW.addEventListener("mouseup",ce)}function me(){ze(),-1==_.indexOf(h)||x||(se.zil=zil()),se.mousedownEvent&&J&&J.off("stagemousedown",se.mousedownEvent),se.mousemoveEvent&&J&&J.off("stagemousemove",se.mousemoveEvent),(J=b?new Ao.StageGL(z,v):new Ao.Stage(z)).frame=se,J.mouseMoveOutside=P,!zot(r)&&b&&J.setClearColor(Ao.convertColor(r)),J.setBounds(0,0,D,Y),J.width=D,J.height=Y,A&&ze(),e&&J.enableMouseOver(u),c&&(W?createjs.Touch.enable(J,!0,x):createjs.Touch.enable(J,!1,x)),x&&(J.preventSelection=!1),w&&(J.nextStage=w.stage),C&&(J.nextStage=C),fe()}function ze(){if(se){var e,t=zid(z),o=Ao.windowWidth(),n=Ao.windowHeight();if((F=se.orientation=n<o?"horizontal":"vertical")!=N&&(N=F,se.dispatchEvent("orientation")),O&&p&&setTimeout(function(){WW.scrollTo(0,0)},100),t){if("fit"==h)se.scale=D/Y<=o/n?n/Y:o/D;else if("fill"==h)se.scale=D/Y<=o/n?o/D:n/Y;else{if("full"==h)return t.style.left=t.style.top="0px",t.width=D=o,t.height=Y=n,J&&(J.setBounds(0,0,D,Y),A?(d=WW.devicePixelRatio||1,t.width=o*d,t.height=n*d,t.style.width=o+"px",t.style.height=n+"px",se.scale=d,J.scaleX=J.scaleY=se.scale):J.scaleX=J.scaleY=1,J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0,J.width=D,J.height=Y,b&&J.updateViewport(D/J.scaleX,Y/J.scaleY),Ao.scaX=createjs.stageTransformable?1:J.scaleX,Ao.scaY=createjs.stageTransformable?1:J.scaleY),x||(Ao.scrollX(0),Ao.scrollY(0)),void ye();if("tag"==h)return D=""==q.style.width?q.getAttribute("width")||q.offsetWidth:q.style.width,Y=""==q.style.height?q.getAttribute("height")||q.offsetHeight:q.style.height,A?(t.width=D*se.scale,t.height=Y*se.scale,t.style.width=D+"px",t.style.height=Y+"px",J&&(J.scaleX=J.scaleY=se.scale)):(J&&(J.scaleX=J.scaleY=1),t.width=D,t.height=Y),J&&(J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0,J.setBounds(0,0,D,Y),J.width=D,J.height=Y,b&&J.updateViewport(D/J.scaleX,Y/J.scaleY),Ao.scaX=createjs.stageTransformable?1:J.scaleX,Ao.scaY=createjs.stageTransformable?1:J.scaleY),q.style.overflow="hidden",t.style.left=t.style.top="0px",e=t.getBoundingClientRect(),se.x=e.x+Ao.scrollX(),se.y=e.y+Ao.scrollY(),void ye();if("inline"==h){if(A){if(document.styleSheets[0])try{for(var r=document.styleSheets[0].rules||document.styleSheets[0].cssRules,i=0;i<r.length;i++){var l,a,s=r[i];s.selectorText!="#"+z||(s=s.style.getPropertyValue("width"))&&(l=zum(t.style.width),a=zum(t.style.height),t.style.width=s)}}catch(e){}var c=WW.getComputedStyle(t),u=zum(c.getPropertyValue("width"));l&&(t.style.height=a*u/l+"px",c=WW.getComputedStyle(t));var c=zum(c.getPropertyValue("height")),d=WW.devicePixelRatio||1;se.scale=u/g*d,t.width=D*se.scale,t.height=Y*se.scale,t.style.width=u+"px",t.style.height=c+"px",J&&(J.scaleX=J.scaleY=se.scale)}else J&&(J.scaleX=J.scaleY=1);return J&&(J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0,J.setBounds(0,0,D,Y),J.width=D,J.height=Y,b&&J.updateViewport(D/J.scaleX,Y/J.scaleY),Ao.scaX=createjs.stageTransformable?1:J.scaleX,Ao.scaY=createjs.stageTransformable?1:J.scaleY),t.style.left=t.style.top="0px",e=t.getBoundingClientRect(),se.x=e.x+Ao.scrollX(),se.y=e.y+Ao.scrollY(),void ye()}}c=Y*se.scale,e=D*se.scale,A?(d=WW.devicePixelRatio||1,se.scale*=d,t.width=D*se.scale,t.height=Y*se.scale,t.style.width=D*se.scale/d+"px",t.style.height=Y*se.scale/d+"px",J&&(J.scaleX=J.scaleY=se.scale)):(J&&(J.scaleX=J.scaleY=1),t.style.width=e+"px",t.style.height=c+"px"),J&&(J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0),se.x="left"==f?0:"right"==f?o-e:(o-e)/2,se.y="top"==m?0:"bottom"==m?n-c:(n-c)/2,t.style.left=se.x+"px",t.style.top=se.y+"px",x||(Ao.scrollX(0),Ao.scrollY(0)),ye(),J&&(Ao.scaX=createjs.stageTransformable?1:J.scaleX,Ao.scaY=createjs.stageTransformable?1:J.scaleY)}}}function ye(){var e;"fill"==h?(e=(zum(se.canvas.style.width)-Ao.windowWidth())/2,"left"==f?(se.visibleLeft=0,se.visibleRight=Ao.windowWidth()/(Ao.windowWidth()+2*e)*D):"right"==f?(se.visibleLeft=2*e/(Ao.windowWidth()+2*e)*D,se.visibleRight=D):(se.visibleLeft=e/(Ao.windowWidth()+2*e)*D,se.visibleRight=(Ao.windowWidth()+e)/(Ao.windowWidth()+2*e)*D),e=(zum(se.canvas.style.height)-Ao.windowHeight())/2,"top"==m?(se.visibleTop=0,se.visibleBottom=Ao.windowHeight()/(Ao.windowHeight()+2*e)*Y):"bottom"==m?(se.visibleTop=2*e/(Ao.windowHeight()+2*e)*Y,se.visibleBottom=Y):(se.visibleTop=e/(Ao.windowHeight()+2*e)*Y,se.visibleBottom=(Ao.windowHeight()+e)/(Ao.windowHeight()+2*e)*Y)):(se.visibleLeft=se.visibleTop=0,se.visibleRight=D,se.visibleBottom=Y)}function be(){var e;V&&se&&(se==WW.zdf&&(WW.W=se.width,WW.H=se.height),se.dispatchEvent("resize"),e=(new Date).getTime(),setTimeout(function(){80<(new Date).getTime()-e&&(ze(),se==WW.zdf&&(WW.W=se.width,WW.H=se.height),setTimeout(function(){se.dispatchEvent("resize"),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!J||"full"!=h&&"tag"!=h||J.update()},100))},100),Ao.OPTIMIZE||!zns&&WW.OPTIMIZE||!J||"full"!=h&&"tag"!=h||J.update())}function ve(e){se.dispatchEvent(e)}function we(e){e.remove=se.eventRemove,se.altKey=e.altKey,se.ctrlKey=e.ctrlKey,se.metaKey=e.metaKey,se.shiftKey=e.shiftKey,se.dispatchEvent(e)}function Ce(e){se.altKey=e.altKey,se.ctrlKey=e.ctrlKey,se.metaKey=e.metaKey,se.shiftKey=e.shiftKey,e.remove=se.eventRemove,se.dispatchEvent(e)}function xe(e){se.dispatchEvent(e)}function ke(e){e.remove=se.eventRemove,se.dispatchEvent(e)}function Te(e){e.remove=se.eventRemove;var t=360-e.alpha;135<Math.abs(t-le)&&Math.abs(t-le)<225&&(ae=0==ae?180:0),le=t,e.rotation={x:e.beta,y:e.gamma,z:(t+ae)%360},se.dispatchEvent(e)}WW.zdf&&WW.zdf.type||(WW.zimDefaultFrame=WW.zdf=WW.F=this),WW.M=Ao.mobile(),zot(y)&&(y=!0),!WW.HTMLCanvasElement&&y?setTimeout(function(){se.dispatchEvent("failed")},100):(O=Ao.mobile(),zot(h)&&(h="full"),"outside"==h&&(h="fill"),zot(l)||(WW.PATH=l),zot(e)&&(e=!O),zot(c)&&(c=!0),zot(p)&&(p=!1),zot(f)&&(f="center"),zot(m)&&(m="center"),zot(z)&&(z=WW.zdf!=this?"myCanvas"+Ao.makeID(null,5):"myCanvas"),j=Po(d),zot(u)&&(u=20),zot(d)&&(d=O?"s"==j?1:1e3:"s"==j?.03:30),zot(b)&&(b=!1),zot(x)&&(x=!1),zot(k)&&(k="circles"),this.loadFailObj=k,zot(T)&&(T=!1),zot(A)&&(A=!0),this.retina=A,zot(P)&&(P=!1),zot(B)&&(B=!0),zot(E)&&(E=!1),zot(I)&&(I=10),zot(W)&&(W=!1),W&&(c=!0),K=I,se.maxNum=S,b&&(A=!1),this.retina=A,L=!1,this.leftMouseDown=!1,_=["fit","fill","full"],E?(this.shim=!0,X=(E.stage.frame=this).canvas=E.canvas,this.scale=E.stage.scaleX,setTimeout(function(){ue(),H=function(){ue(),R&&clearTimeout(R),R=setTimeout(ue,50)},WW.addEventListener("resize",H)},20),J=E.stage,D=J.getBounds()?J.getBounds().width:X.width/J.scaleX,Y=J.getBounds()?J.getBounds().height:X.height/J.scaleY,J.getBounds()||J.setBounds(0,0,D,Y),r=X.style.backgroundColor,fe(),ue()):(this.scale=1,this.x=0,this.y=0),Z=Q=U=V=!1,E||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){he()},200):document.addEventListener("DOMContentLoaded",he)),ee=!1,te="full"==h&&"undefined"!=typeof InstallTrigger,this.swapRotation=!1,O&&!WW.parent&&(S=isNaN(WW.innerWidth)?WW.clientWidth:WW.innerWidth,ie=isNaN(WW.innerHeight)?WW.clientHeight:WW.innerHeight,this.swapRotation=(0==WW.orientation||180==WW.orientation)&&ie<S||90==Math.abs(WW.orientation)&&S<ie),WW.addEventListener("resize",de),se.loadAssetsCount=0,zot(Ao.assets)&&(Ao.assets={},Ao.assetIDs={}),ne=!1,this.update=function(){ze(),se.dispatchEvent("update")},this.loadAssets=function(e,a,t,o,n,r,i,l,s,c,u,d){if(zot(e))return p();if(zot(e.src)){var h;if(h=zob(se.loadAssets,arguments,"assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum"))return h}zot(a)||(WW.PATH=a);var g=Po(n||null);if(!zot(t)&&"ProgressBar"==t.type&&zot(o)&&(o=!0),Array.isArray(e)||(e=[e]),0==e.length)return p();function p(){var e=new Ao.Queue;return e.isLoading=!1,e.loadAssetsCount=0,setTimeout(function(){e.dispatchEvent("complete"),se.dispatchEvent("complete")},10),e}zot(n)&&(n=0),zot(r)&&(r="s"==g?8:8e3),zot(i)&&(i=!1),zot(l)&&(l="anonymous"),zot(c)&&(c=!1),zot(u)&&(u=K),zot(d)&&(d=se.maxNum);var f,m,z,y,b,v,w,C,x,k,T=!1,A=[],P=/\.([^.]+)$/i,B=[],E=[],I=[],S=0,W=!0;for(N=0;N<e.length;N++){if((x=e[N]).assets){var M=[];for(e.splice(N,1),Array.isArray(x.assets)||(x.assets=[x.assets]),_=0;_<x.assets.length;_++)Ao.assetIDs[x.assets[_]]?M.push({id:x.path+x.assets[_],src:x.path+x.assets[_],path:null,loadTimeout:x.loadTimeout,maxNum:x.maxNum,noCORSonImage:x.noCORSonImage}):M.push({id:x.assets[_],src:x.assets[_],path:x.path,loadTimeout:x.loadTimeout,maxNum:x.maxNum,noCORSonImage:x.noCORSonImage});for(var O=M.length-1;0<=O;O--)e.splice(N,0,M[O]);x=M[0]}if(x.constructor=={}.constructor)if(x.audioSprite){D(x=(m=Ao.copy(x)).src);for(var j,L=[],_=0;_<m.audioSprite.length;_++)j=m.audioSprite[_],L.push({id:j[0],startTime:Math.round(1e3*j[1]),duration:Math.round(1e3*(j[2]-j[1]))});delete m.audioSprite,m.data={audioSprite:L},A.push(m)}else x.data&&x.data.audioSprite?(D(x=(m=Ao.copy(x)).src),A.push(m)):x.id?(x.path&&(x.path.match(/http/i)?x.src=x.path+x.src:x.path.match(/^\//)?(y=(b=(y=WW.location.href).match(/(.*?)([^/])\/[^/]/))[1]+b[2],x.src=y+x.path+x.src):(z=WW.location.pathname,b=((y=WW.location.href).split(z)[0]+z).match(/(.*)\//),x.src=b[1]+"/"+x.path+x.src),delete x.path),x.noCORSonImage?(C=new Image,I.push(C),C.src=x.src,C.id=x.id,C.onload=function(e){var t=e.currentTarget,e=Ao.assets[t.id]=new Ao.Bitmap(t).expand(0);v=new createjs.Event("assetload"),e&&"string"!=typeof e&&"number"!=typeof e&&(e.file=t.id,e.src=t.src),v.asset=e,X.dispatchEvent(v),c||((v=new createjs.Event("assetload")).asset=e,se.dispatchEvent(v)),X.loadAssetsCount--,0==X.loadAssetsCount&&Z()}):(Ao.assetIDs[x.id]=x.src,zot(w=x.maxNum)&&(w=d),k=x.type,C=zot(x.loadTimeout)?r:x.loadTimeout,D(x=x.src),w={src:x,loadTimeout:C*("s"==g?1e3:1),data:w,type:k},zot(s)||(w.type=s),A.push(w))):(x.src.match(/fonts\.googleapis\.com/)?E:B).push(x);else D(x),w={src:x,loadTimeout:r*("s"==g?1e3:1),data:d},zot(s)||(w.type=s),A.push(w);T&&W&&((k=document.createElement("audio")).setAttribute("src",(zot(a)||x.match(/^http:\/\/|https:\/\//i)?"":a)+x),document.body.appendChild(k),W=!1)}function D(e){S++,e.split&&(e=e.split("?"),(f=e[0].match(P))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(f[1])&&(T=!0))}se.loadAssetsCount++,se.isLoading=!0;var Y,X=new Ao.Queue;if(X.isLoading=!0,X.loadAssetsCount=0,!zot(t)&&t.show&&(t.zimActiveLoader=X,t.show()),0<B.length){for(var R,H,F=[],N=0;N<B.length;N++)R={src:"url("+(!(H=B[N]).src.match(/^http/i)&&a||"")+H.src+")"+(H.type?" format('"+H.type+"')":""),family:H.font},H.weight&&(R.weight=H.weight),H.style&&(R.style=H.style),F.push(R);(Y=new createjs.FontLoader({src:F},!0)).on("complete",V),Y.on("error",V),Y.load(),X.loadAssetsCount++}if(0<E.length)for(N=0;N<E.length;N++)R={src:(H=E[N]).src,type:"fontcss"},X.loadAssetsCount++,(Y=new createjs.FontLoader(R,!0)).on("complete",V),Y.on("error",V),Y.load();function V(){X.loadAssetsCount--,0==X.loadAssetsCount&&Z()}if(0<I.length)for(N=0;N<I.length;N++)X.loadAssetsCount++;function G(e,t){X.loadAssetsCount--;var o=t.item,e=Ao.assets[o.id]=e;e.src=o.src,e.file=o.id,e.item=o,e.svg=t.svg;t=new createjs.Event("assetload");t.item=o,(t.asset=e).type="SVG",X.dispatchEvent(t),c||((t=new createjs.Event("assetload")).item=o,t.asset=e,se.dispatchEvent(t)),0==X.loadAssetsCount&&Z()}var q=Date.now(),U=new createjs.Event("complete");if(0<S){X.loadAssetsCount++;var Q=X.preload=se.preload=new createjs.LoadQueue(o,a,l);1!=u&&Q.setMaxConnections(u),T&&Q.installPlugin(createjs.Sound),Q.on("progress",function(e){X.dispatchEvent(e),c||se.dispatchEvent(e)}),Q.on("error",function(e){X.dispatchEvent(e),c||se.dispatchEvent(e)}),Q.on("fileload",function(o){if(o.result&&("IMG"!=o.result.nodeName&&"SVG"!=o.result.nodeName||o.rawResult)){var n,e=o.item,t=o.item.type,r=e.id.match(P);if(t&&"sound"==t){var i=[];if(e.data&&e.data.audioSprite)for(var l=0;l<e.data.audioSprite.length;l++)i.push(e.data.audioSprite[l].id);else i.push(e.id);for(l=0;l<i.length;l++)!function(){var c=i[l],e=o.item.src,t=o.item;n=Ao.assets[c]={type:"sound",path:a,id:c,file:c,src:e,item:t,dispose:function(){delete Ao.assets[c],n=null},play:function(e,t,o,n,r,i,l){var a;if(a=zob(Ao.assets[c].play,arguments,"volume, loop, loopCount, pan, offset, delay, interrupt"))return a;l={volume:e,loop:t,loopCount:o,pan:n,offset:r,delay:i,interrupt:l};"s"==Po(l.offset,null,30)&&(l.offset&&(l.offset*=1e3),l.delay&&(l.delay*=1e3)),!0===l.loop&&(l.loop=-1),l.loopCount&&(l.loop=l.loopCount,delete l.loopCount);var s=createjs.Sound.play(c,l);return s.getStage=function(){return J},s.dispose=function(){s.destroy()},s}}}()}else if("image"==t)o.result.width&&(n=Ao.assets[e.id]=new Ao.Bitmap(o.result,o.result.width,o.result.height),e.avoidCORS&&n.expand(0));else{if("svg"==t)return X.loadAssetsCount++,void Ao.svgToBitmap(o.result,G,null,null,{svg:o.result,item:e,type:t,ext:r});n=Ao.assets[e.id]=o.result}n&&"string"!=typeof n&&"number"!=typeof n&&(n.file=o.item.id,n.src=o.item.src,n.item=o.item),(r=new createjs.Event("assetload")).item=e,r.asset=n,X.dispatchEvent(r),c||((r=new createjs.Event("assetload")).item=e,r.asset=n,se.dispatchEvent(r))}else{r=new createjs.Event("error");(r=new createjs.Event("error")).item=o.item,X.dispatchEvent(r),(r=new createjs.Event("error")).item=o.item,se.dispatchEvent(r)}}),se.preloadEvent=Q.on("complete",function(e){U=e,X.loadAssetsCount--,0==X.loadAssetsCount&&Z()});try{Q.loadManifest(A)}catch(e){}}function Z(){var e=Date.now();n=Math.max(0,n-(e-q)),setTimeout(function(){se.loadAssetsCount--,se.loadAssetsCount<=0&&(se.isLoading=!1),X.isLoading=!1,X.dispatchEvent(U),c||se.dispatchEvent(U)},n*("s"==g?1e3:1))}return X},this.ac=function(e,t,o){o?(o.commands||(o.commands=[]),o.commands.push([e,t,o])):(t[0].commands||(t[0].commands=[]),t[0].commands.push([e,t]))},Ao.asset=this.asset=function(n,e,t,o,r){if(!zot(n)){n=zik(n);var i=Ao.assetIDs[n];if(i&&(n=i),Ao.assets[n]&&(!Ao.assets[n].type||Ao.assets[n].type&&"AC"!=Ao.assets[n].type.substr(0,2)))return Ao.assets[n];if(null!=WW.PATH&&(Ao.PATH=WW.PATH),r){r="circles"==se.loadFailObj?se.makeCircles(14):se.loadFailObj;return r&&(r.type="EmptyAsset",r.id=n,r.play=function(){if(zon)return zogy("Frame - asset("+n+") not found"),{}}),r}var l=new Ao.Container(e,t);(Ao.assets[n]=l).type=e&&t?"ACWD":"AC";t=se.loadAssets({assets:n,path:1==n.split("/").length?Ao.PATH:null,queueOnly:!0,maxNum:o}),o=n.split(".");return 0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(o[o.length-1])&&(l.play=function(){return l.playParams=arguments,l.proxy=new createjs.EventDispatcher,Object.defineProperty(l.proxy,"volume",{get:function(){return l.sound?l.sound.volume:null},set:function(e){l.volume=e,l.sound&&(l.sound.volume=e)}}),Object.defineProperty(l.proxy,"pan",{get:function(){return l.sound?l.sound.pan:null},set:function(e){l.pan=e,l.sound&&(l.sound.pan=e)}}),l.proxy}),t.on("complete",function(){n.id?n=n.id:n.src&&(n=n.src);var e,t=se.asset(n,null,null,null,!0),o=n.split(".");if(0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(o[o.length-1]))l.play=t.play,l.type="Sound",l.src=t.src,l.item=t.item,l.playParams&&(l.sound=l.play.apply(null,l.playParams),null!=l.volume&&(l.sound.volume=l.volume),null!=l.pan&&(l.sound.pan=l.pan),l.sound.on("complete",function(){l.proxy.dispatchEvent("complete")}));else if("Bitmap"==t.type||"Image"==t.type||"Pic"==t.type){if("Bitmap"==t.type?(t.addTo(l),l.bitmap=t,l.image=t.image,l.id=t.id,l.item=t.item):(l.bitmap=t.getChildAt(0).clone(),l.bitmap.addTo(l),l.image=l.bitmap.image,l.id=l.bitmap.id,l.item=l.bitmap.item),l.mouseChildren=!1,l.type="Image",l.commands)for(e=0;e<l.commands.length;e++)(l.commands[e][2]?l:Ao)[l.commands[e][0]].apply(l,l.commands[e][1]);l.commands=null,l.stage&&l.stage.update()}else if("EmptyAsset"==t.type){if(t.addTo(l),l.mouseChildren=!1,l.type="EmptyAsset",l.commands)for(e=0;e<l.commands.length;e++)(l.commands[e][2]?l:Ao)[l.commands[e][0]].apply(l,l.commands[e][1]);l.commands=null,l.stage&&l.stage.update()}else if("SVG"==t.type){if(t.addTo(l),l.mouseChildren=!1,l.type="SVG",l.bitmap=t,l.svg=t.svg,l.commands)for(e=0;e<l.commands.length;e++)(l.commands[e][2]?l:Ao)[l.commands[e][0]].apply(l,l.commands[e][1]);l.commands=null,l.stage&&l.stage.update()}(Ao.assets[n]=l).dispatchEvent("assetLoad"),l.dispatchEvent("complete")}),t.on("error",function(e){var t=new createjs.Event("error");t.id=e.id,t.item=e.item,l.dispatchEvent(t)}),l}},Ao.asset.getIDs=function(){var e,t=[];for(e in Ao.assetIDs)t.push(e);return t},Ao.image=function(e,t,o,n,r){return e.match(/^htt/i)&&(e="https://cors.zimjs.com/"+e),Ao.asset(e,t,o,n,r)},Ao.zimObjectIDs={},Ao.object=this.object=function(e){return Ao.zimObjectIDs[e]},Ao.object.getNames=function(){var e,t=[];for(e in Ao.zimObjectIDs)t.push(e);return t},WW.zns||(WW.asset=this.asset,WW.image=Ao.image,WW.object=this.object),this.setDefault=function(){return WW.zimDefaultFrame=WW.zdf=WW.F=se,WW.S=J,WW.W=J.width,WW.H=J.height,se},Object.defineProperty(se,"isDefault",{get:function(){return WW.zdf==se},set:function(){zogy("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(se,"stage",{get:function(){return J},set:function(){zogy("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(se,"width",{get:function(){return D},set:function(){zogy("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(se,"height",{get:function(){return Y},set:function(){zogy("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(e){zot(r=e)?zid(z).style.backgroundColor="default":!zot(zid(z).style.backgroundColor=r)&&b&&J.setClearColor(Ao.convertColor(r))}}),Object.defineProperty(this,"outerColor",{get:function(){return re},set:function(e){re=e,zet("body").css({backgroundColor:re})}}),Object.defineProperty(se,"allowDefault",{get:function(){return x},set:function(e){e?(J.preventSelection=!1,document.body.style.overflow="visible",se.zil&&(WW.removeEventListener("keydown",se.zil[0]),WW.removeEventListener("wheel",se.zil[1]),WW.removeEventListener("DOMMouseScroll",se.zil[2]),se.zil=null)):(J.preventSelection=!0,J.enableDOMEvents(!0),"full"!=h&&"fit"!=h&&"fill"!=h||(document.body.style.overflow="hidden"),zot(se.zil)&&(se.zil=zil())),x=e,J.__touch&&(J.__touch.preventDefault=!x)}}),WW.addEventListener("contextmenu",ve,!1),ie=new createjs.Event("keydown"),this.eventRemove=ie.remove,WW.addEventListener("keydown",we),WW.addEventListener("keyup",Ce),WW.addEventListener("wheel",xe),T&&WW.DeviceMotionEvent&&WW.addEventListener("devicemotion",ke),T&&WW.DeviceOrientationEvent&&(ae=le=0,WW.addEventListener("deviceorientation",Te)),this.isFullscreen=!!document.fullscreenElement,this.htmlobc=zet("html").css("backgroundColor"),this.fullscreen=function(e){if(zot(e)&&(e=!0),e){if(document.fullscreenElement)return;var t=se.canvas.parent||document.body;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=e},document.addEventListener("fullscreenchange",function(){se.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(zet("html").css("backgroundColor",se.color),se.dispatchEvent("fullscreenenter")):(zet("html").css("backgroundColor",se.htmlobc||"transparent"),se.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(e,t){if("full"!=h){zot(e)&&(e=D),zot(t)&&(t=Y),zid(z)&&zid(z).parentNode.removeChild(zid(z)),D=e,Y=t;for(var o=[],n=0;n<se.stage.numChildren;n++)o.push(se.stage.getChildAt(n));for(pe(),me(),n=0;n<o.length;n++)se.stage.addChild(o[n])}},this.follow=function(n,e,t,r,i,l,a,s,c,u,d,h,g,p){var o;return(o=zob(se.follow,arguments,"obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag"))?o:(se.followObj=null,se.followTicker&&Ao.Ticker.remove(se.followTicker),zot(n)?void 0:(n.dirX=n.dirY=0,(se.followObj=n).followDampX=null,n.followDampY=null,zot(e)&&(e=new Ao.Boundary(0,0,se.stage.width,se.stage.height)),se.followBoundary=e,zot(t)&&(t=.05),zot(r)&&(r=t),zot(i)&&(i=0),zot(l)&&(l=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!1),zot(p)&&(p=!1),n.parent?f():n.on("added",f),n));function f(){var o=n.parent;se.frameBorderLock=g,d&&(se.followDampX=new Ao.Damp(o.x,t),se.offsetDampX=new Ao.Damp(e.x+i+(e.width-i-l)/2,c)),h&&(se.followDampY=new Ao.Damp(o.y,r),se.offsetDampY=new Ao.Damp(e.y+a+(e.height-a-s)/2,u)),se.followTicker=Ao.Ticker.add(function(){var e,t=se.followBoundary;d&&(e=t.x+i+(t.width-i-l)/2,se.followOffsetX=[p?t.x+t.width-i:e,e,p?t.x+i:e],se.followObj&&(o.x=se.followDampX.convert(se.offsetDampX.convert(se.followOffsetX[n.motionController?n.motionController.dirX+1:1])-n.x))),h&&(e=t.y+a+(t.height-a-s)/2,se.followOffsetY=[p?t.y+t.height-s:e,e,p?t.y+a:e],se.followObj&&(o.y=se.followDampY.convert(se.offsetDampY.convert(se.followOffsetY[n.motionController?n.motionController.dirY+1:1])-n.y))),se.frameBorderLock&&(o.x>se.followBoundary.x&&(o.x=se.followBoundary.x),o.y>se.followBoundary.y&&(o.y=se.followBoundary.y),o.x<se.followBoundary.x+se.followBoundary.width-o.width&&(o.x=se.followBoundary.x+se.followBoundary.width-o.width),o.y<se.followBoundary.y+se.followBoundary.height-o.height&&(o.y=se.followBoundary.y+se.followBoundary.height-o.height))})}},Ao.setBlurDetect(),this.dispose=function(){return se.zil&&se.zil.length&&(WW.removeEventListener("keydown",se.zil[0]),WW.removeEventListener("wheel",se.zil[1]),WW.removeEventListener("DOMMouseScroll",se.zil[2])),H&&WW.removeEventListener("resize",H),WW.removeEventListener("resize",de),WW.removeEventListener("contextmenu",ve),WW.removeEventListener("keydown",we),WW.removeEventListener("keyup",Ce),WW.removeEventListener("wheel",xe),WW.removeEventListener("devicemotion",ke),WW.removeEventListener("deviceorientation",Te),WW.removeEventListener("mousedown",ce,!0),WW.removeEventListener("mousemove",ce,!0),WW.removeEventListener("mouseup",ce),x||(document.body.style.overflow="auto"),function e(t){if(t.dispose)t.dispose();else{if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}t=null}(J),zid(z)&&zid(z).parentNode.removeChild(zid(z)),se==Ao.tickerFrame&&(Ao.tickerFrame=null),se===WW.zdf&&(WW.zdf=WW.S=WW.W=WW.H=null),!(se=J=null)},this.makeCircles=function(e,t){zot(e)&&(e=100);var o,n,r=[Ao.orange,Ao.green,Ao.pink,Ao.blue,Ao.brown,Ao.dark];if(t)for((o=new Ao.Container({style:!1})).radius=e,n=0;n<r.length;n++)o.addChild(new Ao.Circle(o.radius/r.length*(r.length-n),r[n],null,null,null,null,null,null,!1));else{var i=(o=new Ao.Shape({style:!1})).graphics;for(o.radius=e,n=0;n<r.length;n++)i.f(r[n]).dc(0,0,o.radius/r.length*(r.length-n));o.setBounds(-o.radius,-o.radius,2*o.radius,2*o.radius)}return o},this.madeWith=function(e,t,o,n,r,i,l){zot(e)&&(e=Ao.dark),zot(t)&&(t="Made with ZIM");var a=new Ao.Container,s=a.icon=se.makeIcon(o,n,r,i,l).sca(.5).alp(.92).hov(1).addTo(a).tap(function(){s.alp(.92),s.stage.update(),zgo("https://zimjs.com","_blank")});return a.label=new Ao.Label(t,16,null,e).sca(.7).pos(0,-19,Ao.CENTER,Ao.BOTTOM,a),a},this.makeIcon=function(e,t,o,n,r){var i=new Ao.Container(-20,-13,102,120).reg(-20,-13);zot(e)&&(e=Ao.light),zot(t)&&(t=Ao.dark),!0===o&&(o=[Ao.silver,Ao.silver,Ao.silver,Ao.silver,Ao.silver]),new Ao.Rectangle(i.width,i.height,t,n,r).loc(-20,-13,i);e=[[o?o[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[o?o[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[o?o[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[o?o[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[o?o[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[e,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return Ao.loop(e,function(e){var t=(new Ao.Shape).addTo(i);t.graphics.f(e[0]).p(e[1]),t.setTransform(e[2],e[3])}),i.mouseChildren=!1,i},this.makeAbstract=function(e){zot(e)&&(e="black");var o=new Ao.Rectangle(200,200);Ao.loop([[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],function(e){var t=(new Ao.Shape).f(e[2]).p(e[3]);t.setTransform(e[0]+20,e[1]+27),t.addTo(o)},!0);e=new Ao.Container;return o.sca(.4).addTo(e),e.mouseChildren=!1,e},this.makeCat=function(e){zot(e)&&(e=246);var o=new Ao.Container(157.5,246);Ao.loop([[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],function(e){var t=(new Ao.Shape).f(e[2]).s(e[3]).ss(e[4]?e[4][0]:null,e[4]?e[4][1]:null,e[4]?e[4][2]:null).p(e[5]);t.setTransform(e[0],e[1]),t.addTo(o)},!0);var t=new Ao.Container;return o.sca(e/246).addTo(t).mov(0,-.4),O&&t.cache(),t.mouseChildren=!1,t})},Ao.extend(Ao.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Ao.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},Ao.extend(Ao.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),Ao.Pic=function(t,o,n,r,i,e,l){var a;if(a=zob(Ao.Pic,arguments,"file, width, height, noCors, style, group, inherit",this))return a;z_d("83.03"),this.group=e;var s,c,u,e=!1===i?{}:Ao.getStyle("Pic",this.group,l);zot(t)&&(t=null!=e.file?e.file:null),zot(r)&&(r=null!=e.noCors&&e.noCors),zot(t)?zon&&zogy("ZIM Pic - needs a file"):(this.zimContainer_constructor(o,n),c=t,t=(s=this).file=Ao.Pick.choose(t),this.type=o&&n?"ACWD":"AC",u=r?Ao.image(t):Ao.asset(t),s.mouseChildren=!1,"Bitmap"==u.type||"Image"==u.type?("Bitmap"==u.type?s.bitmap=u.clone().addTo(s):s.bitmap=u.getChildAt(0).clone().addTo(s),s.id=u.id,s.image=s.bitmap.image,s.src=s.bitmap.src,s.item=s.bitmap.item,s.setBounds(null),s.type="Pic",setTimeout(function(){s.dispatchEvent("ready"),s.dispatchEvent("complete")},20)):u.on("complete",function(){if(s.bitmap=u.getChildAt(0).clone().addTo(s),s.id=u.id,s.setBounds(null),s.type="Pic",s.commands)for(var e=0;e<s.commands.length;e++)(s.commands[e][2]?s:Ao)[s.commands[e][0]].apply(s,s.commands[e][1]);s.image=s.bitmap.image,s.src=s.bitmap.src,s.item=s.bitmap.item,s.commands=null,s.dispatchEvent("ready"),s.dispatchEvent("complete"),s.stage&&s.stage.update()}),s.keyOut=function(e,t,o){return"AC"==s.type&&WW.zdf?WW.zdf.ac("keyOut",arguments,s):(s.bitmap&&s.bitmap.keyOut(e,t,o),s.stage&&s.stage.update()),s},Ao.styleTransforms(this,e),s.clone=function(e){return this.cloneProps(new Ao.Pic(e?t:c,o,n,r,i,this.group,l))})},Ao.extend(Ao.Pic,Ao.Container,["clone"],"zimContainer",!1),Ao.Aud=function(e,t,o,n,r,i,l,a,s,c,u,d){var h;if(h=zob(Ao.Aud,arguments,"file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",this))return h;z_d("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=u;var g,p,d=!1===c?{}:Ao.getStyle(this.type,this.group,d);zot(e)&&(e=null!=d.file?d.file:null),zot(e)?zon&&zogy("ZIM Sound - needs a file"):(zot(t)&&(t=null!=d.volume?d.volume:1),zot(o)&&(o=null!=d.loop&&d.loop),zot(n)&&(n=null!=d.loopCount?d.loopCount:null),zot(r)&&(r=null!=d.pan?d.pan:0),zot(i)&&(i=null!=d.offset?d.offset:0),zot(l)&&(l=null!=d.delay?d.delay:0),zot(a)&&(a=null!=d.interrupt?d.interrupt:"none"),zot(s)&&(s=null!=d.maxNum?d.maxNum:null),e=(g=this).file=Ao.Pick.choose(e),"AC"==(p=g.sound=Ao.asset(e,null,null,s)).type?p.on("complete",function(){g.src=p.src,g.item=p.item,g.dispatchEvent("ready"),g.dispatchEvent("complete")}):setTimeout(function(){g.src=p.src,g.item=p.item,g.dispatchEvent("ready"),g.dispatchEvent("complete")},20),g.volume=t,g.loop=o,g.loopCount=n,g.pan=r,g.offset=i,g.delay=l,g.interrupt=a,g.maxNum=s,g.play=function(e,t,o,n,r,i,l){var a;return(a=zob(g.play,arguments,"volume, loop, loopCount, pan, offset, delay, interrupt"))?a:(zot(e)&&(e=g.volume),zot(t)&&(t=g.loop),zot(o)&&(o=g.loopCount),zot(n)&&(n=g.pan),zot(r)&&(r=g.offset),zot(i)&&(i=g.delay),zot(l)&&(l=g.interrupt),g.sound.play(e,t,o,n,r,i,l))},g.dispose=function(){return g.sound&&g.sound.dispose(),!(g.sound=null)})},Ao.extend(Ao.Aud,createjs.EventDispatcher,null,"cjsEventDispatcher"),Ao.Vid=function(t,n,r,i,l,o,a,s,c,u,e,d){if(f=zob(Ao.Vid,arguments,"file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",this))return f;z_d("83.07"),this.group=e;var h,g,p,f,m,z,y=!1===u?{}:Ao.getStyle("Vid",this.group,d);function b(){5<z++&&h.dispatchEvent("error"),m.addEventListener("stalled",b),m.addEventListener("error",b),m.addEventListener("canplay",v)}function v(){h.type="Vid",m.removeEventListener("stalled",b),m.removeEventListener("error",b),m.removeEventListener("canplay",v),m.pause();var e=m.videoWidth,t=m.videoHeight;if(h.setBounds(0,0,n||e,r||t),(g=h.bitmap=new Ao.Bitmap(m,e,t).addTo(h)).setBounds(0,0,e,t),g.scaleTo(h,100,100,i).pos(0,0,a,s,h),h.commands)for(var o=0;o<h.commands.length;o++)(h.commands[o][2]?h:Ao)[h.commands[o][0]].apply(h,h.commands[o][1]);h.commands=null,h.dispatchEvent("ready")}zot(t)&&(t=null!=y.file?y.file:null),zot(t)?zon&&zogy("ZIM Vid - needs a file"):(zot(n)&&(n=null!=y.width?y.width:null),zot(r)&&(r=null!=y.height?y.height:null),zot(i)&&(i="fit"),zot(o)&&(o=null==y.loop||y.loop),zot(l)&&(l=null!=y.volume?y.volume:1),zot(a)&&(a=null!=y.align?y.align:"center"),zot(s)&&(s=null!=y.valign?y.valign:"center"),zot(c)&&(c=null!=y.type?y.type:"video/mp4"),this.zimContainer_constructor(n,r),this.type=n&&r?"ACWD":"AC",h=this,p=t,t=Ao.Pick.choose(t),h.file=t,null!=WW.PATH&&(Ao.PATH=WW.PATH),f="",1==t.split("/").length&&Ao.PATH&&(f=Ao.PATH),this.mouseChildren=!1,m=h.source=document.createElement("video"),document.body.appendChild(m),m.style.display="none",m.setAttribute("autoplay","autoplay"),m.setAttribute("playsinline","playsinline"),m.setAttribute("crossorigin","anonymous"),o&&m.setAttribute("loop","loop"),e=h.innerSource=document.createElement("source"),1==t.split("?").length&&(t+="?playsinline=1"),e.setAttribute("src",f+t),e.setAttribute("type",c),m.appendChild(e),b(),z=0,h.videoPaused=!0,h.play=function(){var e,t,o;if(g)return m.play(),m.volume=l,h.videoPaused=!1,h.ticker||(h.keyObj?(e=h.keyObj.color,t=h.keyObj.tolerance,o=h.keyObj.replacement,h.ticker=Ao.Ticker.add(function(){g.keyOut(e,t,o)})):h.ticker=Ao.Ticker.add(function(){})),h;zon&&zogy("ZIM Vid - no file found")},h.keyOut=function(e,t,o){return h.ticker?(Ao.Ticker.remove(h.ticker),h.ticker=Ao.Ticker.add(function(){g.keyOut(e,t,o)})):h.keyObj={color:e,tolerance:t,replacement:o},h},h.pause=function(e){return zot(e)&&(e=!0),(h.videoPaused=e)?m.pause():m.play(),h},Object.defineProperty(this,"duration",{get:function(){return m.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return m.currentTime},set:function(e){m.currentTime=e}}),Object.defineProperty(this,"volume",{get:function(){return m.volume},set:function(e){l=e,m.volume=e}}),Ao.styleTransforms(this,y),h.clone=function(e){return this.cloneProps(new Ao.Vid(e?t:p,n,r,i,l,o,a,s,c,u,this.group,d))},h.dispose=function(e,t,o){this.ticker&&Ao.Ticker.remove(this.ticker);var n=h.stage;return h.bitmap.dispose(),g=h.bitmap=null,m.pause(),m.removeAttribute("src"),m.load(),m.remove(),m=null,o||this.zimContainer_dispose(!0),n&&n.update(),!0})},Ao.extend(Ao.Vid,Ao.Container,["clone","dispose"],"zimContainer",!1),Ao.SVG=function(o,t,n,r,i,l,a,s,c,e,u){var d;if(d=zob(Ao.SVG,arguments,"svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return d;z_d("83.09"),this.group=e;var h,g,p,f,e=!1===c?{}:Ao.getStyle("SVG",this.group,u);function m(e){var t;r?h.bitmap?(h.svg=h.bitmap.svg,h.bitmap.addTo(h),e&&z(),setTimeout(function(){h.dispatchEvent("ready"),h.dispatchEvent("complete")},20)):Ao.svgToBitmap(h.svg,function(e){h.bitmap=e,h.bitmap.addTo(h),z(),h.dispatchEvent("ready"),h.dispatchEvent("complete"),h.stage&&h.stage.update()}):(h.bitmap&&(h.svg=h.bitmap.svg),o.match(/<svg/i)||p&&"SVG"==p.type||e?(new Ao.SVGContainer(h.svg).loop(function(e){e&&e.addTo(h)},!0),e&&z(),setTimeout(function(){h.dispatchEvent("ready"),h.dispatchEvent("complete")},20)):(t=Ao.asset(o)).on("complete",function(){new Ao.SVGContainer(t).loop(function(e){e&&e.addTo(h)},!0),z(),h.dispatchEvent("ready"),h.dispatchEvent("complete"),h.stage&&h.stage.update()}))}function z(){if(zot(t)&&zot(n)&&h.setBounds(null),h.type="SVG",h.commands)for(var e=0;e<h.commands.length;e++)(h.commands[e][2]?h:Ao)[h.commands[e][0]].apply(h,h.commands[e][1]);h.commands=null}zot(o)&&(o=null!=e.svg?e.svg:null),zot(o)?zon&&zogy("ZIM SVG - needs a svg value"):(zot(r)&&(r=null==e.bitmap||e.bitmap),zot(i)&&(i=null!=e.splitTypes&&e.splitTypes),zot(l)&&(l=null==e.geometric||e.geometric),zot(a)&&(a=null==e.showControls||e.showControls),zot(s)&&(s=null==e.interactive||e.interactive),this.zimContainer_constructor(t,n),h=this,r&&(this.mouseChildren=!1),g=o,o=Ao.Pick.choose(o),this.type=t&&n?"ACWD":"AC",(p=Ao.assets[o])&&(h.src=p.src,h.file=p.file,h.item=p.item,h.svg=p.svg),p&&"Bitmap"==p.type?(h.type="SVG",h.bitmap=p.clone(),m()):p&&"AC"==p.type?p.on("complete",function(){h.type="SVG",h.bitmap=p.bitmap.clone(),m(zot(t)&&zot(n))}):p&&"ACWB"==p.type?(zot(t)&&zot(n)&&h.setBounds(0,0,p.width,p.height),p.on("complete",function(){h.type="SVG",h.bitmap=p.bitmap.clone(),m()})):p&&"SVG"==p.type?(h.type="SVG",p.bitmap?h.bitmap=p.bitmap.clone():h.bitmap=p.clone(),m()):(o&&o.match(/<svg/i)&&(h.svg=o),h.svg&&h.svg.match(/<svg/i)?(h.type="SVG",m()):(f=Ao.asset(o)).on("complete",function(){h.type="SVG",f.bitmap&&(h.src=f.bitmap.src,h.file=f.bitmap.file,h.item=f.bitmap.item,h.svg=f.bitmap.svg,h.bitmap=f.bitmap.clone()),m(zot(t)&&zot(n))})),h.keyOut=function(e,t,o){return"AC"==h.type&&WW.zdf?WW.zdf.ac("keyOut",arguments,h):(h.bitmap&&h.bitmap.keyOut(e,t,o),h.stage&&h.stage.update()),h},Ao.styleTransforms(this,e),h.clone=function(e){return this.cloneProps(new Ao.SVG(e?o:g,t,n,r,i,l,a,s,c,this.group,u))})},Ao.extend(Ao.SVG,Ao.Container,["clone"],"zimContainer",!1),Ao.SensorAsk=function(o,n,e,t,r,i,l){var a;if(a=zob(Ao.SensorAsk,arguments,"callback, sensorType, color, backgroundColor, style, group, inherit",this))return a;z_d("83.01"),this.group=i;var s,c,l=!1===r?{}:Ao.getStyle("SensorAsk",this.group,l);zot(n)&&(n=null!=l.sensorType?l.sensorType:"deviceorientation"),"devicemotion"!=n&&(n="deviceorientation"),this.sensorType=n,zot(o)||(zot(e)&&(e=null!=l.color?l.color:Ao.dark),zot(t)&&(t=null!=l.backgroundColor?l.backgroundColor:Ao.lighter),this.zimPane_constructor(200,200,"",t,e,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk",s=this,Style.addGroup("sensorAsk",{width:100,color:e,rollColor:t,corner:10,backgroundColor:Ao.faint,rollBackgroundColor:e,borderColor:e,borderWidth:2}),s.yes=new Ao.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){s.hide(!0);var e=DeviceMotionEvent;"deviceorientation"!=n&&(e=DeviceOrientationEvent),e.requestPermission().then(function(e){o("denied"!=e)})}),s.label=new Ao.Label("Use sensor?",null,null,e,null,null,null,"center").sca(.9).centerReg(this),s.no=new Ao.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){s.hide(!1),o(!1)}),new Ao.Circle(110,Ao.clear,e,1).center(this).alp(.8),new Ao.Circle(120,Ao.clear,e,1).center(this).alp(.5),new Ao.Circle(130,Ao.clear,e,1).center(this).alp(.2),Ao.styleTransforms(this,l),DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?s.show():(c=!1,window.addEventListener(n,function e(t){"deviceorientation"==n?null==t.alpha||0==t.alpha&&0==t.beta&&0==t.gamma?o(!1):o(!0):!t.acceleration||null==t.acceleration.x||0==t.acceleration.x&&0==t.acceleration.y&&0==t.acceleration.z?o(!1):o(!0);c=!0;window.removeEventListener(n,e)}),setTimeout(function(){c||o(!1)},100)))},Ao.extend(Ao.SensorAsk,Ao.Pane,null,"zimPane",!1),Ao.colorsHex=["#f58e25","#acd241","#e472c4","#50c4b7","#d1a170","#ebcb35","#993399","#fb4758","#000000","#111111","#333333","#555555","#555555","#777777","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],Ao.colors=["orange","green","pink","blue","brown","yellow","purple","red","black","darker","dark","grey","gray","tin","silver","fog","mist","light","moon","lighter","white","faint","clear"],z_i=0;z_i<Ao.colors.length;z_i++)Ao[Ao.colors[z_i]]=Ao.colorsHex[z_i];return String.prototype.darken=function(e){return Ao.darken(this,e)},String.prototype.lighten=function(e){return Ao.lighten(this,e)},String.prototype.toColor=function(e,t){return Ao.toColor(this,e,t)},String.prototype.toAlpha=function(e){return Ao.toAlpha(this,e)},Ao.FIT="fit",Ao.FILL="fill",Ao.FULL="full",Ao.LEFT="left",Ao.RIGHT="right",Ao.CENTER="center",Ao.MIDDLE="middle",Ao.START="start",Ao.END="end",Ao.TOP="top",Ao.BOTTOM="bottom",Ao.HORIZONTAL="horizontal",Ao.VERTICAL="vertical",Ao.BOTH="both",Ao.UP="up",Ao.DOWN="down",Ao.AUTO="auto",Ao.AVE="ave",Ao.DEFAULT="default",Ao.GET="get",Ao.POST="post",Ao.LOCALSTORAGE="localStorage",Ao.SOCKET="socket",Ao.TO="to",Ao.FROM="from",Ao.SINE="sine",Ao.SQUARE="square",Ao.TRIANGLE="triangle",Ao.SAW="saw",Ao.SAWTOOTH="saw",Ao.ZAP="zap",Ao.DISTILL=!1,Ao.distillery=[],Ao.distill=function(){!WW.zns&&Ao&&(Ao.DISTILL||WW.DISTILL)&&Ao.distillery.push("83.3","83.35"),0<Ao.distillery.length?(Ao.distillery=Ao.distillery.filter(function(e,t,o){return o.indexOf(e)===t}),zogy("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(Ao.distillery.join(" "))):zogy("must set zim.DISTILL = true;")},Ao.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n,r=e.resources[0],i=e.spritemap,l=[],r={src:r,data:{}};for(n in i)o=i[n],l.push({id:n,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return r.data.audioSprite=l,t&&zogy(JSON.stringify(r)),r}},Ao.previewAudioSprite=function(e,t,o){if(z_d("83.26"),!zot(e)){if(zot(t)&&(t=3),void 0===o){if(zot(WW.zdf))return;o=WW.zdf}var n=o.width,e=e,r=[],i=[];if(e.constructor=={}.constructor){e.resources&&(e=Ao.parseAudioSprite(e)),e.audioSprite?Ao.loop(e.audioSprite,function(e){r.push(e[0].substr(0,t)),i.push(e[0])}):e.data&&e.data.audioSprite&&Ao.loop(e.data.audioSprite,function(e){r.push(e.id.substr(0,t)),i.push(e.id)});var l=new Ao.Tabs({tabs:r,width:n,currentEnabled:!0}).addTo();return l.on("change",function(){o.asset(i[l.selectedIndex]).play()}),l}}},Ao.svgToBitmap=function(e,t,o,n,r){var i,l,a,s,c,u;z_d("83.27"),zot(e.draggable)||(l=new DOMParser,e=(e=e.innerHTML?l.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg")?e.getElementsByTagName("svg")[0]:null),XMLSerializer||!zon?((i="string"==typeof e?e:(new XMLSerializer).serializeToString(e))&&(1<(a=i.split(">")[0]).length&&1==a.split(/width/i).length&&(e=l=100,1<(a=a.split(/viewBox/i)).length&&(!(a=a[1].split('"')[1])||1<(a=a.split(" ")).length&&(l=a[a.length-2],e=a[a.length-1])),i=i.replace(/svg /i,'svg  width="'+l+'" height="'+e+'" ')),i.match(/xmlns/i)||(i=i.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))),s=self.URL||self.webkitURL||self,(c=new Image).onload=function(){var e=new Ao.Bitmap(c,o,n);t(e,r),s.revokeObjectURL(u)},u=s.createObjectURL(new document.Blob([i],{type:"image/svg+xml"})),c.src=u):zogy("ZIM svgToBitmap() - sorry, not supported in Browser")},Ao.makeContent=function(e,t,o){var n;if(z_d("83.29"),zot(o)&&(o=Ao.dark),"string"==typeof e||"number"==typeof e)e=this.message=new Ao.Label(e,null,null,o);else if(e.constructor=={}.constructor){var r=e;r.buttonScale||(r.buttonScale=.5),zot(r.spacingH)&&(r.spacingH=20*r.buttonScale),zot(r.spacingV)&&(r.spacingV=20);var i=r.spacingH,l=r.spacingV;r.align||(r.align="center"),e=new Ao.Container;var a,s=new Container(10,l).addTo(e);if(r.header&&r.header.pos(0,l,"left","top",e),r.message&&(a=new Ao.Label(r.message,null,null,zot(r.color)?o:r.color).loc(0,e.height+(r.header?l:0),e)),r.display&&r.display.pos(0,-r.display.height-(r.header||r.message?l:0),"left","bottom",e),r.buttons){Array.isArray(r.buttons)||(r.buttons=[r.buttons]);r.length;for(var c=(new Ao.Container).loc(0,e.height+(r.header||r.message||r.display?l:0),e),u=0;u<r.buttons.length;u++){var d=r.buttons[u],h=d.call||function(){};d.button||(d.button=new Ao.Button({width:d.width,label:d.label,backgroundColor:d.backgroundColor||d.bgColor,color:d.color,rollBackgroundColor:d.rollBackgroundColor||d.rollBgColor,rollColor:d.rollColor})),d.button.call=h,d.button.sca(r.buttonScale).loc(0==u?0:c.width+i,0,c).tap(function(e){e.target.call(e.target)})}}for(n=0;n<e.numChildren;n++){var g=e.getChildAt(n);g.lastY=g.y,"center"==r.align?g.center(e).loc(null,g.lastY):"right"==r.align&&g.pos(0,null,"right")}if(t&&(e.width=Math.min(e.width,t-2*i-(!0===r.scrollBar?12:0<r.scrollBar?r.scrollBar:0))),new Ao.Container(10,l).pos(0,-s.height,"center","bottom",e).bot(),s.top(),e.config=r,e.header=r.header,e.message=a,e.text=r.message,e.display=r.display,r.buttons)for(e.buttons=[],n=0;n<c.numChildren;n++)e.buttons.push(c.getChildAt(n))}return e},Ao}(zim||{})).fastFrame=function(e,t){if(z_d("83.355"),createjs=e,zot(WW.zdf))return t.frame=new zim.Frame({shim:{stage:t,canvas:t.canvas}}),WW.zimDefaultFrame=WW.zdf=t.frame,zim.scaX=createjs.stageTransformable?1:t.scaleX,zim.scaY=createjs.stageTransformable?1:t.scaleY,t.frame},zim.addWires=function(e){return z_d("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),zim.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),zim.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),zim.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),zim.noWired.apply(null,arguments),e},e};var ZIMONON=!(zim.setBlurDetect=function(){z_d("83.36"),zim.blurCheck=!0,zim.pauseAnimateOnBlur=!0,zim.pauseOnBlur=[],zim.blurDetect=function(){var t,o,e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in e)if(t in document){o=e[t];break}return function(e){return e&&document.addEventListener(o,e),!document[t]}}(),zim.blurDetect(function(){var t,o,n;if(zim.blurDetect())setTimeout(function(){if(zim.pauseOnBlur)for(t=0;t<zim.pauseOnBlur.length;t++)(o=zim.pauseOnBlur[t]).pauseOnBlurPaused||o.pause(!1);if(zim.pauseAnimateOnBlur&&zim.animatedObjects)for(t=0;t<zim.animatedObjects.objects.length;t++){o=zim.animatedObjects.objects[t];var e=zim.copy(o.tweenStates);if(o.tweenStates)if(zot(e.all)||e.all){if(o.pauseAnimate(!1),!o.dynamicAnimation)for(n in e)"all"!=n&&!1===e[n]&&o.pauseAnimate(!0,n)}else for(n in o.pauseAnimate(!0),e)"all"!=n&&e[n]&&o.pauseAnimate(!1,n);else o.pauseAnimate(!1);"Sprite"==o.type&&(o.paused=!0)}},300),WW.zdf&&WW.zdf.dispatchEvent("tabfocus");else{if(zim.pauseOnBlur)for(t=0;t<zim.pauseOnBlur.length;t++)(o=zim.pauseOnBlur[t]).pauseOnBlurPaused=o.paused,o.pause(!0);zim.pauseAnimateOnBlur&&zim.animatedObjects&&zim.pauseAnimate(!0,"pauseOnBlur"),WW.zdf&&WW.zdf.dispatchEvent("tabblur")}})}),zim=function(m){return m.ZIMON={stringify:function(i,l){if(z_d("83.39"),!zot(i)){if(ZIMONON)return function o(n,e,t){if(zot(n))return;{var r;Array.isArray(n)?m.loop(n,function(e,t){o(e,n,t)}):n.constructor=={}.constructor?m.loop(n,function(e,t){o(t,n,e)}):n.type?(r={zimon:n.type},n.arguments&&(r.args=Array.prototype.slice.call(n.arguments),o(r.args)),"series"==n.type&&(r.args=Array.prototype.slice.call(n.array),o(r.args)),l&&l[n.type]&&l[n.type].props&&(r.props=[],m.loop(l[n.type].props,function(e){r.props.push(n[e])})),e?e[t]=r:i=r):"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&null!==n&&zon&&zogy("ZIMON - potentially bad JSON value"+n)}}(i=m.copy(i)),JSON.stringify({obj:i,key:l,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zogy("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(e,s){if(z_d("83.39"),!zot(e)){var e=JSON.parse(e),c=e.obj;return s=e.key,function o(n,e,t){if(zot(n))return;{var r,i,l,a;Array.isArray(n)?m.loop(n,function(e,t){o(e,n,t)}):zot(n.zimon)&&n.constructor=={}.constructor?m.loop(n,function(e,t){o(t,n,e)}):n.zimon&&(r=n.zimon,l="",s&&(s[r]&&s[r].scope?l=s[r].scope+".":s.scope&&(l=s.scope+".")),i=u(l+r),zot(l=n.args)&&(l=[]),o(l),a="series"==n.type?m.series(l):i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(l)))):null,e?e[t]=a:c=a,s&&s[r]&&s[r].props&&a&&m.loop(s[r].props,function(e,t){zot(n.props[t])||(a[e]=n.props[t])}))}}(c),c}function u(t){try{return Function("return("+t+")")()}catch(e){return zon&&zogy("ZIMON - bad function scope or name: "+t),null}}}},m.Wonder=function(o,n,r,i,e){var t,l,a,s,c,u,d,h,g;if(t=zob(m.Wonder,arguments,"wid, client, app, notes, server",this))return t;function p(){0<a.length&&(m.async(e+"?wonder="+JSON.stringify(a)),a=[],c++)}function f(e,t){if(!zot(e))return!l[t+"sOff"][e];zogy("zim.Wonder "+t+" - please provide a keyword")}z_d("82"),zot(o)?zogy("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)"):(zot(e)&&(e="https://wonder.zimjs.org/wonder"),l=this,zot(m.wonderSession)&&(m.wonderSession="W"+m.rand(1e5,999999)),a=[],s=setInterval(p,1e3),c=0,d=setInterval(function(){28<c&&(a.push({id:o,c:n,a:r,n:i,k:u,t:"e",v:"frequency max - terminated",s:m.wonderSession}),zogy("zim.Wonder() - frequency max - terminated"),l.dispose()),c=0},3e4),this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(e){f(e,"count")&&(u=e,a.push({id:o,c:n,a:r,n:i,k:e,t:"c",v:1,s:m.wonderSession}))},h={},this.timeStart=function(e){f(e,"time")&&(l.timeEnd(e),h[u=e]=(new Date).getTime())},g={},this.timePause=function(e){f(e,"time")&&(g[e]||(g[e]=(new Date).getTime()))},this.timeUnpause=function(e){var t;f(e,"time")&&g[e]&&(t=(new Date).getTime()-g[e],h[e]&&(h[e]+=t),delete g[e])},this.timeEnd=function(e){var t;f(e,"time")&&h[e]&&(t=g[e]||(new Date).getTime(),t=Math.round((t-h[e])/1e3),delete g[e],delete h[e],a.push({id:o,c:n,a:r,n:i,k:e,t:"t",v:t,s:m.wonderSession}))},this.order=function(e,t){f(e,"order")&&(u=e,zot(t)?zogy("zim.Wonder order() - please provide an item"):a.push({id:o,c:n,a:r,n:i,k:e,t:"o",v:t,s:m.wonderSession}))},this.countOff=function(e){l.countsOff[e]=1},this.countOn=function(e){delete l.countOff[e]},this.timeOff=function(e){l.timesOff[e]=1},this.timeOn=function(e){delete l.timesOff[e]},this.orderOff=function(e){l.ordersOff[e]=1},this.orderOn=function(e){delete l.ordersOff[e]},this.dispose=function(){return p(),clearInterval(s),clearInterval(d),!0})},m.VERSION="zim/01/zim",m.getLatestVersions=function(t){z_d("82.2");m.async("https://zimjs.com/live/getLatestVersions.php",function(e){t(JSON.parse(e))},"returnLatestVersions")},m.PWA=function(t,e,o,n,r,i,l){var a,s;if(a=zob(m.PWA,arguments,"call, label, backgroundColor, color, backdropColor, pane, noScale",this))return a;z_d("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var c=this;function u(){this.pane=s=i.show(),s.on("close",function(){t&&t.constructor===Function&&t(),c.scaleEvent&&e.off("resize",c.scaleEvent),c.dispatchEvent("ready")});var e=e||WW.zdf;e&&!l&&(s.scaleTo(e.stage,105).center(),"full"!=e.scaling&&"tag"!=e.scaling||(c.scaleEvent=e.on("resize",function(){s.scaleTo(e.stage,105).center()})),e.stage.update())}zot(e)&&(e=new m.Label({text:"Please add to home screen as an app",align:m.LEFT,lineHeight:44,color:n})),zot(o)&&(o=m.yellow),zot(i)&&((i=new m.Pane({width:1200,height:230,label:e,backgroundColor:o,backdropColor:r})).label.align=m.LEFT,i.label.center(),i.label.mov(40),(new m.Shape).s(m.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.6).center(i).mov(-i.label.width/2-20,-10),(new m.Shape).s(m.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.6).center(i).mov(-i.label.width/2-20,-48)),M&&!(WW.matchMedia("(display-mode: standalone)").matches||WW.navigator.standalone||document.referrer.includes("android-app://"))?u():(t&&t.constructor===Function&&t(),setTimeout(function(){c.dispatchEvent("ready")},20)),this.show=function(){return u(),this}},m.extend(m.PWA,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),m.QR=function(e,t,o,n,r,i){if(l=zob(m.QR,arguments,"url, color, backgroundColor, size, clickable, correctLevel",this))return l;z_d("82.5"),zot(e)&&(e="https://zimjs.com"),zot(n)&&(n=256),zot(t)&&(t=m.black),zot(o)&&(o=m.white),zot(r)&&(r=!0),zot(i)&&(i=2);var l=document.createElement("div");"undefined"!=typeof QRCode?(i=new QRCode(l,{text:e,width:n,height:n,colorDark:t,colorLight:o,correctLevel:i}),this.zimBitmap_constructor(i._oDrawing._oContext.canvas),r&&this.cur().on("click",function(){zgo(e,"_blank")})):zogy("ZIM QR - needs qrcode.js library - see docs")},m.extend(m.QR,m.Bitmap,null,"zimBitmap",!1),m.GIF=function(e,t,o,n){var r,i,l,a,s,c,u;if(a=zob(m.GIF,arguments,"url",this))return a;z_d("82.7"),"undefined"!=typeof gifler?(zot(t)&&(t=100),zot(o)&&(o=100),(r=this).paused=!1,this.zimBitmap_constructor(null,t,o),this.cache(),null!=WW.PATH&&(m.PATH=WW.PATH),a=e.match(/http/)||e.match(/^\//)?e:(m.PATH||"")+e,r.gifler=gifler(a).animate(this.cacheCanvas).then(function(e){r.animator=e,n&&(i=setInterval(function(){r.animator.running()&&(l=setTimeout(function(){r.animator.stop(),r.paused=!0},.1),clearInterval(i))},.05))}),r.ticker||(r.keyObj?(s=r.keyObj.color,c=r.keyObj.tolerance,u=r.keyObj.replacement,r.ticker=m.Ticker.add(function(){r.keyOut(s,c,u)})):r.ticker=m.Ticker.add(function(){})),r.keyOut=function(e,t,o){return r.ticker?(m.Ticker.remove(r.ticker),r.ticker=m.Ticker.add(function(){r.keyOut(e,t,o)})):r.keyObj={color:e,tolerance:t,replacement:o},r},this.pause=function(e){return zot(e)&&(e=!0),r.animator&&(i&&clearInterval(i),l&&clearTimeout(l),e&&r.animator.running()?(r.animator.stop(),m.Ticker.remove(r.ticker)):e||r.animator.running()||(r.animator.start(),m.Ticker.add(r.ticker))),r.paused=e,r},this.stop=function(){r.dispose()},this.reset=function(){return r.animator.reset(),r.paused&&(r.animator.start(),m.Ticker.add(r.ticker)),r},this.clone=function(){return this.cloneProps(new m.GIF(e,t,o,n))},this.dispose=function(){r.animator.stop(),r.parent&&r.removeFrom(),m.Ticker.remove(r.ticker),m.gD(this)}):zogy("ZIM GIF - needs gifler.js library - see docs")},m.extend(m.GIF,m.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),m}(zim||{});zns||zimplify();

//export zim;
export {zog,zid,zss,zgo,zum,zot,zop,zil,zet,zob,zik,zta,zor,zogg,zogp,zogb,zogr,zogy,zogo,zogl,zogd};
const globals = ['zog','zid','zss','zgo','zum','zot','zop','zil','zet','zob','zik','zta','zor','zogg','zogp','zogb','zogr','zogy','zogo','zogl','zogd'];
const funcs = [zog,zid,zss,zgo,zum,zot,zop,zil,zet,zob,zik,zta,zor,zogg,zogp,zogb,zogr,zogy,zogo,zogl,zogd];
for (var i=0; i<globals.length; i++) {
	WW[globals[i]] = funcs[i];
}
WW.zim = zim;
export let chop = zim.chop;
export let shuffle = zim.shuffle;
export let pluck = zim.pluck;
export let rand = zim.rand;
export let seedRandom = zim.seedRandom;
export let odds = zim.odds;
export let rarity = zim.rarity;
export let repeats = zim.repeats;
export let series = zim.series;
export let loop = zim.loop;
export let getTIME = zim.getTIME;
export let timeout = zim.timeout;
export let interval = zim.interval;
export let async = zim.async;
export let couple = zim.couple;
export let decouple = zim.decouple;
export let convertColor = zim.convertColor;
export let colorRange = zim.colorRange;
export let lighten = zim.lighten;
export let darken = zim.darken;
export let toColor = zim.toColor;
export let toAlpha = zim.toAlpha;
export let zimEase = zim.zimEase;
export let spline = zim.spline;
export let pointAlongCurve = zim.pointAlongCurve;
export let distanceAlongCurve = zim.distanceAlongCurve;
export let closestPointAlongCurve = zim.closestPointAlongCurve;
export let transformPoints = zim.transformPoints;
export let trimEndPoints = zim.trimEndPoints;
export let reversePoints = zim.reversePoints;
export let appendPoints = zim.appendPoints;
export let prependPoints = zim.prependPoints;
export let splitPoints = zim.splitPoints;
export let makeID = zim.makeID;
export let makeSyllable = zim.makeSyllable;
export let makePrimitive = zim.makePrimitive;
export let makeMath = zim.makeMath;
export let swapProperties = zim.swapProperties;
export let mobile = zim.mobile;
export let vee = zim.vee;
export let extend = zim.extend;
export let copy = zim.copy;
export let merge = zim.merge;
export let arraysEqual = zim.arraysEqual;
export let arrayMinMax = zim.arrayMinMax;
export let isEmpty = zim.isEmpty;
export let isJSON = zim.isJSON;
export let isPick = zim.isPick;
export let decimals = zim.decimals;
export let countDecimals = zim.countDecimals;
export let sign = zim.sign;
export let constrain = zim.constrain;
export let dist = zim.dist;
export let rectIntersect = zim.rectIntersect;
export let boundsAroundPoints = zim.boundsAroundPoints;
export let angle = zim.angle;
export let smoothStep = zim.smoothStep;
export let unicodeToUTF = zim.unicodeToUTF;
export let capitalizeFirst = zim.capitalizeFirst;
export let Ajax = zim.Ajax;
export let Noise = zim.Noise;
export let Point = zim.Point;
export let Bezier = zim.Bezier;
export let Boundary = zim.Boundary;
export let GradientColor = zim.GradientColor;
export let RadialColor = zim.RadialColor;
export let BitmapColor = zim.BitmapColor;
export let Damp = zim.Damp;
export let Proportion = zim.Proportion;
export let ProportionDamp = zim.ProportionDamp;
export let Dictionary = zim.Dictionary;
export let Hierarchy = zim.Hierarchy;
export let Pick = zim.Pick;
export let scrollX = zim.scrollX;
export let scrollY = zim.scrollY;
export let windowWidth = zim.windowWidth;
export let windowHeight = zim.windowHeight;
export let browserZoom = zim.browserZoom;
export let getQueryString = zim.getQueryString;
export let swapHTML = zim.swapHTML;
export let urlEncode = zim.urlEncode;
export let urlDecode = zim.urlDecode;
export let setCookie = zim.setCookie;
export let getCookie = zim.getCookie;
export let deleteCookie = zim.deleteCookie;
export let Stage = zim.Stage;
export let StageGL = zim.StageGL;
export let Container = zim.Container;
export let Shape = zim.Shape;
export let Bitmap = zim.Bitmap;
export let Sprite = zim.Sprite;
export let MovieClip = zim.MovieClip;
export let SVGContainer = zim.SVGContainer;
export let CustomShape = zim.CustomShape;
export let Circle = zim.Circle;
export let Rectangle = zim.Rectangle;
export let Triangle = zim.Triangle;
export let Poly = zim.Poly;
export let Line = zim.Line;
export let Squiggle = zim.Squiggle;
export let Flare = zim.Flare;
export let MultiFlare = zim.MultiFlare;
export let FlareBox = zim.FlareBox;
export let Label = zim.Label;
export let LabelOnPath = zim.LabelOnPath;
export let LabelOnArc = zim.LabelOnArc;
export let LabelLetters = zim.LabelLetters;
export let Emoji = zim.Emoji;
export let Button = zim.Button;
export let CheckBox = zim.CheckBox;
export let RadioButtons = zim.RadioButtons;
export let Toggle = zim.Toggle;
export let Tip = zim.Tip;
export let Pane = zim.Pane;
export let Panel = zim.Panel;
export let Page = zim.Page;
export let Layer = zim.Layer;
export let Waiter = zim.Waiter;
export let ProgressBar = zim.ProgressBar;
export let Indicator = zim.Indicator;
export let TextInput = zim.TextInput;
export let List = zim.List;
export let Stepper = zim.Stepper;
export let Slider = zim.Slider;
export let Selector = zim.Selector;
export let Dial = zim.Dial;
export let Tabs = zim.Tabs;
export let Pad = zim.Pad;
export let DPad = zim.DPad;
export let Radial = zim.Radial;
export let RadialMenu = zim.RadialMenu;
export let ColorPicker = zim.ColorPicker;
export let EmojiPicker = zim.EmojiPicker;
export let TextEditor = zim.TextEditor;
export let Keyboard = zim.Keyboard;
export let Organizer = zim.Organizer;
export let Connectors = zim.Connectors;
export let Marquee = zim.Marquee;
export let Loader = zim.Loader;
export let TextArea = zim.TextArea;
export let Tag = zim.Tag;
export let addTo = zim.addTo;
export let removeFrom = zim.removeFrom;
export let added = zim.added;
export let centerReg = zim.centerReg;
export let center = zim.center;
export let place = zim.place;
export let placeReg = zim.placeReg;
export let pos = zim.pos;
export let loc = zim.loc;
export let mov = zim.mov;
export let sca = zim.sca;
export let alp = zim.alp;
export let vis = zim.vis;
export let ble = zim.ble;
export let dye = zim.dye;
export let hov = zim.hov;
export let rot = zim.rot;
export let siz = zim.siz;
export let ske = zim.ske;
export let reg = zim.reg;
export let top = zim.top;
export let bot = zim.bot;
export let ord = zim.ord;
export let cur = zim.cur;
export let sha = zim.sha;
export let dep = zim.dep;
export let nam = zim.nam;
export let movement = zim.movement;
export let noMovement = zim.noMovement;
export let tap = zim.tap;
export let noTap = zim.noTap;
export let hold = zim.hold;
export let noHold = zim.noHold;
export let change = zim.change;
export let noChange = zim.noChange;
export let drag = zim.drag;
export let noDrag = zim.noDrag;
export let dragBoundary = zim.dragBoundary;
export let mouse = zim.mouse;
export let noMouse = zim.noMouse;
export let wire = zim.wire;
export let noWire = zim.noWire;
export let wired = zim.wired;
export let noWired = zim.noWired;
export let bind = zim.bind;
export let noBind = zim.noBind;
export let transform = zim.transform;
export let gesture = zim.gesture;
export let noGesture = zim.noGesture;
export let gestureBoundary = zim.gestureBoundary;
export let effect = zim.effect;
export let updateEffects = zim.updateEffects;
export let noEffect = zim.noEffect;
export let addPhysics = zim.addPhysics;
export let removePhysics = zim.removePhysics;
export let hitTestPoint = zim.hitTestPoint;
export let hitTestReg = zim.hitTestReg;
export let hitTestRect = zim.hitTestRect;
export let hitTestCircle = zim.hitTestCircle;
export let hitTestCircleRect = zim.hitTestCircleRect;
export let hitTestCircles = zim.hitTestCircles;
export let hitTestBounds = zim.hitTestBounds;
export let hitTestPath = zim.hitTestPath;
export let hitTestGrid = zim.hitTestGrid;
export let animate = zim.animate;
export let stopAnimate = zim.stopAnimate;
export let pauseAnimate = zim.pauseAnimate;
export let wiggle = zim.wiggle;






/*
 * CUSTOM GENERATION LOGIC
 * inspired by: https://codepen.io/zimjs/pen/jOMZjOy
 * 
 */





function getColors(address, numColors) {
    let colors = Array();
    for (let i=0; i < numColors; i++) {
        let offset = i * 6;
        let colorStr = address.substring(2+offset, 8+offset);
        colors.push(`#${colorStr}`); 
    }
    return colors;
}

function getCurveFactor(address) {
    let penultimateByte = address.substring(
        address.length-4,
        address.length-2)
    return parseInt(penultimateByte, 16);
}
function getSpeedFactor(address) {
    let speedNibble = address.substring(
        address.length-2,
        address.length-1)
    return parseInt(speedNibble, 16);
}
function getDelayFactor(address) {
    let delayNibble = address.substring(
        address.length-1,
        address.length)
    return parseInt(delayNibble, 16);
}

function getCurve(frame, address, extraSeed, doCircles) {

  let curveFactor = getCurveFactor(address);
  let speedFactor = getSpeedFactor(address);
  let delayFactor = getDelayFactor(address);

  const stage = frame.stage;
	const stageW = frame.width;
	const stageH = frame.height;

  const params = {
      curve: curveFactor / 32, // curve 0-8
      speed: speedFactor / 2,  // speed 0-8
      delay: delayFactor / 8,  // delay 0-2
  }

	const segments = 180; // how many lines
	const delta = 360/segments; // angle for each line
	const inner = 50; // inner radius - multiplied by 2 at largest ring, etc.
	const outer = 200; // outer radius
	const variation = outer-inner; // maximum noise
  const colorArr = getColors(address, 6);
	const colors = series(colorArr);
	let time = 0; 

  // Extra background stuff
  if (extraSeed) {
    if (doCircles) {
      drawCircles(extraSeed);
    } else {
      drawSquares(stageW, stageH, extraSeed);
    }
  }

	var g = new Generator({
		stamp:gen,
		maxCount:segments,
        seed:address
	});

	// Generator lines do not fill (Generator shapes do)
	// so send info to Shape objects on stage
	var shapes = [];
	loop(6, i=>{
		shapes.push(new Shape(stageW, stageH).addTo());
	});

	function gen(count) {  
		let angle = delta*count*RAD;  // (0-360 degrees in radians)   
		loop(6, i=>{
			let noise = g.noise(
                params.curve*Math.sin(angle),
                params.curve*Math.cos(angle),
                time+i*params.delay);
			let radius = inner+variation*noise;
			g.push().translate(radius*(2-i*.3),0).pop();
			// find global position of generator 
			let p = g.drawing.localToGlobal(g.currentX, g.currentY);
			// if first time then start the drawing otherwise draw line
			if (count==1) shapes[i].c().f(colors()).mt(p.x, p.y);
			else shapes[i].lt(p.x, p.y); 
		});
		g.rotate(delta); // rotate delta each time
	}

    addLogo();
}

function addLogo() {
    const h = '<svg xmlns="http://www.w3.org/2000/svg" width="800" height="548"><path d="M190.06228,50.93687c-14.74219-14.74219-41.61011-12.981-69.605,2.11328-4.17969,2.24951-3.86744,11.48926.09057,13.90723A164.43163,164.43163,0,0,1,174.012,120.50181c2.40577,3.95947,11.75342,4.0957,13.937.04053q-.77125-1.43409-1.58667-2.86328.81188,1.42894,1.58667,2.86279C203.04348,92.54722,204.80446,65.67906,190.06228,50.93687ZM158.90749,82.09165a174.67491,174.67491,0,0,0-26.1936-21.645c10.83764-5.01171,21.16211-7.69824,29.907-7.69824,7.81885,0,14.37964,2.14356,18.92822,6.6919,9.65039,9.6499,8.50318,28.32666-.99634,48.84521A176.33238,176.33238,0,0,0,158.90749,82.09165Z" style="fill:#ffc750;fill-rule:evenodd"/><path d="M196.573,140.72788a116.46775,116.46775,0,0,0-8.624-20.186v.00049c-2.21363-4.11621-11.53858-3.99219-13.937-.04053a159.40787,159.40787,0,0,1-23.61767,29.897,159.24951,159.24951,0,0,1-29.84644,23.6377c-3.958,2.41748-4.136,11.7334-.09057,13.90674,14.90307,8.04052,29.48437,12.29687,42.09326,12.29687,11.06909,0,20.61865-3.28027,27.51172-10.17383C200.84963,179.27915,203.15407,161.75962,196.573,140.72788Zm-15.02393,40.8252c-9.65039,9.65039-28.31689,8.49316-48.8352-1.00586a174.67751,174.67751,0,0,0,26.1936-21.64551,175.80015,175.80015,0,0,0,21.65527-26.15332C190.052,153.25669,191.19948,171.91294,181.54909,181.55308Z" style="fill:#ff6895;fill-rule:evenodd"/><path d="M120.4573,53.05015a115.73832,115.73832,0,0,0-20.19629-8.624c-21.02149-6.58106-38.541-4.27686-49.32837,6.51074-6.89307,6.89306-10.17359,16.44287-10.17359,27.51221,0,12.60888,4.2566,27.1997,12.28687,42.103,2.18359,4.04541,11.50024,3.8628,13.917-.10058a164.25645,164.25645,0,0,1,53.585-53.49414C124.48122,64.56626,124.563,55.25376,120.4573,53.05015ZM60.45241,108.2855C50.9529,87.767,49.79567,69.09019,59.44607,59.44029c7.45654-7.457,20.67919-8.71485,37.22265-3.522a98.52291,98.52291,0,0,1,11.61231,4.498A180.34782,180.34782,0,0,0,60.45241,108.2855Z" style="fill:#5fc5a6;fill-rule:evenodd"/><path d="M120.54787,174.03648a159.08955,159.08955,0,0,1-29.94726-23.6377,159.077,159.077,0,0,1-23.6377-29.94726c-2.39819-3.9292-11.71338-4.00489-13.917.10058a116.30665,116.30665,0,0,0-8.614,20.17578c-6.59107,21.03174-4.27662,38.55127,6.50073,49.33838,6.76245,6.75244,16.16089,10.18409,27.41137,10.18409a73.69521,73.69521,0,0,0,21.917-3.68311,116.54045,116.54045,0,0,0,20.19629-8.624C123.70754,186.20249,124.47707,176.43443,120.54787,174.03648ZM96.66872,185.08531c-16.54346,5.18212-29.76611,3.92431-37.22265-3.53223-7.45679-7.45654-8.71485-20.6792-3.53223-37.22266a97.82212,97.82212,0,0,1,4.498-11.60254,176.19888,176.19888,0,0,0,21.68554,26.17383A174.45515,174.45515,0,0,0,108.281,180.577,96.9966,96.9966,0,0,1,96.66872,185.08531Z" style="fill:#5666f6;fill-rule:evenodd"/><polygon points="93.642 119.773 120.5 77.568 147.358 119.773 120.5 135.121 93.642 119.773" style="fill:#1f294f;fill-rule:evenodd"/><polygon points="93.642 126.982 120.5 142.329 147.358 126.982 120.5 163.432 93.642 126.982" style="fill:#1f294f;fill-rule:evenodd"/><path d="M132.71384,60.44648a126.06685,126.06685,0,0,0-12.166,6.5107,118.99183,118.99183,0,0,0-12.26674-6.54089,141.57432,141.57432,0,0,1,12.1761-7.3661Q126.6158,56.35574,132.71384,60.44648Z" style="fill:#5f9a34;fill-rule:evenodd"/><path d="M187.949,120.54216c-2.18356,4.05534-4.64917,8.14072-7.38624,12.20617a126.74541,126.74541,0,0,0-6.55094-12.24646,128.481,128.481,0,0,0,6.54088-12.21625Q184.62848,114.36833,187.949,120.54216Z" style="fill:#ff512f;fill-rule:evenodd"/><path d="M132.71384,180.547c-.84529.57366-1.69057,1.12717-2.53585,1.67035-3.2202,2.073-6.47044,3.98511-9.72076,5.726q-6.06792-3.26023-12.17609-7.3661a118.99663,118.99663,0,0,0,12.26673-6.54088A121.87924,121.87924,0,0,0,132.71384,180.547Z" style="fill:#552990;fill-rule:evenodd"/><path d="M66.96293,120.4514A121.24579,121.24579,0,0,0,60.412,132.72808c-2.727-4.05534-5.18239-8.13065-7.36611-12.176,2.20372-4.10572,4.67925-8.21147,7.4064-12.26661A121.85278,121.85278,0,0,0,66.96293,120.4514Z" style="fill:#204fa0;fill-rule:evenodd"/><path d="M744.67834,154.0489v6.66616a7.43818,7.43818,0,0,1-3.83532,1.02568,11.872,11.872,0,0,1-11.76258-8.84548,26.485,26.485,0,1,1-.76715-36.79217V109.4368h7.927v37.94594c0,4.74334,2.42926,6.66616,5.24194,6.66616Zm-16.365-18.97281a18.66636,18.66636,0,1,0-18.66613,18.7166A18.69146,18.69146,0,0,0,728.31329,135.07609ZM754.672,83.411H763v78.33334h-8.328ZM671.39172,134.731A27.00678,27.00678,0,0,1,655.03,159.6543a26.37308,26.37308,0,0,1-28.99378-5.7029v6.75316h-7.94384V81.74437h7.94384v33.76595A26.373,26.373,0,0,1,655.03,109.80745,27.0067,27.0067,0,0,1,671.39172,134.731Zm-7.94354,0a18.70774,18.70774,0,1,0-18.706,18.96088,18.51935,18.51935,0,0,0,13.24475-5.53567,19.03243,19.03243,0,0,0,5.4613-13.42521Zm-113.64563.34686A26.63776,26.63776,0,1,1,557.60217,153.94,26.65819,26.65819,0,0,1,549.80255,135.07782Zm45.35553,0a18.70584,18.70584,0,1,0-18.70569,18.71793A18.71182,18.71182,0,0,0,595.15808,135.07782Zm-85.331-15.9271v2.32142c.13461,20.10988-14.36408,37.19458-33.86414,39.90427s-37.93658-9.79841-43.06167-29.21481,4.65524-39.70221,22.84368-47.381a38.73242,38.73242,0,0,1,48.9079,17.089l-6.94092,3.998a30.56236,30.56236,0,0,0-37.22451-14.169,31.62625,31.62625,0,0,0-20.0484,35.04322,30.75379,30.75379,0,0,0,60.80651.147H470.83087v-7.738Zm16.657-35.73969h8.328v78.33334h-8.328Zm-108.26431,0v78.33334H401.43542V130.15H370.17334v31.59436h-16.9122V83.411h16.9122V114.8749h31.26208V83.411Zm-71.621,15.27505H327.475v63.05829h-16.5907V98.68608H291.63376V83.411h54.965Zm-89.546-.13061v16.45007h25.3211v15.14451h-25.3211V146.5999H286.637v15.14447H240V83.411h46.637V98.55547Z" style="fill:#1f294f"/></svg>';
	new SVG(h,800,240)
		.sca(.3).alp(.7).hov(1).expand(10).pos(30,36,LEFT,BOTTOM);
}

function pickColor(x, includeWhite) {
  // rng produces float between 0 and 1, convert to useful integer
  x *= 100;
  x = parseInt(x.toString());

  let colors;
  if (includeWhite) {
    colors = ["#000000", "#575757", "#ad2323", "#2a4bd7", "#1d6914", "#814a19", "#8126c0", "#a0a0a0", "#81c57a", "#9dafff", "#29d0d0", "#ff9233", "#ffee33", "#e9debb", "#ffcdf3", "#ffffff"];
  } else {
    colors = ["#000000", "#575757", "#ad2323", "#2a4bd7", "#1d6914", "#814a19", "#8126c0", "#a0a0a0", "#81c57a", "#9dafff", "#29d0d0", "#ff9233", "#ffee33", "#e9debb", "#ffcdf3"];
  }
  return colors[x % colors.length];
}


function drawSquares(width, height, seed) {

  const rng = new Math.seedrandom(seed);

  let canvasSize = Math.min(width, height);
  let numSquares = 16;
  let squareSize = canvasSize / numSquares;
  let alphaVal = 0.5;

  function addRect(curColor, i, j, xOff, yOff) {
    let xPos = i * squareSize + xOff * canvasSize/2;
    let yPos = j * squareSize + yOff * canvasSize/2;
      new Rectangle(squareSize, squareSize, curColor)
        .loc(xPos, yPos)
        .alp(alphaVal);
  }

  for (let i=0; i < numSquares/2; i++) {
    for (let j=0; j < numSquares/2; j++) {

      let curColor = pickColor(rng(), true);

      addRect(curColor, i, j, 0, 0);
      addRect(curColor, i, j, 1, 0);
      addRect(curColor, i, j, 0, 1);
      addRect(curColor, i, j, 1, 1);
    }
  }
}


function drawCircles(seed) {
  const rng = new Math.seedrandom(seed);

  function randInt(low, high) {
    let f = parseInt(rng() * 1000);
    let span = high - low;
    return low + (f % span)
  }

  let numColors = randInt(4,7);
  let colorArr = Array();
  for (let i=0; i < numColors; i++) {
    colorArr.push(pickColor(rng(), true));
  }

  let consecutiveColor = randInt(3, 7);
  const colors = series(colorArr).every(consecutiveColor);

  // we will rotate by 5 degrees so only run the generator 360/5 for one full circle
  var g = new Generator({
    strokeColor:colors,
    strokeWidth:3,
    stamp:gen,
    maxCount:360/5
    //maxCount:10
  });

  let sizes = [4, 8, 16, 32];
  let sizeOne = sizes[randInt(0, 4)];
  let sizeTwo = sizes[randInt(0, 4)];
  let sizeThree = sizes[randInt(0, 4)];

  function gen() {
    g.push() // remember that we are at the center
      .circle(240,0, 150) // x,y,radius
      .circle(-20,0, sizeOne)   // 200-20 in x (position relative from last spot)
      .circle(50,0,  sizeTwo)   // 200-40+50 in x
      .circle(60,0,  sizeThree) // 200-40+50+60 in x
     .pop().rotate(5) // return to the center and rotate
  }
}

// main export
// expects an address string of length 42, starting with "0x"
// optional "extra" string argument for mixing
// calls callback when finished
export function getBlob(address, extra, doCircles, callback) {

    let frame = new Frame(FIT, 800, 800, null, null, ready);

    function ready() {
        getCurve(frame, address, extra, doCircles);

        callback();
    }
}





// MAIN

    // Get key params from URL
    var address = new URLSearchParams(window.location.search).get('addr')
    if (address == null) {
      address = "0x0123456789abcdef0123456789abcdef01234567";
      console.log(`WARNING: no address provided, using: ${address}`)
    }

    var extra = new URLSearchParams(window.location.search).get('extra')
    if (extra != null) {
      console.log(`extra provided: ${extra}`);
    }

    let doCircles = false;
    var circles = new URLSearchParams(window.location.search).get('circles')
    if (circles != null && circles != '0' && circles != 'false') {
      doCircles = true;
      console.log(`doCircles: ${doCircles}`);
    }
    
    function dataURItoBlob(dataURI) {
      var binary = atob(dataURI.split(',')[1]);
      var array = [];
      for(var i = 0; i < binary.length; i++) {
          array.push(binary.charCodeAt(i));
      }
      return new Blob([new Uint8Array(array)], {type: 'image/png'});
    }

    function finishCallback() {
        const canvas = document.getElementById('myCanvas');
        const dataURL = canvas.toDataURL("image/png");
        console.log(`dataURL: ${dataURL}`);

        var blobData = dataURItoBlob(dataURL);
        console.log(`blobData: ${blobData}`);
        var params = {Key: `${address}`, ContentType: "image/png", Body: blobData};

        // TODO: enable upload to S3
        //bucket.upload(params, function (err, data) {});
    }
    

    getBlob(address, extra, doCircles, finishCallback);
  
  </script>
  
  <meta name="viewport" content="width=device-width, user-scalable=no" />
</head>

<body></body>

</html>